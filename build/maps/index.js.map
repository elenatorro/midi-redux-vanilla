{"version":3,"sources":["index.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","default","_configureStore","_configureStore2","_midiInfo","_midiEventsActionCreators","MidiEvents","_midiSetupActionCreators","MidiSetup","_redux","store","midiSetupActions","bindActionCreators","dispatch","midiEventsActions","MidiInfo","init","navigator","requestMIDIAccess","sysex","then","midiSuccess","./src/action-creators/midi-events-action-creators","./src/action-creators/midi-setup-action-creators","./src/components/midi-info","./src/store/configureStore","redux","2","root","Symbol","./_root","3","baseGetTag","value","undefined","undefinedTag","nullTag","symToStringTag","getRawTag","objectToString","toStringTag","./_Symbol","./_getRawTag","./_objectToString","4","global","freeGlobal","this","self","window","5","overArg","getPrototype","getPrototypeOf","./_overArg","6","isOwn","tag","result","nativeObjectToString","objectProto","toString","7","8","func","transform","arg","9","freeSelf","Function","./_freeGlobal","10","isObjectLike","11","isPlainObject","objectTag","proto","Ctor","constructor","funcToString","objectCtorString","funcProto","./_baseGetTag","./_getPrototype","./isObjectLike","12","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","len","run","Item","array","noop","process","nextTick","args","Array","arguments","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","cwd","chdir","dir","umask","13","createThunkMiddleware","extraArgument","_ref","getState","next","action","thunk","withExtraArgument","14","applyMiddleware","_len","middlewares","_key","createStore","reducer","preloadedState","enhancer","_dispatch","chain","middlewareAPI","map","middleware","_compose2","_extends","assign","target","source","_compose","./compose","15","bindActionCreator","actionCreator","actionCreators","keys","boundActionCreators","16","_interopRequireDefault","getUndefinedStateErrorMessage","actionType","type","getUnexpectedStateShapeWarningMessage","inputState","reducers","unexpectedKeyCache","reducerKeys","argumentName","_createStore","ActionTypes","INIT","_isPlainObject2","match","join","unexpectedKeys","filter","forEach","assertReducerSanity","Math","random","substring","split","combineReducers","finalReducers","NODE_ENV","_warning2","finalReducerKeys","sanityError","state","warningMessage","hasChanged","nextState","previousStateForKey","nextStateForKey","errorMessage","_isPlainObject","_warning","./createStore","./utils/warning","_process","lodash/isPlainObject","17","compose","funcs","last","rest","slice","reduceRight","composed","18","ensureCanMutateNextListeners","nextListeners","currentListeners","currentState","subscribe","listener","isSubscribed","index","indexOf","splice","isDispatching","currentReducer","listeners","replaceReducer","nextReducer","observable","outerSubscribe","observer","observeState","TypeError","unsubscribe","_symbolObservable2","_ref2","_symbolObservable","symbol-observable","19","isCrushed","_createStore2","_combineReducers","_combineReducers2","_bindActionCreators","_bindActionCreators2","_applyMiddleware","_applyMiddleware2","./applyMiddleware","./bindActionCreators","./combineReducers","20","warning","message","console","error","21","./lib/index","22","defineProperty","_ponyfill","_ponyfill2","./ponyfill","23","symbolObservablePonyfill","_Symbol","24","testButtonAction","_midiActions2","TEST_ACTION","payload","noteOn","event","data","notes","note","ac","midi","_midi","MidiUtils","getNote","audioContext","_audio","AudioUtils","generateOscillator","start","NOTE_ON","noteOff","stop","disconnect","NOTE_OFF","controller","CONTROLLER","_midiActions","../actions/midi-actions","../constants/midi-messages","../utils/audio","../utils/midi","25","midiMessage","getEventType","_midiMessages","MidiMessages","../action-creators/midi-events-action-creators","26","midiAccess","inputs","midiMessages","input","gainNode","values","createGain","connect","destination","done","onmidimessage","_midiConnect2","MIDI_SUCCESS","midiFailure","MIDI_FAILURE","_midiConnect","_midiMessagesActionCreators","../action-creators/midi-messages-action-creators","../actions/midi-connect","27","freeze","INSTRUMENT_NAME","PROGRAM_CHANGE","SYS_EX","28","MIDI_MESSAGE","29","messageInfo","document","getElementById","testButton","addEventListener","render","innerHTML","30","MidiMessagesHex","SEQUENCE_NUMBER","TEXT","31","0","128","144","192","176","32","_midiReducer","_midiReducer2","rootReducer","../reducers/midi-reducer","33","MIDIEventsReducer","initialState","log","AudioContext","../actions/midi-actions.js","../actions/midi-connect.js","34","configureStore","_index2","_reduxThunk","_reduxThunk2","_index","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","../reducers/index","redux-thunk","35","getFrequency","pow","oscillator","createOscillator","frequency","36","_midiMessagesHex","getType","getNoteVelocity","isNoteOnOff","../constants/midi-messages-hex"],"mappings":"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","file":"../index.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _configureStore = require('./src/store/configureStore');\n\nvar _configureStore2 = _interopRequireDefault(_configureStore);\n\nvar _midiInfo = require('./src/components/midi-info');\n\nvar _midiEventsActionCreators = require('./src/action-creators/midi-events-action-creators');\n\nvar MidiEvents = _interopRequireWildcard(_midiEventsActionCreators);\n\nvar _midiSetupActionCreators = require('./src/action-creators/midi-setup-action-creators');\n\nvar MidiSetup = _interopRequireWildcard(_midiSetupActionCreators);\n\nvar _redux = require('redux');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar store = (0, _configureStore2.default)();\nvar midiSetupActions = (0, _redux.bindActionCreators)(MidiSetup, store.dispatch);\nvar midiEventsActions = (0, _redux.bindActionCreators)(MidiEvents, store.dispatch);\n\n_midiInfo.MidiInfo.init(store, midiEventsActions);\n\nif (navigator.requestMIDIAccess) {\n  navigator.requestMIDIAccess({ sysex: false }).then(midiSetupActions.midiSuccess);\n}\n\n},{\"./src/action-creators/midi-events-action-creators\":24,\"./src/action-creators/midi-setup-action-creators\":26,\"./src/components/midi-info\":29,\"./src/store/configureStore\":34,\"redux\":19}],2:[function(require,module,exports){\nvar root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n\n},{\"./_root\":9}],3:[function(require,module,exports){\nvar Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n\n},{\"./_Symbol\":2,\"./_getRawTag\":6,\"./_objectToString\":7}],4:[function(require,module,exports){\n(function (global){\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],5:[function(require,module,exports){\nvar overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n\n},{\"./_overArg\":8}],6:[function(require,module,exports){\nvar Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n\n},{\"./_Symbol\":2}],7:[function(require,module,exports){\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n\n},{}],8:[function(require,module,exports){\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n\n},{}],9:[function(require,module,exports){\nvar freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n\n},{\"./_freeGlobal\":4}],10:[function(require,module,exports){\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n},{}],11:[function(require,module,exports){\nvar baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n\n},{\"./_baseGetTag\":3,\"./_getPrototype\":5,\"./isObjectLike\":10}],12:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],13:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nfunction createThunkMiddleware(extraArgument) {\n  return function (_ref) {\n    var dispatch = _ref.dispatch,\n        getState = _ref.getState;\n    return function (next) {\n      return function (action) {\n        if (typeof action === 'function') {\n          return action(dispatch, getState, extraArgument);\n        }\n\n        return next(action);\n      };\n    };\n  };\n}\n\nvar thunk = createThunkMiddleware();\nthunk.withExtraArgument = createThunkMiddleware;\n\nexports['default'] = thunk;\n},{}],14:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = applyMiddleware;\n\nvar _compose = require('./compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function (reducer, preloadedState, enhancer) {\n      var store = createStore(reducer, preloadedState, enhancer);\n      var _dispatch = store.dispatch;\n      var chain = [];\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch(action) {\n          return _dispatch(action);\n        }\n      };\n      chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = _compose2['default'].apply(undefined, chain)(store.dispatch);\n\n      return _extends({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n},{\"./compose\":17}],15:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = bindActionCreators;\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(undefined, arguments));\n  };\n}\n\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error('bindActionCreators expected an object or a function, instead received ' + (actionCreators === null ? 'null' : typeof actionCreators) + '. ' + 'Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?');\n  }\n\n  var keys = Object.keys(actionCreators);\n  var boundActionCreators = {};\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var actionCreator = actionCreators[key];\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n  return boundActionCreators;\n}\n},{}],16:[function(require,module,exports){\n(function (process){\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = combineReducers;\n\nvar _createStore = require('./createStore');\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _warning = require('./utils/warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionName = actionType && '\"' + actionType.toString() + '\"' || 'an action';\n\n  return 'Given action ' + actionName + ', reducer \"' + key + '\" returned undefined. ' + 'To ignore an action, you must explicitly return the previous state.';\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === _createStore.ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!(0, _isPlainObject2['default'])(inputState)) {\n    return 'The ' + argumentName + ' has unexpected type of \"' + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + '\". Expected argument to be an object with the following ' + ('keys: \"' + reducerKeys.join('\", \"') + '\"');\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n\n  if (unexpectedKeys.length > 0) {\n    return 'Unexpected ' + (unexpectedKeys.length > 1 ? 'keys' : 'key') + ' ' + ('\"' + unexpectedKeys.join('\", \"') + '\" found in ' + argumentName + '. ') + 'Expected to find one of the known reducer keys instead: ' + ('\"' + reducerKeys.join('\", \"') + '\". Unexpected keys will be ignored.');\n  }\n}\n\nfunction assertReducerSanity(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, { type: _createStore.ActionTypes.INIT });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined during initialization. ' + 'If the state passed to the reducer is undefined, you must ' + 'explicitly return the initial state. The initial state may ' + 'not be undefined.');\n    }\n\n    var type = '@@redux/PROBE_UNKNOWN_ACTION_' + Math.random().toString(36).substring(7).split('').join('.');\n    if (typeof reducer(undefined, { type: type }) === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined when probed with a random type. ' + ('Don\\'t try to handle ' + _createStore.ActionTypes.INIT + ' or other actions in \"redux/*\" ') + 'namespace. They are considered private. Instead, you must return the ' + 'current state for any unknown actions, unless it is undefined, ' + 'in which case you must return the initial state, regardless of the ' + 'action type. The initial state may not be undefined.');\n    }\n  });\n}\n\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        (0, _warning2['default'])('No reducer provided for key \"' + key + '\"');\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  var finalReducerKeys = Object.keys(finalReducers);\n\n  if (process.env.NODE_ENV !== 'production') {\n    var unexpectedKeyCache = {};\n  }\n\n  var sanityError;\n  try {\n    assertReducerSanity(finalReducers);\n  } catch (e) {\n    sanityError = e;\n  }\n\n  return function combination() {\n    var state = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n    var action = arguments[1];\n\n    if (sanityError) {\n      throw sanityError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n      if (warningMessage) {\n        (0, _warning2['default'])(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n    for (var i = 0; i < finalReducerKeys.length; i++) {\n      var key = finalReducerKeys[i];\n      var reducer = finalReducers[key];\n      var previousStateForKey = state[key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(key, action);\n        throw new Error(errorMessage);\n      }\n      nextState[key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    return hasChanged ? nextState : state;\n  };\n}\n}).call(this,require('_process'))\n\n},{\"./createStore\":18,\"./utils/warning\":20,\"_process\":12,\"lodash/isPlainObject\":11}],17:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = compose;\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  var last = funcs[funcs.length - 1];\n  var rest = funcs.slice(0, -1);\n  return function () {\n    return rest.reduceRight(function (composed, f) {\n      return f(composed);\n    }, last.apply(undefined, arguments));\n  };\n}\n},{}],18:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nexports.ActionTypes = undefined;\nexports['default'] = createStore;\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _symbolObservable = require('symbol-observable');\n\nvar _symbolObservable2 = _interopRequireDefault(_symbolObservable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar ActionTypes = exports.ActionTypes = {\n  INIT: '@@redux/INIT'\n};\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} enhancer The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    return currentState;\n  }\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected listener to be a function.');\n    }\n\n    var isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action) {\n    if (!(0, _isPlainObject2['default'])(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      listeners[i]();\n    }\n\n    return action;\n  }\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({ type: ActionTypes.INIT });\n  }\n\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/zenparsing/es-observable\n   */\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object') {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return { unsubscribe: unsubscribe };\n      }\n    }, _ref[_symbolObservable2['default']] = function () {\n      return this;\n    }, _ref;\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch({ type: ActionTypes.INIT });\n\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[_symbolObservable2['default']] = observable, _ref2;\n}\n},{\"lodash/isPlainObject\":11,\"symbol-observable\":21}],19:[function(require,module,exports){\n(function (process){\n'use strict';\n\nexports.__esModule = true;\nexports.compose = exports.applyMiddleware = exports.bindActionCreators = exports.combineReducers = exports.createStore = undefined;\n\nvar _createStore = require('./createStore');\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _combineReducers = require('./combineReducers');\n\nvar _combineReducers2 = _interopRequireDefault(_combineReducers);\n\nvar _bindActionCreators = require('./bindActionCreators');\n\nvar _bindActionCreators2 = _interopRequireDefault(_bindActionCreators);\n\nvar _applyMiddleware = require('./applyMiddleware');\n\nvar _applyMiddleware2 = _interopRequireDefault(_applyMiddleware);\n\nvar _compose = require('./compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _warning = require('./utils/warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/*\n* This is a dummy function to check if the function name has been altered by minification.\n* If the function has been minified and NODE_ENV !== 'production', warn the user.\n*/\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  (0, _warning2['default'])('You are currently using minified code outside of NODE_ENV === \\'production\\'. ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexports.createStore = _createStore2['default'];\nexports.combineReducers = _combineReducers2['default'];\nexports.bindActionCreators = _bindActionCreators2['default'];\nexports.applyMiddleware = _applyMiddleware2['default'];\nexports.compose = _compose2['default'];\n}).call(this,require('_process'))\n\n},{\"./applyMiddleware\":14,\"./bindActionCreators\":15,\"./combineReducers\":16,\"./compose\":17,\"./createStore\":18,\"./utils/warning\":20,\"_process\":12}],20:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = warning;\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n    /* eslint-disable no-empty */\n  } catch (e) {}\n  /* eslint-enable no-empty */\n}\n},{}],21:[function(require,module,exports){\nmodule.exports = require('./lib/index');\n\n},{\"./lib/index\":22}],22:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ponyfill = require('./ponyfill');\n\nvar _ponyfill2 = _interopRequireDefault(_ponyfill);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar root; /* global window */\n\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = (0, _ponyfill2['default'])(root);\nexports['default'] = result;\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./ponyfill\":23}],23:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports['default'] = symbolObservablePonyfill;\nfunction symbolObservablePonyfill(root) {\n\tvar result;\n\tvar _Symbol = root.Symbol;\n\n\tif (typeof _Symbol === 'function') {\n\t\tif (_Symbol.observable) {\n\t\t\tresult = _Symbol.observable;\n\t\t} else {\n\t\t\tresult = _Symbol('observable');\n\t\t\t_Symbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n},{}],24:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.testButtonAction = testButtonAction;\nexports.noteOn = noteOn;\nexports.noteOff = noteOff;\nexports.controller = controller;\n\nvar _midiActions = require('../actions/midi-actions');\n\nvar _midiActions2 = _interopRequireDefault(_midiActions);\n\nvar _midiMessages = require('../constants/midi-messages');\n\nvar _midi = require('../utils/midi');\n\nvar _audio = require('../utils/audio');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction testButtonAction() {\n  return function (dispatch) {\n    var message = 'clicked';\n\n    dispatch({\n      type: _midiActions2.default.TEST_ACTION,\n      payload: {\n        message: message\n      }\n    });\n  };\n}\n\nfunction noteOn(event, message) {\n  return function (dispatch, getState) {\n    var data = void 0,\n        state = void 0,\n        notes = void 0,\n        note = void 0,\n        ac = void 0;\n\n    data = event.data;\n    state = getState();\n    notes = state.midi.notes;\n    note = _midi.MidiUtils.getNote(event);\n    ac = state.midi.audioContext;\n\n    notes[note] = _audio.AudioUtils.generateOscillator(note, ac);\n    notes[note].start();\n\n    dispatch({\n      type: _midiActions2.default.NOTE_ON,\n      payload: {\n        message: message,\n        data: data,\n        notes: notes\n      }\n    });\n  };\n}\n\nfunction noteOff(event, message) {\n  return function (dispatch, getState) {\n    var data = void 0,\n        state = void 0,\n        notes = void 0,\n        note = void 0;\n\n    data = event.data;\n    state = getState();\n    notes = state.midi.notes;\n    note = _midi.MidiUtils.getNote(event);\n\n    notes[note].stop();\n    notes[note].disconnect();\n\n    dispatch({\n      type: _midiActions2.default.NOTE_OFF,\n      payload: {\n        message: message,\n        data: data,\n        notes: notes\n      }\n    });\n  };\n}\n\nfunction controller(event, message) {\n  return function (dispatch) {\n\n    dispatch({\n      type: _midiActions2.default.CONTROLLER,\n      payload: {\n        message: message\n      }\n    });\n  };\n}\n\n},{\"../actions/midi-actions\":27,\"../constants/midi-messages\":31,\"../utils/audio\":35,\"../utils/midi\":36}],25:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.midiMessage = midiMessage;\n\nvar _midiMessages = require('../constants/midi-messages');\n\nvar _midi = require('../utils/midi');\n\nvar _midiEventsActionCreators = require('../action-creators/midi-events-action-creators');\n\nvar MidiEvents = _interopRequireWildcard(_midiEventsActionCreators);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction midiMessage(event) {\n  return function (dispatch, getState) {\n    var midiMessage = void 0,\n        message = void 0;\n\n    midiMessage = _midi.MidiUtils.getEventType(event);\n    message = _midiMessages.MidiMessages[midiMessage];\n\n    dispatch(MidiEvents[message](event, message));\n  };\n}\n\n},{\"../action-creators/midi-events-action-creators\":24,\"../constants/midi-messages\":31,\"../utils/midi\":36}],26:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.midiSuccess = midiSuccess;\nexports.midiFailure = midiFailure;\n\nvar _midiConnect = require('../actions/midi-connect');\n\nvar _midiConnect2 = _interopRequireDefault(_midiConnect);\n\nvar _midiMessagesActionCreators = require('../action-creators/midi-messages-action-creators');\n\nvar MidiMessages = _interopRequireWildcard(_midiMessagesActionCreators);\n\nvar _redux = require('redux');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction midiSuccess(midiAccess) {\n  return function (dispatch, getState) {\n    var inputs = void 0,\n        state = void 0,\n        midiMessages = void 0,\n        input = void 0,\n        gainNode = void 0;\n\n    inputs = midiAccess.inputs.values();\n    state = getState();\n    gainNode = state.midi.audioContext.createGain();\n    gainNode.connect(state.midi.audioContext.destination);\n\n    midiMessages = (0, _redux.bindActionCreators)(MidiMessages, dispatch);\n\n    for (input = inputs.next(); input && !input.done; input = inputs.next()) {\n      input.value.onmidimessage = midiMessages.midiMessage;\n    }\n\n    dispatch({\n      type: _midiConnect2.default.MIDI_SUCCESS,\n      payload: {\n        message: 'Connected',\n        midiAccess: midiAccess,\n        inputs: inputs,\n        gainNode: gainNode\n      }\n    });\n  };\n}\n\nfunction midiFailure(midiAccess) {\n  return function (dispatch) {\n    dispatch({\n      type: _midiConnect2.default.MIDI_FAILURE,\n      payload: {\n        message: 'Fail'\n      }\n    });\n  };\n}\n\n},{\"../action-creators/midi-messages-action-creators\":25,\"../actions/midi-connect\":28,\"redux\":19}],27:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Object.freeze({\n  CONTROLLER: 'controller',\n  INSTRUMENT_NAME: 'instrumentName',\n  NOTE_OFF: 'noteOff',\n  NOTE_ON: 'noteOn',\n  PROGRAM_CHANGE: 'programChange',\n  SYS_EX: 'sysEx',\n  TEST_ACTION: 'testAction'\n});\n\n},{}],28:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Object.freeze({\n  MIDI_SUCCESS: 'midiSuccess',\n  MIDI_FAILURE: 'midiFailure',\n  MIDI_MESSAGE: 'midiMessage'\n});\n\n},{}],29:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MidiInfo = exports.MidiInfo = {\n  init: function init() {\n    var store = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var midiEventsActions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    this.store = store;\n    this.messageInfo = document.getElementById('midi-info');\n    this.testButton = document.getElementById('test-button');\n    this.testButton.addEventListener('click', midiEventsActions.testButtonAction);\n    this.render();\n  },\n  render: function render() {\n    var store = this.store;\n    var messageInfo = this.messageInfo;\n\n    store.subscribe(function () {\n      messageInfo.innerHTML = messageInfo ? store.getState().midi.message : 'No Message';\n    });\n  }\n};\n\n},{}],30:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MidiMessagesHex = exports.MidiMessagesHex = Object.freeze({\n  SEQUENCE_NUMBER: 0x00,\n  TEXT: 0x01,\n  INSTRUMENT_NAME: 0x04,\n  NOTE_OFF: 0x80,\n  NOTE_ON: 0x90,\n  PROGRAM_CHANGE: 0xC0,\n  CONTROLLER: 0xB0\n});\n\n},{}],31:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MidiMessages = exports.MidiMessages = Object.freeze({\n  0x00: 'sequenceNumber',\n  0x01: 'text',\n  0x04: 'instrumentName',\n  0x80: 'noteOff',\n  0x90: 'noteOn',\n  0xC0: 'programChange',\n  0xB0: 'controller'\n});\n\n},{}],32:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _redux = require('redux');\n\nvar _midiReducer = require('../reducers/midi-reducer');\n\nvar _midiReducer2 = _interopRequireDefault(_midiReducer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar rootReducer = (0, _redux.combineReducers)({\n  midi: _midiReducer2.default\n});\n\nexports.default = rootReducer;\n\n},{\"../reducers/midi-reducer\":33,\"redux\":19}],33:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = MIDIEventsReducer;\n\nvar _midiActions = require('../actions/midi-actions.js');\n\nvar _midiActions2 = _interopRequireDefault(_midiActions);\n\nvar _midiConnect = require('../actions/midi-connect.js');\n\nvar _midiConnect2 = _interopRequireDefault(_midiConnect);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar initialState = {\n  message: 'None',\n  midiAccess: null,\n  inputs: [],\n  data: null,\n  audioContext: new AudioContext(),\n  gainNode: null,\n  notes: {}\n};\n\nfunction MIDIEventsReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments[1];\n  var type = action.type,\n      payload = action.payload;\n\n  console.log('REDUCER', payload);\n  switch (type) {\n    case _midiActions2.default.NOTE_ON:\n    case _midiActions2.default.NOTE_OFF:\n    case _midiActions2.default.PROGRAM_CHANGE:\n    case _midiActions2.default.INSTRUMENT_NAME:\n    case _midiActions2.default.CONTROLLER:\n    case _midiActions2.default.SYS_EX:\n    case _midiActions2.default.TEST_ACTION:\n    case _midiConnect2.default.MIDI_SUCCESS:\n    case _midiConnect2.default.MIDI_FAILURE:\n      return _extends({}, state, payload);\n    default:\n      return state;\n  }\n}\n\n},{\"../actions/midi-actions.js\":27,\"../actions/midi-connect.js\":28}],34:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = configureStore;\n\nvar _redux = require('redux');\n\nvar _reduxThunk = require('redux-thunk');\n\nvar _reduxThunk2 = _interopRequireDefault(_reduxThunk);\n\nvar _index = require('../reducers/index');\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || _redux.compose;\nvar middleware = composeEnhancers((0, _redux.applyMiddleware)(_reduxThunk2.default));\n\nfunction configureStore(initialState) {\n  return (0, _redux.createStore)(_index2.default, initialState, middleware);\n}\n\n},{\"../reducers/index\":32,\"redux\":19,\"redux-thunk\":13}],35:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar AudioUtils = exports.AudioUtils = Object.freeze({\n  getFrequency: function getFrequency(note) {\n    var LA_HZ = 440,\n        LA_DEC = 69,\n        OCTAVE = 12;\n\n    return LA_HZ * Math.pow(2, (note - LA_DEC) / OCTAVE);\n  },\n  generateOscillator: function generateOscillator(note, audioContext) {\n    var oscillator = audioContext.createOscillator(),\n        frequency = this.getFrequency(note);\n\n    oscillator.type = 'square';\n    oscillator.connect(audioContext.destination);\n    oscillator.frequency.value = frequency;\n\n    return oscillator;\n  }\n});\n\n},{}],36:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MidiUtils = undefined;\n\nvar _midiMessagesHex = require('../constants/midi-messages-hex');\n\nvar MidiUtils = exports.MidiUtils = Object.freeze({\n  getType: function getType(event) {\n    return event.data[0];\n  },\n  getNote: function getNote(event) {\n    return event.data[1];\n  },\n  getNoteVelocity: function getNoteVelocity(event) {\n    return event.data[2];\n  },\n  getEventType: function getEventType(event) {\n    return this.isNoteOnOff(event) ? _midiMessagesHex.MidiMessagesHex.NOTE_OFF & 0xf0 : this.getType(event) & 0xf0;\n  },\n  isNoteOnOff: function isNoteOnOff(event) {\n    return this.getType(event) === _midiMessagesHex.MidiMessagesHex.NOTE_ON && this.getNoteVelocity(event) === 0;\n  }\n}); /*jslint bitwise: true */\n\n},{\"../constants/midi-messages-hex\":30}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvX1N5bWJvbC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvX2Jhc2VHZXRUYWcuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL19mcmVlR2xvYmFsLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9fZ2V0UHJvdG90eXBlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9fZ2V0UmF3VGFnLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9fb2JqZWN0VG9TdHJpbmcuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL19vdmVyQXJnLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9fcm9vdC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaXNPYmplY3RMaWtlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pc1BsYWluT2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWR1eC10aHVuay9saWIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcmVkdXgvbGliL2FwcGx5TWlkZGxld2FyZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWR1eC9saWIvYmluZEFjdGlvbkNyZWF0b3JzLmpzIiwibm9kZV9tb2R1bGVzL3JlZHV4L2xpYi9jb21iaW5lUmVkdWNlcnMuanMiLCJub2RlX21vZHVsZXMvcmVkdXgvbGliL2NvbXBvc2UuanMiLCJub2RlX21vZHVsZXMvcmVkdXgvbGliL2NyZWF0ZVN0b3JlLmpzIiwibm9kZV9tb2R1bGVzL3JlZHV4L2xpYi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9yZWR1eC9saWIvdXRpbHMvd2FybmluZy5qcyIsIm5vZGVfbW9kdWxlcy9zeW1ib2wtb2JzZXJ2YWJsZS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9zeW1ib2wtb2JzZXJ2YWJsZS9saWIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc3ltYm9sLW9ic2VydmFibGUvbGliL3BvbnlmaWxsLmpzIiwic3JjL2FjdGlvbi1jcmVhdG9ycy9taWRpLWV2ZW50cy1hY3Rpb24tY3JlYXRvcnMuanMiLCJzcmMvYWN0aW9uLWNyZWF0b3JzL21pZGktbWVzc2FnZXMtYWN0aW9uLWNyZWF0b3JzLmpzIiwic3JjL2FjdGlvbi1jcmVhdG9ycy9taWRpLXNldHVwLWFjdGlvbi1jcmVhdG9ycy5qcyIsInNyYy9hY3Rpb25zL21pZGktYWN0aW9ucy5qcyIsInNyYy9hY3Rpb25zL21pZGktY29ubmVjdC5qcyIsInNyYy9jb21wb25lbnRzL21pZGktaW5mby5qcyIsInNyYy9jb25zdGFudHMvbWlkaS1tZXNzYWdlcy1oZXguanMiLCJzcmMvY29uc3RhbnRzL21pZGktbWVzc2FnZXMuanMiLCJzcmMvcmVkdWNlcnMvaW5kZXguanMiLCJzcmMvcmVkdWNlcnMvbWlkaS1yZWR1Y2VyLmpzIiwic3JjL3N0b3JlL2NvbmZpZ3VyZVN0b3JlLmpzIiwic3JjL3V0aWxzL2F1ZGlvLmpzIiwic3JjL3V0aWxzL21pZGkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7O0FBQ0E7O0FBQ0E7O0lBQVksVTs7QUFDWjs7SUFBWSxTOztBQUNaOzs7Ozs7QUFFQSxJQUFNLFFBQVEsK0JBQWQ7QUFDQSxJQUFNLG1CQUFtQiwrQkFBbUIsU0FBbkIsRUFBOEIsTUFBTSxRQUFwQyxDQUF6QjtBQUNBLElBQU0sb0JBQW9CLCtCQUFtQixVQUFuQixFQUErQixNQUFNLFFBQXJDLENBQTFCOztBQUVBLG1CQUFTLElBQVQsQ0FBYyxLQUFkLEVBQXFCLGlCQUFyQjs7QUFFQSxJQUFJLFVBQVUsaUJBQWQsRUFBaUM7QUFDL0IsWUFBVSxpQkFBVixDQUE0QixFQUFDLE9BQU8sS0FBUixFQUE1QixFQUE0QyxJQUE1QyxDQUFpRCxpQkFBaUIsV0FBbEU7QUFDRDs7O0FDZEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzdJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4QkE7QUFDQTs7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFnQixRQUFoQixHQUEyQixJQUR0QixHQUVILEtBQUssT0FBTCxDQUFhLEtBQWIsSUFBc0IsSUFGMUI7QUFHRCxHQWRvQztBQWVyQyxhQWZxQyx1QkFlekIsS0FmeUIsRUFlbEI7QUFDakIsV0FBTyxLQUFLLE9BQUwsQ0FBYSxLQUFiLE1BQXdCLGlDQUFnQixPQUF4QyxJQUNMLEtBQUssZUFBTCxDQUFxQixLQUFyQixNQUFnQyxDQURsQztBQUVEO0FBbEJvQyxDQUFkLENBQWxCLEMsQ0FKUCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgY29uZmlndXJlU3RvcmUgZnJvbSAnLi9zcmMvc3RvcmUvY29uZmlndXJlU3RvcmUnO1xuaW1wb3J0IHsgTWlkaUluZm8gfSBmcm9tICcuL3NyYy9jb21wb25lbnRzL21pZGktaW5mbyc7XG5pbXBvcnQgKiBhcyBNaWRpRXZlbnRzIGZyb20gJy4vc3JjL2FjdGlvbi1jcmVhdG9ycy9taWRpLWV2ZW50cy1hY3Rpb24tY3JlYXRvcnMnO1xuaW1wb3J0ICogYXMgTWlkaVNldHVwIGZyb20gJy4vc3JjL2FjdGlvbi1jcmVhdG9ycy9taWRpLXNldHVwLWFjdGlvbi1jcmVhdG9ycyc7XG5pbXBvcnQgeyBiaW5kQWN0aW9uQ3JlYXRvcnMgfSBmcm9tICdyZWR1eCc7XG5cbmNvbnN0IHN0b3JlID0gY29uZmlndXJlU3RvcmUoKTtcbmNvbnN0IG1pZGlTZXR1cEFjdGlvbnMgPSBiaW5kQWN0aW9uQ3JlYXRvcnMoTWlkaVNldHVwLCBzdG9yZS5kaXNwYXRjaCk7XG5jb25zdCBtaWRpRXZlbnRzQWN0aW9ucyA9IGJpbmRBY3Rpb25DcmVhdG9ycyhNaWRpRXZlbnRzLCBzdG9yZS5kaXNwYXRjaCk7XG5cbk1pZGlJbmZvLmluaXQoc3RvcmUsIG1pZGlFdmVudHNBY3Rpb25zKTtcblxuaWYgKG5hdmlnYXRvci5yZXF1ZXN0TUlESUFjY2Vzcykge1xuICBuYXZpZ2F0b3IucmVxdWVzdE1JRElBY2Nlc3Moe3N5c2V4OiBmYWxzZX0pLnRoZW4obWlkaVNldHVwQWN0aW9ucy5taWRpU3VjY2Vzcyk7XG59XG4iLCJ2YXIgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgU3ltYm9sID0gcm9vdC5TeW1ib2w7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ltYm9sO1xuIiwidmFyIFN5bWJvbCA9IHJlcXVpcmUoJy4vX1N5bWJvbCcpLFxuICAgIGdldFJhd1RhZyA9IHJlcXVpcmUoJy4vX2dldFJhd1RhZycpLFxuICAgIG9iamVjdFRvU3RyaW5nID0gcmVxdWlyZSgnLi9fb2JqZWN0VG9TdHJpbmcnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIG51bGxUYWcgPSAnW29iamVjdCBOdWxsXScsXG4gICAgdW5kZWZpbmVkVGFnID0gJ1tvYmplY3QgVW5kZWZpbmVkXSc7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIHN5bVRvU3RyaW5nVGFnID0gU3ltYm9sID8gU3ltYm9sLnRvU3RyaW5nVGFnIDogdW5kZWZpbmVkO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRUYWdgIHdpdGhvdXQgZmFsbGJhY2tzIGZvciBidWdneSBlbnZpcm9ubWVudHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUdldFRhZyh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkVGFnIDogbnVsbFRhZztcbiAgfVxuICByZXR1cm4gKHN5bVRvU3RyaW5nVGFnICYmIHN5bVRvU3RyaW5nVGFnIGluIE9iamVjdCh2YWx1ZSkpXG4gICAgPyBnZXRSYXdUYWcodmFsdWUpXG4gICAgOiBvYmplY3RUb1N0cmluZyh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUdldFRhZztcbiIsIi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbm1vZHVsZS5leHBvcnRzID0gZnJlZUdsb2JhbDtcbiIsInZhciBvdmVyQXJnID0gcmVxdWlyZSgnLi9fb3ZlckFyZycpO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBnZXRQcm90b3R5cGUgPSBvdmVyQXJnKE9iamVjdC5nZXRQcm90b3R5cGVPZiwgT2JqZWN0KTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZXRQcm90b3R5cGU7XG4iLCJ2YXIgU3ltYm9sID0gcmVxdWlyZSgnLi9fU3ltYm9sJyk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBuYXRpdmVPYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1Ub1N0cmluZ1RhZyA9IFN5bWJvbCA/IFN5bWJvbC50b1N0cmluZ1RhZyA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VHZXRUYWdgIHdoaWNoIGlnbm9yZXMgYFN5bWJvbC50b1N0cmluZ1RhZ2AgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHJhdyBgdG9TdHJpbmdUYWdgLlxuICovXG5mdW5jdGlvbiBnZXRSYXdUYWcodmFsdWUpIHtcbiAgdmFyIGlzT3duID0gaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgc3ltVG9TdHJpbmdUYWcpLFxuICAgICAgdGFnID0gdmFsdWVbc3ltVG9TdHJpbmdUYWddO1xuXG4gIHRyeSB7XG4gICAgdmFsdWVbc3ltVG9TdHJpbmdUYWddID0gdW5kZWZpbmVkO1xuICAgIHZhciB1bm1hc2tlZCA9IHRydWU7XG4gIH0gY2F0Y2ggKGUpIHt9XG5cbiAgdmFyIHJlc3VsdCA9IG5hdGl2ZU9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICBpZiAodW5tYXNrZWQpIHtcbiAgICBpZiAoaXNPd24pIHtcbiAgICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnXSA9IHRhZztcbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlIHZhbHVlW3N5bVRvU3RyaW5nVGFnXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRSYXdUYWc7XG4iLCIvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgbmF0aXZlT2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIHVzaW5nIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvYmplY3RUb1N0cmluZztcbiIsIi8qKlxuICogQ3JlYXRlcyBhIHVuYXJ5IGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCBpdHMgYXJndW1lbnQgdHJhbnNmb3JtZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0cmFuc2Zvcm0gVGhlIGFyZ3VtZW50IHRyYW5zZm9ybS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBvdmVyQXJnKGZ1bmMsIHRyYW5zZm9ybSkge1xuICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIGZ1bmModHJhbnNmb3JtKGFyZykpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG92ZXJBcmc7XG4iLCJ2YXIgZnJlZUdsb2JhbCA9IHJlcXVpcmUoJy4vX2ZyZWVHbG9iYWwnKTtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvb3Q7XG4iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdExpa2U7XG4iLCJ2YXIgYmFzZUdldFRhZyA9IHJlcXVpcmUoJy4vX2Jhc2VHZXRUYWcnKSxcbiAgICBnZXRQcm90b3R5cGUgPSByZXF1aXJlKCcuL19nZXRQcm90b3R5cGUnKSxcbiAgICBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBmdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGUsXG4gICAgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG52YXIgZnVuY1RvU3RyaW5nID0gZnVuY1Byb3RvLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKiogVXNlZCB0byBpbmZlciB0aGUgYE9iamVjdGAgY29uc3RydWN0b3IuICovXG52YXIgb2JqZWN0Q3RvclN0cmluZyA9IGZ1bmNUb1N0cmluZy5jYWxsKE9iamVjdCk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIHRoYXQgaXMsIGFuIG9iamVjdCBjcmVhdGVkIGJ5IHRoZVxuICogYE9iamVjdGAgY29uc3RydWN0b3Igb3Igb25lIHdpdGggYSBgW1tQcm90b3R5cGVdXWAgb2YgYG51bGxgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC44LjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqIH1cbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QobmV3IEZvbyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNQbGFpbk9iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoeyAneCc6IDAsICd5JzogMCB9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdExpa2UodmFsdWUpIHx8IGJhc2VHZXRUYWcodmFsdWUpICE9IG9iamVjdFRhZykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgcHJvdG8gPSBnZXRQcm90b3R5cGUodmFsdWUpO1xuICBpZiAocHJvdG8gPT09IG51bGwpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB2YXIgQ3RvciA9IGhhc093blByb3BlcnR5LmNhbGwocHJvdG8sICdjb25zdHJ1Y3RvcicpICYmIHByb3RvLmNvbnN0cnVjdG9yO1xuICByZXR1cm4gdHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yIGluc3RhbmNlb2YgQ3RvciAmJlxuICAgIGZ1bmNUb1N0cmluZy5jYWxsKEN0b3IpID09IG9iamVjdEN0b3JTdHJpbmc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNQbGFpbk9iamVjdDtcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5mdW5jdGlvbiBjcmVhdGVUaHVua01pZGRsZXdhcmUoZXh0cmFBcmd1bWVudCkge1xuICByZXR1cm4gZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoLFxuICAgICAgICBnZXRTdGF0ZSA9IF9yZWYuZ2V0U3RhdGU7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHJldHVybiBhY3Rpb24oZGlzcGF0Y2gsIGdldFN0YXRlLCBleHRyYUFyZ3VtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXh0KGFjdGlvbik7XG4gICAgICB9O1xuICAgIH07XG4gIH07XG59XG5cbnZhciB0aHVuayA9IGNyZWF0ZVRodW5rTWlkZGxld2FyZSgpO1xudGh1bmsud2l0aEV4dHJhQXJndW1lbnQgPSBjcmVhdGVUaHVua01pZGRsZXdhcmU7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHRodW5rOyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gYXBwbHlNaWRkbGV3YXJlO1xuXG52YXIgX2NvbXBvc2UgPSByZXF1aXJlKCcuL2NvbXBvc2UnKTtcblxudmFyIF9jb21wb3NlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbXBvc2UpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbi8qKlxuICogQ3JlYXRlcyBhIHN0b3JlIGVuaGFuY2VyIHRoYXQgYXBwbGllcyBtaWRkbGV3YXJlIHRvIHRoZSBkaXNwYXRjaCBtZXRob2RcbiAqIG9mIHRoZSBSZWR1eCBzdG9yZS4gVGhpcyBpcyBoYW5keSBmb3IgYSB2YXJpZXR5IG9mIHRhc2tzLCBzdWNoIGFzIGV4cHJlc3NpbmdcbiAqIGFzeW5jaHJvbm91cyBhY3Rpb25zIGluIGEgY29uY2lzZSBtYW5uZXIsIG9yIGxvZ2dpbmcgZXZlcnkgYWN0aW9uIHBheWxvYWQuXG4gKlxuICogU2VlIGByZWR1eC10aHVua2AgcGFja2FnZSBhcyBhbiBleGFtcGxlIG9mIHRoZSBSZWR1eCBtaWRkbGV3YXJlLlxuICpcbiAqIEJlY2F1c2UgbWlkZGxld2FyZSBpcyBwb3RlbnRpYWxseSBhc3luY2hyb25vdXMsIHRoaXMgc2hvdWxkIGJlIHRoZSBmaXJzdFxuICogc3RvcmUgZW5oYW5jZXIgaW4gdGhlIGNvbXBvc2l0aW9uIGNoYWluLlxuICpcbiAqIE5vdGUgdGhhdCBlYWNoIG1pZGRsZXdhcmUgd2lsbCBiZSBnaXZlbiB0aGUgYGRpc3BhdGNoYCBhbmQgYGdldFN0YXRlYCBmdW5jdGlvbnNcbiAqIGFzIG5hbWVkIGFyZ3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBtaWRkbGV3YXJlcyBUaGUgbWlkZGxld2FyZSBjaGFpbiB0byBiZSBhcHBsaWVkLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIHN0b3JlIGVuaGFuY2VyIGFwcGx5aW5nIHRoZSBtaWRkbGV3YXJlLlxuICovXG5mdW5jdGlvbiBhcHBseU1pZGRsZXdhcmUoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBtaWRkbGV3YXJlcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIG1pZGRsZXdhcmVzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChjcmVhdGVTdG9yZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocmVkdWNlciwgcHJlbG9hZGVkU3RhdGUsIGVuaGFuY2VyKSB7XG4gICAgICB2YXIgc3RvcmUgPSBjcmVhdGVTdG9yZShyZWR1Y2VyLCBwcmVsb2FkZWRTdGF0ZSwgZW5oYW5jZXIpO1xuICAgICAgdmFyIF9kaXNwYXRjaCA9IHN0b3JlLmRpc3BhdGNoO1xuICAgICAgdmFyIGNoYWluID0gW107XG5cbiAgICAgIHZhciBtaWRkbGV3YXJlQVBJID0ge1xuICAgICAgICBnZXRTdGF0ZTogc3RvcmUuZ2V0U3RhdGUsXG4gICAgICAgIGRpc3BhdGNoOiBmdW5jdGlvbiBkaXNwYXRjaChhY3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gX2Rpc3BhdGNoKGFjdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjaGFpbiA9IG1pZGRsZXdhcmVzLm1hcChmdW5jdGlvbiAobWlkZGxld2FyZSkge1xuICAgICAgICByZXR1cm4gbWlkZGxld2FyZShtaWRkbGV3YXJlQVBJKTtcbiAgICAgIH0pO1xuICAgICAgX2Rpc3BhdGNoID0gX2NvbXBvc2UyWydkZWZhdWx0J10uYXBwbHkodW5kZWZpbmVkLCBjaGFpbikoc3RvcmUuZGlzcGF0Y2gpO1xuXG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHN0b3JlLCB7XG4gICAgICAgIGRpc3BhdGNoOiBfZGlzcGF0Y2hcbiAgICAgIH0pO1xuICAgIH07XG4gIH07XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1snZGVmYXVsdCddID0gYmluZEFjdGlvbkNyZWF0b3JzO1xuZnVuY3Rpb24gYmluZEFjdGlvbkNyZWF0b3IoYWN0aW9uQ3JlYXRvciwgZGlzcGF0Y2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2goYWN0aW9uQ3JlYXRvci5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuXG4vKipcbiAqIFR1cm5zIGFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGFjdGlvbiBjcmVhdG9ycywgaW50byBhbiBvYmplY3Qgd2l0aCB0aGVcbiAqIHNhbWUga2V5cywgYnV0IHdpdGggZXZlcnkgZnVuY3Rpb24gd3JhcHBlZCBpbnRvIGEgYGRpc3BhdGNoYCBjYWxsIHNvIHRoZXlcbiAqIG1heSBiZSBpbnZva2VkIGRpcmVjdGx5LiBUaGlzIGlzIGp1c3QgYSBjb252ZW5pZW5jZSBtZXRob2QsIGFzIHlvdSBjYW4gY2FsbFxuICogYHN0b3JlLmRpc3BhdGNoKE15QWN0aW9uQ3JlYXRvcnMuZG9Tb21ldGhpbmcoKSlgIHlvdXJzZWxmIGp1c3QgZmluZS5cbiAqXG4gKiBGb3IgY29udmVuaWVuY2UsIHlvdSBjYW4gYWxzbyBwYXNzIGEgc2luZ2xlIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCxcbiAqIGFuZCBnZXQgYSBmdW5jdGlvbiBpbiByZXR1cm4uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R9IGFjdGlvbkNyZWF0b3JzIEFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGFjdGlvblxuICogY3JlYXRvciBmdW5jdGlvbnMuIE9uZSBoYW5keSB3YXkgdG8gb2J0YWluIGl0IGlzIHRvIHVzZSBFUzYgYGltcG9ydCAqIGFzYFxuICogc3ludGF4LiBZb3UgbWF5IGFsc28gcGFzcyBhIHNpbmdsZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBkaXNwYXRjaCBUaGUgYGRpc3BhdGNoYCBmdW5jdGlvbiBhdmFpbGFibGUgb24geW91ciBSZWR1eFxuICogc3RvcmUuXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufE9iamVjdH0gVGhlIG9iamVjdCBtaW1pY2tpbmcgdGhlIG9yaWdpbmFsIG9iamVjdCwgYnV0IHdpdGhcbiAqIGV2ZXJ5IGFjdGlvbiBjcmVhdG9yIHdyYXBwZWQgaW50byB0aGUgYGRpc3BhdGNoYCBjYWxsLiBJZiB5b3UgcGFzc2VkIGFcbiAqIGZ1bmN0aW9uIGFzIGBhY3Rpb25DcmVhdG9yc2AsIHRoZSByZXR1cm4gdmFsdWUgd2lsbCBhbHNvIGJlIGEgc2luZ2xlXG4gKiBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmluZEFjdGlvbkNyZWF0b3JzKGFjdGlvbkNyZWF0b3JzLCBkaXNwYXRjaCkge1xuICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3JzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3JzLCBkaXNwYXRjaCk7XG4gIH1cblxuICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3JzICE9PSAnb2JqZWN0JyB8fCBhY3Rpb25DcmVhdG9ycyA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcignYmluZEFjdGlvbkNyZWF0b3JzIGV4cGVjdGVkIGFuIG9iamVjdCBvciBhIGZ1bmN0aW9uLCBpbnN0ZWFkIHJlY2VpdmVkICcgKyAoYWN0aW9uQ3JlYXRvcnMgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgYWN0aW9uQ3JlYXRvcnMpICsgJy4gJyArICdEaWQgeW91IHdyaXRlIFwiaW1wb3J0IEFjdGlvbkNyZWF0b3JzIGZyb21cIiBpbnN0ZWFkIG9mIFwiaW1wb3J0ICogYXMgQWN0aW9uQ3JlYXRvcnMgZnJvbVwiPycpO1xuICB9XG5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhY3Rpb25DcmVhdG9ycyk7XG4gIHZhciBib3VuZEFjdGlvbkNyZWF0b3JzID0ge307XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgIHZhciBhY3Rpb25DcmVhdG9yID0gYWN0aW9uQ3JlYXRvcnNba2V5XTtcbiAgICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGJvdW5kQWN0aW9uQ3JlYXRvcnNba2V5XSA9IGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3IsIGRpc3BhdGNoKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGJvdW5kQWN0aW9uQ3JlYXRvcnM7XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1snZGVmYXVsdCddID0gY29tYmluZVJlZHVjZXJzO1xuXG52YXIgX2NyZWF0ZVN0b3JlID0gcmVxdWlyZSgnLi9jcmVhdGVTdG9yZScpO1xuXG52YXIgX2lzUGxhaW5PYmplY3QgPSByZXF1aXJlKCdsb2Rhc2gvaXNQbGFpbk9iamVjdCcpO1xuXG52YXIgX2lzUGxhaW5PYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXNQbGFpbk9iamVjdCk7XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJy4vdXRpbHMvd2FybmluZycpO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0VW5kZWZpbmVkU3RhdGVFcnJvck1lc3NhZ2Uoa2V5LCBhY3Rpb24pIHtcbiAgdmFyIGFjdGlvblR5cGUgPSBhY3Rpb24gJiYgYWN0aW9uLnR5cGU7XG4gIHZhciBhY3Rpb25OYW1lID0gYWN0aW9uVHlwZSAmJiAnXCInICsgYWN0aW9uVHlwZS50b1N0cmluZygpICsgJ1wiJyB8fCAnYW4gYWN0aW9uJztcblxuICByZXR1cm4gJ0dpdmVuIGFjdGlvbiAnICsgYWN0aW9uTmFtZSArICcsIHJlZHVjZXIgXCInICsga2V5ICsgJ1wiIHJldHVybmVkIHVuZGVmaW5lZC4gJyArICdUbyBpZ25vcmUgYW4gYWN0aW9uLCB5b3UgbXVzdCBleHBsaWNpdGx5IHJldHVybiB0aGUgcHJldmlvdXMgc3RhdGUuJztcbn1cblxuZnVuY3Rpb24gZ2V0VW5leHBlY3RlZFN0YXRlU2hhcGVXYXJuaW5nTWVzc2FnZShpbnB1dFN0YXRlLCByZWR1Y2VycywgYWN0aW9uLCB1bmV4cGVjdGVkS2V5Q2FjaGUpIHtcbiAgdmFyIHJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMocmVkdWNlcnMpO1xuICB2YXIgYXJndW1lbnROYW1lID0gYWN0aW9uICYmIGFjdGlvbi50eXBlID09PSBfY3JlYXRlU3RvcmUuQWN0aW9uVHlwZXMuSU5JVCA/ICdwcmVsb2FkZWRTdGF0ZSBhcmd1bWVudCBwYXNzZWQgdG8gY3JlYXRlU3RvcmUnIDogJ3ByZXZpb3VzIHN0YXRlIHJlY2VpdmVkIGJ5IHRoZSByZWR1Y2VyJztcblxuICBpZiAocmVkdWNlcktleXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICdTdG9yZSBkb2VzIG5vdCBoYXZlIGEgdmFsaWQgcmVkdWNlci4gTWFrZSBzdXJlIHRoZSBhcmd1bWVudCBwYXNzZWQgJyArICd0byBjb21iaW5lUmVkdWNlcnMgaXMgYW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgcmVkdWNlcnMuJztcbiAgfVxuXG4gIGlmICghKDAsIF9pc1BsYWluT2JqZWN0MlsnZGVmYXVsdCddKShpbnB1dFN0YXRlKSkge1xuICAgIHJldHVybiAnVGhlICcgKyBhcmd1bWVudE5hbWUgKyAnIGhhcyB1bmV4cGVjdGVkIHR5cGUgb2YgXCInICsge30udG9TdHJpbmcuY2FsbChpbnB1dFN0YXRlKS5tYXRjaCgvXFxzKFthLXp8QS1aXSspLylbMV0gKyAnXCIuIEV4cGVjdGVkIGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgJyArICgna2V5czogXCInICsgcmVkdWNlcktleXMuam9pbignXCIsIFwiJykgKyAnXCInKTtcbiAgfVxuXG4gIHZhciB1bmV4cGVjdGVkS2V5cyA9IE9iamVjdC5rZXlzKGlucHV0U3RhdGUpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuICFyZWR1Y2Vycy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmICF1bmV4cGVjdGVkS2V5Q2FjaGVba2V5XTtcbiAgfSk7XG5cbiAgdW5leHBlY3RlZEtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdW5leHBlY3RlZEtleUNhY2hlW2tleV0gPSB0cnVlO1xuICB9KTtcblxuICBpZiAodW5leHBlY3RlZEtleXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiAnVW5leHBlY3RlZCAnICsgKHVuZXhwZWN0ZWRLZXlzLmxlbmd0aCA+IDEgPyAna2V5cycgOiAna2V5JykgKyAnICcgKyAoJ1wiJyArIHVuZXhwZWN0ZWRLZXlzLmpvaW4oJ1wiLCBcIicpICsgJ1wiIGZvdW5kIGluICcgKyBhcmd1bWVudE5hbWUgKyAnLiAnKSArICdFeHBlY3RlZCB0byBmaW5kIG9uZSBvZiB0aGUga25vd24gcmVkdWNlciBrZXlzIGluc3RlYWQ6ICcgKyAoJ1wiJyArIHJlZHVjZXJLZXlzLmpvaW4oJ1wiLCBcIicpICsgJ1wiLiBVbmV4cGVjdGVkIGtleXMgd2lsbCBiZSBpZ25vcmVkLicpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFzc2VydFJlZHVjZXJTYW5pdHkocmVkdWNlcnMpIHtcbiAgT2JqZWN0LmtleXMocmVkdWNlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciByZWR1Y2VyID0gcmVkdWNlcnNba2V5XTtcbiAgICB2YXIgaW5pdGlhbFN0YXRlID0gcmVkdWNlcih1bmRlZmluZWQsIHsgdHlwZTogX2NyZWF0ZVN0b3JlLkFjdGlvblR5cGVzLklOSVQgfSk7XG5cbiAgICBpZiAodHlwZW9mIGluaXRpYWxTdGF0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVkdWNlciBcIicgKyBrZXkgKyAnXCIgcmV0dXJuZWQgdW5kZWZpbmVkIGR1cmluZyBpbml0aWFsaXphdGlvbi4gJyArICdJZiB0aGUgc3RhdGUgcGFzc2VkIHRvIHRoZSByZWR1Y2VyIGlzIHVuZGVmaW5lZCwgeW91IG11c3QgJyArICdleHBsaWNpdGx5IHJldHVybiB0aGUgaW5pdGlhbCBzdGF0ZS4gVGhlIGluaXRpYWwgc3RhdGUgbWF5ICcgKyAnbm90IGJlIHVuZGVmaW5lZC4nKTtcbiAgICB9XG5cbiAgICB2YXIgdHlwZSA9ICdAQHJlZHV4L1BST0JFX1VOS05PV05fQUNUSU9OXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNykuc3BsaXQoJycpLmpvaW4oJy4nKTtcbiAgICBpZiAodHlwZW9mIHJlZHVjZXIodW5kZWZpbmVkLCB7IHR5cGU6IHR5cGUgfSkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlZHVjZXIgXCInICsga2V5ICsgJ1wiIHJldHVybmVkIHVuZGVmaW5lZCB3aGVuIHByb2JlZCB3aXRoIGEgcmFuZG9tIHR5cGUuICcgKyAoJ0RvblxcJ3QgdHJ5IHRvIGhhbmRsZSAnICsgX2NyZWF0ZVN0b3JlLkFjdGlvblR5cGVzLklOSVQgKyAnIG9yIG90aGVyIGFjdGlvbnMgaW4gXCJyZWR1eC8qXCIgJykgKyAnbmFtZXNwYWNlLiBUaGV5IGFyZSBjb25zaWRlcmVkIHByaXZhdGUuIEluc3RlYWQsIHlvdSBtdXN0IHJldHVybiB0aGUgJyArICdjdXJyZW50IHN0YXRlIGZvciBhbnkgdW5rbm93biBhY3Rpb25zLCB1bmxlc3MgaXQgaXMgdW5kZWZpbmVkLCAnICsgJ2luIHdoaWNoIGNhc2UgeW91IG11c3QgcmV0dXJuIHRoZSBpbml0aWFsIHN0YXRlLCByZWdhcmRsZXNzIG9mIHRoZSAnICsgJ2FjdGlvbiB0eXBlLiBUaGUgaW5pdGlhbCBzdGF0ZSBtYXkgbm90IGJlIHVuZGVmaW5lZC4nKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFR1cm5zIGFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGRpZmZlcmVudCByZWR1Y2VyIGZ1bmN0aW9ucywgaW50byBhIHNpbmdsZVxuICogcmVkdWNlciBmdW5jdGlvbi4gSXQgd2lsbCBjYWxsIGV2ZXJ5IGNoaWxkIHJlZHVjZXIsIGFuZCBnYXRoZXIgdGhlaXIgcmVzdWx0c1xuICogaW50byBhIHNpbmdsZSBzdGF0ZSBvYmplY3QsIHdob3NlIGtleXMgY29ycmVzcG9uZCB0byB0aGUga2V5cyBvZiB0aGUgcGFzc2VkXG4gKiByZWR1Y2VyIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcmVkdWNlcnMgQW4gb2JqZWN0IHdob3NlIHZhbHVlcyBjb3JyZXNwb25kIHRvIGRpZmZlcmVudFxuICogcmVkdWNlciBmdW5jdGlvbnMgdGhhdCBuZWVkIHRvIGJlIGNvbWJpbmVkIGludG8gb25lLiBPbmUgaGFuZHkgd2F5IHRvIG9idGFpblxuICogaXQgaXMgdG8gdXNlIEVTNiBgaW1wb3J0ICogYXMgcmVkdWNlcnNgIHN5bnRheC4gVGhlIHJlZHVjZXJzIG1heSBuZXZlciByZXR1cm5cbiAqIHVuZGVmaW5lZCBmb3IgYW55IGFjdGlvbi4gSW5zdGVhZCwgdGhleSBzaG91bGQgcmV0dXJuIHRoZWlyIGluaXRpYWwgc3RhdGVcbiAqIGlmIHRoZSBzdGF0ZSBwYXNzZWQgdG8gdGhlbSB3YXMgdW5kZWZpbmVkLCBhbmQgdGhlIGN1cnJlbnQgc3RhdGUgZm9yIGFueVxuICogdW5yZWNvZ25pemVkIGFjdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgcmVkdWNlciBmdW5jdGlvbiB0aGF0IGludm9rZXMgZXZlcnkgcmVkdWNlciBpbnNpZGUgdGhlXG4gKiBwYXNzZWQgb2JqZWN0LCBhbmQgYnVpbGRzIGEgc3RhdGUgb2JqZWN0IHdpdGggdGhlIHNhbWUgc2hhcGUuXG4gKi9cbmZ1bmN0aW9uIGNvbWJpbmVSZWR1Y2VycyhyZWR1Y2Vycykge1xuICB2YXIgcmVkdWNlcktleXMgPSBPYmplY3Qua2V5cyhyZWR1Y2Vycyk7XG4gIHZhciBmaW5hbFJlZHVjZXJzID0ge307XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmVkdWNlcktleXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIga2V5ID0gcmVkdWNlcktleXNbaV07XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKHR5cGVvZiByZWR1Y2Vyc1trZXldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAoMCwgX3dhcm5pbmcyWydkZWZhdWx0J10pKCdObyByZWR1Y2VyIHByb3ZpZGVkIGZvciBrZXkgXCInICsga2V5ICsgJ1wiJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiByZWR1Y2Vyc1trZXldID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBmaW5hbFJlZHVjZXJzW2tleV0gPSByZWR1Y2Vyc1trZXldO1xuICAgIH1cbiAgfVxuICB2YXIgZmluYWxSZWR1Y2VyS2V5cyA9IE9iamVjdC5rZXlzKGZpbmFsUmVkdWNlcnMpO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFyIHVuZXhwZWN0ZWRLZXlDYWNoZSA9IHt9O1xuICB9XG5cbiAgdmFyIHNhbml0eUVycm9yO1xuICB0cnkge1xuICAgIGFzc2VydFJlZHVjZXJTYW5pdHkoZmluYWxSZWR1Y2Vycyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBzYW5pdHlFcnJvciA9IGU7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gY29tYmluYXRpb24oKSB7XG4gICAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG4gICAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50c1sxXTtcblxuICAgIGlmIChzYW5pdHlFcnJvcikge1xuICAgICAgdGhyb3cgc2FuaXR5RXJyb3I7XG4gICAgfVxuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciB3YXJuaW5nTWVzc2FnZSA9IGdldFVuZXhwZWN0ZWRTdGF0ZVNoYXBlV2FybmluZ01lc3NhZ2Uoc3RhdGUsIGZpbmFsUmVkdWNlcnMsIGFjdGlvbiwgdW5leHBlY3RlZEtleUNhY2hlKTtcbiAgICAgIGlmICh3YXJuaW5nTWVzc2FnZSkge1xuICAgICAgICAoMCwgX3dhcm5pbmcyWydkZWZhdWx0J10pKHdhcm5pbmdNZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaGFzQ2hhbmdlZCA9IGZhbHNlO1xuICAgIHZhciBuZXh0U3RhdGUgPSB7fTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbmFsUmVkdWNlcktleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBmaW5hbFJlZHVjZXJLZXlzW2ldO1xuICAgICAgdmFyIHJlZHVjZXIgPSBmaW5hbFJlZHVjZXJzW2tleV07XG4gICAgICB2YXIgcHJldmlvdXNTdGF0ZUZvcktleSA9IHN0YXRlW2tleV07XG4gICAgICB2YXIgbmV4dFN0YXRlRm9yS2V5ID0gcmVkdWNlcihwcmV2aW91c1N0YXRlRm9yS2V5LCBhY3Rpb24pO1xuICAgICAgaWYgKHR5cGVvZiBuZXh0U3RhdGVGb3JLZXkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBnZXRVbmRlZmluZWRTdGF0ZUVycm9yTWVzc2FnZShrZXksIGFjdGlvbik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgbmV4dFN0YXRlW2tleV0gPSBuZXh0U3RhdGVGb3JLZXk7XG4gICAgICBoYXNDaGFuZ2VkID0gaGFzQ2hhbmdlZCB8fCBuZXh0U3RhdGVGb3JLZXkgIT09IHByZXZpb3VzU3RhdGVGb3JLZXk7XG4gICAgfVxuICAgIHJldHVybiBoYXNDaGFuZ2VkID8gbmV4dFN0YXRlIDogc3RhdGU7XG4gIH07XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IGNvbXBvc2U7XG4vKipcbiAqIENvbXBvc2VzIHNpbmdsZS1hcmd1bWVudCBmdW5jdGlvbnMgZnJvbSByaWdodCB0byBsZWZ0LiBUaGUgcmlnaHRtb3N0XG4gKiBmdW5jdGlvbiBjYW4gdGFrZSBtdWx0aXBsZSBhcmd1bWVudHMgYXMgaXQgcHJvdmlkZXMgdGhlIHNpZ25hdHVyZSBmb3JcbiAqIHRoZSByZXN1bHRpbmcgY29tcG9zaXRlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IGZ1bmNzIFRoZSBmdW5jdGlvbnMgdG8gY29tcG9zZS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiBvYnRhaW5lZCBieSBjb21wb3NpbmcgdGhlIGFyZ3VtZW50IGZ1bmN0aW9uc1xuICogZnJvbSByaWdodCB0byBsZWZ0LiBGb3IgZXhhbXBsZSwgY29tcG9zZShmLCBnLCBoKSBpcyBpZGVudGljYWwgdG8gZG9pbmdcbiAqICguLi5hcmdzKSA9PiBmKGcoaCguLi5hcmdzKSkpLlxuICovXG5cbmZ1bmN0aW9uIGNvbXBvc2UoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBmdW5jcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGZ1bmNzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgaWYgKGZ1bmNzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH07XG4gIH1cblxuICBpZiAoZnVuY3MubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGZ1bmNzWzBdO1xuICB9XG5cbiAgdmFyIGxhc3QgPSBmdW5jc1tmdW5jcy5sZW5ndGggLSAxXTtcbiAgdmFyIHJlc3QgPSBmdW5jcy5zbGljZSgwLCAtMSk7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHJlc3QucmVkdWNlUmlnaHQoZnVuY3Rpb24gKGNvbXBvc2VkLCBmKSB7XG4gICAgICByZXR1cm4gZihjb21wb3NlZCk7XG4gICAgfSwgbGFzdC5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cykpO1xuICB9O1xufSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuQWN0aW9uVHlwZXMgPSB1bmRlZmluZWQ7XG5leHBvcnRzWydkZWZhdWx0J10gPSBjcmVhdGVTdG9yZTtcblxudmFyIF9pc1BsYWluT2JqZWN0ID0gcmVxdWlyZSgnbG9kYXNoL2lzUGxhaW5PYmplY3QnKTtcblxudmFyIF9pc1BsYWluT2JqZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lzUGxhaW5PYmplY3QpO1xuXG52YXIgX3N5bWJvbE9ic2VydmFibGUgPSByZXF1aXJlKCdzeW1ib2wtb2JzZXJ2YWJsZScpO1xuXG52YXIgX3N5bWJvbE9ic2VydmFibGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3ltYm9sT2JzZXJ2YWJsZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxuLyoqXG4gKiBUaGVzZSBhcmUgcHJpdmF0ZSBhY3Rpb24gdHlwZXMgcmVzZXJ2ZWQgYnkgUmVkdXguXG4gKiBGb3IgYW55IHVua25vd24gYWN0aW9ucywgeW91IG11c3QgcmV0dXJuIHRoZSBjdXJyZW50IHN0YXRlLlxuICogSWYgdGhlIGN1cnJlbnQgc3RhdGUgaXMgdW5kZWZpbmVkLCB5b3UgbXVzdCByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUuXG4gKiBEbyBub3QgcmVmZXJlbmNlIHRoZXNlIGFjdGlvbiB0eXBlcyBkaXJlY3RseSBpbiB5b3VyIGNvZGUuXG4gKi9cbnZhciBBY3Rpb25UeXBlcyA9IGV4cG9ydHMuQWN0aW9uVHlwZXMgPSB7XG4gIElOSVQ6ICdAQHJlZHV4L0lOSVQnXG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBSZWR1eCBzdG9yZSB0aGF0IGhvbGRzIHRoZSBzdGF0ZSB0cmVlLlxuICogVGhlIG9ubHkgd2F5IHRvIGNoYW5nZSB0aGUgZGF0YSBpbiB0aGUgc3RvcmUgaXMgdG8gY2FsbCBgZGlzcGF0Y2goKWAgb24gaXQuXG4gKlxuICogVGhlcmUgc2hvdWxkIG9ubHkgYmUgYSBzaW5nbGUgc3RvcmUgaW4geW91ciBhcHAuIFRvIHNwZWNpZnkgaG93IGRpZmZlcmVudFxuICogcGFydHMgb2YgdGhlIHN0YXRlIHRyZWUgcmVzcG9uZCB0byBhY3Rpb25zLCB5b3UgbWF5IGNvbWJpbmUgc2V2ZXJhbCByZWR1Y2Vyc1xuICogaW50byBhIHNpbmdsZSByZWR1Y2VyIGZ1bmN0aW9uIGJ5IHVzaW5nIGBjb21iaW5lUmVkdWNlcnNgLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlZHVjZXIgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG5leHQgc3RhdGUgdHJlZSwgZ2l2ZW5cbiAqIHRoZSBjdXJyZW50IHN0YXRlIHRyZWUgYW5kIHRoZSBhY3Rpb24gdG8gaGFuZGxlLlxuICpcbiAqIEBwYXJhbSB7YW55fSBbcHJlbG9hZGVkU3RhdGVdIFRoZSBpbml0aWFsIHN0YXRlLiBZb3UgbWF5IG9wdGlvbmFsbHkgc3BlY2lmeSBpdFxuICogdG8gaHlkcmF0ZSB0aGUgc3RhdGUgZnJvbSB0aGUgc2VydmVyIGluIHVuaXZlcnNhbCBhcHBzLCBvciB0byByZXN0b3JlIGFcbiAqIHByZXZpb3VzbHkgc2VyaWFsaXplZCB1c2VyIHNlc3Npb24uXG4gKiBJZiB5b3UgdXNlIGBjb21iaW5lUmVkdWNlcnNgIHRvIHByb2R1Y2UgdGhlIHJvb3QgcmVkdWNlciBmdW5jdGlvbiwgdGhpcyBtdXN0IGJlXG4gKiBhbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzaGFwZSBhcyBgY29tYmluZVJlZHVjZXJzYCBrZXlzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVuaGFuY2VyIFRoZSBzdG9yZSBlbmhhbmNlci4gWW91IG1heSBvcHRpb25hbGx5IHNwZWNpZnkgaXRcbiAqIHRvIGVuaGFuY2UgdGhlIHN0b3JlIHdpdGggdGhpcmQtcGFydHkgY2FwYWJpbGl0aWVzIHN1Y2ggYXMgbWlkZGxld2FyZSxcbiAqIHRpbWUgdHJhdmVsLCBwZXJzaXN0ZW5jZSwgZXRjLiBUaGUgb25seSBzdG9yZSBlbmhhbmNlciB0aGF0IHNoaXBzIHdpdGggUmVkdXhcbiAqIGlzIGBhcHBseU1pZGRsZXdhcmUoKWAuXG4gKlxuICogQHJldHVybnMge1N0b3JlfSBBIFJlZHV4IHN0b3JlIHRoYXQgbGV0cyB5b3UgcmVhZCB0aGUgc3RhdGUsIGRpc3BhdGNoIGFjdGlvbnNcbiAqIGFuZCBzdWJzY3JpYmUgdG8gY2hhbmdlcy5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlU3RvcmUocmVkdWNlciwgcHJlbG9hZGVkU3RhdGUsIGVuaGFuY2VyKSB7XG4gIHZhciBfcmVmMjtcblxuICBpZiAodHlwZW9mIHByZWxvYWRlZFN0YXRlID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBlbmhhbmNlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBlbmhhbmNlciA9IHByZWxvYWRlZFN0YXRlO1xuICAgIHByZWxvYWRlZFN0YXRlID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBlbmhhbmNlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIGVuaGFuY2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRoZSBlbmhhbmNlciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cblxuICAgIHJldHVybiBlbmhhbmNlcihjcmVhdGVTdG9yZSkocmVkdWNlciwgcHJlbG9hZGVkU3RhdGUpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiByZWR1Y2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgcmVkdWNlciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICB9XG5cbiAgdmFyIGN1cnJlbnRSZWR1Y2VyID0gcmVkdWNlcjtcbiAgdmFyIGN1cnJlbnRTdGF0ZSA9IHByZWxvYWRlZFN0YXRlO1xuICB2YXIgY3VycmVudExpc3RlbmVycyA9IFtdO1xuICB2YXIgbmV4dExpc3RlbmVycyA9IGN1cnJlbnRMaXN0ZW5lcnM7XG4gIHZhciBpc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycygpIHtcbiAgICBpZiAobmV4dExpc3RlbmVycyA9PT0gY3VycmVudExpc3RlbmVycykge1xuICAgICAgbmV4dExpc3RlbmVycyA9IGN1cnJlbnRMaXN0ZW5lcnMuc2xpY2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgdGhlIHN0YXRlIHRyZWUgbWFuYWdlZCBieSB0aGUgc3RvcmUuXG4gICAqXG4gICAqIEByZXR1cm5zIHthbnl9IFRoZSBjdXJyZW50IHN0YXRlIHRyZWUgb2YgeW91ciBhcHBsaWNhdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIGdldFN0YXRlKCkge1xuICAgIHJldHVybiBjdXJyZW50U3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIGNoYW5nZSBsaXN0ZW5lci4gSXQgd2lsbCBiZSBjYWxsZWQgYW55IHRpbWUgYW4gYWN0aW9uIGlzIGRpc3BhdGNoZWQsXG4gICAqIGFuZCBzb21lIHBhcnQgb2YgdGhlIHN0YXRlIHRyZWUgbWF5IHBvdGVudGlhbGx5IGhhdmUgY2hhbmdlZC4gWW91IG1heSB0aGVuXG4gICAqIGNhbGwgYGdldFN0YXRlKClgIHRvIHJlYWQgdGhlIGN1cnJlbnQgc3RhdGUgdHJlZSBpbnNpZGUgdGhlIGNhbGxiYWNrLlxuICAgKlxuICAgKiBZb3UgbWF5IGNhbGwgYGRpc3BhdGNoKClgIGZyb20gYSBjaGFuZ2UgbGlzdGVuZXIsIHdpdGggdGhlIGZvbGxvd2luZ1xuICAgKiBjYXZlYXRzOlxuICAgKlxuICAgKiAxLiBUaGUgc3Vic2NyaXB0aW9ucyBhcmUgc25hcHNob3R0ZWQganVzdCBiZWZvcmUgZXZlcnkgYGRpc3BhdGNoKClgIGNhbGwuXG4gICAqIElmIHlvdSBzdWJzY3JpYmUgb3IgdW5zdWJzY3JpYmUgd2hpbGUgdGhlIGxpc3RlbmVycyBhcmUgYmVpbmcgaW52b2tlZCwgdGhpc1xuICAgKiB3aWxsIG5vdCBoYXZlIGFueSBlZmZlY3Qgb24gdGhlIGBkaXNwYXRjaCgpYCB0aGF0IGlzIGN1cnJlbnRseSBpbiBwcm9ncmVzcy5cbiAgICogSG93ZXZlciwgdGhlIG5leHQgYGRpc3BhdGNoKClgIGNhbGwsIHdoZXRoZXIgbmVzdGVkIG9yIG5vdCwgd2lsbCB1c2UgYSBtb3JlXG4gICAqIHJlY2VudCBzbmFwc2hvdCBvZiB0aGUgc3Vic2NyaXB0aW9uIGxpc3QuXG4gICAqXG4gICAqIDIuIFRoZSBsaXN0ZW5lciBzaG91bGQgbm90IGV4cGVjdCB0byBzZWUgYWxsIHN0YXRlIGNoYW5nZXMsIGFzIHRoZSBzdGF0ZVxuICAgKiBtaWdodCBoYXZlIGJlZW4gdXBkYXRlZCBtdWx0aXBsZSB0aW1lcyBkdXJpbmcgYSBuZXN0ZWQgYGRpc3BhdGNoKClgIGJlZm9yZVxuICAgKiB0aGUgbGlzdGVuZXIgaXMgY2FsbGVkLiBJdCBpcywgaG93ZXZlciwgZ3VhcmFudGVlZCB0aGF0IGFsbCBzdWJzY3JpYmVyc1xuICAgKiByZWdpc3RlcmVkIGJlZm9yZSB0aGUgYGRpc3BhdGNoKClgIHN0YXJ0ZWQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgbGF0ZXN0XG4gICAqIHN0YXRlIGJ5IHRoZSB0aW1lIGl0IGV4aXRzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBBIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgb24gZXZlcnkgZGlzcGF0Y2guXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiB0byByZW1vdmUgdGhpcyBjaGFuZ2UgbGlzdGVuZXIuXG4gICAqL1xuICBmdW5jdGlvbiBzdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIGxpc3RlbmVyIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgdmFyIGlzU3Vic2NyaWJlZCA9IHRydWU7XG5cbiAgICBlbnN1cmVDYW5NdXRhdGVOZXh0TGlzdGVuZXJzKCk7XG4gICAgbmV4dExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiB1bnN1YnNjcmliZSgpIHtcbiAgICAgIGlmICghaXNTdWJzY3JpYmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaXNTdWJzY3JpYmVkID0gZmFsc2U7XG5cbiAgICAgIGVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMoKTtcbiAgICAgIHZhciBpbmRleCA9IG5leHRMaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICBuZXh0TGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVzIGFuIGFjdGlvbi4gSXQgaXMgdGhlIG9ubHkgd2F5IHRvIHRyaWdnZXIgYSBzdGF0ZSBjaGFuZ2UuXG4gICAqXG4gICAqIFRoZSBgcmVkdWNlcmAgZnVuY3Rpb24sIHVzZWQgdG8gY3JlYXRlIHRoZSBzdG9yZSwgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGVcbiAgICogY3VycmVudCBzdGF0ZSB0cmVlIGFuZCB0aGUgZ2l2ZW4gYGFjdGlvbmAuIEl0cyByZXR1cm4gdmFsdWUgd2lsbFxuICAgKiBiZSBjb25zaWRlcmVkIHRoZSAqKm5leHQqKiBzdGF0ZSBvZiB0aGUgdHJlZSwgYW5kIHRoZSBjaGFuZ2UgbGlzdGVuZXJzXG4gICAqIHdpbGwgYmUgbm90aWZpZWQuXG4gICAqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9ubHkgc3VwcG9ydHMgcGxhaW4gb2JqZWN0IGFjdGlvbnMuIElmIHlvdSB3YW50IHRvXG4gICAqIGRpc3BhdGNoIGEgUHJvbWlzZSwgYW4gT2JzZXJ2YWJsZSwgYSB0aHVuaywgb3Igc29tZXRoaW5nIGVsc2UsIHlvdSBuZWVkIHRvXG4gICAqIHdyYXAgeW91ciBzdG9yZSBjcmVhdGluZyBmdW5jdGlvbiBpbnRvIHRoZSBjb3JyZXNwb25kaW5nIG1pZGRsZXdhcmUuIEZvclxuICAgKiBleGFtcGxlLCBzZWUgdGhlIGRvY3VtZW50YXRpb24gZm9yIHRoZSBgcmVkdXgtdGh1bmtgIHBhY2thZ2UuIEV2ZW4gdGhlXG4gICAqIG1pZGRsZXdhcmUgd2lsbCBldmVudHVhbGx5IGRpc3BhdGNoIHBsYWluIG9iamVjdCBhY3Rpb25zIHVzaW5nIHRoaXMgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYWN0aW9uIEEgcGxhaW4gb2JqZWN0IHJlcHJlc2VudGluZyDigJx3aGF0IGNoYW5nZWTigJ0uIEl0IGlzXG4gICAqIGEgZ29vZCBpZGVhIHRvIGtlZXAgYWN0aW9ucyBzZXJpYWxpemFibGUgc28geW91IGNhbiByZWNvcmQgYW5kIHJlcGxheSB1c2VyXG4gICAqIHNlc3Npb25zLCBvciB1c2UgdGhlIHRpbWUgdHJhdmVsbGluZyBgcmVkdXgtZGV2dG9vbHNgLiBBbiBhY3Rpb24gbXVzdCBoYXZlXG4gICAqIGEgYHR5cGVgIHByb3BlcnR5IHdoaWNoIG1heSBub3QgYmUgYHVuZGVmaW5lZGAuIEl0IGlzIGEgZ29vZCBpZGVhIHRvIHVzZVxuICAgKiBzdHJpbmcgY29uc3RhbnRzIGZvciBhY3Rpb24gdHlwZXMuXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IEZvciBjb252ZW5pZW5jZSwgdGhlIHNhbWUgYWN0aW9uIG9iamVjdCB5b3UgZGlzcGF0Y2hlZC5cbiAgICpcbiAgICogTm90ZSB0aGF0LCBpZiB5b3UgdXNlIGEgY3VzdG9tIG1pZGRsZXdhcmUsIGl0IG1heSB3cmFwIGBkaXNwYXRjaCgpYCB0b1xuICAgKiByZXR1cm4gc29tZXRoaW5nIGVsc2UgKGZvciBleGFtcGxlLCBhIFByb21pc2UgeW91IGNhbiBhd2FpdCkuXG4gICAqL1xuICBmdW5jdGlvbiBkaXNwYXRjaChhY3Rpb24pIHtcbiAgICBpZiAoISgwLCBfaXNQbGFpbk9iamVjdDJbJ2RlZmF1bHQnXSkoYWN0aW9uKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBY3Rpb25zIG11c3QgYmUgcGxhaW4gb2JqZWN0cy4gJyArICdVc2UgY3VzdG9tIG1pZGRsZXdhcmUgZm9yIGFzeW5jIGFjdGlvbnMuJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBhY3Rpb24udHlwZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQWN0aW9ucyBtYXkgbm90IGhhdmUgYW4gdW5kZWZpbmVkIFwidHlwZVwiIHByb3BlcnR5LiAnICsgJ0hhdmUgeW91IG1pc3NwZWxsZWQgYSBjb25zdGFudD8nKTtcbiAgICB9XG5cbiAgICBpZiAoaXNEaXNwYXRjaGluZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWR1Y2VycyBtYXkgbm90IGRpc3BhdGNoIGFjdGlvbnMuJyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGlzRGlzcGF0Y2hpbmcgPSB0cnVlO1xuICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFJlZHVjZXIoY3VycmVudFN0YXRlLCBhY3Rpb24pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGxpc3RlbmVycyA9IGN1cnJlbnRMaXN0ZW5lcnMgPSBuZXh0TGlzdGVuZXJzO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsaXN0ZW5lcnNbaV0oKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIHRoZSByZWR1Y2VyIGN1cnJlbnRseSB1c2VkIGJ5IHRoZSBzdG9yZSB0byBjYWxjdWxhdGUgdGhlIHN0YXRlLlxuICAgKlxuICAgKiBZb3UgbWlnaHQgbmVlZCB0aGlzIGlmIHlvdXIgYXBwIGltcGxlbWVudHMgY29kZSBzcGxpdHRpbmcgYW5kIHlvdSB3YW50IHRvXG4gICAqIGxvYWQgc29tZSBvZiB0aGUgcmVkdWNlcnMgZHluYW1pY2FsbHkuIFlvdSBtaWdodCBhbHNvIG5lZWQgdGhpcyBpZiB5b3VcbiAgICogaW1wbGVtZW50IGEgaG90IHJlbG9hZGluZyBtZWNoYW5pc20gZm9yIFJlZHV4LlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0UmVkdWNlciBUaGUgcmVkdWNlciBmb3IgdGhlIHN0b3JlIHRvIHVzZSBpbnN0ZWFkLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGZ1bmN0aW9uIHJlcGxhY2VSZWR1Y2VyKG5leHRSZWR1Y2VyKSB7XG4gICAgaWYgKHR5cGVvZiBuZXh0UmVkdWNlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgbmV4dFJlZHVjZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG5cbiAgICBjdXJyZW50UmVkdWNlciA9IG5leHRSZWR1Y2VyO1xuICAgIGRpc3BhdGNoKHsgdHlwZTogQWN0aW9uVHlwZXMuSU5JVCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnRlcm9wZXJhYmlsaXR5IHBvaW50IGZvciBvYnNlcnZhYmxlL3JlYWN0aXZlIGxpYnJhcmllcy5cbiAgICogQHJldHVybnMge29ic2VydmFibGV9IEEgbWluaW1hbCBvYnNlcnZhYmxlIG9mIHN0YXRlIGNoYW5nZXMuXG4gICAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUgdGhlIG9ic2VydmFibGUgcHJvcG9zYWw6XG4gICAqIGh0dHBzOi8vZ2l0aHViLmNvbS96ZW5wYXJzaW5nL2VzLW9ic2VydmFibGVcbiAgICovXG4gIGZ1bmN0aW9uIG9ic2VydmFibGUoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgb3V0ZXJTdWJzY3JpYmUgPSBzdWJzY3JpYmU7XG4gICAgcmV0dXJuIF9yZWYgPSB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBtaW5pbWFsIG9ic2VydmFibGUgc3Vic2NyaXB0aW9uIG1ldGhvZC5cbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYnNlcnZlciBBbnkgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgYXMgYW4gb2JzZXJ2ZXIuXG4gICAgICAgKiBUaGUgb2JzZXJ2ZXIgb2JqZWN0IHNob3VsZCBoYXZlIGEgYG5leHRgIG1ldGhvZC5cbiAgICAgICAqIEByZXR1cm5zIHtzdWJzY3JpcHRpb259IEFuIG9iamVjdCB3aXRoIGFuIGB1bnN1YnNjcmliZWAgbWV0aG9kIHRoYXQgY2FuXG4gICAgICAgKiBiZSB1c2VkIHRvIHVuc3Vic2NyaWJlIHRoZSBvYnNlcnZhYmxlIGZyb20gdGhlIHN0b3JlLCBhbmQgcHJldmVudCBmdXJ0aGVyXG4gICAgICAgKiBlbWlzc2lvbiBvZiB2YWx1ZXMgZnJvbSB0aGUgb2JzZXJ2YWJsZS5cbiAgICAgICAqL1xuICAgICAgc3Vic2NyaWJlOiBmdW5jdGlvbiBzdWJzY3JpYmUob2JzZXJ2ZXIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYnNlcnZlciAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCB0aGUgb2JzZXJ2ZXIgdG8gYmUgYW4gb2JqZWN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb2JzZXJ2ZVN0YXRlKCkge1xuICAgICAgICAgIGlmIChvYnNlcnZlci5uZXh0KSB7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KGdldFN0YXRlKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9ic2VydmVTdGF0ZSgpO1xuICAgICAgICB2YXIgdW5zdWJzY3JpYmUgPSBvdXRlclN1YnNjcmliZShvYnNlcnZlU3RhdGUpO1xuICAgICAgICByZXR1cm4geyB1bnN1YnNjcmliZTogdW5zdWJzY3JpYmUgfTtcbiAgICAgIH1cbiAgICB9LCBfcmVmW19zeW1ib2xPYnNlcnZhYmxlMlsnZGVmYXVsdCddXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sIF9yZWY7XG4gIH1cblxuICAvLyBXaGVuIGEgc3RvcmUgaXMgY3JlYXRlZCwgYW4gXCJJTklUXCIgYWN0aW9uIGlzIGRpc3BhdGNoZWQgc28gdGhhdCBldmVyeVxuICAvLyByZWR1Y2VyIHJldHVybnMgdGhlaXIgaW5pdGlhbCBzdGF0ZS4gVGhpcyBlZmZlY3RpdmVseSBwb3B1bGF0ZXNcbiAgLy8gdGhlIGluaXRpYWwgc3RhdGUgdHJlZS5cbiAgZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlcy5JTklUIH0pO1xuXG4gIHJldHVybiBfcmVmMiA9IHtcbiAgICBkaXNwYXRjaDogZGlzcGF0Y2gsXG4gICAgc3Vic2NyaWJlOiBzdWJzY3JpYmUsXG4gICAgZ2V0U3RhdGU6IGdldFN0YXRlLFxuICAgIHJlcGxhY2VSZWR1Y2VyOiByZXBsYWNlUmVkdWNlclxuICB9LCBfcmVmMltfc3ltYm9sT2JzZXJ2YWJsZTJbJ2RlZmF1bHQnXV0gPSBvYnNlcnZhYmxlLCBfcmVmMjtcbn0iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmNvbXBvc2UgPSBleHBvcnRzLmFwcGx5TWlkZGxld2FyZSA9IGV4cG9ydHMuYmluZEFjdGlvbkNyZWF0b3JzID0gZXhwb3J0cy5jb21iaW5lUmVkdWNlcnMgPSBleHBvcnRzLmNyZWF0ZVN0b3JlID0gdW5kZWZpbmVkO1xuXG52YXIgX2NyZWF0ZVN0b3JlID0gcmVxdWlyZSgnLi9jcmVhdGVTdG9yZScpO1xuXG52YXIgX2NyZWF0ZVN0b3JlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZVN0b3JlKTtcblxudmFyIF9jb21iaW5lUmVkdWNlcnMgPSByZXF1aXJlKCcuL2NvbWJpbmVSZWR1Y2VycycpO1xuXG52YXIgX2NvbWJpbmVSZWR1Y2VyczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb21iaW5lUmVkdWNlcnMpO1xuXG52YXIgX2JpbmRBY3Rpb25DcmVhdG9ycyA9IHJlcXVpcmUoJy4vYmluZEFjdGlvbkNyZWF0b3JzJyk7XG5cbnZhciBfYmluZEFjdGlvbkNyZWF0b3JzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JpbmRBY3Rpb25DcmVhdG9ycyk7XG5cbnZhciBfYXBwbHlNaWRkbGV3YXJlID0gcmVxdWlyZSgnLi9hcHBseU1pZGRsZXdhcmUnKTtcblxudmFyIF9hcHBseU1pZGRsZXdhcmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXBwbHlNaWRkbGV3YXJlKTtcblxudmFyIF9jb21wb3NlID0gcmVxdWlyZSgnLi9jb21wb3NlJyk7XG5cbnZhciBfY29tcG9zZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb21wb3NlKTtcblxudmFyIF93YXJuaW5nID0gcmVxdWlyZSgnLi91dGlscy93YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG4vKlxuKiBUaGlzIGlzIGEgZHVtbXkgZnVuY3Rpb24gdG8gY2hlY2sgaWYgdGhlIGZ1bmN0aW9uIG5hbWUgaGFzIGJlZW4gYWx0ZXJlZCBieSBtaW5pZmljYXRpb24uXG4qIElmIHRoZSBmdW5jdGlvbiBoYXMgYmVlbiBtaW5pZmllZCBhbmQgTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJywgd2FybiB0aGUgdXNlci5cbiovXG5mdW5jdGlvbiBpc0NydXNoZWQoKSB7fVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0eXBlb2YgaXNDcnVzaGVkLm5hbWUgPT09ICdzdHJpbmcnICYmIGlzQ3J1c2hlZC5uYW1lICE9PSAnaXNDcnVzaGVkJykge1xuICAoMCwgX3dhcm5pbmcyWydkZWZhdWx0J10pKCdZb3UgYXJlIGN1cnJlbnRseSB1c2luZyBtaW5pZmllZCBjb2RlIG91dHNpZGUgb2YgTk9ERV9FTlYgPT09IFxcJ3Byb2R1Y3Rpb25cXCcuICcgKyAnVGhpcyBtZWFucyB0aGF0IHlvdSBhcmUgcnVubmluZyBhIHNsb3dlciBkZXZlbG9wbWVudCBidWlsZCBvZiBSZWR1eC4gJyArICdZb3UgY2FuIHVzZSBsb29zZS1lbnZpZnkgKGh0dHBzOi8vZ2l0aHViLmNvbS96ZXJ0b3NoL2xvb3NlLWVudmlmeSkgZm9yIGJyb3dzZXJpZnkgJyArICdvciBEZWZpbmVQbHVnaW4gZm9yIHdlYnBhY2sgKGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzAwMzAwMzEpICcgKyAndG8gZW5zdXJlIHlvdSBoYXZlIHRoZSBjb3JyZWN0IGNvZGUgZm9yIHlvdXIgcHJvZHVjdGlvbiBidWlsZC4nKTtcbn1cblxuZXhwb3J0cy5jcmVhdGVTdG9yZSA9IF9jcmVhdGVTdG9yZTJbJ2RlZmF1bHQnXTtcbmV4cG9ydHMuY29tYmluZVJlZHVjZXJzID0gX2NvbWJpbmVSZWR1Y2VyczJbJ2RlZmF1bHQnXTtcbmV4cG9ydHMuYmluZEFjdGlvbkNyZWF0b3JzID0gX2JpbmRBY3Rpb25DcmVhdG9yczJbJ2RlZmF1bHQnXTtcbmV4cG9ydHMuYXBwbHlNaWRkbGV3YXJlID0gX2FwcGx5TWlkZGxld2FyZTJbJ2RlZmF1bHQnXTtcbmV4cG9ydHMuY29tcG9zZSA9IF9jb21wb3NlMlsnZGVmYXVsdCddOyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHdhcm5pbmc7XG4vKipcbiAqIFByaW50cyBhIHdhcm5pbmcgaW4gdGhlIGNvbnNvbGUgaWYgaXQgZXhpc3RzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIFRoZSB3YXJuaW5nIG1lc3NhZ2UuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gd2FybmluZyhtZXNzYWdlKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbiAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5lcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gIH1cbiAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG4gIHRyeSB7XG4gICAgLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCBpZiB5b3UgZW5hYmxlXG4gICAgLy8gXCJicmVhayBvbiBhbGwgZXhjZXB0aW9uc1wiIGluIHlvdXIgY29uc29sZSxcbiAgICAvLyBpdCB3b3VsZCBwYXVzZSB0aGUgZXhlY3V0aW9uIGF0IHRoaXMgbGluZS5cbiAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgfSBjYXRjaCAoZSkge31cbiAgLyogZXNsaW50LWVuYWJsZSBuby1lbXB0eSAqL1xufSIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvaW5kZXgnKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9wb255ZmlsbCA9IHJlcXVpcmUoJy4vcG9ueWZpbGwnKTtcblxudmFyIF9wb255ZmlsbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb255ZmlsbCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIHJvb3Q7IC8qIGdsb2JhbCB3aW5kb3cgKi9cblxuXG5pZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSBzZWxmO1xufSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gd2luZG93O1xufSBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gZ2xvYmFsO1xufSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gbW9kdWxlO1xufSBlbHNlIHtcbiAgcm9vdCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG59XG5cbnZhciByZXN1bHQgPSAoMCwgX3BvbnlmaWxsMlsnZGVmYXVsdCddKShyb290KTtcbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHJlc3VsdDsiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHR2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzWydkZWZhdWx0J10gPSBzeW1ib2xPYnNlcnZhYmxlUG9ueWZpbGw7XG5mdW5jdGlvbiBzeW1ib2xPYnNlcnZhYmxlUG9ueWZpbGwocm9vdCkge1xuXHR2YXIgcmVzdWx0O1xuXHR2YXIgX1N5bWJvbCA9IHJvb3QuU3ltYm9sO1xuXG5cdGlmICh0eXBlb2YgX1N5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdGlmIChfU3ltYm9sLm9ic2VydmFibGUpIHtcblx0XHRcdHJlc3VsdCA9IF9TeW1ib2wub2JzZXJ2YWJsZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzdWx0ID0gX1N5bWJvbCgnb2JzZXJ2YWJsZScpO1xuXHRcdFx0X1N5bWJvbC5vYnNlcnZhYmxlID0gcmVzdWx0O1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRyZXN1bHQgPSAnQEBvYnNlcnZhYmxlJztcblx0fVxuXG5cdHJldHVybiByZXN1bHQ7XG59OyIsImltcG9ydCBNaWRpQWN0aW9uIGZyb20gJy4uL2FjdGlvbnMvbWlkaS1hY3Rpb25zJztcbmltcG9ydCB7IE1pZGlNZXNzYWdlcyB9IGZyb20gJy4uL2NvbnN0YW50cy9taWRpLW1lc3NhZ2VzJztcbmltcG9ydCB7IE1pZGlVdGlscyB9IGZyb20gJy4uL3V0aWxzL21pZGknO1xuaW1wb3J0IHsgQXVkaW9VdGlscyB9IGZyb20gJy4uL3V0aWxzL2F1ZGlvJztcblxuZXhwb3J0IGZ1bmN0aW9uIHRlc3RCdXR0b25BY3Rpb24oKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcbiAgICBsZXQgbWVzc2FnZSA9ICdjbGlja2VkJztcblxuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IE1pZGlBY3Rpb24uVEVTVF9BQ1RJT04sXG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIG1lc3NhZ2VcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vdGVPbihldmVudCwgbWVzc2FnZSkge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGxldCBkYXRhLCBzdGF0ZSwgbm90ZXMsIG5vdGUsIGFjO1xuXG4gICAgZGF0YSAgPSBldmVudC5kYXRhO1xuICAgIHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBub3RlcyA9IHN0YXRlLm1pZGkubm90ZXM7XG4gICAgbm90ZSAgPSBNaWRpVXRpbHMuZ2V0Tm90ZShldmVudCk7XG4gICAgYWMgICAgPSBzdGF0ZS5taWRpLmF1ZGlvQ29udGV4dDtcblxuICAgIG5vdGVzW25vdGVdID0gQXVkaW9VdGlscy5nZW5lcmF0ZU9zY2lsbGF0b3Iobm90ZSwgYWMpO1xuICAgIG5vdGVzW25vdGVdLnN0YXJ0KCk7XG5cbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBNaWRpQWN0aW9uLk5PVEVfT04sXG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIG5vdGVzXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3RlT2ZmKGV2ZW50LCBtZXNzYWdlKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgbGV0IGRhdGEsIHN0YXRlLCBub3Rlcywgbm90ZTtcblxuICAgIGRhdGEgID0gZXZlbnQuZGF0YTtcbiAgICBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgbm90ZXMgPSBzdGF0ZS5taWRpLm5vdGVzO1xuICAgIG5vdGUgID0gTWlkaVV0aWxzLmdldE5vdGUoZXZlbnQpO1xuXG4gICAgbm90ZXNbbm90ZV0uc3RvcCgpO1xuICAgIG5vdGVzW25vdGVdLmRpc2Nvbm5lY3QoKTtcblxuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IE1pZGlBY3Rpb24uTk9URV9PRkYsXG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIG5vdGVzXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb250cm9sbGVyKGV2ZW50LCBtZXNzYWdlKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gpID0+IHtcblxuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IE1pZGlBY3Rpb24uQ09OVFJPTExFUixcbiAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgbWVzc2FnZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgTWlkaU1lc3NhZ2VzIH0gZnJvbSAnLi4vY29uc3RhbnRzL21pZGktbWVzc2FnZXMnO1xuaW1wb3J0IHsgTWlkaVV0aWxzIH0gZnJvbSAnLi4vdXRpbHMvbWlkaSc7XG5pbXBvcnQgKiBhcyBNaWRpRXZlbnRzIGZyb20gJy4uL2FjdGlvbi1jcmVhdG9ycy9taWRpLWV2ZW50cy1hY3Rpb24tY3JlYXRvcnMnO1xuXG5leHBvcnQgZnVuY3Rpb24gbWlkaU1lc3NhZ2UoZXZlbnQpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBsZXQgbWlkaU1lc3NhZ2UsIG1lc3NhZ2U7XG5cbiAgICBtaWRpTWVzc2FnZSA9IE1pZGlVdGlscy5nZXRFdmVudFR5cGUoZXZlbnQpO1xuICAgIG1lc3NhZ2UgPSBNaWRpTWVzc2FnZXNbbWlkaU1lc3NhZ2VdO1xuXG4gICAgZGlzcGF0Y2goTWlkaUV2ZW50c1ttZXNzYWdlXShldmVudCwgbWVzc2FnZSkpO1xuICB9O1xufVxuIiwiaW1wb3J0IE1pZGlDb25uZWN0IGZyb20gJy4uL2FjdGlvbnMvbWlkaS1jb25uZWN0JztcbmltcG9ydCAqIGFzIE1pZGlNZXNzYWdlcyBmcm9tICcuLi9hY3Rpb24tY3JlYXRvcnMvbWlkaS1tZXNzYWdlcy1hY3Rpb24tY3JlYXRvcnMnO1xuaW1wb3J0IHsgYmluZEFjdGlvbkNyZWF0b3JzIH0gZnJvbSAncmVkdXgnO1xuXG5leHBvcnQgZnVuY3Rpb24gbWlkaVN1Y2Nlc3MobWlkaUFjY2Vzcykge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGxldCBpbnB1dHMsIHN0YXRlLCBtaWRpTWVzc2FnZXMsIGlucHV0LCBnYWluTm9kZTtcblxuICAgIGlucHV0cyA9IG1pZGlBY2Nlc3MuaW5wdXRzLnZhbHVlcygpO1xuICAgIHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBnYWluTm9kZSA9IHN0YXRlLm1pZGkuYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgICBnYWluTm9kZS5jb25uZWN0KHN0YXRlLm1pZGkuYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uKTtcblxuICAgIG1pZGlNZXNzYWdlcyA9IGJpbmRBY3Rpb25DcmVhdG9ycyhNaWRpTWVzc2FnZXMsIGRpc3BhdGNoKTtcblxuICAgIGZvcihpbnB1dCA9IGlucHV0cy5uZXh0KCk7IGlucHV0ICYmICFpbnB1dC5kb25lOyBpbnB1dCA9IGlucHV0cy5uZXh0KCkpIHtcbiAgICAgIGlucHV0LnZhbHVlLm9ubWlkaW1lc3NhZ2UgPSBtaWRpTWVzc2FnZXMubWlkaU1lc3NhZ2U7XG4gICAgfVxuXG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogTWlkaUNvbm5lY3QuTUlESV9TVUNDRVNTLFxuICAgICAgcGF5bG9hZDoge1xuICAgICAgICBtZXNzYWdlOiAnQ29ubmVjdGVkJyxcbiAgICAgICAgbWlkaUFjY2VzcyxcbiAgICAgICAgaW5wdXRzLFxuICAgICAgICBnYWluTm9kZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWlkaUZhaWx1cmUobWlkaUFjY2Vzcykge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogTWlkaUNvbm5lY3QuTUlESV9GQUlMVVJFLFxuICAgICAgcGF5bG9hZDoge1xuICAgICAgICBtZXNzYWdlOiAnRmFpbCdcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoe1xuICBDT05UUk9MTEVSOiAgICAgICAgICAnY29udHJvbGxlcicsXG4gIElOU1RSVU1FTlRfTkFNRTogICAgICdpbnN0cnVtZW50TmFtZScsXG4gIE5PVEVfT0ZGOiAgICAgICAgICAgICdub3RlT2ZmJyxcbiAgTk9URV9PTjogICAgICAgICAgICAgJ25vdGVPbicsXG4gIFBST0dSQU1fQ0hBTkdFOiAgICAgICdwcm9ncmFtQ2hhbmdlJyxcbiAgU1lTX0VYOiAgICAgICAgICAgICAgJ3N5c0V4JyxcbiAgVEVTVF9BQ1RJT046ICAgICAgICAgJ3Rlc3RBY3Rpb24nXG59KTtcbiIsImV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoe1xuICBNSURJX1NVQ0NFU1M6ICdtaWRpU3VjY2VzcycsXG4gIE1JRElfRkFJTFVSRTogJ21pZGlGYWlsdXJlJyxcbiAgTUlESV9NRVNTQUdFOiAnbWlkaU1lc3NhZ2UnXG59KTtcbiIsImV4cG9ydCBjb25zdCBNaWRpSW5mbyA9IHtcbiAgaW5pdChzdG9yZT17fSwgbWlkaUV2ZW50c0FjdGlvbnM9e30pIHtcbiAgICB0aGlzLnN0b3JlICAgICAgID0gc3RvcmU7XG4gICAgdGhpcy5tZXNzYWdlSW5mbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaWRpLWluZm8nKTtcbiAgICB0aGlzLnRlc3RCdXR0b24gID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rlc3QtYnV0dG9uJyk7XG4gICAgdGhpcy50ZXN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbWlkaUV2ZW50c0FjdGlvbnMudGVzdEJ1dHRvbkFjdGlvbik7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfSxcblxuICByZW5kZXIoKSB7XG4gICAgbGV0IHN0b3JlID0gdGhpcy5zdG9yZTtcbiAgICBsZXQgbWVzc2FnZUluZm8gPSB0aGlzLm1lc3NhZ2VJbmZvO1xuXG4gICAgc3RvcmUuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIG1lc3NhZ2VJbmZvLmlubmVySFRNTCA9IG1lc3NhZ2VJbmZvID9cbiAgICAgICAgc3RvcmUuZ2V0U3RhdGUoKS5taWRpLm1lc3NhZ2VcbiAgICAgICAgOiAnTm8gTWVzc2FnZSc7XG4gICAgfSk7XG4gIH1cbn07XG4iLCJleHBvcnQgY29uc3QgTWlkaU1lc3NhZ2VzSGV4ID0gT2JqZWN0LmZyZWV6ZSh7XG4gIFNFUVVFTkNFX05VTUJFUjogMHgwMCxcbiAgVEVYVDogICAgICAgICAgICAweDAxLFxuICBJTlNUUlVNRU5UX05BTUU6IDB4MDQsXG4gIE5PVEVfT0ZGOiAgICAgICAgMHg4MCxcbiAgTk9URV9PTjogICAgICAgICAweDkwLFxuICBQUk9HUkFNX0NIQU5HRTogIDB4QzAsXG4gIENPTlRST0xMRVI6ICAgICAgMHhCMFxufSk7XG4iLCJleHBvcnQgY29uc3QgTWlkaU1lc3NhZ2VzID0gT2JqZWN0LmZyZWV6ZSh7XG4gIDB4MDA6ICdzZXF1ZW5jZU51bWJlcicsXG4gIDB4MDE6ICd0ZXh0JyxcbiAgMHgwNDogJ2luc3RydW1lbnROYW1lJyxcbiAgMHg4MDogJ25vdGVPZmYnLFxuICAweDkwOiAnbm90ZU9uJyxcbiAgMHhDMDogJ3Byb2dyYW1DaGFuZ2UnLFxuICAweEIwOiAnY29udHJvbGxlcicsXG59KTtcbiIsImltcG9ydCB7IGNvbWJpbmVSZWR1Y2VycyB9IGZyb20gJ3JlZHV4JztcblxuaW1wb3J0IG1pZGkgZnJvbSAnLi4vcmVkdWNlcnMvbWlkaS1yZWR1Y2VyJztcblxuY29uc3Qgcm9vdFJlZHVjZXIgPSBjb21iaW5lUmVkdWNlcnMoe1xuICBtaWRpXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgcm9vdFJlZHVjZXI7XG4iLCJpbXBvcnQgTUlESUFjdGlvbiBmcm9tICcuLi9hY3Rpb25zL21pZGktYWN0aW9ucy5qcyc7XG5pbXBvcnQgTUlESUNvbm5lY3QgZnJvbSAnLi4vYWN0aW9ucy9taWRpLWNvbm5lY3QuanMnO1xuXG5jb25zdCBpbml0aWFsU3RhdGUgPSB7XG4gIG1lc3NhZ2U6ICdOb25lJyxcbiAgbWlkaUFjY2VzczogbnVsbCxcbiAgaW5wdXRzOiBbXSxcbiAgZGF0YTogbnVsbCxcbiAgYXVkaW9Db250ZXh0OiBuZXcgQXVkaW9Db250ZXh0KCksXG4gIGdhaW5Ob2RlOiBudWxsLFxuICBub3Rlczoge31cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1JRElFdmVudHNSZWR1Y2VyKHN0YXRlPWluaXRpYWxTdGF0ZSwgYWN0aW9uKSB7XG4gIGNvbnN0IHsgdHlwZSwgcGF5bG9hZCB9ID0gYWN0aW9uO1xuICBjb25zb2xlLmxvZygnUkVEVUNFUicsIHBheWxvYWQpO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIE1JRElBY3Rpb24uTk9URV9PTjpcbiAgICBjYXNlIE1JRElBY3Rpb24uTk9URV9PRkY6XG4gICAgY2FzZSBNSURJQWN0aW9uLlBST0dSQU1fQ0hBTkdFOlxuICAgIGNhc2UgTUlESUFjdGlvbi5JTlNUUlVNRU5UX05BTUU6XG4gICAgY2FzZSBNSURJQWN0aW9uLkNPTlRST0xMRVI6XG4gICAgY2FzZSBNSURJQWN0aW9uLlNZU19FWDpcbiAgICBjYXNlIE1JRElBY3Rpb24uVEVTVF9BQ1RJT046XG4gICAgY2FzZSBNSURJQ29ubmVjdC5NSURJX1NVQ0NFU1M6XG4gICAgY2FzZSBNSURJQ29ubmVjdC5NSURJX0ZBSUxVUkU6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgLi4ucGF5bG9hZFxuICAgICAgfTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVTdG9yZSwgYXBwbHlNaWRkbGV3YXJlLCBjb21wb3NlIH0gZnJvbSAncmVkdXgnO1xuaW1wb3J0IHRodW5rTWlkZGxld2FyZSBmcm9tICdyZWR1eC10aHVuayc7XG5pbXBvcnQgcm9vdFJlZHVjZXIgZnJvbSAnLi4vcmVkdWNlcnMvaW5kZXgnO1xuXG5jb25zdCBjb21wb3NlRW5oYW5jZXJzID0gd2luZG93Ll9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX0NPTVBPU0VfXyB8fCBjb21wb3NlO1xuY29uc3QgbWlkZGxld2FyZSA9IGNvbXBvc2VFbmhhbmNlcnMoYXBwbHlNaWRkbGV3YXJlKHRodW5rTWlkZGxld2FyZSkpO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb25maWd1cmVTdG9yZShpbml0aWFsU3RhdGUpIHtcbiAgcmV0dXJuIGNyZWF0ZVN0b3JlKFxuICAgIHJvb3RSZWR1Y2VyLFxuICAgIGluaXRpYWxTdGF0ZSxcbiAgICBtaWRkbGV3YXJlXG4gICk7XG59XG4iLCJleHBvcnQgY29uc3QgQXVkaW9VdGlscyA9IE9iamVjdC5mcmVlemUoe1xuICBnZXRGcmVxdWVuY3kobm90ZSkge1xuICAgIGNvbnN0XG4gICAgICBMQV9IWiAgPSA0NDAsXG4gICAgICBMQV9ERUMgPSA2OSxcbiAgICAgIE9DVEFWRSA9IDEyXG4gICAgO1xuXG4gICAgcmV0dXJuIExBX0haICogTWF0aC5wb3coMiwgKG5vdGUgLSBMQV9ERUMpIC8gT0NUQVZFKTtcbiAgfSxcbiAgZ2VuZXJhdGVPc2NpbGxhdG9yKG5vdGUsIGF1ZGlvQ29udGV4dCkge1xuICAgIGxldFxuICAgICAgb3NjaWxsYXRvciAgID0gYXVkaW9Db250ZXh0LmNyZWF0ZU9zY2lsbGF0b3IoKSxcbiAgICAgIGZyZXF1ZW5jeSAgICA9IHRoaXMuZ2V0RnJlcXVlbmN5KG5vdGUpXG4gICAgO1xuXG4gICAgb3NjaWxsYXRvci50eXBlID0gJ3NxdWFyZSc7XG4gICAgb3NjaWxsYXRvci5jb25uZWN0KGF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgb3NjaWxsYXRvci5mcmVxdWVuY3kudmFsdWUgPSBmcmVxdWVuY3k7XG5cbiAgICByZXR1cm4gb3NjaWxsYXRvcjtcbiAgfVxufSk7XG4iLCIvKmpzbGludCBiaXR3aXNlOiB0cnVlICovXG5cbmltcG9ydCB7IE1pZGlNZXNzYWdlc0hleCB9IGZyb20gJy4uL2NvbnN0YW50cy9taWRpLW1lc3NhZ2VzLWhleCc7XG5cbmV4cG9ydCBjb25zdCBNaWRpVXRpbHMgPSBPYmplY3QuZnJlZXplKHtcbiAgZ2V0VHlwZShldmVudCkge1xuICAgIHJldHVybiBldmVudC5kYXRhWzBdO1xuICB9LFxuICBnZXROb3RlKGV2ZW50KSB7XG4gICAgcmV0dXJuIGV2ZW50LmRhdGFbMV07XG4gIH0sXG4gIGdldE5vdGVWZWxvY2l0eShldmVudCkge1xuICAgIHJldHVybiBldmVudC5kYXRhWzJdO1xuICB9LFxuICBnZXRFdmVudFR5cGUoZXZlbnQpIHtcbiAgICByZXR1cm4gdGhpcy5pc05vdGVPbk9mZihldmVudCkgP1xuICAgICAgTWlkaU1lc3NhZ2VzSGV4Lk5PVEVfT0ZGICYgMHhmMFxuICAgICAgOiB0aGlzLmdldFR5cGUoZXZlbnQpICYgMHhmMDtcbiAgfSxcbiAgaXNOb3RlT25PZmYoZXZlbnQpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRUeXBlKGV2ZW50KSA9PT0gTWlkaU1lc3NhZ2VzSGV4Lk5PVEVfT04gJiZcbiAgICAgIHRoaXMuZ2V0Tm90ZVZlbG9jaXR5KGV2ZW50KSA9PT0gMDtcbiAgfVxufSk7XG4iXX0=\n"]}