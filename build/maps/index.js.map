{"version":3,"sources":["index.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","default","_configureStore","_configureStore2","_midiPiano","_midiInstrumentsSelector","_midiAudioSelector","_midiEventsActionCreators","MidiEvents","_midiSetupActionCreators","MidiSetup","_redux","store","midiSetupActions","bindActionCreators","dispatch","midiEventsActions","MidiPiano","init","MidiInstrumentsSelector","MidiAudioSelector","loadSoundfontInstrument","navigator","requestMIDIAccess","sysex","then","midiSuccess","./src/action-creators/midi-events-action-creators","./src/action-creators/midi-setup-action-creators","./src/components/midi-audio-selector","./src/components/midi-instruments-selector","./src/components/midi-piano","./src/store/configureStore","redux","2","ADSR","audioContext","node","createGain","voltage","_voltage","getVoltage","value","scale","startValue","endValue","_startAmount","_endAmount","_multiplier","connect","gain","defineProperties","props","context","createBufferSource","buffer","createBuffer","sampleRate","getChannelData","set","flat","loop","getTimeConstant","time","Math","log","getValue","start","end","fromTime","toTime","at","difference","truncateTime","phase","attack","writable","decay","sustain","release","getReleaseDuration","this","target","startAmount","endAmount","_decayFrom","_startedAt","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","setTargetAtTime","stop","isTarget","endTime","expFalloff","valueAtTime","onended","get","Float32Array","3","b64ToUint6","nChr","decode","sBase64","nBlocksSize","nMod3","nMod4","sB64Enc","replace","nInLen","nOutLen","ceil","taBytes","Uint8Array","nUint24","nOutIdx","nInIdx","charCodeAt","4","url","type","Promise","done","reject","req","XMLHttpRequest","responseType","open","onload","status","response","statusText","onerror","send","5","fromRegex","test","prefix","pre","name","load","ac","source","options","defVal","loader","isArrayBuffer","loadArrayBuffer","isAudioFileName","loadAudioFile","isPromise","loadPromise","isArray","loadArrayData","isObject","loadObjectData","isJsonFileName","loadJsonFile","isBase64Audio","loadBase64Audio","isJsFileName","loadMidiJSFile","opts","resolve","ArrayBuffer","array","decodeAudioData","slice","from","fetch","promise","all","map","data","dest","promises","keys","only","indexOf","audio","JSON","parse","base64","midiJsToJson","begin","lastIndexOf","Array","window","loadAudio","./base64","./fetch","6","root","Symbol","./_root","7","baseGetTag","undefined","undefinedTag","nullTag","symToStringTag","getRawTag","objectToString","toStringTag","./_Symbol","./_getRawTag","./_objectToString","8","global","freeGlobal","self","9","overArg","getPrototype","getPrototypeOf","./_overArg","10","isOwn","tag","result","nativeObjectToString","objectProto","toString","11","12","func","transform","arg","13","freeSelf","Function","./_freeGlobal","14","isObjectLike","15","isPlainObject","objectTag","proto","Ctor","constructor","funcToString","objectCtorString","funcProto","./_baseGetTag","./_getPrototype","./isObjectLike","16","define","amd","midimessage","h","c","defineProperty","_event","_data","receivedTime","console","warn","_messageCode","channel","messageType","velocity","pressure","controllerNumber","controllerValue","channelModeMessage","program","pitchBend","17","NoteParser","join","pow","b","exec","letter","toUpperCase","acc","pc","step","alt","A","chroma","oct","midi","freq","tonicOf","C","charAt","p","d","m","v","g","x","y","regex","build","18","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","len","run","Item","noop","process","nextTick","args","arguments","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","cwd","chdir","dir","umask","19","createThunkMiddleware","extraArgument","_ref","getState","next","action","thunk","withExtraArgument","20","applyMiddleware","_len","middlewares","_key","createStore","reducer","preloadedState","enhancer","_dispatch","chain","middlewareAPI","middleware","_compose2","_extends","assign","_compose","./compose","21","bindActionCreator","actionCreator","actionCreators","boundActionCreators","22","_interopRequireDefault","getUndefinedStateErrorMessage","actionType","getUnexpectedStateShapeWarningMessage","inputState","reducers","unexpectedKeyCache","reducerKeys","argumentName","_createStore","ActionTypes","INIT","_isPlainObject2","match","unexpectedKeys","filter","forEach","assertReducerSanity","random","substring","split","combineReducers","finalReducers","NODE_ENV","_warning2","finalReducerKeys","sanityError","state","warningMessage","hasChanged","nextState","previousStateForKey","nextStateForKey","errorMessage","_isPlainObject","_warning","./createStore","./utils/warning","_process","lodash/isPlainObject","23","compose","funcs","last","rest","reduceRight","composed","24","ensureCanMutateNextListeners","nextListeners","currentListeners","currentState","subscribe","listener","isSubscribed","index","splice","isDispatching","currentReducer","listeners","replaceReducer","nextReducer","observable","outerSubscribe","observer","observeState","TypeError","unsubscribe","_symbolObservable2","_ref2","_symbolObservable","symbol-observable","25","isCrushed","_createStore2","_combineReducers","_combineReducers2","_bindActionCreators","_bindActionCreators2","_applyMiddleware","_applyMiddleware2","./applyMiddleware","./bindActionCreators","./combineReducers","26","warning","message","error","27","fn1","fn2","player","event","cb","prop","old","28","SamplePlayer","scheduler","notes","events","./events","./midi","./notes","./player","./scheduler","29","listenToMidi","input","started","vel","onmidimessage","msg","mm","play","30","mapBuffers","buffers","toKey","reduce","mapped","note","isMidi","toMidi","mapper","when","dec","floor","cents","note-parser","31","track","id","nextId","tracked","now","currentTime","disconnect","createNode","out","envelope","playbackRate","centsToRate","loopStart","loopEnd","stopAt","connected","DEFAULTS","AudioBuffer","EMPTY","max","duration","ids","onevent","fn","isNum","adsr","PARAMS","32","isArr","isObj","OPTS","schedule","33","REGEX","str","isTonic","tuning","SEMITONES","midiToFreq","parser","src","34","instrument","isUrl","isSoundfontURL","toUrl","nameToUrl","soundfont","format","destination","sf","Soundfont","./legacy","audio-loader","sample-player","35","ctx","instruments","loadBuffers","inst","oscillatorPlayer","defaultOptions","vcoType","vco","createOscillator","frequency","vca","onready","callback","noteToMidi","36","./lib/index","37","_ponyfill","_ponyfill2","./ponyfill","38","symbolObservablePonyfill","_Symbol","39","noteOn","_midi","MidiUtils","setNoteOnMessage","getNote","settings","webApiAudio","_audio","AudioUtils","generateOscillator","soundfontInstrument","_midiActions2","NOTE_ON","payload","noteOff","setNoteOffMessage","NOTE_OFF","controller","gainNode","CONTROLLER","_midiActions","../actions/midi-actions","../utils/audio","../utils/midi","40","midiMessage","getEventType","_midiMessages","MidiMessages","../action-creators/midi-events-action-creators","../constants/midi-messages","41","midiAccess","inputs","midiMessages","values","_midiConnect2","MIDI_SUCCESS","midiFailure","MIDI_FAILURE","_this","instrumentPath","_getInstrumentPath","_soundfontPlayer2","MIDI_LOAD_INSTRUMENT","changeAudio","CHANGE_AUDIO","_midiSoundpaths","SOUNDS_PATH","SOUNDS_FILETYPE","SOUNDS_FILE_EXTENSION","_midiConnect","_soundfontPlayer","_midiMessagesActionCreators","../action-creators/midi-messages-action-creators","../actions/midi-connect","../constants/midi-soundpaths","soundfont-player","42","freeze","INSTRUMENT_NAME","PROGRAM_CHANGE","SYS_EX","43","MIDI_MESSAGE","44","audioSelectors","document","getElementById","selector","addEventListener","bind","render","45","_addInstrumentOptions","instrumentOption","_midiInstruments","MIDIInstruments","createElement","text","instrumentSelector","appendChild","loadInstrument","classList","add","remove","../constants/midi-instruments","46","_initKeyElements","_this2","noteNumber","setAttribute","_togglePlayingNote","getElementsByClassName","47","0","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","MidiMessagesHex","SEQUENCE_NUMBER","TEXT","128","144","192","176","InstrumentSets","MUSYNG_KITE","FLUID_R3_GM","InstrumentPathConfig","URL","PORT","SET","URL_GITHUB","_midiReducer","_midiReducer2","_settingsReducer","_settingsReducer2","rootReducer","../reducers/midi-reducer","../reducers/settings-reducer","MIDIEventsReducer","initialState","AudioContext","webkitAudioContext","../actions/midi-actions.js","../actions/midi-connect.js","configureStore","_index2","_reduxThunk","_reduxThunk2","_index","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","../reducers/index","redux-thunk","getFrequency","oscillator","_midiMessagesHex","getType","getNoteVelocity","isNoteOnOff","getAttribute","../constants/midi-messages-hex"],"mappings":"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","file":"../index.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _configureStore = require('./src/store/configureStore');\n\nvar _configureStore2 = _interopRequireDefault(_configureStore);\n\nvar _midiPiano = require('./src/components/midi-piano');\n\nvar _midiInstrumentsSelector = require('./src/components/midi-instruments-selector');\n\nvar _midiAudioSelector = require('./src/components/midi-audio-selector');\n\nvar _midiEventsActionCreators = require('./src/action-creators/midi-events-action-creators');\n\nvar MidiEvents = _interopRequireWildcard(_midiEventsActionCreators);\n\nvar _midiSetupActionCreators = require('./src/action-creators/midi-setup-action-creators');\n\nvar MidiSetup = _interopRequireWildcard(_midiSetupActionCreators);\n\nvar _redux = require('redux');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar store = (0, _configureStore2.default)();\nvar midiSetupActions = (0, _redux.bindActionCreators)(MidiSetup, store.dispatch);\nvar midiEventsActions = (0, _redux.bindActionCreators)(MidiEvents, store.dispatch);\n\n_midiPiano.MidiPiano.init(store, midiEventsActions);\n_midiInstrumentsSelector.MidiInstrumentsSelector.init(store, midiSetupActions);\n_midiAudioSelector.MidiAudioSelector.init(store, midiSetupActions);\n\nmidiSetupActions.loadSoundfontInstrument('acoustic_grand_piano');\n\nif (navigator.requestMIDIAccess) {\n  navigator.requestMIDIAccess({ sysex: false }).then(midiSetupActions.midiSuccess);\n}\n\n},{\"./src/action-creators/midi-events-action-creators\":39,\"./src/action-creators/midi-setup-action-creators\":41,\"./src/components/midi-audio-selector\":44,\"./src/components/midi-instruments-selector\":45,\"./src/components/midi-piano\":46,\"./src/store/configureStore\":54,\"redux\":25}],2:[function(require,module,exports){\nmodule.exports = ADSR\n\nfunction ADSR(audioContext){\n  var node = audioContext.createGain()\n\n  var voltage = node._voltage = getVoltage(audioContext)\n  var value = scale(voltage)\n  var startValue = scale(voltage)\n  var endValue = scale(voltage)\n\n  node._startAmount = scale(startValue)\n  node._endAmount = scale(endValue)\n\n  node._multiplier = scale(value)\n  node._multiplier.connect(node)\n  node._startAmount.connect(node)\n  node._endAmount.connect(node)\n\n  node.value = value.gain\n  node.startValue = startValue.gain\n  node.endValue = endValue.gain\n\n  node.startValue.value = 0\n  node.endValue.value = 0\n\n  Object.defineProperties(node, props)\n  return node\n}\n\nvar props = {\n\n  attack: { value: 0, writable: true },\n  decay: { value: 0, writable: true },\n  sustain: { value: 1, writable: true },\n  release: {value: 0, writable: true },\n\n  getReleaseDuration: {\n    value: function(){\n      return this.release\n    }\n  },\n\n  start: {\n    value: function(at){\n      var target = this._multiplier.gain\n      var startAmount = this._startAmount.gain\n      var endAmount = this._endAmount.gain\n\n      this._voltage.start(at)\n      this._decayFrom = this._decayFrom = at+this.attack\n      this._startedAt = at\n\n      var sustain = this.sustain\n\n      target.cancelScheduledValues(at)\n      startAmount.cancelScheduledValues(at)\n      endAmount.cancelScheduledValues(at)\n\n      endAmount.setValueAtTime(0, at)\n\n      if (this.attack){\n        target.setValueAtTime(0, at)\n        target.linearRampToValueAtTime(1, at + this.attack)\n\n        startAmount.setValueAtTime(1, at)\n        startAmount.linearRampToValueAtTime(0, at + this.attack)\n      } else {\n        target.setValueAtTime(1, at)\n        startAmount.setValueAtTime(0, at)\n      }\n\n      if (this.decay){\n        target.setTargetAtTime(sustain, this._decayFrom, getTimeConstant(this.decay))\n      }\n    }\n  },\n\n  stop: {\n    value: function(at, isTarget){\n      if (isTarget){\n        at = at - this.release\n      }\n\n      var endTime = at + this.release\n      if (this.release){\n\n        var target = this._multiplier.gain\n        var startAmount = this._startAmount.gain\n        var endAmount = this._endAmount.gain\n\n        target.cancelScheduledValues(at)\n        startAmount.cancelScheduledValues(at)\n        endAmount.cancelScheduledValues(at)\n\n        var expFalloff = getTimeConstant(this.release)\n\n        // truncate attack (required as linearRamp is removed by cancelScheduledValues)\n        if (this.attack && at < this._decayFrom){\n          var valueAtTime = getValue(0, 1, this._startedAt, this._decayFrom, at)\n          target.linearRampToValueAtTime(valueAtTime, at)\n          startAmount.linearRampToValueAtTime(1-valueAtTime, at)\n          startAmount.setTargetAtTime(0, at, expFalloff)\n        }\n\n        endAmount.setTargetAtTime(1, at, expFalloff)\n        target.setTargetAtTime(0, at, expFalloff)\n      }\n\n      this._voltage.stop(endTime)\n      return endTime\n    }\n  },\n\n  onended: {\n    get: function(){\n      return this._voltage.onended\n    },\n    set: function(value){\n      this._voltage.onended = value\n    }\n  }\n\n}\n\nvar flat = new Float32Array([1,1])\nfunction getVoltage(context){\n  var voltage = context.createBufferSource()\n  var buffer = context.createBuffer(1, 2, context.sampleRate)\n  buffer.getChannelData(0).set(flat)\n  voltage.buffer = buffer\n  voltage.loop = true\n  return voltage\n}\n\nfunction scale(node){\n  var gain = node.context.createGain()\n  node.connect(gain)\n  return gain\n}\n\nfunction getTimeConstant(time){\n  return Math.log(time+1)/Math.log(100)\n}\n\nfunction getValue(start, end, fromTime, toTime, at){\n  var difference = end - start\n  var time = toTime - fromTime\n  var truncateTime = at - fromTime\n  var phase = truncateTime / time\n  var value = start + phase * difference\n\n  if (value <= start) {\n      value = start\n  }\n  if (value >= end) {\n      value = end\n  }\n\n  return value\n}\n\n},{}],3:[function(require,module,exports){\n'use strict'\n\n// DECODE UTILITIES\nfunction b64ToUint6 (nChr) {\n  return nChr > 64 && nChr < 91 ? nChr - 65\n    : nChr > 96 && nChr < 123 ? nChr - 71\n    : nChr > 47 && nChr < 58 ? nChr + 4\n    : nChr === 43 ? 62\n    : nChr === 47 ? 63\n    : 0\n}\n\n// Decode Base64 to Uint8Array\n// ---------------------------\nfunction decode (sBase64, nBlocksSize) {\n  var sB64Enc = sBase64.replace(/[^A-Za-z0-9\\+\\/]/g, '')\n  var nInLen = sB64Enc.length\n  var nOutLen = nBlocksSize\n    ? Math.ceil((nInLen * 3 + 1 >> 2) / nBlocksSize) * nBlocksSize\n    : nInLen * 3 + 1 >> 2\n  var taBytes = new Uint8Array(nOutLen)\n\n  for (var nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) {\n    nMod4 = nInIdx & 3\n    nUint24 |= b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << 18 - 6 * nMod4\n    if (nMod4 === 3 || nInLen - nInIdx === 1) {\n      for (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) {\n        taBytes[nOutIdx] = nUint24 >>> (16 >>> nMod3 & 24) & 255\n      }\n      nUint24 = 0\n    }\n  }\n  return taBytes\n}\n\nmodule.exports = { decode: decode }\n\n},{}],4:[function(require,module,exports){\n/* global XMLHttpRequest */\n'use strict'\n\n/**\n * Given a url and a return type, returns a promise to the content of the url\n * Basically it wraps a XMLHttpRequest into a Promise\n *\n * @param {String} url\n * @param {String} type - can be 'text' or 'arraybuffer'\n * @return {Promise}\n */\nmodule.exports = function (url, type) {\n  return new Promise(function (done, reject) {\n    var req = new XMLHttpRequest()\n    if (type) req.responseType = type\n\n    req.open('GET', url)\n    req.onload = function () {\n      req.status === 200 ? done(req.response) : reject(Error(req.statusText))\n    }\n    req.onerror = function () { reject(Error('Network Error')) }\n    req.send()\n  })\n}\n\n},{}],5:[function(require,module,exports){\n'use strict'\n\nvar base64 = require('./base64')\nvar fetch = require('./fetch')\n\n// Given a regex, return a function that test if against a string\nfunction fromRegex (r) {\n  return function (o) { return typeof o === 'string' && r.test(o) }\n}\n// Try to apply a prefix to a name\nfunction prefix (pre, name) {\n  return typeof pre === 'string' ? pre + name\n    : typeof pre === 'function' ? pre(name)\n    : name\n}\n\n/**\n * Load one or more audio files\n *\n *\n * Possible option keys:\n *\n * - __from__ {Function|String}: a function or string to convert from file names to urls.\n * If is a string it will be prefixed to the name:\n * `load(ac, 'snare.mp3', { from: 'http://audio.net/samples/' })`\n * If it's a function it receives the file name and should return the url as string.\n * - __only__ {Array} - when loading objects, if provided, only the given keys\n * will be included in the decoded object:\n * `load(ac, 'piano.json', { only: ['C2', 'D2'] })`\n *\n * @param {AudioContext} ac - the audio context\n * @param {Object} source - the object to be loaded\n * @param {Object} options - (Optional) the load options for that object\n * @param {Object} defaultValue - (Optional) the default value to return as\n * in a promise if not valid loader found\n */\nfunction load (ac, source, options, defVal) {\n  var loader =\n    // Basic audio loading\n      isArrayBuffer(source) ? loadArrayBuffer\n    : isAudioFileName(source) ? loadAudioFile\n    : isPromise(source) ? loadPromise\n    // Compound objects\n    : isArray(source) ? loadArrayData\n    : isObject(source) ? loadObjectData\n    : isJsonFileName(source) ? loadJsonFile\n    // Base64 encoded audio\n    : isBase64Audio(source) ? loadBase64Audio\n    : isJsFileName(source) ? loadMidiJSFile\n    : null\n\n  var opts = options || {}\n  return loader ? loader(ac, source, opts)\n    : defVal ? Promise.resolve(defVal)\n    : Promise.reject('Source not valid (' + source + ')')\n}\nload.fetch = fetch\n\n// BASIC AUDIO LOADING\n// ===================\n\n// Load (decode) an array buffer\nfunction isArrayBuffer (o) { return o instanceof ArrayBuffer }\nfunction loadArrayBuffer (ac, array, options) {\n  return new Promise(function (done, reject) {\n    ac.decodeAudioData(array,\n      function (buffer) { done(buffer) },\n      function () { reject(\"Can't decode audio data (\" + array.slice(0, 30) + '...)') }\n    )\n  })\n}\n\n// Load an audio filename\nvar isAudioFileName = fromRegex(/\\.(mp3|wav|ogg)(\\?.*)?$/i)\nfunction loadAudioFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'arraybuffer'), options)\n}\n\n// Load the result of a promise\nfunction isPromise (o) { return o && typeof o.then === 'function' }\nfunction loadPromise (ac, promise, options) {\n  return promise.then(function (value) {\n    return load(ac, value, options)\n  })\n}\n\n// COMPOUND OBJECTS\n// ================\n\n// Try to load all the items of an array\nvar isArray = Array.isArray\nfunction loadArrayData (ac, array, options) {\n  return Promise.all(array.map(function (data) {\n    return load(ac, data, options, data)\n  }))\n}\n\n// Try to load all the values of a key/value object\nfunction isObject (o) { return o && typeof o === 'object' }\nfunction loadObjectData (ac, obj, options) {\n  var dest = {}\n  var promises = Object.keys(obj).map(function (key) {\n    if (options.only && options.only.indexOf(key) === -1) return null\n    var value = obj[key]\n    return load(ac, value, options, value).then(function (audio) {\n      dest[key] = audio\n    })\n  })\n  return Promise.all(promises).then(function () { return dest })\n}\n\n// Load the content of a JSON file\nvar isJsonFileName = fromRegex(/\\.json(\\?.*)?$/i)\nfunction loadJsonFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'text').then(JSON.parse), options)\n}\n\n// BASE64 ENCODED FORMATS\n// ======================\n\n// Load strings with Base64 encoded audio\nvar isBase64Audio = fromRegex(/^data:audio/)\nfunction loadBase64Audio (ac, source, options) {\n  var i = source.indexOf(',')\n  return load(ac, base64.decode(source.slice(i + 1)).buffer, options)\n}\n\n// Load .js files with MidiJS soundfont prerendered audio\nvar isJsFileName = fromRegex(/\\.js(\\?.*)?$/i)\nfunction loadMidiJSFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'text').then(midiJsToJson), options)\n}\n\n// convert a MIDI.js javascript soundfont file to json\nfunction midiJsToJson (data) {\n  var begin = data.indexOf('MIDI.Soundfont.')\n  if (begin < 0) throw Error('Invalid MIDI.js Soundfont format')\n  begin = data.indexOf('=', begin) + 2\n  var end = data.lastIndexOf(',')\n  return JSON.parse(data.slice(begin, end) + '}')\n}\n\nif (typeof module === 'object' && module.exports) module.exports = load\nif (typeof window !== 'undefined') window.loadAudio = load\n\n},{\"./base64\":3,\"./fetch\":4}],6:[function(require,module,exports){\nvar root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n\n},{\"./_root\":13}],7:[function(require,module,exports){\nvar Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n\n},{\"./_Symbol\":6,\"./_getRawTag\":10,\"./_objectToString\":11}],8:[function(require,module,exports){\n(function (global){\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],9:[function(require,module,exports){\nvar overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n\n},{\"./_overArg\":12}],10:[function(require,module,exports){\nvar Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n\n},{\"./_Symbol\":6}],11:[function(require,module,exports){\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n\n},{}],12:[function(require,module,exports){\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n\n},{}],13:[function(require,module,exports){\nvar freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n\n},{\"./_freeGlobal\":8}],14:[function(require,module,exports){\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n},{}],15:[function(require,module,exports){\nvar baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n\n},{\"./_baseGetTag\":7,\"./_getPrototype\":9,\"./isObjectLike\":14}],16:[function(require,module,exports){\n(function (global){\n(function(e){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=e()}else if(typeof define===\"function\"&&define.amd){define([],e)}else{var t;if(typeof window!==\"undefined\"){t=window}else if(typeof global!==\"undefined\"){t=global}else if(typeof self!==\"undefined\"){t=self}else{t=this}t.midimessage=e()}})(function(){var e,t,s;return function o(e,t,s){function a(n,i){if(!t[n]){if(!e[n]){var l=typeof require==\"function\"&&require;if(!i&&l)return l(n,!0);if(r)return r(n,!0);var h=new Error(\"Cannot find module '\"+n+\"'\");throw h.code=\"MODULE_NOT_FOUND\",h}var c=t[n]={exports:{}};e[n][0].call(c.exports,function(t){var s=e[n][1][t];return a(s?s:t)},c,c.exports,o,e,t,s)}return t[n].exports}var r=typeof require==\"function\"&&require;for(var n=0;n<s.length;n++)a(s[n]);return a}({1:[function(e,t,s){\"use strict\";Object.defineProperty(s,\"__esModule\",{value:true});s[\"default\"]=function(e){function t(e){this._event=e;this._data=e.data;this.receivedTime=e.receivedTime;if(this._data&&this._data.length<2){console.warn(\"Illegal MIDI message of length\",this._data.length);return}this._messageCode=e.data[0]&240;this.channel=e.data[0]&15;switch(this._messageCode){case 128:this.messageType=\"noteoff\";this.key=e.data[1]&127;this.velocity=e.data[2]&127;break;case 144:this.messageType=\"noteon\";this.key=e.data[1]&127;this.velocity=e.data[2]&127;break;case 160:this.messageType=\"keypressure\";this.key=e.data[1]&127;this.pressure=e.data[2]&127;break;case 176:this.messageType=\"controlchange\";this.controllerNumber=e.data[1]&127;this.controllerValue=e.data[2]&127;if(this.controllerNumber===120&&this.controllerValue===0){this.channelModeMessage=\"allsoundoff\"}else if(this.controllerNumber===121){this.channelModeMessage=\"resetallcontrollers\"}else if(this.controllerNumber===122){if(this.controllerValue===0){this.channelModeMessage=\"localcontroloff\"}else{this.channelModeMessage=\"localcontrolon\"}}else if(this.controllerNumber===123&&this.controllerValue===0){this.channelModeMessage=\"allnotesoff\"}else if(this.controllerNumber===124&&this.controllerValue===0){this.channelModeMessage=\"omnimodeoff\"}else if(this.controllerNumber===125&&this.controllerValue===0){this.channelModeMessage=\"omnimodeon\"}else if(this.controllerNumber===126){this.channelModeMessage=\"monomodeon\"}else if(this.controllerNumber===127){this.channelModeMessage=\"polymodeon\"}break;case 192:this.messageType=\"programchange\";this.program=e.data[1];break;case 208:this.messageType=\"channelpressure\";this.pressure=e.data[1]&127;break;case 224:this.messageType=\"pitchbendchange\";var t=e.data[2]&127;var s=e.data[1]&127;this.pitchBend=(t<<8)+s;break}}return new t(e)};t.exports=s[\"default\"]},{}]},{},[1])(1)});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],17:[function(require,module,exports){\n!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],n):n(t.NoteParser=t.NoteParser||{})}(this,function(t){\"use strict\";function n(t,n){return Array(n+1).join(t)}function r(t){return\"number\"==typeof t}function e(t){return\"string\"==typeof t}function u(t){return void 0!==t}function c(t,n){return Math.pow(2,(t-69)/12)*(n||440)}function o(){return b}function i(t,n,r){if(\"string\"!=typeof t)return null;var e=b.exec(t);if(!e||!n&&e[4])return null;var u={letter:e[1].toUpperCase(),acc:e[2].replace(/x/g,\"##\")};u.pc=u.letter+u.acc,u.step=(u.letter.charCodeAt(0)+3)%7,u.alt=\"b\"===u.acc[0]?-u.acc.length:u.acc.length;var o=A[u.step]+u.alt;return u.chroma=o<0?12+o:o%12,e[3]&&(u.oct=+e[3],u.midi=o+12*(u.oct+1),u.freq=c(u.midi,r)),n&&(u.tonicOf=e[4]),u}function f(t){return r(t)?t<0?n(\"b\",-t):n(\"#\",t):\"\"}function a(t){return r(t)?\"\"+t:\"\"}function l(t,n,r){return null===t||void 0===t?null:t.step?l(t.step,t.alt,t.oct):t<0||t>6?null:C.charAt(t)+f(n)+a(r)}function p(t){if((r(t)||e(t))&&t>=0&&t<128)return+t;var n=i(t);return n&&u(n.midi)?n.midi:null}function s(t,n){var r=p(t);return null===r?null:c(r,n)}function d(t){return(i(t)||{}).letter}function m(t){return(i(t)||{}).acc}function h(t){return(i(t)||{}).pc}function v(t){return(i(t)||{}).step}function g(t){return(i(t)||{}).alt}function x(t){return(i(t)||{}).chroma}function y(t){return(i(t)||{}).oct}var b=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)\\s*$/,A=[0,2,4,5,7,9,11],C=\"CDEFGAB\";t.regex=o,t.parse=i,t.build=l,t.midi=p,t.freq=s,t.letter=d,t.acc=m,t.pc=h,t.step=v,t.alt=g,t.chroma=x,t.oct=y});\n\n\n},{}],18:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],19:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nfunction createThunkMiddleware(extraArgument) {\n  return function (_ref) {\n    var dispatch = _ref.dispatch,\n        getState = _ref.getState;\n    return function (next) {\n      return function (action) {\n        if (typeof action === 'function') {\n          return action(dispatch, getState, extraArgument);\n        }\n\n        return next(action);\n      };\n    };\n  };\n}\n\nvar thunk = createThunkMiddleware();\nthunk.withExtraArgument = createThunkMiddleware;\n\nexports['default'] = thunk;\n},{}],20:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = applyMiddleware;\n\nvar _compose = require('./compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function (reducer, preloadedState, enhancer) {\n      var store = createStore(reducer, preloadedState, enhancer);\n      var _dispatch = store.dispatch;\n      var chain = [];\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch(action) {\n          return _dispatch(action);\n        }\n      };\n      chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = _compose2['default'].apply(undefined, chain)(store.dispatch);\n\n      return _extends({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n},{\"./compose\":23}],21:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = bindActionCreators;\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(undefined, arguments));\n  };\n}\n\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error('bindActionCreators expected an object or a function, instead received ' + (actionCreators === null ? 'null' : typeof actionCreators) + '. ' + 'Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?');\n  }\n\n  var keys = Object.keys(actionCreators);\n  var boundActionCreators = {};\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var actionCreator = actionCreators[key];\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n  return boundActionCreators;\n}\n},{}],22:[function(require,module,exports){\n(function (process){\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = combineReducers;\n\nvar _createStore = require('./createStore');\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _warning = require('./utils/warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionName = actionType && '\"' + actionType.toString() + '\"' || 'an action';\n\n  return 'Given action ' + actionName + ', reducer \"' + key + '\" returned undefined. ' + 'To ignore an action, you must explicitly return the previous state.';\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === _createStore.ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!(0, _isPlainObject2['default'])(inputState)) {\n    return 'The ' + argumentName + ' has unexpected type of \"' + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + '\". Expected argument to be an object with the following ' + ('keys: \"' + reducerKeys.join('\", \"') + '\"');\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n\n  if (unexpectedKeys.length > 0) {\n    return 'Unexpected ' + (unexpectedKeys.length > 1 ? 'keys' : 'key') + ' ' + ('\"' + unexpectedKeys.join('\", \"') + '\" found in ' + argumentName + '. ') + 'Expected to find one of the known reducer keys instead: ' + ('\"' + reducerKeys.join('\", \"') + '\". Unexpected keys will be ignored.');\n  }\n}\n\nfunction assertReducerSanity(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, { type: _createStore.ActionTypes.INIT });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined during initialization. ' + 'If the state passed to the reducer is undefined, you must ' + 'explicitly return the initial state. The initial state may ' + 'not be undefined.');\n    }\n\n    var type = '@@redux/PROBE_UNKNOWN_ACTION_' + Math.random().toString(36).substring(7).split('').join('.');\n    if (typeof reducer(undefined, { type: type }) === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined when probed with a random type. ' + ('Don\\'t try to handle ' + _createStore.ActionTypes.INIT + ' or other actions in \"redux/*\" ') + 'namespace. They are considered private. Instead, you must return the ' + 'current state for any unknown actions, unless it is undefined, ' + 'in which case you must return the initial state, regardless of the ' + 'action type. The initial state may not be undefined.');\n    }\n  });\n}\n\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        (0, _warning2['default'])('No reducer provided for key \"' + key + '\"');\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  var finalReducerKeys = Object.keys(finalReducers);\n\n  if (process.env.NODE_ENV !== 'production') {\n    var unexpectedKeyCache = {};\n  }\n\n  var sanityError;\n  try {\n    assertReducerSanity(finalReducers);\n  } catch (e) {\n    sanityError = e;\n  }\n\n  return function combination() {\n    var state = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n    var action = arguments[1];\n\n    if (sanityError) {\n      throw sanityError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n      if (warningMessage) {\n        (0, _warning2['default'])(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n    for (var i = 0; i < finalReducerKeys.length; i++) {\n      var key = finalReducerKeys[i];\n      var reducer = finalReducers[key];\n      var previousStateForKey = state[key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(key, action);\n        throw new Error(errorMessage);\n      }\n      nextState[key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    return hasChanged ? nextState : state;\n  };\n}\n}).call(this,require('_process'))\n\n},{\"./createStore\":24,\"./utils/warning\":26,\"_process\":18,\"lodash/isPlainObject\":15}],23:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = compose;\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  var last = funcs[funcs.length - 1];\n  var rest = funcs.slice(0, -1);\n  return function () {\n    return rest.reduceRight(function (composed, f) {\n      return f(composed);\n    }, last.apply(undefined, arguments));\n  };\n}\n},{}],24:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nexports.ActionTypes = undefined;\nexports['default'] = createStore;\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _symbolObservable = require('symbol-observable');\n\nvar _symbolObservable2 = _interopRequireDefault(_symbolObservable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar ActionTypes = exports.ActionTypes = {\n  INIT: '@@redux/INIT'\n};\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} enhancer The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    return currentState;\n  }\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected listener to be a function.');\n    }\n\n    var isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action) {\n    if (!(0, _isPlainObject2['default'])(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      listeners[i]();\n    }\n\n    return action;\n  }\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({ type: ActionTypes.INIT });\n  }\n\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/zenparsing/es-observable\n   */\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object') {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return { unsubscribe: unsubscribe };\n      }\n    }, _ref[_symbolObservable2['default']] = function () {\n      return this;\n    }, _ref;\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch({ type: ActionTypes.INIT });\n\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[_symbolObservable2['default']] = observable, _ref2;\n}\n},{\"lodash/isPlainObject\":15,\"symbol-observable\":36}],25:[function(require,module,exports){\n(function (process){\n'use strict';\n\nexports.__esModule = true;\nexports.compose = exports.applyMiddleware = exports.bindActionCreators = exports.combineReducers = exports.createStore = undefined;\n\nvar _createStore = require('./createStore');\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _combineReducers = require('./combineReducers');\n\nvar _combineReducers2 = _interopRequireDefault(_combineReducers);\n\nvar _bindActionCreators = require('./bindActionCreators');\n\nvar _bindActionCreators2 = _interopRequireDefault(_bindActionCreators);\n\nvar _applyMiddleware = require('./applyMiddleware');\n\nvar _applyMiddleware2 = _interopRequireDefault(_applyMiddleware);\n\nvar _compose = require('./compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _warning = require('./utils/warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/*\n* This is a dummy function to check if the function name has been altered by minification.\n* If the function has been minified and NODE_ENV !== 'production', warn the user.\n*/\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  (0, _warning2['default'])('You are currently using minified code outside of NODE_ENV === \\'production\\'. ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexports.createStore = _createStore2['default'];\nexports.combineReducers = _combineReducers2['default'];\nexports.bindActionCreators = _bindActionCreators2['default'];\nexports.applyMiddleware = _applyMiddleware2['default'];\nexports.compose = _compose2['default'];\n}).call(this,require('_process'))\n\n},{\"./applyMiddleware\":20,\"./bindActionCreators\":21,\"./combineReducers\":22,\"./compose\":23,\"./createStore\":24,\"./utils/warning\":26,\"_process\":18}],26:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = warning;\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n    /* eslint-disable no-empty */\n  } catch (e) {}\n  /* eslint-enable no-empty */\n}\n},{}],27:[function(require,module,exports){\n\nmodule.exports = function (player) {\n  /**\n   * Adds a listener of an event\n   * @chainable\n   * @param {String} event - the event name\n   * @param {Function} callback - the event handler\n   * @return {SamplePlayer} the player\n   * @example\n   * player.on('start', function(time, note) {\n   *   console.log(time, note)\n   * })\n   */\n  player.on = function (event, cb) {\n    if (arguments.length === 1 && typeof event === 'function') return player.on('event', event)\n    var prop = 'on' + event\n    var old = player[prop]\n    player[prop] = old ? chain(old, cb) : cb\n    return player\n  }\n  return player\n}\n\nfunction chain (fn1, fn2) {\n  return function (a, b, c, d) { fn1(a, b, c, d); fn2(a, b, c, d) }\n}\n\n},{}],28:[function(require,module,exports){\n'use strict'\n\nvar player = require('./player')\nvar events = require('./events')\nvar notes = require('./notes')\nvar scheduler = require('./scheduler')\nvar midi = require('./midi')\n\nfunction SamplePlayer (ac, source, options) {\n  return midi(scheduler(notes(events(player(ac, source, options)))))\n}\n\nif (typeof module === 'object' && module.exports) module.exports = SamplePlayer\nif (typeof window !== 'undefined') window.SamplePlayer = SamplePlayer\n\n},{\"./events\":27,\"./midi\":29,\"./notes\":30,\"./player\":31,\"./scheduler\":32}],29:[function(require,module,exports){\nvar midimessage = require('midimessage')\n\nmodule.exports = function (player) {\n  /**\n  * Connect a player to a midi input\n  *\n  * The options accepts:\n  *\n  * - channel: the channel to listen to. Listen to all channels by default.\n  *\n  * @param {MIDIInput} input\n  * @param {Object} options - (Optional)\n  * @return {SamplePlayer} the player\n  * @example\n  * var piano = player(...)\n  * window.navigator.requestMIDIAccess().then(function (midiAccess) {\n  *   midiAccess.inputs.forEach(function (midiInput) {\n  *     piano.listenToMidi(midiInput)\n  *   })\n  * })\n  */\n  player.listenToMidi = function (input, options) {\n    var started = {}\n    var opts = options || {}\n    var gain = opts.gain || function (vel) { return vel / 127 }\n\n    input.onmidimessage = function (msg) {\n      var mm = msg.messageType ? msg : midimessage(msg)\n      if (mm.messageType === 'noteon' && mm.velocity === 0) {\n        mm.messageType = 'noteoff'\n      }\n      if (opts.channel && mm.channel !== opts.channel) return\n\n      switch (mm.messageType) {\n        case 'noteon':\n          started[mm.key] = player.play(mm.key, 0, { gain: gain(mm.velocity) })\n          break\n        case 'noteoff':\n          if (started[mm.key]) {\n            started[mm.key].stop()\n            delete started[mm.key]\n          }\n          break\n      }\n    }\n    return player\n  }\n  return player\n}\n\n},{\"midimessage\":16}],30:[function(require,module,exports){\n'use strict'\n\nvar note = require('note-parser')\nvar isMidi = function (n) { return n !== null && n !== [] && n >= 0 && n < 129 }\nvar toMidi = function (n) { return isMidi(n) ? +n : note.midi(n) }\n\n// Adds note name to midi conversion\nmodule.exports = function (player) {\n  if (player.buffers) {\n    var map = player.opts.map\n    var toKey = typeof map === 'function' ? map : toMidi\n    var mapper = function (name) {\n      return name ? toKey(name) || name : null\n    }\n\n    player.buffers = mapBuffers(player.buffers, mapper)\n    var start = player.start\n    player.start = function (name, when, options) {\n      var key = mapper(name)\n      var dec = key % 1\n      if (dec) {\n        key = Math.floor(key)\n        options = Object.assign(options || {}, { cents: Math.floor(dec * 100) })\n      }\n      return start(key, when, options)\n    }\n  }\n  return player\n}\n\nfunction mapBuffers (buffers, toKey) {\n  return Object.keys(buffers).reduce(function (mapped, name) {\n    mapped[toKey(name)] = buffers[name]\n    return mapped\n  }, {})\n}\n\n},{\"note-parser\":33}],31:[function(require,module,exports){\n/* global AudioBuffer */\n'use strict'\n\nvar ADSR = require('adsr')\n\nvar EMPTY = {}\nvar DEFAULTS = {\n  gain: 1,\n  attack: 0.01,\n  decay: 0.1,\n  sustain: 0.9,\n  release: 0.3,\n  loop: false,\n  cents: 0,\n  loopStart: 0,\n  loopEnd: 0\n}\n\n/**\n * Create a sample player.\n *\n * @param {AudioContext} ac - the audio context\n * @param {ArrayBuffer|Object<String,ArrayBuffer>} source\n * @param {Onject} options - (Optional) an options object\n * @return {player} the player\n * @example\n * var SamplePlayer = require('sample-player')\n * var ac = new AudioContext()\n * var snare = SamplePlayer(ac, <AudioBuffer>)\n * snare.play()\n */\nfunction SamplePlayer (ac, source, options) {\n  var connected = false\n  var nextId = 0\n  var tracked = {}\n  var out = ac.createGain()\n  out.gain.value = 1\n\n  var opts = Object.assign({}, DEFAULTS, options)\n\n  /**\n   * @namespace\n   */\n  var player = { context: ac, out: out, opts: opts }\n  if (source instanceof AudioBuffer) player.buffer = source\n  else player.buffers = source\n\n  /**\n   * Start a sample buffer.\n   *\n   * The returned object has a function `stop(when)` to stop the sound.\n   *\n   * @param {String} name - the name of the buffer. If the source of the\n   * SamplePlayer is one sample buffer, this parameter is not required\n   * @param {Float} when - (Optional) when to start (current time if by default)\n   * @param {Object} options - additional sample playing options\n   * @return {AudioNode} an audio node with a `stop` function\n   * @example\n   * var sample = player(ac, <AudioBuffer>).connect(ac.destination)\n   * sample.start()\n   * sample.start(5, { gain: 0.7 }) // name not required since is only one AudioBuffer\n   * @example\n   * var drums = player(ac, { snare: <AudioBuffer>, kick: <AudioBuffer>, ... }).connect(ac.destination)\n   * drums.start('snare')\n   * drums.start('snare', 0, { gain: 0.3 })\n   */\n  player.start = function (name, when, options) {\n    // if only one buffer, reorder arguments\n    if (player.buffer && name !== null) return player.start(null, name, when)\n\n    var buffer = name ? player.buffers[name] : player.buffer\n    if (!buffer) {\n      console.warn('Buffer ' + name + ' not found.')\n      return\n    } else if (!connected) {\n      console.warn('SamplePlayer not connected to any node.')\n      return\n    }\n\n    var opts = options || EMPTY\n    when = Math.max(ac.currentTime, when || 0)\n    player.emit('start', when, name, opts)\n    var node = createNode(name, buffer, opts)\n    node.id = track(name, node)\n    node.env.start(when)\n    node.source.start(when)\n    player.emit('started', when, node.id, node)\n    if (opts.duration) node.stop(when + opts.duration)\n    return node\n  }\n\n  // NOTE: start will be override so we can't copy the function reference\n  // this is obviously not a good design, so this code will be gone soon.\n  /**\n   * An alias for `player.start`\n   * @see player.start\n   * @since 0.3.0\n   */\n  player.play = function (name, when, options) {\n    return player.start(name, when, options)\n  }\n\n  /**\n   * Stop some or all samples\n   *\n   * @param {Float} when - (Optional) an absolute time in seconds (or currentTime\n   * if not specified)\n   * @param {Array} nodes - (Optional) an array of nodes or nodes ids to stop\n   * @return {Array} an array of ids of the stoped samples\n   *\n   * @example\n   * var longSound = player(ac, <AudioBuffer>).connect(ac.destination)\n   * longSound.start(ac.currentTime)\n   * longSound.start(ac.currentTime + 1)\n   * longSound.start(ac.currentTime + 2)\n   * longSound.stop(ac.currentTime + 3) // stop the three sounds\n   */\n  player.stop = function (when, ids) {\n    var node\n    ids = ids || Object.keys(tracked)\n    return ids.map(function (id) {\n      node = tracked[id]\n      if (!node) return null\n      node.stop(when)\n      return node.id\n    })\n  }\n  /**\n   * Connect the player to a destination node\n   *\n   * @param {AudioNode} destination - the destination node\n   * @return {AudioPlayer} the player\n   * @chainable\n   * @example\n   * var sample = player(ac, <AudioBuffer>).connect(ac.destination)\n   */\n  player.connect = function (dest) {\n    connected = true\n    out.connect(dest)\n    return player\n  }\n\n  player.emit = function (event, when, obj, opts) {\n    if (player.onevent) player.onevent(event, when, obj, opts)\n    var fn = player['on' + event]\n    if (fn) fn(when, obj, opts)\n  }\n\n  return player\n\n  // =============== PRIVATE FUNCTIONS ============== //\n\n  function track (name, node) {\n    node.id = nextId++\n    tracked[node.id] = node\n    node.source.onended = function () {\n      var now = ac.currentTime\n      node.source.disconnect()\n      node.env.disconnect()\n      node.disconnect()\n      player.emit('ended', now, node.id, node)\n    }\n    return node.id\n  }\n\n  function createNode (name, buffer, options) {\n    var node = ac.createGain()\n    node.gain.value = 0 // the envelope will control the gain\n    node.connect(out)\n\n    node.env = envelope(ac, options, opts)\n    node.env.connect(node.gain)\n\n    node.source = ac.createBufferSource()\n    node.source.buffer = buffer\n    node.source.connect(node)\n    node.source.loop = options.loop || opts.loop\n    node.source.playbackRate.value = centsToRate(options.cents || opts.cents)\n    node.source.loopStart = options.loopStart || opts.loopStart\n    node.source.loopEnd = options.loopEnd || opts.loopEnd\n    node.stop = function (when) {\n      var time = when || ac.currentTime\n      player.emit('stop', time, name)\n      var stopAt = node.env.stop(time)\n      node.source.stop(stopAt)\n    }\n    return node\n  }\n}\n\nfunction isNum (x) { return typeof x === 'number' }\nvar PARAMS = ['attack', 'decay', 'sustain', 'release']\nfunction envelope (ac, options, opts) {\n  var env = ADSR(ac)\n  var adsr = options.adsr || opts.adsr\n  PARAMS.forEach(function (name, i) {\n    if (adsr) env[name] = adsr[i]\n    else env[name] = options[name] || opts[name]\n  })\n  env.value.value = isNum(options.gain) ? options.gain\n    : isNum(opts.gain) ? opts.gain : 1\n  return env\n}\n\n/*\n * Get playback rate for a given pitch change (in cents)\n * Basic [math](http://www.birdsoft.demon.co.uk/music/samplert.htm):\n * f2 = f1 * 2^( C / 1200 )\n */\nfunction centsToRate (cents) { return cents ? Math.pow(2, cents / 1200) : 1 }\n\nmodule.exports = SamplePlayer\n\n},{\"adsr\":2}],32:[function(require,module,exports){\n'use strict'\n\nvar isArr = Array.isArray\nvar isObj = function (o) { return o && typeof o === 'object' }\nvar OPTS = {}\n\nmodule.exports = function (player) {\n  /**\n   * Schedule a list of events to be played at specific time.\n   *\n   * It supports three formats of events for the events list:\n   *\n   * - An array with [time, note]\n   * - An array with [time, object]\n   * - An object with { time: ?, [name|note|midi|key]: ? }\n   *\n   * @param {Float} time - an absolute time to start (or AudioContext's\n   * currentTime if provided number is 0)\n   * @param {Array} events - the events list.\n   * @return {Array} an array of ids\n   *\n   * @example\n   * // Event format: [time, note]\n   * var piano = player(ac, ...).connect(ac.destination)\n   * piano.schedule(0, [ [0, 'C2'], [0.5, 'C3'], [1, 'C4'] ])\n   *\n   * @example\n   * // Event format: an object { time: ?, name: ? }\n   * var drums = player(ac, ...).connect(ac.destination)\n   * drums.schedule(0, [\n   *   { name: 'kick', time: 0 },\n   *   { name: 'snare', time: 0.5 },\n   *   { name: 'kick', time: 1 },\n   *   { name: 'snare', time: 1.5 }\n   * ])\n   */\n  player.schedule = function (time, events) {\n    var now = player.context.currentTime\n    var when = time < now ? now : time\n    player.emit('schedule', when, events)\n    var t, o, note, opts\n    return events.map(function (event) {\n      if (!event) return null\n      else if (isArr(event)) {\n        t = event[0]; o = event[1]\n      } else {\n        t = event.time; o = event\n      }\n\n      if (isObj(o)) {\n        note = o.name || o.key || o.note || o.midi || null\n        opts = o\n      } else {\n        note = o\n        opts = OPTS\n      }\n\n      return player.start(note, when + (t || 0), opts)\n    })\n  }\n  return player\n}\n\n},{}],33:[function(require,module,exports){\n'use strict'\n\nvar REGEX = /^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)\\s*$/\n/**\n * A regex for matching note strings in scientific notation.\n *\n * @name regex\n * @function\n * @return {RegExp} the regexp used to parse the note name\n *\n * The note string should have the form `letter[accidentals][octave][element]`\n * where:\n *\n * - letter: (Required) is a letter from A to G either upper or lower case\n * - accidentals: (Optional) can be one or more `b` (flats), `#` (sharps) or `x` (double sharps).\n * They can NOT be mixed.\n * - octave: (Optional) a positive or negative integer\n * - element: (Optional) additionally anything after the duration is considered to\n * be the element name (for example: 'C2 dorian')\n *\n * The executed regex contains (by array index):\n *\n * - 0: the complete string\n * - 1: the note letter\n * - 2: the optional accidentals\n * - 3: the optional octave\n * - 4: the rest of the string (trimmed)\n *\n * @example\n * var parser = require('note-parser')\n * parser.regex.exec('c#4')\n * // => ['c#4', 'c', '#', '4', '']\n * parser.regex.exec('c#4 major')\n * // => ['c#4major', 'c', '#', '4', 'major']\n * parser.regex().exec('CMaj7')\n * // => ['CMaj7', 'C', '', '', 'Maj7']\n */\nfunction regex () { return REGEX }\n\nvar SEMITONES = [0, 2, 4, 5, 7, 9, 11]\n/**\n * Parse a note name in scientific notation an return it's components,\n * and some numeric properties including midi number and frequency.\n *\n * @name parse\n * @function\n * @param {String} note - the note string to be parsed\n * @param {Boolean} isTonic - true if the note is the tonic of something.\n * If true, en extra tonicOf property is returned. It's false by default.\n * @param {Float} tunning - The frequency of A4 note to calculate frequencies.\n * By default it 440.\n * @return {Object} the parsed note name or null if not a valid note\n *\n * The parsed note name object will ALWAYS contains:\n * - letter: the uppercase letter of the note\n * - acc: the accidentals of the note (only sharps or flats)\n * - pc: the pitch class (letter + acc)\n * - step: s a numeric representation of the letter. It's an integer from 0 to 6\n * where 0 = C, 1 = D ... 6 = B\n * - alt: a numeric representation of the accidentals. 0 means no alteration,\n * positive numbers are for sharps and negative for flats\n * - chroma: a numeric representation of the pitch class. It's like midi for\n * pitch classes. 0 = C, 1 = C#, 2 = D ... It can have negative values: -1 = Cb.\n * Can detect pitch class enhramonics.\n *\n * If the note has octave, the parser object will contain:\n * - oct: the octave number (as integer)\n * - midi: the midi number\n * - freq: the frequency (using tuning parameter as base)\n *\n * If the parameter `isTonic` is set to true, the parsed object will contain:\n * - tonicOf: the rest of the string that follows note name (left and right trimmed)\n *\n * @example\n * var parse = require('note-parser').parse\n * parse('Cb4')\n * // => { letter: 'C', acc: 'b', pc: 'Cb', step: 0, alt: -1, chroma: -1,\n *         oct: 4, midi: 59, freq: 246.94165062806206 }\n * // if no octave, no midi, no freq\n * parse('fx')\n * // => { letter: 'F', acc: '##', pc: 'F##', step: 3, alt: 2, chroma: 7 })\n */\nfunction parse (str, isTonic, tuning) {\n  if (typeof str !== 'string') return null\n  var m = REGEX.exec(str)\n  if (!m || !isTonic && m[4]) return null\n\n  var p = { letter: m[1].toUpperCase(), acc: m[2].replace(/x/g, '##') }\n  p.pc = p.letter + p.acc\n  p.step = (p.letter.charCodeAt(0) + 3) % 7\n  p.alt = p.acc[0] === 'b' ? -p.acc.length : p.acc.length\n  p.chroma = SEMITONES[p.step] + p.alt\n  if (m[3]) {\n    p.oct = +m[3]\n    p.midi = p.chroma + 12 * (p.oct + 1)\n    p.freq = midiToFreq(p.midi, tuning)\n  }\n  if (isTonic) p.tonicOf = m[4]\n  return p\n}\n\n/**\n * Given a midi number, return its frequency\n * @param {Integer} midi - midi note number\n * @param {Float} tuning - (Optional) the A4 tuning (440Hz by default)\n * @return {Float} frequency in hertzs\n */\nfunction midiToFreq (midi, tuning) {\n  return Math.pow(2, (midi - 69) / 12) * (tuning || 440)\n}\n\nvar parser = { parse: parse, regex: regex, midiToFreq: midiToFreq }\nvar FNS = ['letter', 'acc', 'pc', 'step', 'alt', 'chroma', 'oct', 'midi', 'freq']\nFNS.forEach(function (name) {\n  parser[name] = function (src) {\n    var p = parse(src)\n    return p && (typeof p[name] !== 'undefined') ? p[name] : null\n  }\n})\n\nmodule.exports = parser\n\n// extra API docs\n/**\n * Get midi of a note\n *\n * @name midi\n * @function\n * @param {String} note - the note name\n * @return {Integer} the midi number of the note or null if not a valid note\n * or the note does NOT contains octave\n * @example\n * var parser = require('note-parser')\n * parser.midi('A4') // => 69\n * parser.midi('A') // => null\n */\n/**\n * Get freq of a note in hertzs (in a well tempered 440Hz A4)\n *\n * @name freq\n * @function\n * @param {String} note - the note name\n * @return {Float} the freq of the number if hertzs or null if not valid note\n * or the note does NOT contains octave\n * @example\n * var parser = require('note-parser')\n * parser.freq('A4') // => 440\n * parser.freq('A') // => null\n */\n\n},{}],34:[function(require,module,exports){\n'use strict'\n\nvar load = require('audio-loader')\nvar player = require('sample-player')\n\n/**\n * Load a soundfont instrument. It returns a promise that resolves to a\n * instrument object.\n *\n * The instrument object returned by the promise has the following properties:\n *\n * - name: the instrument name\n * - play: A function to play notes from the buffer with the signature\n * `play(note, time, duration, options)`\n *\n *\n * The valid options are:\n *\n * - `format`: the soundfont format. 'mp3' by default. Can be 'ogg'\n * - `soundfont`: the soundfont name. 'MusyngKite' by default. Can be 'FluidR3_GM'\n * - `nameToUrl` <Function>: a function to convert from instrument names to URL\n * - `destination`: by default Soundfont uses the `audioContext.destination` but you can override it.\n * - `gain`: the gain of the player (1 by default)\n * - `notes`: an array of the notes to decode. It can be an array of strings\n * with note names or an array of numbers with midi note numbers. This is a\n * performance option: since decoding mp3 is a cpu intensive process, you can limit\n * limit the number of notes you want and reduce the time to load the instrument.\n *\n * @param {AudioContext} ac - the audio context\n * @param {String} name - the instrument name. For example: 'acoustic_grand_piano'\n * @param {Object} options - (Optional) the same options as Soundfont.loadBuffers\n * @return {Promise}\n *\n * @example\n * var Soundfont = require('sounfont-player')\n * Soundfont.instrument('marimba').then(function (marimba) {\n *   marimba.play('C4')\n * })\n */\nfunction instrument (ac, name, options) {\n  if (arguments.length === 1) return function (n, o) { return instrument(ac, n, o) }\n  var opts = options || {}\n  var isUrl = opts.isSoundfontURL || isSoundfontURL\n  var toUrl = opts.nameToUrl || nameToUrl\n  var url = isUrl(name) ? name : toUrl(name, opts.soundfont, opts.format)\n\n  return load(ac, url, { only: opts.only || opts.notes }).then(function (buffers) {\n    var p = player(ac, buffers, opts).connect(ac.destination)\n    p.url = url\n    p.name = name\n    return p\n  })\n}\n\nfunction isSoundfontURL (name) {\n  return /\\.js(\\?.*)?$/i.test(name)\n}\n\n/**\n * Given an instrument name returns a URL to to the Benjamin Gleitzman's\n * package of [pre-rendered sound fonts](https://github.com/gleitz/midi-js-soundfonts)\n *\n * @param {String} name - instrument name\n * @param {String} soundfont - (Optional) the soundfont name. One of 'FluidR3_GM'\n * or 'MusyngKite' ('MusyngKite' by default)\n * @param {String} format - (Optional) Can be 'mp3' or 'ogg' (mp3 by default)\n * @returns {String} the Soundfont file url\n * @example\n * var Soundfont = require('soundfont-player')\n * Soundfont.nameToUrl('marimba', 'mp3')\n */\nfunction nameToUrl (name, sf, format) {\n  format = format === 'ogg' ? format : 'mp3'\n  sf = sf === 'FluidR3_GM' ? sf : 'MusyngKite'\n  return 'https://gleitz.github.io/midi-js-soundfonts/' + sf + '/' + name + '-' + format + '.js'\n}\n\n// In the 1.0.0 release it will be:\n// var Soundfont = {}\nvar Soundfont = require('./legacy')\nSoundfont.instrument = instrument\nSoundfont.nameToUrl = nameToUrl\n\nif (typeof module === 'object' && module.exports) module.exports = Soundfont\nif (typeof window !== 'undefined') window.Soundfont = Soundfont\n\n},{\"./legacy\":35,\"audio-loader\":5,\"sample-player\":28}],35:[function(require,module,exports){\n'use strict'\n\nvar parser = require('note-parser')\n\n/**\n * Create a Soundfont object\n *\n * @param {AudioContext} context - the [audio context](https://developer.mozilla.org/en/docs/Web/API/AudioContext)\n * @param {Function} nameToUrl - (Optional) a function that maps the sound font name to the url\n * @return {Soundfont} a soundfont object\n */\nfunction Soundfont (ctx, nameToUrl) {\n  console.warn('new Soundfont() is deprected')\n  console.log('Please use Soundfont.instrument() instead of new Soundfont().instrument()')\n  if (!(this instanceof Soundfont)) return new Soundfont(ctx)\n\n  this.nameToUrl = nameToUrl || Soundfont.nameToUrl\n  this.ctx = ctx\n  this.instruments = {}\n  this.promises = []\n}\n\nSoundfont.prototype.onready = function (callback) {\n  console.warn('deprecated API')\n  console.log('Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()')\n  Promise.all(this.promises).then(callback)\n}\n\nSoundfont.prototype.instrument = function (name, options) {\n  console.warn('new Soundfont().instrument() is deprecated.')\n  console.log('Please use Soundfont.instrument() instead.')\n  var ctx = this.ctx\n  name = name || 'default'\n  if (name in this.instruments) return this.instruments[name]\n  var inst = {name: name, play: oscillatorPlayer(ctx, options)}\n  this.instruments[name] = inst\n  if (name !== 'default') {\n    var promise = Soundfont.instrument(ctx, name, options).then(function (instrument) {\n      inst.play = instrument.play\n      return inst\n    })\n    this.promises.push(promise)\n    inst.onready = function (cb) {\n      console.warn('onready is deprecated. Use Soundfont.instrument().then()')\n      promise.then(cb)\n    }\n  } else {\n    inst.onready = function (cb) {\n      console.warn('onready is deprecated. Use Soundfont.instrument().then()')\n      cb()\n    }\n  }\n  return inst\n}\n\n/*\n * Load the buffers of a given instrument name. It returns a promise that resolves\n * to a hash with midi note numbers as keys, and audio buffers as values.\n *\n * @param {AudioContext} ac - the audio context\n * @param {String} name - the instrument name (it accepts an url if starts with \"http\")\n * @param {Object} options - (Optional) options object\n * @return {Promise} a promise that resolves to a Hash of { midiNoteNum: <AudioBuffer> }\n *\n * The options object accepts the following keys:\n *\n * - nameToUrl {Function}: a function to convert from instrument names to urls.\n * By default it uses Benjamin Gleitzman's package of\n * [pre-rendered sound fonts](https://github.com/gleitz/midi-js-soundfonts)\n * - notes {Array}: the list of note names to be decoded (all by default)\n *\n * @example\n * var Soundfont = require('soundfont-player')\n * Soundfont.loadBuffers(ctx, 'acoustic_grand_piano').then(function(buffers) {\n *  buffers[60] // => An <AudioBuffer> corresponding to note C4\n * })\n */\nfunction loadBuffers (ac, name, options) {\n  console.warn('Soundfont.loadBuffers is deprecate.')\n  console.log('Use Soundfont.instrument(..) and get buffers properties from the result.')\n  return Soundfont.instrument(ac, name, options).then(function (inst) {\n    return inst.buffers\n  })\n}\nSoundfont.loadBuffers = loadBuffers\n\n/**\n * Returns a function that plays an oscillator\n *\n * @param {AudioContext} ac - the audio context\n * @param {Hash} defaultOptions - (Optional) a hash of options:\n * - vcoType: the oscillator type (default: 'sine')\n * - gain: the output gain value (default: 0.4)\n  * - destination: the player destination (default: ac.destination)\n */\nfunction oscillatorPlayer (ctx, defaultOptions) {\n  defaultOptions = defaultOptions || {}\n  return function (note, time, duration, options) {\n    console.warn('The oscillator player is deprecated.')\n    console.log('Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.')\n    var midi = note > 0 && note < 129 ? +note : parser.midi(note)\n    var freq = midi ? parser.midiToFreq(midi, 440) : null\n    if (!freq) return\n\n    duration = duration || 0.2\n\n    options = options || {}\n    var destination = options.destination || defaultOptions.destination || ctx.destination\n    var vcoType = options.vcoType || defaultOptions.vcoType || 'sine'\n    var gain = options.gain || defaultOptions.gain || 0.4\n\n    var vco = ctx.createOscillator()\n    vco.type = vcoType\n    vco.frequency.value = freq\n\n    /* VCA */\n    var vca = ctx.createGain()\n    vca.gain.value = gain\n\n    /* Connections */\n    vco.connect(vca)\n    vca.connect(destination)\n\n    vco.start(time)\n    if (duration > 0) vco.stop(time + duration)\n    return vco\n  }\n}\n\n/**\n * Given a note name, return the note midi number\n *\n * @name noteToMidi\n * @function\n * @param {String} noteName\n * @return {Integer} the note midi number or null if not a valid note name\n */\nSoundfont.noteToMidi = parser.midi\n\nmodule.exports = Soundfont\n\n},{\"note-parser\":17}],36:[function(require,module,exports){\nmodule.exports = require('./lib/index');\n\n},{\"./lib/index\":37}],37:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ponyfill = require('./ponyfill');\n\nvar _ponyfill2 = _interopRequireDefault(_ponyfill);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar root; /* global window */\n\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = (0, _ponyfill2['default'])(root);\nexports['default'] = result;\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./ponyfill\":38}],38:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports['default'] = symbolObservablePonyfill;\nfunction symbolObservablePonyfill(root) {\n\tvar result;\n\tvar _Symbol = root.Symbol;\n\n\tif (typeof _Symbol === 'function') {\n\t\tif (_Symbol.observable) {\n\t\t\tresult = _Symbol.observable;\n\t\t} else {\n\t\t\tresult = _Symbol('observable');\n\t\t\t_Symbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n},{}],39:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.noteOn = noteOn;\nexports.noteOff = noteOff;\nexports.controller = controller;\n\nvar _midiActions = require('../actions/midi-actions');\n\nvar _midiActions2 = _interopRequireDefault(_midiActions);\n\nvar _midi = require('../utils/midi');\n\nvar _audio = require('../utils/audio');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction noteOn(event) {\n  var message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'noteOn';\n\n  return function (dispatch, getState) {\n    var data = void 0,\n        state = void 0,\n        notes = void 0,\n        note = void 0,\n        ac = void 0;\n\n    data = event.data ? event.data : _midi.MidiUtils.setNoteOnMessage(event.target);\n    note = _midi.MidiUtils.getNote(data);\n\n    state = getState();\n    notes = state.midi.notes;\n    ac = state.midi.audioContext;\n\n    if (state.settings.webApiAudio) {\n\n      if (notes[note] === null || notes[note] === undefined) {\n        // FIXME\n        notes[note] = _audio.AudioUtils.generateOscillator(note, ac);\n        notes[note].start();\n      }\n    } else {\n      notes[note] = 'playing';\n      state.settings.soundfontInstrument.play(note);\n    }\n\n    dispatch({\n      type: _midiActions2.default.NOTE_ON,\n      payload: {\n        message: message, data: data, notes: notes\n      }\n    });\n  };\n}\n\nfunction noteOff(event) {\n  var message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'noteOff';\n\n  return function (dispatch, getState) {\n    var data = void 0,\n        state = void 0,\n        notes = void 0,\n        note = void 0;\n\n    data = event.data ? event.data : _midi.MidiUtils.setNoteOffMessage(event.target);\n    note = _midi.MidiUtils.getNote(data);\n\n    state = getState();\n    notes = state.midi.notes;\n\n    if (state.settings.webApiAudio) {\n\n      if (notes[note] !== null || notes[note] !== undefined) {\n        notes[note].stop();\n        notes[note].disconnect();\n      }\n\n      notes[note] = null;\n    } else {\n      notes[note] = null;\n      state.settings.soundfontInstrument.stop(note);\n    }\n\n    dispatch({\n      type: _midiActions2.default.NOTE_OFF,\n      payload: {\n        message: message,\n        data: data,\n        notes: notes\n      }\n    });\n  };\n}\n\nfunction controller(event, message) {\n  return function (dispatch, getState) {\n    var state = void 0,\n        gainNode = void 0;\n\n    state = getState();\n    gainNode = state.settings.gainNode;\n    // console.log('!!!', event.data);\n    // console.log('!!!', gainNode);\n    // gainNode.gain.value = event.data[2] / 127;\n\n    dispatch({\n      type: _midiActions2.default.CONTROLLER,\n      payload: {\n        message: message,\n        gainNode: gainNode\n      }\n    });\n  };\n}\n\n},{\"../actions/midi-actions\":42,\"../utils/audio\":55,\"../utils/midi\":56}],40:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.midiMessage = midiMessage;\n\nvar _midiMessages = require('../constants/midi-messages');\n\nvar _midi = require('../utils/midi');\n\nvar _midiEventsActionCreators = require('../action-creators/midi-events-action-creators');\n\nvar MidiEvents = _interopRequireWildcard(_midiEventsActionCreators);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction midiMessage(event) {\n  return function (dispatch, getState) {\n    var midiMessage = void 0,\n        message = void 0;\n\n    midiMessage = _midi.MidiUtils.getEventType(event.data);\n    message = _midiMessages.MidiMessages[midiMessage];\n\n    dispatch(MidiEvents[message](event, message));\n  };\n}\n\n},{\"../action-creators/midi-events-action-creators\":39,\"../constants/midi-messages\":49,\"../utils/midi\":56}],41:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.midiSuccess = midiSuccess;\nexports.midiFailure = midiFailure;\nexports.loadSoundfontInstrument = loadSoundfontInstrument;\nexports.changeAudio = changeAudio;\n\nvar _midiConnect = require('../actions/midi-connect');\n\nvar _midiConnect2 = _interopRequireDefault(_midiConnect);\n\nvar _soundfontPlayer = require('soundfont-player');\n\nvar _soundfontPlayer2 = _interopRequireDefault(_soundfontPlayer);\n\nvar _midiMessagesActionCreators = require('../action-creators/midi-messages-action-creators');\n\nvar MidiMessages = _interopRequireWildcard(_midiMessagesActionCreators);\n\nvar _redux = require('redux');\n\nvar _midiSoundpaths = require('../constants/midi-soundpaths');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction midiSuccess(midiAccess) {\n  return function (dispatch, getState) {\n    var inputs = void 0,\n        state = void 0,\n        midiMessages = void 0,\n        input = void 0,\n        gainNode = void 0;\n\n    inputs = midiAccess.inputs.values();\n    state = getState();\n    gainNode = state.midi.audioContext.createGain();\n    gainNode.connect(state.midi.audioContext.destination);\n    midiMessages = (0, _redux.bindActionCreators)(MidiMessages, dispatch);\n\n    for (input = inputs.next(); input && !input.done; input = inputs.next()) {\n      input.value.onmidimessage = midiMessages.midiMessage;\n    }\n\n    dispatch({\n      type: _midiConnect2.default.MIDI_SUCCESS,\n      payload: {\n        status: 'Midi Succeeded',\n        midiAccess: midiAccess,\n        inputs: inputs,\n        gainNode: gainNode\n      }\n    });\n  };\n}\n\nfunction midiFailure(midiAccess) {\n  return function (dispatch) {\n    dispatch({\n      type: _midiConnect2.default.MIDI_FAILURE,\n      payload: {\n        status: 'Midi Failed'\n      }\n    });\n  };\n}\n\nfunction loadSoundfontInstrument(instrument) {\n  var _this = this;\n\n  return function (dispatch, getState) {\n    var state = void 0,\n        ac = void 0,\n        instrumentPath = void 0;\n\n    state = getState();\n    ac = state.midi.audioContext;\n    instrumentPath = _getInstrumentPath.call(_this, instrument);\n\n    _soundfontPlayer2.default.instrument(ac, instrumentPath).then(function (soundfontInstrument) {\n      dispatch({\n        type: _midiConnect2.default.MIDI_LOAD_INSTRUMENT,\n        payload: { soundfontInstrument: soundfontInstrument }\n      });\n    });\n  };\n}\n\nfunction changeAudio(audio) {\n  return function (dispatch, getState) {\n    var state = void 0,\n        webApiAudio = void 0;\n\n    state = getState();\n    webApiAudio = audio;\n\n    dispatch({\n      type: _midiConnect2.default.CHANGE_AUDIO,\n      payload: { webApiAudio: webApiAudio }\n    });\n  };\n}\n\nfunction _getInstrumentPath(instrument) {\n  return _midiSoundpaths.SOUNDS_PATH + '/' + instrument + '-' + _midiSoundpaths.SOUNDS_FILETYPE + '.' + _midiSoundpaths.SOUNDS_FILE_EXTENSION;\n}\n\n},{\"../action-creators/midi-messages-action-creators\":40,\"../actions/midi-connect\":43,\"../constants/midi-soundpaths\":50,\"redux\":25,\"soundfont-player\":34}],42:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Object.freeze({\n  CONTROLLER: 'controller',\n  INSTRUMENT_NAME: 'instrumentName',\n  NOTE_OFF: 'noteOff',\n  NOTE_ON: 'noteOn',\n  PROGRAM_CHANGE: 'programChange',\n  SYS_EX: 'sysEx'\n});\n\n},{}],43:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Object.freeze({\n  MIDI_SUCCESS: 'midiSuccess',\n  MIDI_FAILURE: 'midiFailure',\n  MIDI_MESSAGE: 'midiMessage',\n  CHANGE_AUDIO: 'changeAudio',\n  MIDI_LOAD_INSTRUMENT: 'loadInstrument'\n});\n\n},{}],44:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MidiAudioSelector = exports.MidiAudioSelector = {\n  init: function init() {\n    var _this = this;\n\n    var store = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var midiSetupActions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    this.store = store;\n    this.midiSetupActions = midiSetupActions;\n    this.audioSelectors = document.getElementById('audio-selector').audioSelectors;\n\n    this.audioSelectors.forEach(function (selector) {\n      selector.addEventListener('change', _this.changeAudio.bind(_this));\n    });\n\n    this.render();\n  },\n  changeAudio: function changeAudio(event) {\n    var audio = event.target.value === \"true\";\n    this.midiSetupActions.changeAudio(audio);\n  },\n  render: function render() {\n    var store = void 0;\n\n    store = this.store;\n\n    store.subscribe(function () {\n      var state = void 0;\n      state = store.getState();\n    });\n  }\n};\n\n},{}],45:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MidiInstrumentsSelector = undefined;\n\nvar _midiInstruments = require('../constants/midi-instruments');\n\nvar MidiInstrumentsSelector = exports.MidiInstrumentsSelector = {\n  init: function init() {\n    var store = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var midiSetupActions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    this.store = store;\n    this.midiSetupActions = midiSetupActions;\n    this.instrumentSelector = document.getElementById('instrument-selector');\n\n    this.instrumentSelector.addEventListener('change', this.loadInstrument.bind(this));\n\n    _addInstrumentOptions.call(this);\n\n    this.render();\n  },\n  loadInstrument: function loadInstrument(event) {\n    var instrument = event.target.value;\n    this.midiSetupActions.loadSoundfontInstrument(instrument);\n  },\n  render: function render() {\n    var _this = this;\n\n    var store = void 0;\n\n    store = this.store;\n\n    store.subscribe(function () {\n      var state = void 0;\n      state = store.getState();\n\n      if (state.settings.webApiAudio) {\n        _this.instrumentSelector.classList.add('hidden');\n      } else {\n        _this.instrumentSelector.classList.remove('hidden');\n      }\n    });\n  }\n};\n\nfunction _addInstrumentOptions() {\n  var instrument = void 0,\n      instrumentOption = void 0;\n\n  for (instrument in _midiInstruments.MIDIInstruments) {\n    instrumentOption = document.createElement('option');\n    instrumentOption.value = _midiInstruments.MIDIInstruments[instrument];\n    instrumentOption.text = _midiInstruments.MIDIInstruments[instrument];\n    this.instrumentSelector.appendChild(instrumentOption);\n  }\n}\n\n},{\"../constants/midi-instruments\":47}],46:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MidiPiano = exports.MidiPiano = {\n  init: function init() {\n    var store = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var midiEventsActions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    this.store = store;\n    this.midiEventsActions = midiEventsActions;\n    this.notes = document.getElementsByClassName('note');\n    this.keys = {};\n\n    _initKeyElements.call(this);\n\n    this.render();\n  },\n  render: function render() {\n    var _this = this;\n\n    var store = void 0;\n\n    store = this.store;\n\n    store.subscribe(function () {\n      var note = void 0,\n          state = void 0;\n      state = store.getState();\n\n      for (note in state.midi.notes) {\n        _togglePlayingNote.call(_this, state.midi.notes[note], _this.keys[note]);\n      }\n    });\n  }\n};\n\nfunction _initKeyElements() {\n  var _this2 = this;\n\n  var noteNumber = 48;\n\n  [].forEach.call(this.notes, function (note) {\n    note.setAttribute('data-note', noteNumber);\n\n    note.addEventListener('mousedown', _this2.midiEventsActions.noteOn);\n    note.addEventListener('mouseup', _this2.midiEventsActions.noteOff);\n\n    _this2.keys[noteNumber] = note;\n    noteNumber++;\n  });\n}\n\nfunction _togglePlayingNote(note, key) {\n  return note ? key.classList.add('playing') : key.classList.remove('playing');\n}\n\n},{}],47:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MIDIInstruments = exports.MIDIInstruments = {\n  0: 'acoustic_grand_piano',\n  1: 'bright_acoustic_piano',\n  2: 'electric_grand_piano',\n  3: 'honkytonk_piano',\n  4: 'electric_piano_1',\n  5: 'electric_piano_2',\n  6: 'harpsichord',\n  7: 'clavinet',\n  8: 'celesta',\n  9: 'glockenspiel',\n  10: 'music_box',\n  11: 'vibraphone',\n  12: 'marimba',\n  13: 'xylophone',\n  14: 'tubular_bells',\n  15: 'dulcimer',\n  16: 'drawbar_organ',\n  17: 'percussive_organ',\n  18: 'rock_organ',\n  19: 'church_organ',\n  20: 'reed_organ',\n  21: 'Accordion',\n  22: 'harmonica',\n  23: 'tango_accordion',\n  24: 'acoustic_guitar_nylon',\n  25: 'acoustic_guitar_steel',\n  26: 'electric_guitar_jazz',\n  27: 'electric_guitar_clean',\n  28: 'electric_guitar_muted',\n  29: 'overdriven_guitar',\n  30: 'distortion_guitar',\n  31: 'guitar_harmonics',\n  32: 'acoustic_bass',\n  33: 'electric_bass_finger',\n  34: 'electric_bass_pick',\n  35: 'fretless_bass',\n  36: 'slap_bass_1',\n  37: 'slap_bass_2',\n  38: 'synth_bass_1',\n  39: 'synth_bass_2',\n  40: 'violin',\n  41: 'viola',\n  42: 'cello',\n  43: 'contrabass',\n  44: 'tremolo_strings',\n  45: 'pizzicato_strings',\n  46: 'orchestral_harp',\n  47: 'timpani',\n  48: 'string_ensemble_1',\n  49: 'string_ensemble_2',\n  50: 'synthstrings_1',\n  51: 'synthstrings_2',\n  52: 'choir_aahs',\n  53: 'voice_oohs',\n  54: 'synth_voice',\n  55: 'orchestra_hit',\n  56: 'trumpet',\n  57: 'trombone',\n  58: 'tuba',\n  59: 'muted_trumpet',\n  60: 'french_horn',\n  61: 'brass_section',\n  62: 'synth_brass_1',\n  63: 'synth_brass_2',\n  64: 'soprano_sax',\n  65: 'alto_sax',\n  66: 'tenor_sax',\n  67: 'baritone_sax',\n  68: 'oboe',\n  69: 'english_horn',\n  70: 'bassoon',\n  71: 'clarinet',\n  72: 'piccolo',\n  73: 'flute',\n  74: 'recorder',\n  75: 'pan_flute',\n  76: 'blown_bottle',\n  77: 'shakuhachi',\n  78: 'whistle',\n  79: 'ocarina',\n  80: 'lead_1_square',\n  81: 'lead_2_sawtooth',\n  82: 'lead_3_calliope',\n  83: 'lead_4_chiff',\n  84: 'lead_5_charang',\n  85: 'lead_6_voice',\n  86: 'lead_7_fifths',\n  87: 'lead_8_bass_lead',\n  88: 'pad_1_new_age',\n  89: 'pad_2_warm',\n  90: 'pad_3_polysynth',\n  91: 'pad_4_choir',\n  92: 'pad_5_bowed',\n  93: 'pad_6_metallic',\n  94: 'pad_7_halo',\n  95: 'pad_8_sweep',\n  96: 'fx_1_rain',\n  97: 'fx_2_soundtrack',\n  98: 'fx_3_crystal',\n  99: 'fx_4_atmosphere',\n  100: 'fx_5_brightness',\n  101: 'fx_6_goblins',\n  102: 'fx_7_echoes',\n  103: 'fx_8_scifi',\n  104: 'sitar',\n  105: 'banjo',\n  106: 'shamisen',\n  107: 'koto',\n  108: 'kalimba',\n  109: 'bag_pipe',\n  110: 'fiddle',\n  111: 'shanai',\n  112: 'tinkle_bell',\n  113: 'agogo',\n  114: 'steel_drums',\n  115: 'woodblock',\n  116: 'taiko_drum',\n  117: 'melodic_tom',\n  118: 'synth_drum',\n  119: 'reverse_cymbal',\n  120: 'guitar_fret_noise',\n  121: 'breath_noise',\n  122: 'seashore',\n  123: 'bird_tweet',\n  124: 'telephone_ring',\n  125: 'helicopter',\n  126: 'applause',\n  127: 'gunshot'\n};\n\n},{}],48:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MidiMessagesHex = exports.MidiMessagesHex = Object.freeze({\n  SEQUENCE_NUMBER: 0x00,\n  TEXT: 0x01,\n  INSTRUMENT_NAME: 0x04,\n  NOTE_OFF: 0x80,\n  NOTE_ON: 0x90,\n  PROGRAM_CHANGE: 0xC0,\n  CONTROLLER: 0xB0\n});\n\n},{}],49:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MidiMessages = exports.MidiMessages = Object.freeze({\n  0x00: 'sequenceNumber',\n  0x01: 'text',\n  0x04: 'instrumentName',\n  0x80: 'noteOff',\n  0x90: 'noteOn',\n  0xC0: 'programChange',\n  0xB0: 'controller'\n});\n\n},{}],50:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* Soundfond Library:\n\n  By Gleitz\n  https://github.com/gleitz/midi-js-soundfonts/tree/gh-pages/FluidR3_GM\n\n*/\n\nvar InstrumentSets = exports.InstrumentSets = Object.freeze({\n  MUSYNG_KITE: 'MusyngKite',\n  FLUID_R3_GM: 'FluidR3_GM'\n});\n\nvar InstrumentPathConfig = exports.InstrumentPathConfig = {\n  URL: 'http://localhost',\n  PORT: 8001,\n  SET: InstrumentSets.MUSYNG_KITE,\n  URL_GITHUB: 'https://raw.githubusercontent.com/gleitz/midi-js-soundfonts/gh-pages/'\n};\n\nvar SOUNDS_PATH = exports.SOUNDS_PATH = InstrumentPathConfig.URL + ':' + InstrumentPathConfig.PORT + '/' + InstrumentPathConfig.SET;\n\nvar SOUNDS_FILETYPE = exports.SOUNDS_FILETYPE = 'mp3';\nvar SOUNDS_FILE_EXTENSION = exports.SOUNDS_FILE_EXTENSION = 'js';\n\n},{}],51:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _redux = require('redux');\n\nvar _midiReducer = require('../reducers/midi-reducer');\n\nvar _midiReducer2 = _interopRequireDefault(_midiReducer);\n\nvar _settingsReducer = require('../reducers/settings-reducer');\n\nvar _settingsReducer2 = _interopRequireDefault(_settingsReducer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar rootReducer = (0, _redux.combineReducers)({\n  midi: _midiReducer2.default,\n  settings: _settingsReducer2.default\n});\n\nexports.default = rootReducer;\n\n},{\"../reducers/midi-reducer\":52,\"../reducers/settings-reducer\":53,\"redux\":25}],52:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = MIDIEventsReducer;\n\nvar _midiActions = require('../actions/midi-actions.js');\n\nvar _midiActions2 = _interopRequireDefault(_midiActions);\n\nvar _midiConnect = require('../actions/midi-connect.js');\n\nvar _midiConnect2 = _interopRequireDefault(_midiConnect);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar initialState = {\n  message: 'None',\n  inputs: [],\n  data: null,\n  audioContext: !!window.AudioContext ? new window.AudioContext() : new window.webkitAudioContext(),\n  gainNode: null,\n  notes: {}\n};\n\nfunction MIDIEventsReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments[1];\n  var type = action.type,\n      payload = action.payload;\n\n\n  console.log('!!!', payload);\n\n  switch (type) {\n    case _midiActions2.default.NOTE_ON:\n    case _midiActions2.default.NOTE_OFF:\n    case _midiActions2.default.PROGRAM_CHANGE:\n    case _midiActions2.default.INSTRUMENT_NAME:\n    case _midiActions2.default.CONTROLLER:\n    case _midiActions2.default.SYS_EX:\n      return _extends({}, state, payload);\n    default:\n      return state;\n  }\n}\n\n},{\"../actions/midi-actions.js\":42,\"../actions/midi-connect.js\":43}],53:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = MIDIEventsReducer;\n\nvar _midiActions = require('../actions/midi-actions.js');\n\nvar _midiActions2 = _interopRequireDefault(_midiActions);\n\nvar _midiConnect = require('../actions/midi-connect.js');\n\nvar _midiConnect2 = _interopRequireDefault(_midiConnect);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar initialState = {\n  midiAccess: null,\n  webApiAudio: false,\n  gainNode: null,\n  soundfontInstrument: null\n};\n\nfunction MIDIEventsReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments[1];\n  var type = action.type,\n      payload = action.payload;\n\n  switch (type) {\n    case _midiConnect2.default.MIDI_SUCCESS:\n    case _midiConnect2.default.MIDI_FAILURE:\n    case _midiConnect2.default.MIDI_LOAD_INSTRUMENT:\n    case _midiConnect2.default.CHANGE_AUDIO:\n      return _extends({}, state, payload);\n    default:\n      return state;\n  }\n}\n\n},{\"../actions/midi-actions.js\":42,\"../actions/midi-connect.js\":43}],54:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = configureStore;\n\nvar _redux = require('redux');\n\nvar _reduxThunk = require('redux-thunk');\n\nvar _reduxThunk2 = _interopRequireDefault(_reduxThunk);\n\nvar _index = require('../reducers/index');\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || _redux.compose;\nvar middleware = composeEnhancers((0, _redux.applyMiddleware)(_reduxThunk2.default));\n\nfunction configureStore(initialState) {\n  return (0, _redux.createStore)(_index2.default, initialState, middleware);\n}\n\n},{\"../reducers/index\":51,\"redux\":25,\"redux-thunk\":19}],55:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar AudioUtils = exports.AudioUtils = Object.freeze({\n  getFrequency: function getFrequency(note) {\n    var LA_HZ = 440,\n        LA_DEC = 69,\n        OCTAVE = 12;\n\n    return LA_HZ * Math.pow(2, (note - LA_DEC) / OCTAVE);\n  },\n  generateOscillator: function generateOscillator(note, audioContext) {\n    var oscillator = void 0,\n        frequency = void 0;\n\n    oscillator = audioContext.createOscillator();\n    frequency = this.getFrequency(note);\n\n    oscillator.type = 'square';\n    oscillator.connect(audioContext.destination);\n    oscillator.frequency.value = frequency;\n\n    return oscillator;\n  }\n});\n\n},{}],56:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MidiUtils = undefined;\n\nvar _midiMessagesHex = require('../constants/midi-messages-hex');\n\nvar MidiUtils = exports.MidiUtils = Object.freeze({\n  getType: function getType(data) {\n    return data[0];\n  },\n  getNote: function getNote(data) {\n    return data[1];\n  },\n  getNoteVelocity: function getNoteVelocity(data) {\n    return data[2];\n  },\n  getEventType: function getEventType(data) {\n    return this.isNoteOnOff(data) ? _midiMessagesHex.MidiMessagesHex.NOTE_OFF & 0xf0 : this.getType(data) & 0xf0;\n  },\n  isNoteOnOff: function isNoteOnOff(data) {\n    return this.getType(data) === _midiMessagesHex.MidiMessagesHex.NOTE_ON && this.getNoteVelocity(data) === 0;\n  },\n  setNoteOnMessage: function setNoteOnMessage(target) {\n    var NOTE_ON = 144;\n    return new Uint8Array([NOTE_ON, event.target.getAttribute('data-note'), 1]);\n  },\n  setNoteOffMessage: function setNoteOffMessage(target) {\n    var NOTE_ON = 144;\n    return new Uint8Array([NOTE_ON, event.target.getAttribute('data-note'), 0]);\n  }\n}); /*jslint bitwise: true */\n\n},{\"../constants/midi-messages-hex\":48}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9hZHNyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2F1ZGlvLWxvYWRlci9saWIvYmFzZTY0LmpzIiwibm9kZV9tb2R1bGVzL2F1ZGlvLWxvYWRlci9saWIvZmV0Y2guanMiLCJub2RlX21vZHVsZXMvYXVkaW8tbG9hZGVyL2xpYi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvX1N5bWJvbC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvX2Jhc2VHZXRUYWcuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL19mcmVlR2xvYmFsLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9fZ2V0UHJvdG90eXBlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9fZ2V0UmF3VGFnLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9fb2JqZWN0VG9TdHJpbmcuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL19vdmVyQXJnLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9fcm9vdC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaXNPYmplY3RMaWtlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pc1BsYWluT2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL21pZGltZXNzYWdlL2Rpc3QvaW5kZXgubWluLmpzIiwibm9kZV9tb2R1bGVzL25vdGUtcGFyc2VyL2Rpc3Qvbm90ZS1wYXJzZXIuanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3JlZHV4LXRodW5rL2xpYi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9yZWR1eC9saWIvYXBwbHlNaWRkbGV3YXJlLmpzIiwibm9kZV9tb2R1bGVzL3JlZHV4L2xpYi9iaW5kQWN0aW9uQ3JlYXRvcnMuanMiLCJub2RlX21vZHVsZXMvcmVkdXgvbGliL2NvbWJpbmVSZWR1Y2Vycy5qcyIsIm5vZGVfbW9kdWxlcy9yZWR1eC9saWIvY29tcG9zZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWR1eC9saWIvY3JlYXRlU3RvcmUuanMiLCJub2RlX21vZHVsZXMvcmVkdXgvbGliL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlZHV4L2xpYi91dGlscy93YXJuaW5nLmpzIiwibm9kZV9tb2R1bGVzL3NhbXBsZS1wbGF5ZXIvbGliL2V2ZW50cy5qcyIsIm5vZGVfbW9kdWxlcy9zYW1wbGUtcGxheWVyL2xpYi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9zYW1wbGUtcGxheWVyL2xpYi9taWRpLmpzIiwibm9kZV9tb2R1bGVzL3NhbXBsZS1wbGF5ZXIvbGliL25vdGVzLmpzIiwibm9kZV9tb2R1bGVzL3NhbXBsZS1wbGF5ZXIvbGliL3BsYXllci5qcyIsIm5vZGVfbW9kdWxlcy9zYW1wbGUtcGxheWVyL2xpYi9zY2hlZHVsZXIuanMiLCJub2RlX21vZHVsZXMvc2FtcGxlLXBsYXllci9ub2RlX21vZHVsZXMvbm90ZS1wYXJzZXIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc291bmRmb250LXBsYXllci9saWIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc291bmRmb250LXBsYXllci9saWIvbGVnYWN5LmpzIiwibm9kZV9tb2R1bGVzL3N5bWJvbC1vYnNlcnZhYmxlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3N5bWJvbC1vYnNlcnZhYmxlL2xpYi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9zeW1ib2wtb2JzZXJ2YWJsZS9saWIvcG9ueWZpbGwuanMiLCJzcmMvYWN0aW9uLWNyZWF0b3JzL21pZGktZXZlbnRzLWFjdGlvbi1jcmVhdG9ycy5qcyIsInNyYy9hY3Rpb24tY3JlYXRvcnMvbWlkaS1tZXNzYWdlcy1hY3Rpb24tY3JlYXRvcnMuanMiLCJzcmMvYWN0aW9uLWNyZWF0b3JzL21pZGktc2V0dXAtYWN0aW9uLWNyZWF0b3JzLmpzIiwic3JjL2FjdGlvbnMvbWlkaS1hY3Rpb25zLmpzIiwic3JjL2FjdGlvbnMvbWlkaS1jb25uZWN0LmpzIiwic3JjL2NvbXBvbmVudHMvbWlkaS1hdWRpby1zZWxlY3Rvci5qcyIsInNyYy9jb21wb25lbnRzL21pZGktaW5zdHJ1bWVudHMtc2VsZWN0b3IuanMiLCJzcmMvY29tcG9uZW50cy9taWRpLXBpYW5vLmpzIiwic3JjL2NvbnN0YW50cy9taWRpLWluc3RydW1lbnRzLmpzIiwic3JjL2NvbnN0YW50cy9taWRpLW1lc3NhZ2VzLWhleC5qcyIsInNyYy9jb25zdGFudHMvbWlkaS1tZXNzYWdlcy5qcyIsInNyYy9jb25zdGFudHMvbWlkaS1zb3VuZHBhdGhzLmpzIiwic3JjL3JlZHVjZXJzL2luZGV4LmpzIiwic3JjL3JlZHVjZXJzL21pZGktcmVkdWNlci5qcyIsInNyYy9yZWR1Y2Vycy9zZXR0aW5ncy1yZWR1Y2VyLmpzIiwic3JjL3N0b3JlL2NvbmZpZ3VyZVN0b3JlLmpzIiwic3JjL3V0aWxzL2F1ZGlvLmpzIiwic3JjL3V0aWxzL21pZGkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0lBQVksVTs7QUFDWjs7SUFBWSxTOztBQUVaOzs7Ozs7QUFFQSxJQUFNLFFBQVEsK0JBQWQ7QUFDQSxJQUFNLG1CQUFtQiwrQkFBbUIsU0FBbkIsRUFBOEIsTUFBTSxRQUFwQyxDQUF6QjtBQUNBLElBQU0sb0JBQW9CLCtCQUFtQixVQUFuQixFQUErQixNQUFNLFFBQXJDLENBQTFCOztBQUVBLHFCQUFVLElBQVYsQ0FBZSxLQUFmLEVBQXNCLGlCQUF0QjtBQUNBLGlEQUF3QixJQUF4QixDQUE2QixLQUE3QixFQUFvQyxnQkFBcEM7QUFDQSxxQ0FBa0IsSUFBbEIsQ0FBdUIsS0FBdkIsRUFBOEIsZ0JBQTlCOztBQUVBLGlCQUFpQix1QkFBakIsQ0FBeUMsc0JBQXpDOztBQUVBLElBQUksVUFBVSxpQkFBZCxFQUFpQztBQUMvQixZQUFVLGlCQUFWLENBQTRCLEVBQUMsT0FBTyxLQUFSLEVBQTVCLEVBQTRDLElBQTVDLENBQWlELGlCQUFpQixXQUFsRTtBQUNEOzs7QUNyQkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOURBO0FBQ0E7Ozs7QUNEQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzdJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Qyx3QkFheEIsSUFid0IsRUFhbEI7QUFDakIsV0FBTyxLQUFLLFdBQUwsQ0FBaUIsSUFBakIsSUFDTCxpQ0FBZ0IsUUFBaEIsR0FBMkIsSUFEdEIsR0FFSCxLQUFLLE9BQUwsQ0FBYSxJQUFiLElBQXFCLElBRnpCO0FBR0QsR0FqQm9DO0FBbUJyQyxhQW5CcUMsdUJBbUJ6QixJQW5CeUIsRUFtQm5CO0FBQ2hCLFdBQU8sS0FBSyxPQUFMLENBQWEsSUFBYixNQUF1QixpQ0FBZ0IsT0FBdkMsSUFDTCxLQUFLLGVBQUwsQ0FBcUIsSUFBckIsTUFBK0IsQ0FEakM7QUFFRCxHQXRCb0M7QUF3QnJDLGtCQXhCcUMsNEJBd0JwQixNQXhCb0IsRUF3Qlo7QUFDdkIsUUFBTSxVQUFVLEdBQWhCO0FBQ0EsV0FBTyxJQUFJLFVBQUosQ0FBZSxDQUFDLE9BQUQsRUFBVSxNQUFNLE1BQU4sQ0FBYSxZQUFiLENBQTBCLFdBQTFCLENBQVYsRUFBa0QsQ0FBbEQsQ0FBZixDQUFQO0FBQ0QsR0EzQm9DO0FBNkJyQyxtQkE3QnFDLDZCQTZCbkIsTUE3Qm1CLEVBNkJYO0FBQ3hCLFFBQU0sVUFBVSxHQUFoQjtBQUNBLFdBQU8sSUFBSSxVQUFKLENBQWUsQ0FBQyxPQUFELEVBQVUsTUFBTSxNQUFOLENBQWEsWUFBYixDQUEwQixXQUExQixDQUFWLEVBQWtELENBQWxELENBQWYsQ0FBUDtBQUNEO0FBaENvQyxDQUFkLENBQWxCLEMsQ0FKUCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgY29uZmlndXJlU3RvcmUgZnJvbSAnLi9zcmMvc3RvcmUvY29uZmlndXJlU3RvcmUnO1xuaW1wb3J0IHsgTWlkaVBpYW5vIH0gZnJvbSAnLi9zcmMvY29tcG9uZW50cy9taWRpLXBpYW5vJztcbmltcG9ydCB7IE1pZGlJbnN0cnVtZW50c1NlbGVjdG9yIH0gZnJvbSAnLi9zcmMvY29tcG9uZW50cy9taWRpLWluc3RydW1lbnRzLXNlbGVjdG9yJztcbmltcG9ydCB7IE1pZGlBdWRpb1NlbGVjdG9yIH0gZnJvbSAnLi9zcmMvY29tcG9uZW50cy9taWRpLWF1ZGlvLXNlbGVjdG9yJztcbmltcG9ydCAqIGFzIE1pZGlFdmVudHMgZnJvbSAnLi9zcmMvYWN0aW9uLWNyZWF0b3JzL21pZGktZXZlbnRzLWFjdGlvbi1jcmVhdG9ycyc7XG5pbXBvcnQgKiBhcyBNaWRpU2V0dXAgZnJvbSAnLi9zcmMvYWN0aW9uLWNyZWF0b3JzL21pZGktc2V0dXAtYWN0aW9uLWNyZWF0b3JzJztcblxuaW1wb3J0IHsgYmluZEFjdGlvbkNyZWF0b3JzIH0gZnJvbSAncmVkdXgnO1xuXG5jb25zdCBzdG9yZSA9IGNvbmZpZ3VyZVN0b3JlKCk7XG5jb25zdCBtaWRpU2V0dXBBY3Rpb25zID0gYmluZEFjdGlvbkNyZWF0b3JzKE1pZGlTZXR1cCwgc3RvcmUuZGlzcGF0Y2gpO1xuY29uc3QgbWlkaUV2ZW50c0FjdGlvbnMgPSBiaW5kQWN0aW9uQ3JlYXRvcnMoTWlkaUV2ZW50cywgc3RvcmUuZGlzcGF0Y2gpO1xuXG5NaWRpUGlhbm8uaW5pdChzdG9yZSwgbWlkaUV2ZW50c0FjdGlvbnMpO1xuTWlkaUluc3RydW1lbnRzU2VsZWN0b3IuaW5pdChzdG9yZSwgbWlkaVNldHVwQWN0aW9ucyk7XG5NaWRpQXVkaW9TZWxlY3Rvci5pbml0KHN0b3JlLCBtaWRpU2V0dXBBY3Rpb25zKTtcblxubWlkaVNldHVwQWN0aW9ucy5sb2FkU291bmRmb250SW5zdHJ1bWVudCgnYWNvdXN0aWNfZ3JhbmRfcGlhbm8nKTtcblxuaWYgKG5hdmlnYXRvci5yZXF1ZXN0TUlESUFjY2Vzcykge1xuICBuYXZpZ2F0b3IucmVxdWVzdE1JRElBY2Nlc3Moe3N5c2V4OiBmYWxzZX0pLnRoZW4obWlkaVNldHVwQWN0aW9ucy5taWRpU3VjY2Vzcyk7XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IEFEU1JcblxuZnVuY3Rpb24gQURTUihhdWRpb0NvbnRleHQpe1xuICB2YXIgbm9kZSA9IGF1ZGlvQ29udGV4dC5jcmVhdGVHYWluKClcblxuICB2YXIgdm9sdGFnZSA9IG5vZGUuX3ZvbHRhZ2UgPSBnZXRWb2x0YWdlKGF1ZGlvQ29udGV4dClcbiAgdmFyIHZhbHVlID0gc2NhbGUodm9sdGFnZSlcbiAgdmFyIHN0YXJ0VmFsdWUgPSBzY2FsZSh2b2x0YWdlKVxuICB2YXIgZW5kVmFsdWUgPSBzY2FsZSh2b2x0YWdlKVxuXG4gIG5vZGUuX3N0YXJ0QW1vdW50ID0gc2NhbGUoc3RhcnRWYWx1ZSlcbiAgbm9kZS5fZW5kQW1vdW50ID0gc2NhbGUoZW5kVmFsdWUpXG5cbiAgbm9kZS5fbXVsdGlwbGllciA9IHNjYWxlKHZhbHVlKVxuICBub2RlLl9tdWx0aXBsaWVyLmNvbm5lY3Qobm9kZSlcbiAgbm9kZS5fc3RhcnRBbW91bnQuY29ubmVjdChub2RlKVxuICBub2RlLl9lbmRBbW91bnQuY29ubmVjdChub2RlKVxuXG4gIG5vZGUudmFsdWUgPSB2YWx1ZS5nYWluXG4gIG5vZGUuc3RhcnRWYWx1ZSA9IHN0YXJ0VmFsdWUuZ2FpblxuICBub2RlLmVuZFZhbHVlID0gZW5kVmFsdWUuZ2FpblxuXG4gIG5vZGUuc3RhcnRWYWx1ZS52YWx1ZSA9IDBcbiAgbm9kZS5lbmRWYWx1ZS52YWx1ZSA9IDBcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhub2RlLCBwcm9wcylcbiAgcmV0dXJuIG5vZGVcbn1cblxudmFyIHByb3BzID0ge1xuXG4gIGF0dGFjazogeyB2YWx1ZTogMCwgd3JpdGFibGU6IHRydWUgfSxcbiAgZGVjYXk6IHsgdmFsdWU6IDAsIHdyaXRhYmxlOiB0cnVlIH0sXG4gIHN1c3RhaW46IHsgdmFsdWU6IDEsIHdyaXRhYmxlOiB0cnVlIH0sXG4gIHJlbGVhc2U6IHt2YWx1ZTogMCwgd3JpdGFibGU6IHRydWUgfSxcblxuICBnZXRSZWxlYXNlRHVyYXRpb246IHtcbiAgICB2YWx1ZTogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiB0aGlzLnJlbGVhc2VcbiAgICB9XG4gIH0sXG5cbiAgc3RhcnQ6IHtcbiAgICB2YWx1ZTogZnVuY3Rpb24oYXQpe1xuICAgICAgdmFyIHRhcmdldCA9IHRoaXMuX211bHRpcGxpZXIuZ2FpblxuICAgICAgdmFyIHN0YXJ0QW1vdW50ID0gdGhpcy5fc3RhcnRBbW91bnQuZ2FpblxuICAgICAgdmFyIGVuZEFtb3VudCA9IHRoaXMuX2VuZEFtb3VudC5nYWluXG5cbiAgICAgIHRoaXMuX3ZvbHRhZ2Uuc3RhcnQoYXQpXG4gICAgICB0aGlzLl9kZWNheUZyb20gPSB0aGlzLl9kZWNheUZyb20gPSBhdCt0aGlzLmF0dGFja1xuICAgICAgdGhpcy5fc3RhcnRlZEF0ID0gYXRcblxuICAgICAgdmFyIHN1c3RhaW4gPSB0aGlzLnN1c3RhaW5cblxuICAgICAgdGFyZ2V0LmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhhdClcbiAgICAgIHN0YXJ0QW1vdW50LmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhhdClcbiAgICAgIGVuZEFtb3VudC5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoYXQpXG5cbiAgICAgIGVuZEFtb3VudC5zZXRWYWx1ZUF0VGltZSgwLCBhdClcblxuICAgICAgaWYgKHRoaXMuYXR0YWNrKXtcbiAgICAgICAgdGFyZ2V0LnNldFZhbHVlQXRUaW1lKDAsIGF0KVxuICAgICAgICB0YXJnZXQubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMSwgYXQgKyB0aGlzLmF0dGFjaylcblxuICAgICAgICBzdGFydEFtb3VudC5zZXRWYWx1ZUF0VGltZSgxLCBhdClcbiAgICAgICAgc3RhcnRBbW91bnQubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMCwgYXQgKyB0aGlzLmF0dGFjaylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldC5zZXRWYWx1ZUF0VGltZSgxLCBhdClcbiAgICAgICAgc3RhcnRBbW91bnQuc2V0VmFsdWVBdFRpbWUoMCwgYXQpXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRlY2F5KXtcbiAgICAgICAgdGFyZ2V0LnNldFRhcmdldEF0VGltZShzdXN0YWluLCB0aGlzLl9kZWNheUZyb20sIGdldFRpbWVDb25zdGFudCh0aGlzLmRlY2F5KSlcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgc3RvcDoge1xuICAgIHZhbHVlOiBmdW5jdGlvbihhdCwgaXNUYXJnZXQpe1xuICAgICAgaWYgKGlzVGFyZ2V0KXtcbiAgICAgICAgYXQgPSBhdCAtIHRoaXMucmVsZWFzZVxuICAgICAgfVxuXG4gICAgICB2YXIgZW5kVGltZSA9IGF0ICsgdGhpcy5yZWxlYXNlXG4gICAgICBpZiAodGhpcy5yZWxlYXNlKXtcblxuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5fbXVsdGlwbGllci5nYWluXG4gICAgICAgIHZhciBzdGFydEFtb3VudCA9IHRoaXMuX3N0YXJ0QW1vdW50LmdhaW5cbiAgICAgICAgdmFyIGVuZEFtb3VudCA9IHRoaXMuX2VuZEFtb3VudC5nYWluXG5cbiAgICAgICAgdGFyZ2V0LmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhhdClcbiAgICAgICAgc3RhcnRBbW91bnQuY2FuY2VsU2NoZWR1bGVkVmFsdWVzKGF0KVxuICAgICAgICBlbmRBbW91bnQuY2FuY2VsU2NoZWR1bGVkVmFsdWVzKGF0KVxuXG4gICAgICAgIHZhciBleHBGYWxsb2ZmID0gZ2V0VGltZUNvbnN0YW50KHRoaXMucmVsZWFzZSlcblxuICAgICAgICAvLyB0cnVuY2F0ZSBhdHRhY2sgKHJlcXVpcmVkIGFzIGxpbmVhclJhbXAgaXMgcmVtb3ZlZCBieSBjYW5jZWxTY2hlZHVsZWRWYWx1ZXMpXG4gICAgICAgIGlmICh0aGlzLmF0dGFjayAmJiBhdCA8IHRoaXMuX2RlY2F5RnJvbSl7XG4gICAgICAgICAgdmFyIHZhbHVlQXRUaW1lID0gZ2V0VmFsdWUoMCwgMSwgdGhpcy5fc3RhcnRlZEF0LCB0aGlzLl9kZWNheUZyb20sIGF0KVxuICAgICAgICAgIHRhcmdldC5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh2YWx1ZUF0VGltZSwgYXQpXG4gICAgICAgICAgc3RhcnRBbW91bnQubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMS12YWx1ZUF0VGltZSwgYXQpXG4gICAgICAgICAgc3RhcnRBbW91bnQuc2V0VGFyZ2V0QXRUaW1lKDAsIGF0LCBleHBGYWxsb2ZmKVxuICAgICAgICB9XG5cbiAgICAgICAgZW5kQW1vdW50LnNldFRhcmdldEF0VGltZSgxLCBhdCwgZXhwRmFsbG9mZilcbiAgICAgICAgdGFyZ2V0LnNldFRhcmdldEF0VGltZSgwLCBhdCwgZXhwRmFsbG9mZilcbiAgICAgIH1cblxuICAgICAgdGhpcy5fdm9sdGFnZS5zdG9wKGVuZFRpbWUpXG4gICAgICByZXR1cm4gZW5kVGltZVxuICAgIH1cbiAgfSxcblxuICBvbmVuZGVkOiB7XG4gICAgZ2V0OiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIHRoaXMuX3ZvbHRhZ2Uub25lbmRlZFxuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICB0aGlzLl92b2x0YWdlLm9uZW5kZWQgPSB2YWx1ZVxuICAgIH1cbiAgfVxuXG59XG5cbnZhciBmbGF0ID0gbmV3IEZsb2F0MzJBcnJheShbMSwxXSlcbmZ1bmN0aW9uIGdldFZvbHRhZ2UoY29udGV4dCl7XG4gIHZhciB2b2x0YWdlID0gY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKVxuICB2YXIgYnVmZmVyID0gY29udGV4dC5jcmVhdGVCdWZmZXIoMSwgMiwgY29udGV4dC5zYW1wbGVSYXRlKVxuICBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoMCkuc2V0KGZsYXQpXG4gIHZvbHRhZ2UuYnVmZmVyID0gYnVmZmVyXG4gIHZvbHRhZ2UubG9vcCA9IHRydWVcbiAgcmV0dXJuIHZvbHRhZ2Vcbn1cblxuZnVuY3Rpb24gc2NhbGUobm9kZSl7XG4gIHZhciBnYWluID0gbm9kZS5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICBub2RlLmNvbm5lY3QoZ2FpbilcbiAgcmV0dXJuIGdhaW5cbn1cblxuZnVuY3Rpb24gZ2V0VGltZUNvbnN0YW50KHRpbWUpe1xuICByZXR1cm4gTWF0aC5sb2codGltZSsxKS9NYXRoLmxvZygxMDApXG59XG5cbmZ1bmN0aW9uIGdldFZhbHVlKHN0YXJ0LCBlbmQsIGZyb21UaW1lLCB0b1RpbWUsIGF0KXtcbiAgdmFyIGRpZmZlcmVuY2UgPSBlbmQgLSBzdGFydFxuICB2YXIgdGltZSA9IHRvVGltZSAtIGZyb21UaW1lXG4gIHZhciB0cnVuY2F0ZVRpbWUgPSBhdCAtIGZyb21UaW1lXG4gIHZhciBwaGFzZSA9IHRydW5jYXRlVGltZSAvIHRpbWVcbiAgdmFyIHZhbHVlID0gc3RhcnQgKyBwaGFzZSAqIGRpZmZlcmVuY2VcblxuICBpZiAodmFsdWUgPD0gc3RhcnQpIHtcbiAgICAgIHZhbHVlID0gc3RhcnRcbiAgfVxuICBpZiAodmFsdWUgPj0gZW5kKSB7XG4gICAgICB2YWx1ZSA9IGVuZFxuICB9XG5cbiAgcmV0dXJuIHZhbHVlXG59XG4iLCIndXNlIHN0cmljdCdcblxuLy8gREVDT0RFIFVUSUxJVElFU1xuZnVuY3Rpb24gYjY0VG9VaW50NiAobkNocikge1xuICByZXR1cm4gbkNociA+IDY0ICYmIG5DaHIgPCA5MSA/IG5DaHIgLSA2NVxuICAgIDogbkNociA+IDk2ICYmIG5DaHIgPCAxMjMgPyBuQ2hyIC0gNzFcbiAgICA6IG5DaHIgPiA0NyAmJiBuQ2hyIDwgNTggPyBuQ2hyICsgNFxuICAgIDogbkNociA9PT0gNDMgPyA2MlxuICAgIDogbkNociA9PT0gNDcgPyA2M1xuICAgIDogMFxufVxuXG4vLyBEZWNvZGUgQmFzZTY0IHRvIFVpbnQ4QXJyYXlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZnVuY3Rpb24gZGVjb2RlIChzQmFzZTY0LCBuQmxvY2tzU2l6ZSkge1xuICB2YXIgc0I2NEVuYyA9IHNCYXNlNjQucmVwbGFjZSgvW15BLVphLXowLTlcXCtcXC9dL2csICcnKVxuICB2YXIgbkluTGVuID0gc0I2NEVuYy5sZW5ndGhcbiAgdmFyIG5PdXRMZW4gPSBuQmxvY2tzU2l6ZVxuICAgID8gTWF0aC5jZWlsKChuSW5MZW4gKiAzICsgMSA+PiAyKSAvIG5CbG9ja3NTaXplKSAqIG5CbG9ja3NTaXplXG4gICAgOiBuSW5MZW4gKiAzICsgMSA+PiAyXG4gIHZhciB0YUJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobk91dExlbilcblxuICBmb3IgKHZhciBuTW9kMywgbk1vZDQsIG5VaW50MjQgPSAwLCBuT3V0SWR4ID0gMCwgbkluSWR4ID0gMDsgbkluSWR4IDwgbkluTGVuOyBuSW5JZHgrKykge1xuICAgIG5Nb2Q0ID0gbkluSWR4ICYgM1xuICAgIG5VaW50MjQgfD0gYjY0VG9VaW50NihzQjY0RW5jLmNoYXJDb2RlQXQobkluSWR4KSkgPDwgMTggLSA2ICogbk1vZDRcbiAgICBpZiAobk1vZDQgPT09IDMgfHwgbkluTGVuIC0gbkluSWR4ID09PSAxKSB7XG4gICAgICBmb3IgKG5Nb2QzID0gMDsgbk1vZDMgPCAzICYmIG5PdXRJZHggPCBuT3V0TGVuOyBuTW9kMysrLCBuT3V0SWR4KyspIHtcbiAgICAgICAgdGFCeXRlc1tuT3V0SWR4XSA9IG5VaW50MjQgPj4+ICgxNiA+Pj4gbk1vZDMgJiAyNCkgJiAyNTVcbiAgICAgIH1cbiAgICAgIG5VaW50MjQgPSAwXG4gICAgfVxuICB9XG4gIHJldHVybiB0YUJ5dGVzXG59XG5cbm1vZHVsZS5leHBvcnRzID0geyBkZWNvZGU6IGRlY29kZSB9XG4iLCIvKiBnbG9iYWwgWE1MSHR0cFJlcXVlc3QgKi9cbid1c2Ugc3RyaWN0J1xuXG4vKipcbiAqIEdpdmVuIGEgdXJsIGFuZCBhIHJldHVybiB0eXBlLCByZXR1cm5zIGEgcHJvbWlzZSB0byB0aGUgY29udGVudCBvZiB0aGUgdXJsXG4gKiBCYXNpY2FsbHkgaXQgd3JhcHMgYSBYTUxIdHRwUmVxdWVzdCBpbnRvIGEgUHJvbWlzZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gY2FuIGJlICd0ZXh0JyBvciAnYXJyYXlidWZmZXInXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1cmwsIHR5cGUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChkb25lLCByZWplY3QpIHtcbiAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcbiAgICBpZiAodHlwZSkgcmVxLnJlc3BvbnNlVHlwZSA9IHR5cGVcblxuICAgIHJlcS5vcGVuKCdHRVQnLCB1cmwpXG4gICAgcmVxLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlcS5zdGF0dXMgPT09IDIwMCA/IGRvbmUocmVxLnJlc3BvbnNlKSA6IHJlamVjdChFcnJvcihyZXEuc3RhdHVzVGV4dCkpXG4gICAgfVxuICAgIHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkgeyByZWplY3QoRXJyb3IoJ05ldHdvcmsgRXJyb3InKSkgfVxuICAgIHJlcS5zZW5kKClcbiAgfSlcbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnLi9iYXNlNjQnKVxudmFyIGZldGNoID0gcmVxdWlyZSgnLi9mZXRjaCcpXG5cbi8vIEdpdmVuIGEgcmVnZXgsIHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgdGVzdCBpZiBhZ2FpbnN0IGEgc3RyaW5nXG5mdW5jdGlvbiBmcm9tUmVnZXggKHIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChvKSB7IHJldHVybiB0eXBlb2YgbyA9PT0gJ3N0cmluZycgJiYgci50ZXN0KG8pIH1cbn1cbi8vIFRyeSB0byBhcHBseSBhIHByZWZpeCB0byBhIG5hbWVcbmZ1bmN0aW9uIHByZWZpeCAocHJlLCBuYW1lKSB7XG4gIHJldHVybiB0eXBlb2YgcHJlID09PSAnc3RyaW5nJyA/IHByZSArIG5hbWVcbiAgICA6IHR5cGVvZiBwcmUgPT09ICdmdW5jdGlvbicgPyBwcmUobmFtZSlcbiAgICA6IG5hbWVcbn1cblxuLyoqXG4gKiBMb2FkIG9uZSBvciBtb3JlIGF1ZGlvIGZpbGVzXG4gKlxuICpcbiAqIFBvc3NpYmxlIG9wdGlvbiBrZXlzOlxuICpcbiAqIC0gX19mcm9tX18ge0Z1bmN0aW9ufFN0cmluZ306IGEgZnVuY3Rpb24gb3Igc3RyaW5nIHRvIGNvbnZlcnQgZnJvbSBmaWxlIG5hbWVzIHRvIHVybHMuXG4gKiBJZiBpcyBhIHN0cmluZyBpdCB3aWxsIGJlIHByZWZpeGVkIHRvIHRoZSBuYW1lOlxuICogYGxvYWQoYWMsICdzbmFyZS5tcDMnLCB7IGZyb206ICdodHRwOi8vYXVkaW8ubmV0L3NhbXBsZXMvJyB9KWBcbiAqIElmIGl0J3MgYSBmdW5jdGlvbiBpdCByZWNlaXZlcyB0aGUgZmlsZSBuYW1lIGFuZCBzaG91bGQgcmV0dXJuIHRoZSB1cmwgYXMgc3RyaW5nLlxuICogLSBfX29ubHlfXyB7QXJyYXl9IC0gd2hlbiBsb2FkaW5nIG9iamVjdHMsIGlmIHByb3ZpZGVkLCBvbmx5IHRoZSBnaXZlbiBrZXlzXG4gKiB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSBkZWNvZGVkIG9iamVjdDpcbiAqIGBsb2FkKGFjLCAncGlhbm8uanNvbicsIHsgb25seTogWydDMicsICdEMiddIH0pYFxuICpcbiAqIEBwYXJhbSB7QXVkaW9Db250ZXh0fSBhYyAtIHRoZSBhdWRpbyBjb250ZXh0XG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIC0gdGhlIG9iamVjdCB0byBiZSBsb2FkZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gKE9wdGlvbmFsKSB0aGUgbG9hZCBvcHRpb25zIGZvciB0aGF0IG9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IGRlZmF1bHRWYWx1ZSAtIChPcHRpb25hbCkgdGhlIGRlZmF1bHQgdmFsdWUgdG8gcmV0dXJuIGFzXG4gKiBpbiBhIHByb21pc2UgaWYgbm90IHZhbGlkIGxvYWRlciBmb3VuZFxuICovXG5mdW5jdGlvbiBsb2FkIChhYywgc291cmNlLCBvcHRpb25zLCBkZWZWYWwpIHtcbiAgdmFyIGxvYWRlciA9XG4gICAgLy8gQmFzaWMgYXVkaW8gbG9hZGluZ1xuICAgICAgaXNBcnJheUJ1ZmZlcihzb3VyY2UpID8gbG9hZEFycmF5QnVmZmVyXG4gICAgOiBpc0F1ZGlvRmlsZU5hbWUoc291cmNlKSA/IGxvYWRBdWRpb0ZpbGVcbiAgICA6IGlzUHJvbWlzZShzb3VyY2UpID8gbG9hZFByb21pc2VcbiAgICAvLyBDb21wb3VuZCBvYmplY3RzXG4gICAgOiBpc0FycmF5KHNvdXJjZSkgPyBsb2FkQXJyYXlEYXRhXG4gICAgOiBpc09iamVjdChzb3VyY2UpID8gbG9hZE9iamVjdERhdGFcbiAgICA6IGlzSnNvbkZpbGVOYW1lKHNvdXJjZSkgPyBsb2FkSnNvbkZpbGVcbiAgICAvLyBCYXNlNjQgZW5jb2RlZCBhdWRpb1xuICAgIDogaXNCYXNlNjRBdWRpbyhzb3VyY2UpID8gbG9hZEJhc2U2NEF1ZGlvXG4gICAgOiBpc0pzRmlsZU5hbWUoc291cmNlKSA/IGxvYWRNaWRpSlNGaWxlXG4gICAgOiBudWxsXG5cbiAgdmFyIG9wdHMgPSBvcHRpb25zIHx8IHt9XG4gIHJldHVybiBsb2FkZXIgPyBsb2FkZXIoYWMsIHNvdXJjZSwgb3B0cylcbiAgICA6IGRlZlZhbCA/IFByb21pc2UucmVzb2x2ZShkZWZWYWwpXG4gICAgOiBQcm9taXNlLnJlamVjdCgnU291cmNlIG5vdCB2YWxpZCAoJyArIHNvdXJjZSArICcpJylcbn1cbmxvYWQuZmV0Y2ggPSBmZXRjaFxuXG4vLyBCQVNJQyBBVURJTyBMT0FESU5HXG4vLyA9PT09PT09PT09PT09PT09PT09XG5cbi8vIExvYWQgKGRlY29kZSkgYW4gYXJyYXkgYnVmZmVyXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyIChvKSB7IHJldHVybiBvIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgfVxuZnVuY3Rpb24gbG9hZEFycmF5QnVmZmVyIChhYywgYXJyYXksIG9wdGlvbnMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChkb25lLCByZWplY3QpIHtcbiAgICBhYy5kZWNvZGVBdWRpb0RhdGEoYXJyYXksXG4gICAgICBmdW5jdGlvbiAoYnVmZmVyKSB7IGRvbmUoYnVmZmVyKSB9LFxuICAgICAgZnVuY3Rpb24gKCkgeyByZWplY3QoXCJDYW4ndCBkZWNvZGUgYXVkaW8gZGF0YSAoXCIgKyBhcnJheS5zbGljZSgwLCAzMCkgKyAnLi4uKScpIH1cbiAgICApXG4gIH0pXG59XG5cbi8vIExvYWQgYW4gYXVkaW8gZmlsZW5hbWVcbnZhciBpc0F1ZGlvRmlsZU5hbWUgPSBmcm9tUmVnZXgoL1xcLihtcDN8d2F2fG9nZykoXFw/LiopPyQvaSlcbmZ1bmN0aW9uIGxvYWRBdWRpb0ZpbGUgKGFjLCBuYW1lLCBvcHRpb25zKSB7XG4gIHZhciB1cmwgPSBwcmVmaXgob3B0aW9ucy5mcm9tLCBuYW1lKVxuICByZXR1cm4gbG9hZChhYywgbG9hZC5mZXRjaCh1cmwsICdhcnJheWJ1ZmZlcicpLCBvcHRpb25zKVxufVxuXG4vLyBMb2FkIHRoZSByZXN1bHQgb2YgYSBwcm9taXNlXG5mdW5jdGlvbiBpc1Byb21pc2UgKG8pIHsgcmV0dXJuIG8gJiYgdHlwZW9mIG8udGhlbiA9PT0gJ2Z1bmN0aW9uJyB9XG5mdW5jdGlvbiBsb2FkUHJvbWlzZSAoYWMsIHByb21pc2UsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gbG9hZChhYywgdmFsdWUsIG9wdGlvbnMpXG4gIH0pXG59XG5cbi8vIENPTVBPVU5EIE9CSkVDVFNcbi8vID09PT09PT09PT09PT09PT1cblxuLy8gVHJ5IHRvIGxvYWQgYWxsIHRoZSBpdGVtcyBvZiBhbiBhcnJheVxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5XG5mdW5jdGlvbiBsb2FkQXJyYXlEYXRhIChhYywgYXJyYXksIG9wdGlvbnMpIHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKGFycmF5Lm1hcChmdW5jdGlvbiAoZGF0YSkge1xuICAgIHJldHVybiBsb2FkKGFjLCBkYXRhLCBvcHRpb25zLCBkYXRhKVxuICB9KSlcbn1cblxuLy8gVHJ5IHRvIGxvYWQgYWxsIHRoZSB2YWx1ZXMgb2YgYSBrZXkvdmFsdWUgb2JqZWN0XG5mdW5jdGlvbiBpc09iamVjdCAobykgeyByZXR1cm4gbyAmJiB0eXBlb2YgbyA9PT0gJ29iamVjdCcgfVxuZnVuY3Rpb24gbG9hZE9iamVjdERhdGEgKGFjLCBvYmosIG9wdGlvbnMpIHtcbiAgdmFyIGRlc3QgPSB7fVxuICB2YXIgcHJvbWlzZXMgPSBPYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKG9wdGlvbnMub25seSAmJiBvcHRpb25zLm9ubHkuaW5kZXhPZihrZXkpID09PSAtMSkgcmV0dXJuIG51bGxcbiAgICB2YXIgdmFsdWUgPSBvYmpba2V5XVxuICAgIHJldHVybiBsb2FkKGFjLCB2YWx1ZSwgb3B0aW9ucywgdmFsdWUpLnRoZW4oZnVuY3Rpb24gKGF1ZGlvKSB7XG4gICAgICBkZXN0W2tleV0gPSBhdWRpb1xuICAgIH0pXG4gIH0pXG4gIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBkZXN0IH0pXG59XG5cbi8vIExvYWQgdGhlIGNvbnRlbnQgb2YgYSBKU09OIGZpbGVcbnZhciBpc0pzb25GaWxlTmFtZSA9IGZyb21SZWdleCgvXFwuanNvbihcXD8uKik/JC9pKVxuZnVuY3Rpb24gbG9hZEpzb25GaWxlIChhYywgbmFtZSwgb3B0aW9ucykge1xuICB2YXIgdXJsID0gcHJlZml4KG9wdGlvbnMuZnJvbSwgbmFtZSlcbiAgcmV0dXJuIGxvYWQoYWMsIGxvYWQuZmV0Y2godXJsLCAndGV4dCcpLnRoZW4oSlNPTi5wYXJzZSksIG9wdGlvbnMpXG59XG5cbi8vIEJBU0U2NCBFTkNPREVEIEZPUk1BVFNcbi8vID09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gTG9hZCBzdHJpbmdzIHdpdGggQmFzZTY0IGVuY29kZWQgYXVkaW9cbnZhciBpc0Jhc2U2NEF1ZGlvID0gZnJvbVJlZ2V4KC9eZGF0YTphdWRpby8pXG5mdW5jdGlvbiBsb2FkQmFzZTY0QXVkaW8gKGFjLCBzb3VyY2UsIG9wdGlvbnMpIHtcbiAgdmFyIGkgPSBzb3VyY2UuaW5kZXhPZignLCcpXG4gIHJldHVybiBsb2FkKGFjLCBiYXNlNjQuZGVjb2RlKHNvdXJjZS5zbGljZShpICsgMSkpLmJ1ZmZlciwgb3B0aW9ucylcbn1cblxuLy8gTG9hZCAuanMgZmlsZXMgd2l0aCBNaWRpSlMgc291bmRmb250IHByZXJlbmRlcmVkIGF1ZGlvXG52YXIgaXNKc0ZpbGVOYW1lID0gZnJvbVJlZ2V4KC9cXC5qcyhcXD8uKik/JC9pKVxuZnVuY3Rpb24gbG9hZE1pZGlKU0ZpbGUgKGFjLCBuYW1lLCBvcHRpb25zKSB7XG4gIHZhciB1cmwgPSBwcmVmaXgob3B0aW9ucy5mcm9tLCBuYW1lKVxuICByZXR1cm4gbG9hZChhYywgbG9hZC5mZXRjaCh1cmwsICd0ZXh0JykudGhlbihtaWRpSnNUb0pzb24pLCBvcHRpb25zKVxufVxuXG4vLyBjb252ZXJ0IGEgTUlESS5qcyBqYXZhc2NyaXB0IHNvdW5kZm9udCBmaWxlIHRvIGpzb25cbmZ1bmN0aW9uIG1pZGlKc1RvSnNvbiAoZGF0YSkge1xuICB2YXIgYmVnaW4gPSBkYXRhLmluZGV4T2YoJ01JREkuU291bmRmb250LicpXG4gIGlmIChiZWdpbiA8IDApIHRocm93IEVycm9yKCdJbnZhbGlkIE1JREkuanMgU291bmRmb250IGZvcm1hdCcpXG4gIGJlZ2luID0gZGF0YS5pbmRleE9mKCc9JywgYmVnaW4pICsgMlxuICB2YXIgZW5kID0gZGF0YS5sYXN0SW5kZXhPZignLCcpXG4gIHJldHVybiBKU09OLnBhcnNlKGRhdGEuc2xpY2UoYmVnaW4sIGVuZCkgKyAnfScpXG59XG5cbmlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykgbW9kdWxlLmV4cG9ydHMgPSBsb2FkXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHdpbmRvdy5sb2FkQXVkaW8gPSBsb2FkXG4iLCJ2YXIgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgU3ltYm9sID0gcm9vdC5TeW1ib2w7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ltYm9sO1xuIiwidmFyIFN5bWJvbCA9IHJlcXVpcmUoJy4vX1N5bWJvbCcpLFxuICAgIGdldFJhd1RhZyA9IHJlcXVpcmUoJy4vX2dldFJhd1RhZycpLFxuICAgIG9iamVjdFRvU3RyaW5nID0gcmVxdWlyZSgnLi9fb2JqZWN0VG9TdHJpbmcnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIG51bGxUYWcgPSAnW29iamVjdCBOdWxsXScsXG4gICAgdW5kZWZpbmVkVGFnID0gJ1tvYmplY3QgVW5kZWZpbmVkXSc7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIHN5bVRvU3RyaW5nVGFnID0gU3ltYm9sID8gU3ltYm9sLnRvU3RyaW5nVGFnIDogdW5kZWZpbmVkO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRUYWdgIHdpdGhvdXQgZmFsbGJhY2tzIGZvciBidWdneSBlbnZpcm9ubWVudHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUdldFRhZyh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkVGFnIDogbnVsbFRhZztcbiAgfVxuICByZXR1cm4gKHN5bVRvU3RyaW5nVGFnICYmIHN5bVRvU3RyaW5nVGFnIGluIE9iamVjdCh2YWx1ZSkpXG4gICAgPyBnZXRSYXdUYWcodmFsdWUpXG4gICAgOiBvYmplY3RUb1N0cmluZyh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUdldFRhZztcbiIsIi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbm1vZHVsZS5leHBvcnRzID0gZnJlZUdsb2JhbDtcbiIsInZhciBvdmVyQXJnID0gcmVxdWlyZSgnLi9fb3ZlckFyZycpO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBnZXRQcm90b3R5cGUgPSBvdmVyQXJnKE9iamVjdC5nZXRQcm90b3R5cGVPZiwgT2JqZWN0KTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZXRQcm90b3R5cGU7XG4iLCJ2YXIgU3ltYm9sID0gcmVxdWlyZSgnLi9fU3ltYm9sJyk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBuYXRpdmVPYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1Ub1N0cmluZ1RhZyA9IFN5bWJvbCA/IFN5bWJvbC50b1N0cmluZ1RhZyA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VHZXRUYWdgIHdoaWNoIGlnbm9yZXMgYFN5bWJvbC50b1N0cmluZ1RhZ2AgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHJhdyBgdG9TdHJpbmdUYWdgLlxuICovXG5mdW5jdGlvbiBnZXRSYXdUYWcodmFsdWUpIHtcbiAgdmFyIGlzT3duID0gaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgc3ltVG9TdHJpbmdUYWcpLFxuICAgICAgdGFnID0gdmFsdWVbc3ltVG9TdHJpbmdUYWddO1xuXG4gIHRyeSB7XG4gICAgdmFsdWVbc3ltVG9TdHJpbmdUYWddID0gdW5kZWZpbmVkO1xuICAgIHZhciB1bm1hc2tlZCA9IHRydWU7XG4gIH0gY2F0Y2ggKGUpIHt9XG5cbiAgdmFyIHJlc3VsdCA9IG5hdGl2ZU9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICBpZiAodW5tYXNrZWQpIHtcbiAgICBpZiAoaXNPd24pIHtcbiAgICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnXSA9IHRhZztcbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlIHZhbHVlW3N5bVRvU3RyaW5nVGFnXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRSYXdUYWc7XG4iLCIvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgbmF0aXZlT2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIHVzaW5nIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvYmplY3RUb1N0cmluZztcbiIsIi8qKlxuICogQ3JlYXRlcyBhIHVuYXJ5IGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCBpdHMgYXJndW1lbnQgdHJhbnNmb3JtZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0cmFuc2Zvcm0gVGhlIGFyZ3VtZW50IHRyYW5zZm9ybS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBvdmVyQXJnKGZ1bmMsIHRyYW5zZm9ybSkge1xuICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIGZ1bmModHJhbnNmb3JtKGFyZykpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG92ZXJBcmc7XG4iLCJ2YXIgZnJlZUdsb2JhbCA9IHJlcXVpcmUoJy4vX2ZyZWVHbG9iYWwnKTtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvb3Q7XG4iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdExpa2U7XG4iLCJ2YXIgYmFzZUdldFRhZyA9IHJlcXVpcmUoJy4vX2Jhc2VHZXRUYWcnKSxcbiAgICBnZXRQcm90b3R5cGUgPSByZXF1aXJlKCcuL19nZXRQcm90b3R5cGUnKSxcbiAgICBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBmdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGUsXG4gICAgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG52YXIgZnVuY1RvU3RyaW5nID0gZnVuY1Byb3RvLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKiogVXNlZCB0byBpbmZlciB0aGUgYE9iamVjdGAgY29uc3RydWN0b3IuICovXG52YXIgb2JqZWN0Q3RvclN0cmluZyA9IGZ1bmNUb1N0cmluZy5jYWxsKE9iamVjdCk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIHRoYXQgaXMsIGFuIG9iamVjdCBjcmVhdGVkIGJ5IHRoZVxuICogYE9iamVjdGAgY29uc3RydWN0b3Igb3Igb25lIHdpdGggYSBgW1tQcm90b3R5cGVdXWAgb2YgYG51bGxgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC44LjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqIH1cbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QobmV3IEZvbyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNQbGFpbk9iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoeyAneCc6IDAsICd5JzogMCB9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdExpa2UodmFsdWUpIHx8IGJhc2VHZXRUYWcodmFsdWUpICE9IG9iamVjdFRhZykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgcHJvdG8gPSBnZXRQcm90b3R5cGUodmFsdWUpO1xuICBpZiAocHJvdG8gPT09IG51bGwpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB2YXIgQ3RvciA9IGhhc093blByb3BlcnR5LmNhbGwocHJvdG8sICdjb25zdHJ1Y3RvcicpICYmIHByb3RvLmNvbnN0cnVjdG9yO1xuICByZXR1cm4gdHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yIGluc3RhbmNlb2YgQ3RvciAmJlxuICAgIGZ1bmNUb1N0cmluZy5jYWxsKEN0b3IpID09IG9iamVjdEN0b3JTdHJpbmc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNQbGFpbk9iamVjdDtcbiIsIihmdW5jdGlvbihlKXtpZih0eXBlb2YgZXhwb3J0cz09PVwib2JqZWN0XCImJnR5cGVvZiBtb2R1bGUhPT1cInVuZGVmaW5lZFwiKXttb2R1bGUuZXhwb3J0cz1lKCl9ZWxzZSBpZih0eXBlb2YgZGVmaW5lPT09XCJmdW5jdGlvblwiJiZkZWZpbmUuYW1kKXtkZWZpbmUoW10sZSl9ZWxzZXt2YXIgdDtpZih0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIil7dD13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIil7dD1nbG9iYWx9ZWxzZSBpZih0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCIpe3Q9c2VsZn1lbHNle3Q9dGhpc310Lm1pZGltZXNzYWdlPWUoKX19KShmdW5jdGlvbigpe3ZhciBlLHQscztyZXR1cm4gZnVuY3Rpb24gbyhlLHQscyl7ZnVuY3Rpb24gYShuLGkpe2lmKCF0W25dKXtpZighZVtuXSl7dmFyIGw9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighaSYmbClyZXR1cm4gbChuLCEwKTtpZihyKXJldHVybiByKG4sITApO3ZhciBoPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbitcIidcIik7dGhyb3cgaC5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGh9dmFyIGM9dFtuXT17ZXhwb3J0czp7fX07ZVtuXVswXS5jYWxsKGMuZXhwb3J0cyxmdW5jdGlvbih0KXt2YXIgcz1lW25dWzFdW3RdO3JldHVybiBhKHM/czp0KX0sYyxjLmV4cG9ydHMsbyxlLHQscyl9cmV0dXJuIHRbbl0uZXhwb3J0c312YXIgcj10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbj0wO248cy5sZW5ndGg7bisrKWEoc1tuXSk7cmV0dXJuIGF9KHsxOltmdW5jdGlvbihlLHQscyl7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOnRydWV9KTtzW1wiZGVmYXVsdFwiXT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3RoaXMuX2V2ZW50PWU7dGhpcy5fZGF0YT1lLmRhdGE7dGhpcy5yZWNlaXZlZFRpbWU9ZS5yZWNlaXZlZFRpbWU7aWYodGhpcy5fZGF0YSYmdGhpcy5fZGF0YS5sZW5ndGg8Mil7Y29uc29sZS53YXJuKFwiSWxsZWdhbCBNSURJIG1lc3NhZ2Ugb2YgbGVuZ3RoXCIsdGhpcy5fZGF0YS5sZW5ndGgpO3JldHVybn10aGlzLl9tZXNzYWdlQ29kZT1lLmRhdGFbMF0mMjQwO3RoaXMuY2hhbm5lbD1lLmRhdGFbMF0mMTU7c3dpdGNoKHRoaXMuX21lc3NhZ2VDb2RlKXtjYXNlIDEyODp0aGlzLm1lc3NhZ2VUeXBlPVwibm90ZW9mZlwiO3RoaXMua2V5PWUuZGF0YVsxXSYxMjc7dGhpcy52ZWxvY2l0eT1lLmRhdGFbMl0mMTI3O2JyZWFrO2Nhc2UgMTQ0OnRoaXMubWVzc2FnZVR5cGU9XCJub3Rlb25cIjt0aGlzLmtleT1lLmRhdGFbMV0mMTI3O3RoaXMudmVsb2NpdHk9ZS5kYXRhWzJdJjEyNzticmVhaztjYXNlIDE2MDp0aGlzLm1lc3NhZ2VUeXBlPVwia2V5cHJlc3N1cmVcIjt0aGlzLmtleT1lLmRhdGFbMV0mMTI3O3RoaXMucHJlc3N1cmU9ZS5kYXRhWzJdJjEyNzticmVhaztjYXNlIDE3Njp0aGlzLm1lc3NhZ2VUeXBlPVwiY29udHJvbGNoYW5nZVwiO3RoaXMuY29udHJvbGxlck51bWJlcj1lLmRhdGFbMV0mMTI3O3RoaXMuY29udHJvbGxlclZhbHVlPWUuZGF0YVsyXSYxMjc7aWYodGhpcy5jb250cm9sbGVyTnVtYmVyPT09MTIwJiZ0aGlzLmNvbnRyb2xsZXJWYWx1ZT09PTApe3RoaXMuY2hhbm5lbE1vZGVNZXNzYWdlPVwiYWxsc291bmRvZmZcIn1lbHNlIGlmKHRoaXMuY29udHJvbGxlck51bWJlcj09PTEyMSl7dGhpcy5jaGFubmVsTW9kZU1lc3NhZ2U9XCJyZXNldGFsbGNvbnRyb2xsZXJzXCJ9ZWxzZSBpZih0aGlzLmNvbnRyb2xsZXJOdW1iZXI9PT0xMjIpe2lmKHRoaXMuY29udHJvbGxlclZhbHVlPT09MCl7dGhpcy5jaGFubmVsTW9kZU1lc3NhZ2U9XCJsb2NhbGNvbnRyb2xvZmZcIn1lbHNle3RoaXMuY2hhbm5lbE1vZGVNZXNzYWdlPVwibG9jYWxjb250cm9sb25cIn19ZWxzZSBpZih0aGlzLmNvbnRyb2xsZXJOdW1iZXI9PT0xMjMmJnRoaXMuY29udHJvbGxlclZhbHVlPT09MCl7dGhpcy5jaGFubmVsTW9kZU1lc3NhZ2U9XCJhbGxub3Rlc29mZlwifWVsc2UgaWYodGhpcy5jb250cm9sbGVyTnVtYmVyPT09MTI0JiZ0aGlzLmNvbnRyb2xsZXJWYWx1ZT09PTApe3RoaXMuY2hhbm5lbE1vZGVNZXNzYWdlPVwib21uaW1vZGVvZmZcIn1lbHNlIGlmKHRoaXMuY29udHJvbGxlck51bWJlcj09PTEyNSYmdGhpcy5jb250cm9sbGVyVmFsdWU9PT0wKXt0aGlzLmNoYW5uZWxNb2RlTWVzc2FnZT1cIm9tbmltb2Rlb25cIn1lbHNlIGlmKHRoaXMuY29udHJvbGxlck51bWJlcj09PTEyNil7dGhpcy5jaGFubmVsTW9kZU1lc3NhZ2U9XCJtb25vbW9kZW9uXCJ9ZWxzZSBpZih0aGlzLmNvbnRyb2xsZXJOdW1iZXI9PT0xMjcpe3RoaXMuY2hhbm5lbE1vZGVNZXNzYWdlPVwicG9seW1vZGVvblwifWJyZWFrO2Nhc2UgMTkyOnRoaXMubWVzc2FnZVR5cGU9XCJwcm9ncmFtY2hhbmdlXCI7dGhpcy5wcm9ncmFtPWUuZGF0YVsxXTticmVhaztjYXNlIDIwODp0aGlzLm1lc3NhZ2VUeXBlPVwiY2hhbm5lbHByZXNzdXJlXCI7dGhpcy5wcmVzc3VyZT1lLmRhdGFbMV0mMTI3O2JyZWFrO2Nhc2UgMjI0OnRoaXMubWVzc2FnZVR5cGU9XCJwaXRjaGJlbmRjaGFuZ2VcIjt2YXIgdD1lLmRhdGFbMl0mMTI3O3ZhciBzPWUuZGF0YVsxXSYxMjc7dGhpcy5waXRjaEJlbmQ9KHQ8PDgpK3M7YnJlYWt9fXJldHVybiBuZXcgdChlKX07dC5leHBvcnRzPXNbXCJkZWZhdWx0XCJdfSx7fV19LHt9LFsxXSkoMSl9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpc3QvaW5kZXguanMubWFwIiwiIWZ1bmN0aW9uKHQsbil7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bihleHBvcnRzKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV4cG9ydHNcIl0sbik6bih0Lk5vdGVQYXJzZXI9dC5Ob3RlUGFyc2VyfHx7fSl9KHRoaXMsZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gbih0LG4pe3JldHVybiBBcnJheShuKzEpLmpvaW4odCl9ZnVuY3Rpb24gcih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdH1mdW5jdGlvbiBlKHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0fWZ1bmN0aW9uIHUodCl7cmV0dXJuIHZvaWQgMCE9PXR9ZnVuY3Rpb24gYyh0LG4pe3JldHVybiBNYXRoLnBvdygyLCh0LTY5KS8xMikqKG58fDQ0MCl9ZnVuY3Rpb24gbygpe3JldHVybiBifWZ1bmN0aW9uIGkodCxuLHIpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0KXJldHVybiBudWxsO3ZhciBlPWIuZXhlYyh0KTtpZighZXx8IW4mJmVbNF0pcmV0dXJuIG51bGw7dmFyIHU9e2xldHRlcjplWzFdLnRvVXBwZXJDYXNlKCksYWNjOmVbMl0ucmVwbGFjZSgveC9nLFwiIyNcIil9O3UucGM9dS5sZXR0ZXIrdS5hY2MsdS5zdGVwPSh1LmxldHRlci5jaGFyQ29kZUF0KDApKzMpJTcsdS5hbHQ9XCJiXCI9PT11LmFjY1swXT8tdS5hY2MubGVuZ3RoOnUuYWNjLmxlbmd0aDt2YXIgbz1BW3Uuc3RlcF0rdS5hbHQ7cmV0dXJuIHUuY2hyb21hPW88MD8xMitvOm8lMTIsZVszXSYmKHUub2N0PStlWzNdLHUubWlkaT1vKzEyKih1Lm9jdCsxKSx1LmZyZXE9Yyh1Lm1pZGkscikpLG4mJih1LnRvbmljT2Y9ZVs0XSksdX1mdW5jdGlvbiBmKHQpe3JldHVybiByKHQpP3Q8MD9uKFwiYlwiLC10KTpuKFwiI1wiLHQpOlwiXCJ9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gcih0KT9cIlwiK3Q6XCJcIn1mdW5jdGlvbiBsKHQsbixyKXtyZXR1cm4gbnVsbD09PXR8fHZvaWQgMD09PXQ/bnVsbDp0LnN0ZXA/bCh0LnN0ZXAsdC5hbHQsdC5vY3QpOnQ8MHx8dD42P251bGw6Qy5jaGFyQXQodCkrZihuKSthKHIpfWZ1bmN0aW9uIHAodCl7aWYoKHIodCl8fGUodCkpJiZ0Pj0wJiZ0PDEyOClyZXR1cm4rdDt2YXIgbj1pKHQpO3JldHVybiBuJiZ1KG4ubWlkaSk/bi5taWRpOm51bGx9ZnVuY3Rpb24gcyh0LG4pe3ZhciByPXAodCk7cmV0dXJuIG51bGw9PT1yP251bGw6YyhyLG4pfWZ1bmN0aW9uIGQodCl7cmV0dXJuKGkodCl8fHt9KS5sZXR0ZXJ9ZnVuY3Rpb24gbSh0KXtyZXR1cm4oaSh0KXx8e30pLmFjY31mdW5jdGlvbiBoKHQpe3JldHVybihpKHQpfHx7fSkucGN9ZnVuY3Rpb24gdih0KXtyZXR1cm4oaSh0KXx8e30pLnN0ZXB9ZnVuY3Rpb24gZyh0KXtyZXR1cm4oaSh0KXx8e30pLmFsdH1mdW5jdGlvbiB4KHQpe3JldHVybihpKHQpfHx7fSkuY2hyb21hfWZ1bmN0aW9uIHkodCl7cmV0dXJuKGkodCl8fHt9KS5vY3R9dmFyIGI9L14oW2EtZ0EtR10pKCN7MSx9fGJ7MSx9fHh7MSx9fCkoLT9cXGQqKVxccyooLiopXFxzKiQvLEE9WzAsMiw0LDUsNyw5LDExXSxDPVwiQ0RFRkdBQlwiO3QucmVnZXg9byx0LnBhcnNlPWksdC5idWlsZD1sLHQubWlkaT1wLHQuZnJlcT1zLHQubGV0dGVyPWQsdC5hY2M9bSx0LnBjPWgsdC5zdGVwPXYsdC5hbHQ9Zyx0LmNocm9tYT14LHQub2N0PXl9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5vdGUtcGFyc2VyLmpzLm1hcFxuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmZ1bmN0aW9uIGNyZWF0ZVRodW5rTWlkZGxld2FyZShleHRyYUFyZ3VtZW50KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2gsXG4gICAgICAgIGdldFN0YXRlID0gX3JlZi5nZXRTdGF0ZTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5leHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYWN0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdGlvbihkaXNwYXRjaCwgZ2V0U3RhdGUsIGV4dHJhQXJndW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5leHQoYWN0aW9uKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfTtcbn1cblxudmFyIHRodW5rID0gY3JlYXRlVGh1bmtNaWRkbGV3YXJlKCk7XG50aHVuay53aXRoRXh0cmFBcmd1bWVudCA9IGNyZWF0ZVRodW5rTWlkZGxld2FyZTtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gdGh1bms7IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5leHBvcnRzWydkZWZhdWx0J10gPSBhcHBseU1pZGRsZXdhcmU7XG5cbnZhciBfY29tcG9zZSA9IHJlcXVpcmUoJy4vY29tcG9zZScpO1xuXG52YXIgX2NvbXBvc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tcG9zZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxuLyoqXG4gKiBDcmVhdGVzIGEgc3RvcmUgZW5oYW5jZXIgdGhhdCBhcHBsaWVzIG1pZGRsZXdhcmUgdG8gdGhlIGRpc3BhdGNoIG1ldGhvZFxuICogb2YgdGhlIFJlZHV4IHN0b3JlLiBUaGlzIGlzIGhhbmR5IGZvciBhIHZhcmlldHkgb2YgdGFza3MsIHN1Y2ggYXMgZXhwcmVzc2luZ1xuICogYXN5bmNocm9ub3VzIGFjdGlvbnMgaW4gYSBjb25jaXNlIG1hbm5lciwgb3IgbG9nZ2luZyBldmVyeSBhY3Rpb24gcGF5bG9hZC5cbiAqXG4gKiBTZWUgYHJlZHV4LXRodW5rYCBwYWNrYWdlIGFzIGFuIGV4YW1wbGUgb2YgdGhlIFJlZHV4IG1pZGRsZXdhcmUuXG4gKlxuICogQmVjYXVzZSBtaWRkbGV3YXJlIGlzIHBvdGVudGlhbGx5IGFzeW5jaHJvbm91cywgdGhpcyBzaG91bGQgYmUgdGhlIGZpcnN0XG4gKiBzdG9yZSBlbmhhbmNlciBpbiB0aGUgY29tcG9zaXRpb24gY2hhaW4uXG4gKlxuICogTm90ZSB0aGF0IGVhY2ggbWlkZGxld2FyZSB3aWxsIGJlIGdpdmVuIHRoZSBgZGlzcGF0Y2hgIGFuZCBgZ2V0U3RhdGVgIGZ1bmN0aW9uc1xuICogYXMgbmFtZWQgYXJndW1lbnRzLlxuICpcbiAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IG1pZGRsZXdhcmVzIFRoZSBtaWRkbGV3YXJlIGNoYWluIHRvIGJlIGFwcGxpZWQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgc3RvcmUgZW5oYW5jZXIgYXBwbHlpbmcgdGhlIG1pZGRsZXdhcmUuXG4gKi9cbmZ1bmN0aW9uIGFwcGx5TWlkZGxld2FyZSgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1pZGRsZXdhcmVzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgbWlkZGxld2FyZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKGNyZWF0ZVN0b3JlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZWR1Y2VyLCBwcmVsb2FkZWRTdGF0ZSwgZW5oYW5jZXIpIHtcbiAgICAgIHZhciBzdG9yZSA9IGNyZWF0ZVN0b3JlKHJlZHVjZXIsIHByZWxvYWRlZFN0YXRlLCBlbmhhbmNlcik7XG4gICAgICB2YXIgX2Rpc3BhdGNoID0gc3RvcmUuZGlzcGF0Y2g7XG4gICAgICB2YXIgY2hhaW4gPSBbXTtcblxuICAgICAgdmFyIG1pZGRsZXdhcmVBUEkgPSB7XG4gICAgICAgIGdldFN0YXRlOiBzdG9yZS5nZXRTdGF0ZSxcbiAgICAgICAgZGlzcGF0Y2g6IGZ1bmN0aW9uIGRpc3BhdGNoKGFjdGlvbikge1xuICAgICAgICAgIHJldHVybiBfZGlzcGF0Y2goYWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNoYWluID0gbWlkZGxld2FyZXMubWFwKGZ1bmN0aW9uIChtaWRkbGV3YXJlKSB7XG4gICAgICAgIHJldHVybiBtaWRkbGV3YXJlKG1pZGRsZXdhcmVBUEkpO1xuICAgICAgfSk7XG4gICAgICBfZGlzcGF0Y2ggPSBfY29tcG9zZTJbJ2RlZmF1bHQnXS5hcHBseSh1bmRlZmluZWQsIGNoYWluKShzdG9yZS5kaXNwYXRjaCk7XG5cbiAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgc3RvcmUsIHtcbiAgICAgICAgZGlzcGF0Y2g6IF9kaXNwYXRjaFxuICAgICAgfSk7XG4gICAgfTtcbiAgfTtcbn0iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzWydkZWZhdWx0J10gPSBiaW5kQWN0aW9uQ3JlYXRvcnM7XG5mdW5jdGlvbiBiaW5kQWN0aW9uQ3JlYXRvcihhY3Rpb25DcmVhdG9yLCBkaXNwYXRjaCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkaXNwYXRjaChhY3Rpb25DcmVhdG9yLmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKSk7XG4gIH07XG59XG5cbi8qKlxuICogVHVybnMgYW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgYWN0aW9uIGNyZWF0b3JzLCBpbnRvIGFuIG9iamVjdCB3aXRoIHRoZVxuICogc2FtZSBrZXlzLCBidXQgd2l0aCBldmVyeSBmdW5jdGlvbiB3cmFwcGVkIGludG8gYSBgZGlzcGF0Y2hgIGNhbGwgc28gdGhleVxuICogbWF5IGJlIGludm9rZWQgZGlyZWN0bHkuIFRoaXMgaXMganVzdCBhIGNvbnZlbmllbmNlIG1ldGhvZCwgYXMgeW91IGNhbiBjYWxsXG4gKiBgc3RvcmUuZGlzcGF0Y2goTXlBY3Rpb25DcmVhdG9ycy5kb1NvbWV0aGluZygpKWAgeW91cnNlbGYganVzdCBmaW5lLlxuICpcbiAqIEZvciBjb252ZW5pZW5jZSwgeW91IGNhbiBhbHNvIHBhc3MgYSBzaW5nbGUgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50LFxuICogYW5kIGdldCBhIGZ1bmN0aW9uIGluIHJldHVybi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdH0gYWN0aW9uQ3JlYXRvcnMgQW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgYWN0aW9uXG4gKiBjcmVhdG9yIGZ1bmN0aW9ucy4gT25lIGhhbmR5IHdheSB0byBvYnRhaW4gaXQgaXMgdG8gdXNlIEVTNiBgaW1wb3J0ICogYXNgXG4gKiBzeW50YXguIFlvdSBtYXkgYWxzbyBwYXNzIGEgc2luZ2xlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGRpc3BhdGNoIFRoZSBgZGlzcGF0Y2hgIGZ1bmN0aW9uIGF2YWlsYWJsZSBvbiB5b3VyIFJlZHV4XG4gKiBzdG9yZS5cbiAqXG4gKiBAcmV0dXJucyB7RnVuY3Rpb258T2JqZWN0fSBUaGUgb2JqZWN0IG1pbWlja2luZyB0aGUgb3JpZ2luYWwgb2JqZWN0LCBidXQgd2l0aFxuICogZXZlcnkgYWN0aW9uIGNyZWF0b3Igd3JhcHBlZCBpbnRvIHRoZSBgZGlzcGF0Y2hgIGNhbGwuIElmIHlvdSBwYXNzZWQgYVxuICogZnVuY3Rpb24gYXMgYGFjdGlvbkNyZWF0b3JzYCwgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGFsc28gYmUgYSBzaW5nbGVcbiAqIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiaW5kQWN0aW9uQ3JlYXRvcnMoYWN0aW9uQ3JlYXRvcnMsIGRpc3BhdGNoKSB7XG4gIGlmICh0eXBlb2YgYWN0aW9uQ3JlYXRvcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gYmluZEFjdGlvbkNyZWF0b3IoYWN0aW9uQ3JlYXRvcnMsIGRpc3BhdGNoKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgYWN0aW9uQ3JlYXRvcnMgIT09ICdvYmplY3QnIHx8IGFjdGlvbkNyZWF0b3JzID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdiaW5kQWN0aW9uQ3JlYXRvcnMgZXhwZWN0ZWQgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb24sIGluc3RlYWQgcmVjZWl2ZWQgJyArIChhY3Rpb25DcmVhdG9ycyA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBhY3Rpb25DcmVhdG9ycykgKyAnLiAnICsgJ0RpZCB5b3Ugd3JpdGUgXCJpbXBvcnQgQWN0aW9uQ3JlYXRvcnMgZnJvbVwiIGluc3RlYWQgb2YgXCJpbXBvcnQgKiBhcyBBY3Rpb25DcmVhdG9ycyBmcm9tXCI/Jyk7XG4gIH1cblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFjdGlvbkNyZWF0b3JzKTtcbiAgdmFyIGJvdW5kQWN0aW9uQ3JlYXRvcnMgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgdmFyIGFjdGlvbkNyZWF0b3IgPSBhY3Rpb25DcmVhdG9yc1trZXldO1xuICAgIGlmICh0eXBlb2YgYWN0aW9uQ3JlYXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYm91bmRBY3Rpb25DcmVhdG9yc1trZXldID0gYmluZEFjdGlvbkNyZWF0b3IoYWN0aW9uQ3JlYXRvciwgZGlzcGF0Y2gpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYm91bmRBY3Rpb25DcmVhdG9ycztcbn0iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzWydkZWZhdWx0J10gPSBjb21iaW5lUmVkdWNlcnM7XG5cbnZhciBfY3JlYXRlU3RvcmUgPSByZXF1aXJlKCcuL2NyZWF0ZVN0b3JlJyk7XG5cbnZhciBfaXNQbGFpbk9iamVjdCA9IHJlcXVpcmUoJ2xvZGFzaC9pc1BsYWluT2JqZWN0Jyk7XG5cbnZhciBfaXNQbGFpbk9iamVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pc1BsYWluT2JqZWN0KTtcblxudmFyIF93YXJuaW5nID0gcmVxdWlyZSgnLi91dGlscy93YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG5mdW5jdGlvbiBnZXRVbmRlZmluZWRTdGF0ZUVycm9yTWVzc2FnZShrZXksIGFjdGlvbikge1xuICB2YXIgYWN0aW9uVHlwZSA9IGFjdGlvbiAmJiBhY3Rpb24udHlwZTtcbiAgdmFyIGFjdGlvbk5hbWUgPSBhY3Rpb25UeXBlICYmICdcIicgKyBhY3Rpb25UeXBlLnRvU3RyaW5nKCkgKyAnXCInIHx8ICdhbiBhY3Rpb24nO1xuXG4gIHJldHVybiAnR2l2ZW4gYWN0aW9uICcgKyBhY3Rpb25OYW1lICsgJywgcmVkdWNlciBcIicgKyBrZXkgKyAnXCIgcmV0dXJuZWQgdW5kZWZpbmVkLiAnICsgJ1RvIGlnbm9yZSBhbiBhY3Rpb24sIHlvdSBtdXN0IGV4cGxpY2l0bHkgcmV0dXJuIHRoZSBwcmV2aW91cyBzdGF0ZS4nO1xufVxuXG5mdW5jdGlvbiBnZXRVbmV4cGVjdGVkU3RhdGVTaGFwZVdhcm5pbmdNZXNzYWdlKGlucHV0U3RhdGUsIHJlZHVjZXJzLCBhY3Rpb24sIHVuZXhwZWN0ZWRLZXlDYWNoZSkge1xuICB2YXIgcmVkdWNlcktleXMgPSBPYmplY3Qua2V5cyhyZWR1Y2Vycyk7XG4gIHZhciBhcmd1bWVudE5hbWUgPSBhY3Rpb24gJiYgYWN0aW9uLnR5cGUgPT09IF9jcmVhdGVTdG9yZS5BY3Rpb25UeXBlcy5JTklUID8gJ3ByZWxvYWRlZFN0YXRlIGFyZ3VtZW50IHBhc3NlZCB0byBjcmVhdGVTdG9yZScgOiAncHJldmlvdXMgc3RhdGUgcmVjZWl2ZWQgYnkgdGhlIHJlZHVjZXInO1xuXG4gIGlmIChyZWR1Y2VyS2V5cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJ1N0b3JlIGRvZXMgbm90IGhhdmUgYSB2YWxpZCByZWR1Y2VyLiBNYWtlIHN1cmUgdGhlIGFyZ3VtZW50IHBhc3NlZCAnICsgJ3RvIGNvbWJpbmVSZWR1Y2VycyBpcyBhbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSByZWR1Y2Vycy4nO1xuICB9XG5cbiAgaWYgKCEoMCwgX2lzUGxhaW5PYmplY3QyWydkZWZhdWx0J10pKGlucHV0U3RhdGUpKSB7XG4gICAgcmV0dXJuICdUaGUgJyArIGFyZ3VtZW50TmFtZSArICcgaGFzIHVuZXhwZWN0ZWQgdHlwZSBvZiBcIicgKyB7fS50b1N0cmluZy5jYWxsKGlucHV0U3RhdGUpLm1hdGNoKC9cXHMoW2EtenxBLVpdKykvKVsxXSArICdcIi4gRXhwZWN0ZWQgYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyAnICsgKCdrZXlzOiBcIicgKyByZWR1Y2VyS2V5cy5qb2luKCdcIiwgXCInKSArICdcIicpO1xuICB9XG5cbiAgdmFyIHVuZXhwZWN0ZWRLZXlzID0gT2JqZWN0LmtleXMoaW5wdXRTdGF0ZSkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gIXJlZHVjZXJzLmhhc093blByb3BlcnR5KGtleSkgJiYgIXVuZXhwZWN0ZWRLZXlDYWNoZVtrZXldO1xuICB9KTtcblxuICB1bmV4cGVjdGVkS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB1bmV4cGVjdGVkS2V5Q2FjaGVba2V5XSA9IHRydWU7XG4gIH0pO1xuXG4gIGlmICh1bmV4cGVjdGVkS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuICdVbmV4cGVjdGVkICcgKyAodW5leHBlY3RlZEtleXMubGVuZ3RoID4gMSA/ICdrZXlzJyA6ICdrZXknKSArICcgJyArICgnXCInICsgdW5leHBlY3RlZEtleXMuam9pbignXCIsIFwiJykgKyAnXCIgZm91bmQgaW4gJyArIGFyZ3VtZW50TmFtZSArICcuICcpICsgJ0V4cGVjdGVkIHRvIGZpbmQgb25lIG9mIHRoZSBrbm93biByZWR1Y2VyIGtleXMgaW5zdGVhZDogJyArICgnXCInICsgcmVkdWNlcktleXMuam9pbignXCIsIFwiJykgKyAnXCIuIFVuZXhwZWN0ZWQga2V5cyB3aWxsIGJlIGlnbm9yZWQuJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXNzZXJ0UmVkdWNlclNhbml0eShyZWR1Y2Vycykge1xuICBPYmplY3Qua2V5cyhyZWR1Y2VycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIHJlZHVjZXIgPSByZWR1Y2Vyc1trZXldO1xuICAgIHZhciBpbml0aWFsU3RhdGUgPSByZWR1Y2VyKHVuZGVmaW5lZCwgeyB0eXBlOiBfY3JlYXRlU3RvcmUuQWN0aW9uVHlwZXMuSU5JVCB9KTtcblxuICAgIGlmICh0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWR1Y2VyIFwiJyArIGtleSArICdcIiByZXR1cm5lZCB1bmRlZmluZWQgZHVyaW5nIGluaXRpYWxpemF0aW9uLiAnICsgJ0lmIHRoZSBzdGF0ZSBwYXNzZWQgdG8gdGhlIHJlZHVjZXIgaXMgdW5kZWZpbmVkLCB5b3UgbXVzdCAnICsgJ2V4cGxpY2l0bHkgcmV0dXJuIHRoZSBpbml0aWFsIHN0YXRlLiBUaGUgaW5pdGlhbCBzdGF0ZSBtYXkgJyArICdub3QgYmUgdW5kZWZpbmVkLicpO1xuICAgIH1cblxuICAgIHZhciB0eXBlID0gJ0BAcmVkdXgvUFJPQkVfVU5LTk9XTl9BQ1RJT05fJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KS5zcGxpdCgnJykuam9pbignLicpO1xuICAgIGlmICh0eXBlb2YgcmVkdWNlcih1bmRlZmluZWQsIHsgdHlwZTogdHlwZSB9KSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVkdWNlciBcIicgKyBrZXkgKyAnXCIgcmV0dXJuZWQgdW5kZWZpbmVkIHdoZW4gcHJvYmVkIHdpdGggYSByYW5kb20gdHlwZS4gJyArICgnRG9uXFwndCB0cnkgdG8gaGFuZGxlICcgKyBfY3JlYXRlU3RvcmUuQWN0aW9uVHlwZXMuSU5JVCArICcgb3Igb3RoZXIgYWN0aW9ucyBpbiBcInJlZHV4LypcIiAnKSArICduYW1lc3BhY2UuIFRoZXkgYXJlIGNvbnNpZGVyZWQgcHJpdmF0ZS4gSW5zdGVhZCwgeW91IG11c3QgcmV0dXJuIHRoZSAnICsgJ2N1cnJlbnQgc3RhdGUgZm9yIGFueSB1bmtub3duIGFjdGlvbnMsIHVubGVzcyBpdCBpcyB1bmRlZmluZWQsICcgKyAnaW4gd2hpY2ggY2FzZSB5b3UgbXVzdCByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUsIHJlZ2FyZGxlc3Mgb2YgdGhlICcgKyAnYWN0aW9uIHR5cGUuIFRoZSBpbml0aWFsIHN0YXRlIG1heSBub3QgYmUgdW5kZWZpbmVkLicpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogVHVybnMgYW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgZGlmZmVyZW50IHJlZHVjZXIgZnVuY3Rpb25zLCBpbnRvIGEgc2luZ2xlXG4gKiByZWR1Y2VyIGZ1bmN0aW9uLiBJdCB3aWxsIGNhbGwgZXZlcnkgY2hpbGQgcmVkdWNlciwgYW5kIGdhdGhlciB0aGVpciByZXN1bHRzXG4gKiBpbnRvIGEgc2luZ2xlIHN0YXRlIG9iamVjdCwgd2hvc2Uga2V5cyBjb3JyZXNwb25kIHRvIHRoZSBrZXlzIG9mIHRoZSBwYXNzZWRcbiAqIHJlZHVjZXIgZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSByZWR1Y2VycyBBbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGNvcnJlc3BvbmQgdG8gZGlmZmVyZW50XG4gKiByZWR1Y2VyIGZ1bmN0aW9ucyB0aGF0IG5lZWQgdG8gYmUgY29tYmluZWQgaW50byBvbmUuIE9uZSBoYW5keSB3YXkgdG8gb2J0YWluXG4gKiBpdCBpcyB0byB1c2UgRVM2IGBpbXBvcnQgKiBhcyByZWR1Y2Vyc2Agc3ludGF4LiBUaGUgcmVkdWNlcnMgbWF5IG5ldmVyIHJldHVyblxuICogdW5kZWZpbmVkIGZvciBhbnkgYWN0aW9uLiBJbnN0ZWFkLCB0aGV5IHNob3VsZCByZXR1cm4gdGhlaXIgaW5pdGlhbCBzdGF0ZVxuICogaWYgdGhlIHN0YXRlIHBhc3NlZCB0byB0aGVtIHdhcyB1bmRlZmluZWQsIGFuZCB0aGUgY3VycmVudCBzdGF0ZSBmb3IgYW55XG4gKiB1bnJlY29nbml6ZWQgYWN0aW9uLlxuICpcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSByZWR1Y2VyIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBldmVyeSByZWR1Y2VyIGluc2lkZSB0aGVcbiAqIHBhc3NlZCBvYmplY3QsIGFuZCBidWlsZHMgYSBzdGF0ZSBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzaGFwZS5cbiAqL1xuZnVuY3Rpb24gY29tYmluZVJlZHVjZXJzKHJlZHVjZXJzKSB7XG4gIHZhciByZWR1Y2VyS2V5cyA9IE9iamVjdC5rZXlzKHJlZHVjZXJzKTtcbiAgdmFyIGZpbmFsUmVkdWNlcnMgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWR1Y2VyS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSByZWR1Y2VyS2V5c1tpXTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAodHlwZW9mIHJlZHVjZXJzW2tleV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICgwLCBfd2FybmluZzJbJ2RlZmF1bHQnXSkoJ05vIHJlZHVjZXIgcHJvdmlkZWQgZm9yIGtleSBcIicgKyBrZXkgKyAnXCInKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHJlZHVjZXJzW2tleV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGZpbmFsUmVkdWNlcnNba2V5XSA9IHJlZHVjZXJzW2tleV07XG4gICAgfVxuICB9XG4gIHZhciBmaW5hbFJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMoZmluYWxSZWR1Y2Vycyk7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YXIgdW5leHBlY3RlZEtleUNhY2hlID0ge307XG4gIH1cblxuICB2YXIgc2FuaXR5RXJyb3I7XG4gIHRyeSB7XG4gICAgYXNzZXJ0UmVkdWNlclNhbml0eShmaW5hbFJlZHVjZXJzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHNhbml0eUVycm9yID0gZTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiBjb21iaW5hdGlvbigpIHtcbiAgICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcbiAgICB2YXIgYWN0aW9uID0gYXJndW1lbnRzWzFdO1xuXG4gICAgaWYgKHNhbml0eUVycm9yKSB7XG4gICAgICB0aHJvdyBzYW5pdHlFcnJvcjtcbiAgICB9XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFyIHdhcm5pbmdNZXNzYWdlID0gZ2V0VW5leHBlY3RlZFN0YXRlU2hhcGVXYXJuaW5nTWVzc2FnZShzdGF0ZSwgZmluYWxSZWR1Y2VycywgYWN0aW9uLCB1bmV4cGVjdGVkS2V5Q2FjaGUpO1xuICAgICAgaWYgKHdhcm5pbmdNZXNzYWdlKSB7XG4gICAgICAgICgwLCBfd2FybmluZzJbJ2RlZmF1bHQnXSkod2FybmluZ01lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBoYXNDaGFuZ2VkID0gZmFsc2U7XG4gICAgdmFyIG5leHRTdGF0ZSA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmluYWxSZWR1Y2VyS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGZpbmFsUmVkdWNlcktleXNbaV07XG4gICAgICB2YXIgcmVkdWNlciA9IGZpbmFsUmVkdWNlcnNba2V5XTtcbiAgICAgIHZhciBwcmV2aW91c1N0YXRlRm9yS2V5ID0gc3RhdGVba2V5XTtcbiAgICAgIHZhciBuZXh0U3RhdGVGb3JLZXkgPSByZWR1Y2VyKHByZXZpb3VzU3RhdGVGb3JLZXksIGFjdGlvbik7XG4gICAgICBpZiAodHlwZW9mIG5leHRTdGF0ZUZvcktleSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IGdldFVuZGVmaW5lZFN0YXRlRXJyb3JNZXNzYWdlKGtleSwgYWN0aW9uKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICB9XG4gICAgICBuZXh0U3RhdGVba2V5XSA9IG5leHRTdGF0ZUZvcktleTtcbiAgICAgIGhhc0NoYW5nZWQgPSBoYXNDaGFuZ2VkIHx8IG5leHRTdGF0ZUZvcktleSAhPT0gcHJldmlvdXNTdGF0ZUZvcktleTtcbiAgICB9XG4gICAgcmV0dXJuIGhhc0NoYW5nZWQgPyBuZXh0U3RhdGUgOiBzdGF0ZTtcbiAgfTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gY29tcG9zZTtcbi8qKlxuICogQ29tcG9zZXMgc2luZ2xlLWFyZ3VtZW50IGZ1bmN0aW9ucyBmcm9tIHJpZ2h0IHRvIGxlZnQuIFRoZSByaWdodG1vc3RcbiAqIGZ1bmN0aW9uIGNhbiB0YWtlIG11bHRpcGxlIGFyZ3VtZW50cyBhcyBpdCBwcm92aWRlcyB0aGUgc2lnbmF0dXJlIGZvclxuICogdGhlIHJlc3VsdGluZyBjb21wb3NpdGUgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gZnVuY3MgVGhlIGZ1bmN0aW9ucyB0byBjb21wb3NlLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIG9idGFpbmVkIGJ5IGNvbXBvc2luZyB0aGUgYXJndW1lbnQgZnVuY3Rpb25zXG4gKiBmcm9tIHJpZ2h0IHRvIGxlZnQuIEZvciBleGFtcGxlLCBjb21wb3NlKGYsIGcsIGgpIGlzIGlkZW50aWNhbCB0byBkb2luZ1xuICogKC4uLmFyZ3MpID0+IGYoZyhoKC4uLmFyZ3MpKSkuXG4gKi9cblxuZnVuY3Rpb24gY29tcG9zZSgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGZ1bmNzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgZnVuY3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICBpZiAoZnVuY3MubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgIHJldHVybiBhcmc7XG4gICAgfTtcbiAgfVxuXG4gIGlmIChmdW5jcy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gZnVuY3NbMF07XG4gIH1cblxuICB2YXIgbGFzdCA9IGZ1bmNzW2Z1bmNzLmxlbmd0aCAtIDFdO1xuICB2YXIgcmVzdCA9IGZ1bmNzLnNsaWNlKDAsIC0xKTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcmVzdC5yZWR1Y2VSaWdodChmdW5jdGlvbiAoY29tcG9zZWQsIGYpIHtcbiAgICAgIHJldHVybiBmKGNvbXBvc2VkKTtcbiAgICB9LCBsYXN0LmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKSk7XG4gIH07XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5BY3Rpb25UeXBlcyA9IHVuZGVmaW5lZDtcbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGNyZWF0ZVN0b3JlO1xuXG52YXIgX2lzUGxhaW5PYmplY3QgPSByZXF1aXJlKCdsb2Rhc2gvaXNQbGFpbk9iamVjdCcpO1xuXG52YXIgX2lzUGxhaW5PYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXNQbGFpbk9iamVjdCk7XG5cbnZhciBfc3ltYm9sT2JzZXJ2YWJsZSA9IHJlcXVpcmUoJ3N5bWJvbC1vYnNlcnZhYmxlJyk7XG5cbnZhciBfc3ltYm9sT2JzZXJ2YWJsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zeW1ib2xPYnNlcnZhYmxlKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG4vKipcbiAqIFRoZXNlIGFyZSBwcml2YXRlIGFjdGlvbiB0eXBlcyByZXNlcnZlZCBieSBSZWR1eC5cbiAqIEZvciBhbnkgdW5rbm93biBhY3Rpb25zLCB5b3UgbXVzdCByZXR1cm4gdGhlIGN1cnJlbnQgc3RhdGUuXG4gKiBJZiB0aGUgY3VycmVudCBzdGF0ZSBpcyB1bmRlZmluZWQsIHlvdSBtdXN0IHJldHVybiB0aGUgaW5pdGlhbCBzdGF0ZS5cbiAqIERvIG5vdCByZWZlcmVuY2UgdGhlc2UgYWN0aW9uIHR5cGVzIGRpcmVjdGx5IGluIHlvdXIgY29kZS5cbiAqL1xudmFyIEFjdGlvblR5cGVzID0gZXhwb3J0cy5BY3Rpb25UeXBlcyA9IHtcbiAgSU5JVDogJ0BAcmVkdXgvSU5JVCdcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIFJlZHV4IHN0b3JlIHRoYXQgaG9sZHMgdGhlIHN0YXRlIHRyZWUuXG4gKiBUaGUgb25seSB3YXkgdG8gY2hhbmdlIHRoZSBkYXRhIGluIHRoZSBzdG9yZSBpcyB0byBjYWxsIGBkaXNwYXRjaCgpYCBvbiBpdC5cbiAqXG4gKiBUaGVyZSBzaG91bGQgb25seSBiZSBhIHNpbmdsZSBzdG9yZSBpbiB5b3VyIGFwcC4gVG8gc3BlY2lmeSBob3cgZGlmZmVyZW50XG4gKiBwYXJ0cyBvZiB0aGUgc3RhdGUgdHJlZSByZXNwb25kIHRvIGFjdGlvbnMsIHlvdSBtYXkgY29tYmluZSBzZXZlcmFsIHJlZHVjZXJzXG4gKiBpbnRvIGEgc2luZ2xlIHJlZHVjZXIgZnVuY3Rpb24gYnkgdXNpbmcgYGNvbWJpbmVSZWR1Y2Vyc2AuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVkdWNlciBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbmV4dCBzdGF0ZSB0cmVlLCBnaXZlblxuICogdGhlIGN1cnJlbnQgc3RhdGUgdHJlZSBhbmQgdGhlIGFjdGlvbiB0byBoYW5kbGUuXG4gKlxuICogQHBhcmFtIHthbnl9IFtwcmVsb2FkZWRTdGF0ZV0gVGhlIGluaXRpYWwgc3RhdGUuIFlvdSBtYXkgb3B0aW9uYWxseSBzcGVjaWZ5IGl0XG4gKiB0byBoeWRyYXRlIHRoZSBzdGF0ZSBmcm9tIHRoZSBzZXJ2ZXIgaW4gdW5pdmVyc2FsIGFwcHMsIG9yIHRvIHJlc3RvcmUgYVxuICogcHJldmlvdXNseSBzZXJpYWxpemVkIHVzZXIgc2Vzc2lvbi5cbiAqIElmIHlvdSB1c2UgYGNvbWJpbmVSZWR1Y2Vyc2AgdG8gcHJvZHVjZSB0aGUgcm9vdCByZWR1Y2VyIGZ1bmN0aW9uLCB0aGlzIG11c3QgYmVcbiAqIGFuIG9iamVjdCB3aXRoIHRoZSBzYW1lIHNoYXBlIGFzIGBjb21iaW5lUmVkdWNlcnNgIGtleXMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZW5oYW5jZXIgVGhlIHN0b3JlIGVuaGFuY2VyLiBZb3UgbWF5IG9wdGlvbmFsbHkgc3BlY2lmeSBpdFxuICogdG8gZW5oYW5jZSB0aGUgc3RvcmUgd2l0aCB0aGlyZC1wYXJ0eSBjYXBhYmlsaXRpZXMgc3VjaCBhcyBtaWRkbGV3YXJlLFxuICogdGltZSB0cmF2ZWwsIHBlcnNpc3RlbmNlLCBldGMuIFRoZSBvbmx5IHN0b3JlIGVuaGFuY2VyIHRoYXQgc2hpcHMgd2l0aCBSZWR1eFxuICogaXMgYGFwcGx5TWlkZGxld2FyZSgpYC5cbiAqXG4gKiBAcmV0dXJucyB7U3RvcmV9IEEgUmVkdXggc3RvcmUgdGhhdCBsZXRzIHlvdSByZWFkIHRoZSBzdGF0ZSwgZGlzcGF0Y2ggYWN0aW9uc1xuICogYW5kIHN1YnNjcmliZSB0byBjaGFuZ2VzLlxuICovXG5mdW5jdGlvbiBjcmVhdGVTdG9yZShyZWR1Y2VyLCBwcmVsb2FkZWRTdGF0ZSwgZW5oYW5jZXIpIHtcbiAgdmFyIF9yZWYyO1xuXG4gIGlmICh0eXBlb2YgcHJlbG9hZGVkU3RhdGUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGVuaGFuY2VyID09PSAndW5kZWZpbmVkJykge1xuICAgIGVuaGFuY2VyID0gcHJlbG9hZGVkU3RhdGU7XG4gICAgcHJlbG9hZGVkU3RhdGUgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAodHlwZW9mIGVuaGFuY2VyICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmICh0eXBlb2YgZW5oYW5jZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgdGhlIGVuaGFuY2VyIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVuaGFuY2VyKGNyZWF0ZVN0b3JlKShyZWR1Y2VyLCBwcmVsb2FkZWRTdGF0ZSk7XG4gIH1cblxuICBpZiAodHlwZW9mIHJlZHVjZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRoZSByZWR1Y2VyIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB2YXIgY3VycmVudFJlZHVjZXIgPSByZWR1Y2VyO1xuICB2YXIgY3VycmVudFN0YXRlID0gcHJlbG9hZGVkU3RhdGU7XG4gIHZhciBjdXJyZW50TGlzdGVuZXJzID0gW107XG4gIHZhciBuZXh0TGlzdGVuZXJzID0gY3VycmVudExpc3RlbmVycztcbiAgdmFyIGlzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBlbnN1cmVDYW5NdXRhdGVOZXh0TGlzdGVuZXJzKCkge1xuICAgIGlmIChuZXh0TGlzdGVuZXJzID09PSBjdXJyZW50TGlzdGVuZXJzKSB7XG4gICAgICBuZXh0TGlzdGVuZXJzID0gY3VycmVudExpc3RlbmVycy5zbGljZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgc3RhdGUgdHJlZSBtYW5hZ2VkIGJ5IHRoZSBzdG9yZS5cbiAgICpcbiAgICogQHJldHVybnMge2FueX0gVGhlIGN1cnJlbnQgc3RhdGUgdHJlZSBvZiB5b3VyIGFwcGxpY2F0aW9uLlxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIGN1cnJlbnRTdGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgY2hhbmdlIGxpc3RlbmVyLiBJdCB3aWxsIGJlIGNhbGxlZCBhbnkgdGltZSBhbiBhY3Rpb24gaXMgZGlzcGF0Y2hlZCxcbiAgICogYW5kIHNvbWUgcGFydCBvZiB0aGUgc3RhdGUgdHJlZSBtYXkgcG90ZW50aWFsbHkgaGF2ZSBjaGFuZ2VkLiBZb3UgbWF5IHRoZW5cbiAgICogY2FsbCBgZ2V0U3RhdGUoKWAgdG8gcmVhZCB0aGUgY3VycmVudCBzdGF0ZSB0cmVlIGluc2lkZSB0aGUgY2FsbGJhY2suXG4gICAqXG4gICAqIFlvdSBtYXkgY2FsbCBgZGlzcGF0Y2goKWAgZnJvbSBhIGNoYW5nZSBsaXN0ZW5lciwgd2l0aCB0aGUgZm9sbG93aW5nXG4gICAqIGNhdmVhdHM6XG4gICAqXG4gICAqIDEuIFRoZSBzdWJzY3JpcHRpb25zIGFyZSBzbmFwc2hvdHRlZCBqdXN0IGJlZm9yZSBldmVyeSBgZGlzcGF0Y2goKWAgY2FsbC5cbiAgICogSWYgeW91IHN1YnNjcmliZSBvciB1bnN1YnNjcmliZSB3aGlsZSB0aGUgbGlzdGVuZXJzIGFyZSBiZWluZyBpbnZva2VkLCB0aGlzXG4gICAqIHdpbGwgbm90IGhhdmUgYW55IGVmZmVjdCBvbiB0aGUgYGRpc3BhdGNoKClgIHRoYXQgaXMgY3VycmVudGx5IGluIHByb2dyZXNzLlxuICAgKiBIb3dldmVyLCB0aGUgbmV4dCBgZGlzcGF0Y2goKWAgY2FsbCwgd2hldGhlciBuZXN0ZWQgb3Igbm90LCB3aWxsIHVzZSBhIG1vcmVcbiAgICogcmVjZW50IHNuYXBzaG90IG9mIHRoZSBzdWJzY3JpcHRpb24gbGlzdC5cbiAgICpcbiAgICogMi4gVGhlIGxpc3RlbmVyIHNob3VsZCBub3QgZXhwZWN0IHRvIHNlZSBhbGwgc3RhdGUgY2hhbmdlcywgYXMgdGhlIHN0YXRlXG4gICAqIG1pZ2h0IGhhdmUgYmVlbiB1cGRhdGVkIG11bHRpcGxlIHRpbWVzIGR1cmluZyBhIG5lc3RlZCBgZGlzcGF0Y2goKWAgYmVmb3JlXG4gICAqIHRoZSBsaXN0ZW5lciBpcyBjYWxsZWQuIEl0IGlzLCBob3dldmVyLCBndWFyYW50ZWVkIHRoYXQgYWxsIHN1YnNjcmliZXJzXG4gICAqIHJlZ2lzdGVyZWQgYmVmb3JlIHRoZSBgZGlzcGF0Y2goKWAgc3RhcnRlZCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSBsYXRlc3RcbiAgICogc3RhdGUgYnkgdGhlIHRpbWUgaXQgZXhpdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIEEgY2FsbGJhY2sgdG8gYmUgaW52b2tlZCBvbiBldmVyeSBkaXNwYXRjaC5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRvIHJlbW92ZSB0aGlzIGNoYW5nZSBsaXN0ZW5lci5cbiAgICovXG4gIGZ1bmN0aW9uIHN1YnNjcmliZShsaXN0ZW5lcikge1xuICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgbGlzdGVuZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG5cbiAgICB2YXIgaXNTdWJzY3JpYmVkID0gdHJ1ZTtcblxuICAgIGVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMoKTtcbiAgICBuZXh0TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkge1xuICAgICAgaWYgKCFpc1N1YnNjcmliZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpc1N1YnNjcmliZWQgPSBmYWxzZTtcblxuICAgICAgZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycygpO1xuICAgICAgdmFyIGluZGV4ID0gbmV4dExpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgIG5leHRMaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYW4gYWN0aW9uLiBJdCBpcyB0aGUgb25seSB3YXkgdG8gdHJpZ2dlciBhIHN0YXRlIGNoYW5nZS5cbiAgICpcbiAgICogVGhlIGByZWR1Y2VyYCBmdW5jdGlvbiwgdXNlZCB0byBjcmVhdGUgdGhlIHN0b3JlLCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZVxuICAgKiBjdXJyZW50IHN0YXRlIHRyZWUgYW5kIHRoZSBnaXZlbiBgYWN0aW9uYC4gSXRzIHJldHVybiB2YWx1ZSB3aWxsXG4gICAqIGJlIGNvbnNpZGVyZWQgdGhlICoqbmV4dCoqIHN0YXRlIG9mIHRoZSB0cmVlLCBhbmQgdGhlIGNoYW5nZSBsaXN0ZW5lcnNcbiAgICogd2lsbCBiZSBub3RpZmllZC5cbiAgICpcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb25seSBzdXBwb3J0cyBwbGFpbiBvYmplY3QgYWN0aW9ucy4gSWYgeW91IHdhbnQgdG9cbiAgICogZGlzcGF0Y2ggYSBQcm9taXNlLCBhbiBPYnNlcnZhYmxlLCBhIHRodW5rLCBvciBzb21ldGhpbmcgZWxzZSwgeW91IG5lZWQgdG9cbiAgICogd3JhcCB5b3VyIHN0b3JlIGNyZWF0aW5nIGZ1bmN0aW9uIGludG8gdGhlIGNvcnJlc3BvbmRpbmcgbWlkZGxld2FyZS4gRm9yXG4gICAqIGV4YW1wbGUsIHNlZSB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgdGhlIGByZWR1eC10aHVua2AgcGFja2FnZS4gRXZlbiB0aGVcbiAgICogbWlkZGxld2FyZSB3aWxsIGV2ZW50dWFsbHkgZGlzcGF0Y2ggcGxhaW4gb2JqZWN0IGFjdGlvbnMgdXNpbmcgdGhpcyBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhY3Rpb24gQSBwbGFpbiBvYmplY3QgcmVwcmVzZW50aW5nIOKAnHdoYXQgY2hhbmdlZOKAnS4gSXQgaXNcbiAgICogYSBnb29kIGlkZWEgdG8ga2VlcCBhY3Rpb25zIHNlcmlhbGl6YWJsZSBzbyB5b3UgY2FuIHJlY29yZCBhbmQgcmVwbGF5IHVzZXJcbiAgICogc2Vzc2lvbnMsIG9yIHVzZSB0aGUgdGltZSB0cmF2ZWxsaW5nIGByZWR1eC1kZXZ0b29sc2AuIEFuIGFjdGlvbiBtdXN0IGhhdmVcbiAgICogYSBgdHlwZWAgcHJvcGVydHkgd2hpY2ggbWF5IG5vdCBiZSBgdW5kZWZpbmVkYC4gSXQgaXMgYSBnb29kIGlkZWEgdG8gdXNlXG4gICAqIHN0cmluZyBjb25zdGFudHMgZm9yIGFjdGlvbiB0eXBlcy5cbiAgICpcbiAgICogQHJldHVybnMge09iamVjdH0gRm9yIGNvbnZlbmllbmNlLCB0aGUgc2FtZSBhY3Rpb24gb2JqZWN0IHlvdSBkaXNwYXRjaGVkLlxuICAgKlxuICAgKiBOb3RlIHRoYXQsIGlmIHlvdSB1c2UgYSBjdXN0b20gbWlkZGxld2FyZSwgaXQgbWF5IHdyYXAgYGRpc3BhdGNoKClgIHRvXG4gICAqIHJldHVybiBzb21ldGhpbmcgZWxzZSAoZm9yIGV4YW1wbGUsIGEgUHJvbWlzZSB5b3UgY2FuIGF3YWl0KS5cbiAgICovXG4gIGZ1bmN0aW9uIGRpc3BhdGNoKGFjdGlvbikge1xuICAgIGlmICghKDAsIF9pc1BsYWluT2JqZWN0MlsnZGVmYXVsdCddKShhY3Rpb24pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjdGlvbnMgbXVzdCBiZSBwbGFpbiBvYmplY3RzLiAnICsgJ1VzZSBjdXN0b20gbWlkZGxld2FyZSBmb3IgYXN5bmMgYWN0aW9ucy4nKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGFjdGlvbi50eXBlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBY3Rpb25zIG1heSBub3QgaGF2ZSBhbiB1bmRlZmluZWQgXCJ0eXBlXCIgcHJvcGVydHkuICcgKyAnSGF2ZSB5b3UgbWlzc3BlbGxlZCBhIGNvbnN0YW50PycpO1xuICAgIH1cblxuICAgIGlmIChpc0Rpc3BhdGNoaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlZHVjZXJzIG1heSBub3QgZGlzcGF0Y2ggYWN0aW9ucy4nKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgaXNEaXNwYXRjaGluZyA9IHRydWU7XG4gICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50UmVkdWNlcihjdXJyZW50U3RhdGUsIGFjdGlvbik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgbGlzdGVuZXJzID0gY3VycmVudExpc3RlbmVycyA9IG5leHRMaXN0ZW5lcnM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxpc3RlbmVyc1tpXSgpO1xuICAgIH1cblxuICAgIHJldHVybiBhY3Rpb247XG4gIH1cblxuICAvKipcbiAgICogUmVwbGFjZXMgdGhlIHJlZHVjZXIgY3VycmVudGx5IHVzZWQgYnkgdGhlIHN0b3JlIHRvIGNhbGN1bGF0ZSB0aGUgc3RhdGUuXG4gICAqXG4gICAqIFlvdSBtaWdodCBuZWVkIHRoaXMgaWYgeW91ciBhcHAgaW1wbGVtZW50cyBjb2RlIHNwbGl0dGluZyBhbmQgeW91IHdhbnQgdG9cbiAgICogbG9hZCBzb21lIG9mIHRoZSByZWR1Y2VycyBkeW5hbWljYWxseS4gWW91IG1pZ2h0IGFsc28gbmVlZCB0aGlzIGlmIHlvdVxuICAgKiBpbXBsZW1lbnQgYSBob3QgcmVsb2FkaW5nIG1lY2hhbmlzbSBmb3IgUmVkdXguXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRSZWR1Y2VyIFRoZSByZWR1Y2VyIGZvciB0aGUgc3RvcmUgdG8gdXNlIGluc3RlYWQuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cbiAgZnVuY3Rpb24gcmVwbGFjZVJlZHVjZXIobmV4dFJlZHVjZXIpIHtcbiAgICBpZiAodHlwZW9mIG5leHRSZWR1Y2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRoZSBuZXh0UmVkdWNlciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cblxuICAgIGN1cnJlbnRSZWR1Y2VyID0gbmV4dFJlZHVjZXI7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlcy5JTklUIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEludGVyb3BlcmFiaWxpdHkgcG9pbnQgZm9yIG9ic2VydmFibGUvcmVhY3RpdmUgbGlicmFyaWVzLlxuICAgKiBAcmV0dXJucyB7b2JzZXJ2YWJsZX0gQSBtaW5pbWFsIG9ic2VydmFibGUgb2Ygc3RhdGUgY2hhbmdlcy5cbiAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGUgb2JzZXJ2YWJsZSBwcm9wb3NhbDpcbiAgICogaHR0cHM6Ly9naXRodWIuY29tL3plbnBhcnNpbmcvZXMtb2JzZXJ2YWJsZVxuICAgKi9cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZSgpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBvdXRlclN1YnNjcmliZSA9IHN1YnNjcmliZTtcbiAgICByZXR1cm4gX3JlZiA9IHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIG1pbmltYWwgb2JzZXJ2YWJsZSBzdWJzY3JpcHRpb24gbWV0aG9kLlxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9ic2VydmVyIEFueSBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCBhcyBhbiBvYnNlcnZlci5cbiAgICAgICAqIFRoZSBvYnNlcnZlciBvYmplY3Qgc2hvdWxkIGhhdmUgYSBgbmV4dGAgbWV0aG9kLlxuICAgICAgICogQHJldHVybnMge3N1YnNjcmlwdGlvbn0gQW4gb2JqZWN0IHdpdGggYW4gYHVuc3Vic2NyaWJlYCBtZXRob2QgdGhhdCBjYW5cbiAgICAgICAqIGJlIHVzZWQgdG8gdW5zdWJzY3JpYmUgdGhlIG9ic2VydmFibGUgZnJvbSB0aGUgc3RvcmUsIGFuZCBwcmV2ZW50IGZ1cnRoZXJcbiAgICAgICAqIGVtaXNzaW9uIG9mIHZhbHVlcyBmcm9tIHRoZSBvYnNlcnZhYmxlLlxuICAgICAgICovXG4gICAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uIHN1YnNjcmliZShvYnNlcnZlcikge1xuICAgICAgICBpZiAodHlwZW9mIG9ic2VydmVyICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIHRoZSBvYnNlcnZlciB0byBiZSBhbiBvYmplY3QuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvYnNlcnZlU3RhdGUoKSB7XG4gICAgICAgICAgaWYgKG9ic2VydmVyLm5leHQpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQoZ2V0U3RhdGUoKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgb2JzZXJ2ZVN0YXRlKCk7XG4gICAgICAgIHZhciB1bnN1YnNjcmliZSA9IG91dGVyU3Vic2NyaWJlKG9ic2VydmVTdGF0ZSk7XG4gICAgICAgIHJldHVybiB7IHVuc3Vic2NyaWJlOiB1bnN1YnNjcmliZSB9O1xuICAgICAgfVxuICAgIH0sIF9yZWZbX3N5bWJvbE9ic2VydmFibGUyWydkZWZhdWx0J11dID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSwgX3JlZjtcbiAgfVxuXG4gIC8vIFdoZW4gYSBzdG9yZSBpcyBjcmVhdGVkLCBhbiBcIklOSVRcIiBhY3Rpb24gaXMgZGlzcGF0Y2hlZCBzbyB0aGF0IGV2ZXJ5XG4gIC8vIHJlZHVjZXIgcmV0dXJucyB0aGVpciBpbml0aWFsIHN0YXRlLiBUaGlzIGVmZmVjdGl2ZWx5IHBvcHVsYXRlc1xuICAvLyB0aGUgaW5pdGlhbCBzdGF0ZSB0cmVlLlxuICBkaXNwYXRjaCh7IHR5cGU6IEFjdGlvblR5cGVzLklOSVQgfSk7XG5cbiAgcmV0dXJuIF9yZWYyID0ge1xuICAgIGRpc3BhdGNoOiBkaXNwYXRjaCxcbiAgICBzdWJzY3JpYmU6IHN1YnNjcmliZSxcbiAgICBnZXRTdGF0ZTogZ2V0U3RhdGUsXG4gICAgcmVwbGFjZVJlZHVjZXI6IHJlcGxhY2VSZWR1Y2VyXG4gIH0sIF9yZWYyW19zeW1ib2xPYnNlcnZhYmxlMlsnZGVmYXVsdCddXSA9IG9ic2VydmFibGUsIF9yZWYyO1xufSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuY29tcG9zZSA9IGV4cG9ydHMuYXBwbHlNaWRkbGV3YXJlID0gZXhwb3J0cy5iaW5kQWN0aW9uQ3JlYXRvcnMgPSBleHBvcnRzLmNvbWJpbmVSZWR1Y2VycyA9IGV4cG9ydHMuY3JlYXRlU3RvcmUgPSB1bmRlZmluZWQ7XG5cbnZhciBfY3JlYXRlU3RvcmUgPSByZXF1aXJlKCcuL2NyZWF0ZVN0b3JlJyk7XG5cbnZhciBfY3JlYXRlU3RvcmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlU3RvcmUpO1xuXG52YXIgX2NvbWJpbmVSZWR1Y2VycyA9IHJlcXVpcmUoJy4vY29tYmluZVJlZHVjZXJzJyk7XG5cbnZhciBfY29tYmluZVJlZHVjZXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbWJpbmVSZWR1Y2Vycyk7XG5cbnZhciBfYmluZEFjdGlvbkNyZWF0b3JzID0gcmVxdWlyZSgnLi9iaW5kQWN0aW9uQ3JlYXRvcnMnKTtcblxudmFyIF9iaW5kQWN0aW9uQ3JlYXRvcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmluZEFjdGlvbkNyZWF0b3JzKTtcblxudmFyIF9hcHBseU1pZGRsZXdhcmUgPSByZXF1aXJlKCcuL2FwcGx5TWlkZGxld2FyZScpO1xuXG52YXIgX2FwcGx5TWlkZGxld2FyZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hcHBseU1pZGRsZXdhcmUpO1xuXG52YXIgX2NvbXBvc2UgPSByZXF1aXJlKCcuL2NvbXBvc2UnKTtcblxudmFyIF9jb21wb3NlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbXBvc2UpO1xuXG52YXIgX3dhcm5pbmcgPSByZXF1aXJlKCcuL3V0aWxzL3dhcm5pbmcnKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbi8qXG4qIFRoaXMgaXMgYSBkdW1teSBmdW5jdGlvbiB0byBjaGVjayBpZiB0aGUgZnVuY3Rpb24gbmFtZSBoYXMgYmVlbiBhbHRlcmVkIGJ5IG1pbmlmaWNhdGlvbi5cbiogSWYgdGhlIGZ1bmN0aW9uIGhhcyBiZWVuIG1pbmlmaWVkIGFuZCBOT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLCB3YXJuIHRoZSB1c2VyLlxuKi9cbmZ1bmN0aW9uIGlzQ3J1c2hlZCgpIHt9XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHR5cGVvZiBpc0NydXNoZWQubmFtZSA9PT0gJ3N0cmluZycgJiYgaXNDcnVzaGVkLm5hbWUgIT09ICdpc0NydXNoZWQnKSB7XG4gICgwLCBfd2FybmluZzJbJ2RlZmF1bHQnXSkoJ1lvdSBhcmUgY3VycmVudGx5IHVzaW5nIG1pbmlmaWVkIGNvZGUgb3V0c2lkZSBvZiBOT0RFX0VOViA9PT0gXFwncHJvZHVjdGlvblxcJy4gJyArICdUaGlzIG1lYW5zIHRoYXQgeW91IGFyZSBydW5uaW5nIGEgc2xvd2VyIGRldmVsb3BtZW50IGJ1aWxkIG9mIFJlZHV4LiAnICsgJ1lvdSBjYW4gdXNlIGxvb3NlLWVudmlmeSAoaHR0cHM6Ly9naXRodWIuY29tL3plcnRvc2gvbG9vc2UtZW52aWZ5KSBmb3IgYnJvd3NlcmlmeSAnICsgJ29yIERlZmluZVBsdWdpbiBmb3Igd2VicGFjayAoaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zMDAzMDAzMSkgJyArICd0byBlbnN1cmUgeW91IGhhdmUgdGhlIGNvcnJlY3QgY29kZSBmb3IgeW91ciBwcm9kdWN0aW9uIGJ1aWxkLicpO1xufVxuXG5leHBvcnRzLmNyZWF0ZVN0b3JlID0gX2NyZWF0ZVN0b3JlMlsnZGVmYXVsdCddO1xuZXhwb3J0cy5jb21iaW5lUmVkdWNlcnMgPSBfY29tYmluZVJlZHVjZXJzMlsnZGVmYXVsdCddO1xuZXhwb3J0cy5iaW5kQWN0aW9uQ3JlYXRvcnMgPSBfYmluZEFjdGlvbkNyZWF0b3JzMlsnZGVmYXVsdCddO1xuZXhwb3J0cy5hcHBseU1pZGRsZXdhcmUgPSBfYXBwbHlNaWRkbGV3YXJlMlsnZGVmYXVsdCddO1xuZXhwb3J0cy5jb21wb3NlID0gX2NvbXBvc2UyWydkZWZhdWx0J107IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1snZGVmYXVsdCddID0gd2FybmluZztcbi8qKlxuICogUHJpbnRzIGEgd2FybmluZyBpbiB0aGUgY29uc29sZSBpZiBpdCBleGlzdHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgVGhlIHdhcm5pbmcgbWVzc2FnZS5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2UpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnNvbGUgKi9cbiAgdHJ5IHtcbiAgICAvLyBUaGlzIGVycm9yIHdhcyB0aHJvd24gYXMgYSBjb252ZW5pZW5jZSBzbyB0aGF0IGlmIHlvdSBlbmFibGVcbiAgICAvLyBcImJyZWFrIG9uIGFsbCBleGNlcHRpb25zXCIgaW4geW91ciBjb25zb2xlLFxuICAgIC8vIGl0IHdvdWxkIHBhdXNlIHRoZSBleGVjdXRpb24gYXQgdGhpcyBsaW5lLlxuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICB9IGNhdGNoIChlKSB7fVxuICAvKiBlc2xpbnQtZW5hYmxlIG5vLWVtcHR5ICovXG59IiwiXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgLyoqXG4gICAqIEFkZHMgYSBsaXN0ZW5lciBvZiBhbiBldmVudFxuICAgKiBAY2hhaW5hYmxlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCAtIHRoZSBldmVudCBuYW1lXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICogQHJldHVybiB7U2FtcGxlUGxheWVyfSB0aGUgcGxheWVyXG4gICAqIEBleGFtcGxlXG4gICAqIHBsYXllci5vbignc3RhcnQnLCBmdW5jdGlvbih0aW1lLCBub3RlKSB7XG4gICAqICAgY29uc29sZS5sb2codGltZSwgbm90ZSlcbiAgICogfSlcbiAgICovXG4gIHBsYXllci5vbiA9IGZ1bmN0aW9uIChldmVudCwgY2IpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgZXZlbnQgPT09ICdmdW5jdGlvbicpIHJldHVybiBwbGF5ZXIub24oJ2V2ZW50JywgZXZlbnQpXG4gICAgdmFyIHByb3AgPSAnb24nICsgZXZlbnRcbiAgICB2YXIgb2xkID0gcGxheWVyW3Byb3BdXG4gICAgcGxheWVyW3Byb3BdID0gb2xkID8gY2hhaW4ob2xkLCBjYikgOiBjYlxuICAgIHJldHVybiBwbGF5ZXJcbiAgfVxuICByZXR1cm4gcGxheWVyXG59XG5cbmZ1bmN0aW9uIGNoYWluIChmbjEsIGZuMikge1xuICByZXR1cm4gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsgZm4xKGEsIGIsIGMsIGQpOyBmbjIoYSwgYiwgYywgZCkgfVxufVxuIiwiJ3VzZSBzdHJpY3QnXG5cbnZhciBwbGF5ZXIgPSByZXF1aXJlKCcuL3BsYXllcicpXG52YXIgZXZlbnRzID0gcmVxdWlyZSgnLi9ldmVudHMnKVxudmFyIG5vdGVzID0gcmVxdWlyZSgnLi9ub3RlcycpXG52YXIgc2NoZWR1bGVyID0gcmVxdWlyZSgnLi9zY2hlZHVsZXInKVxudmFyIG1pZGkgPSByZXF1aXJlKCcuL21pZGknKVxuXG5mdW5jdGlvbiBTYW1wbGVQbGF5ZXIgKGFjLCBzb3VyY2UsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIG1pZGkoc2NoZWR1bGVyKG5vdGVzKGV2ZW50cyhwbGF5ZXIoYWMsIHNvdXJjZSwgb3B0aW9ucykpKSkpXG59XG5cbmlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykgbW9kdWxlLmV4cG9ydHMgPSBTYW1wbGVQbGF5ZXJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgd2luZG93LlNhbXBsZVBsYXllciA9IFNhbXBsZVBsYXllclxuIiwidmFyIG1pZGltZXNzYWdlID0gcmVxdWlyZSgnbWlkaW1lc3NhZ2UnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgLyoqXG4gICogQ29ubmVjdCBhIHBsYXllciB0byBhIG1pZGkgaW5wdXRcbiAgKlxuICAqIFRoZSBvcHRpb25zIGFjY2VwdHM6XG4gICpcbiAgKiAtIGNoYW5uZWw6IHRoZSBjaGFubmVsIHRvIGxpc3RlbiB0by4gTGlzdGVuIHRvIGFsbCBjaGFubmVscyBieSBkZWZhdWx0LlxuICAqXG4gICogQHBhcmFtIHtNSURJSW5wdXR9IGlucHV0XG4gICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSAoT3B0aW9uYWwpXG4gICogQHJldHVybiB7U2FtcGxlUGxheWVyfSB0aGUgcGxheWVyXG4gICogQGV4YW1wbGVcbiAgKiB2YXIgcGlhbm8gPSBwbGF5ZXIoLi4uKVxuICAqIHdpbmRvdy5uYXZpZ2F0b3IucmVxdWVzdE1JRElBY2Nlc3MoKS50aGVuKGZ1bmN0aW9uIChtaWRpQWNjZXNzKSB7XG4gICogICBtaWRpQWNjZXNzLmlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChtaWRpSW5wdXQpIHtcbiAgKiAgICAgcGlhbm8ubGlzdGVuVG9NaWRpKG1pZGlJbnB1dClcbiAgKiAgIH0pXG4gICogfSlcbiAgKi9cbiAgcGxheWVyLmxpc3RlblRvTWlkaSA9IGZ1bmN0aW9uIChpbnB1dCwgb3B0aW9ucykge1xuICAgIHZhciBzdGFydGVkID0ge31cbiAgICB2YXIgb3B0cyA9IG9wdGlvbnMgfHwge31cbiAgICB2YXIgZ2FpbiA9IG9wdHMuZ2FpbiB8fCBmdW5jdGlvbiAodmVsKSB7IHJldHVybiB2ZWwgLyAxMjcgfVxuXG4gICAgaW5wdXQub25taWRpbWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgIHZhciBtbSA9IG1zZy5tZXNzYWdlVHlwZSA/IG1zZyA6IG1pZGltZXNzYWdlKG1zZylcbiAgICAgIGlmIChtbS5tZXNzYWdlVHlwZSA9PT0gJ25vdGVvbicgJiYgbW0udmVsb2NpdHkgPT09IDApIHtcbiAgICAgICAgbW0ubWVzc2FnZVR5cGUgPSAnbm90ZW9mZidcbiAgICAgIH1cbiAgICAgIGlmIChvcHRzLmNoYW5uZWwgJiYgbW0uY2hhbm5lbCAhPT0gb3B0cy5jaGFubmVsKSByZXR1cm5cblxuICAgICAgc3dpdGNoIChtbS5tZXNzYWdlVHlwZSkge1xuICAgICAgICBjYXNlICdub3Rlb24nOlxuICAgICAgICAgIHN0YXJ0ZWRbbW0ua2V5XSA9IHBsYXllci5wbGF5KG1tLmtleSwgMCwgeyBnYWluOiBnYWluKG1tLnZlbG9jaXR5KSB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ25vdGVvZmYnOlxuICAgICAgICAgIGlmIChzdGFydGVkW21tLmtleV0pIHtcbiAgICAgICAgICAgIHN0YXJ0ZWRbbW0ua2V5XS5zdG9wKClcbiAgICAgICAgICAgIGRlbGV0ZSBzdGFydGVkW21tLmtleV1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBsYXllclxuICB9XG4gIHJldHVybiBwbGF5ZXJcbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG52YXIgbm90ZSA9IHJlcXVpcmUoJ25vdGUtcGFyc2VyJylcbnZhciBpc01pZGkgPSBmdW5jdGlvbiAobikgeyByZXR1cm4gbiAhPT0gbnVsbCAmJiBuICE9PSBbXSAmJiBuID49IDAgJiYgbiA8IDEyOSB9XG52YXIgdG9NaWRpID0gZnVuY3Rpb24gKG4pIHsgcmV0dXJuIGlzTWlkaShuKSA/ICtuIDogbm90ZS5taWRpKG4pIH1cblxuLy8gQWRkcyBub3RlIG5hbWUgdG8gbWlkaSBjb252ZXJzaW9uXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgaWYgKHBsYXllci5idWZmZXJzKSB7XG4gICAgdmFyIG1hcCA9IHBsYXllci5vcHRzLm1hcFxuICAgIHZhciB0b0tleSA9IHR5cGVvZiBtYXAgPT09ICdmdW5jdGlvbicgPyBtYXAgOiB0b01pZGlcbiAgICB2YXIgbWFwcGVyID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHJldHVybiBuYW1lID8gdG9LZXkobmFtZSkgfHwgbmFtZSA6IG51bGxcbiAgICB9XG5cbiAgICBwbGF5ZXIuYnVmZmVycyA9IG1hcEJ1ZmZlcnMocGxheWVyLmJ1ZmZlcnMsIG1hcHBlcilcbiAgICB2YXIgc3RhcnQgPSBwbGF5ZXIuc3RhcnRcbiAgICBwbGF5ZXIuc3RhcnQgPSBmdW5jdGlvbiAobmFtZSwgd2hlbiwgb3B0aW9ucykge1xuICAgICAgdmFyIGtleSA9IG1hcHBlcihuYW1lKVxuICAgICAgdmFyIGRlYyA9IGtleSAlIDFcbiAgICAgIGlmIChkZWMpIHtcbiAgICAgICAga2V5ID0gTWF0aC5mbG9vcihrZXkpXG4gICAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKG9wdGlvbnMgfHwge30sIHsgY2VudHM6IE1hdGguZmxvb3IoZGVjICogMTAwKSB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuIHN0YXJ0KGtleSwgd2hlbiwgb3B0aW9ucylcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBsYXllclxufVxuXG5mdW5jdGlvbiBtYXBCdWZmZXJzIChidWZmZXJzLCB0b0tleSkge1xuICByZXR1cm4gT2JqZWN0LmtleXMoYnVmZmVycykucmVkdWNlKGZ1bmN0aW9uIChtYXBwZWQsIG5hbWUpIHtcbiAgICBtYXBwZWRbdG9LZXkobmFtZSldID0gYnVmZmVyc1tuYW1lXVxuICAgIHJldHVybiBtYXBwZWRcbiAgfSwge30pXG59XG4iLCIvKiBnbG9iYWwgQXVkaW9CdWZmZXIgKi9cbid1c2Ugc3RyaWN0J1xuXG52YXIgQURTUiA9IHJlcXVpcmUoJ2Fkc3InKVxuXG52YXIgRU1QVFkgPSB7fVxudmFyIERFRkFVTFRTID0ge1xuICBnYWluOiAxLFxuICBhdHRhY2s6IDAuMDEsXG4gIGRlY2F5OiAwLjEsXG4gIHN1c3RhaW46IDAuOSxcbiAgcmVsZWFzZTogMC4zLFxuICBsb29wOiBmYWxzZSxcbiAgY2VudHM6IDAsXG4gIGxvb3BTdGFydDogMCxcbiAgbG9vcEVuZDogMFxufVxuXG4vKipcbiAqIENyZWF0ZSBhIHNhbXBsZSBwbGF5ZXIuXG4gKlxuICogQHBhcmFtIHtBdWRpb0NvbnRleHR9IGFjIC0gdGhlIGF1ZGlvIGNvbnRleHRcbiAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ8T2JqZWN0PFN0cmluZyxBcnJheUJ1ZmZlcj59IHNvdXJjZVxuICogQHBhcmFtIHtPbmplY3R9IG9wdGlvbnMgLSAoT3B0aW9uYWwpIGFuIG9wdGlvbnMgb2JqZWN0XG4gKiBAcmV0dXJuIHtwbGF5ZXJ9IHRoZSBwbGF5ZXJcbiAqIEBleGFtcGxlXG4gKiB2YXIgU2FtcGxlUGxheWVyID0gcmVxdWlyZSgnc2FtcGxlLXBsYXllcicpXG4gKiB2YXIgYWMgPSBuZXcgQXVkaW9Db250ZXh0KClcbiAqIHZhciBzbmFyZSA9IFNhbXBsZVBsYXllcihhYywgPEF1ZGlvQnVmZmVyPilcbiAqIHNuYXJlLnBsYXkoKVxuICovXG5mdW5jdGlvbiBTYW1wbGVQbGF5ZXIgKGFjLCBzb3VyY2UsIG9wdGlvbnMpIHtcbiAgdmFyIGNvbm5lY3RlZCA9IGZhbHNlXG4gIHZhciBuZXh0SWQgPSAwXG4gIHZhciB0cmFja2VkID0ge31cbiAgdmFyIG91dCA9IGFjLmNyZWF0ZUdhaW4oKVxuICBvdXQuZ2Fpbi52YWx1ZSA9IDFcblxuICB2YXIgb3B0cyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRTLCBvcHRpb25zKVxuXG4gIC8qKlxuICAgKiBAbmFtZXNwYWNlXG4gICAqL1xuICB2YXIgcGxheWVyID0geyBjb250ZXh0OiBhYywgb3V0OiBvdXQsIG9wdHM6IG9wdHMgfVxuICBpZiAoc291cmNlIGluc3RhbmNlb2YgQXVkaW9CdWZmZXIpIHBsYXllci5idWZmZXIgPSBzb3VyY2VcbiAgZWxzZSBwbGF5ZXIuYnVmZmVycyA9IHNvdXJjZVxuXG4gIC8qKlxuICAgKiBTdGFydCBhIHNhbXBsZSBidWZmZXIuXG4gICAqXG4gICAqIFRoZSByZXR1cm5lZCBvYmplY3QgaGFzIGEgZnVuY3Rpb24gYHN0b3Aod2hlbilgIHRvIHN0b3AgdGhlIHNvdW5kLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBidWZmZXIuIElmIHRoZSBzb3VyY2Ugb2YgdGhlXG4gICAqIFNhbXBsZVBsYXllciBpcyBvbmUgc2FtcGxlIGJ1ZmZlciwgdGhpcyBwYXJhbWV0ZXIgaXMgbm90IHJlcXVpcmVkXG4gICAqIEBwYXJhbSB7RmxvYXR9IHdoZW4gLSAoT3B0aW9uYWwpIHdoZW4gdG8gc3RhcnQgKGN1cnJlbnQgdGltZSBpZiBieSBkZWZhdWx0KVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGFkZGl0aW9uYWwgc2FtcGxlIHBsYXlpbmcgb3B0aW9uc1xuICAgKiBAcmV0dXJuIHtBdWRpb05vZGV9IGFuIGF1ZGlvIG5vZGUgd2l0aCBhIGBzdG9wYCBmdW5jdGlvblxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgc2FtcGxlID0gcGxheWVyKGFjLCA8QXVkaW9CdWZmZXI+KS5jb25uZWN0KGFjLmRlc3RpbmF0aW9uKVxuICAgKiBzYW1wbGUuc3RhcnQoKVxuICAgKiBzYW1wbGUuc3RhcnQoNSwgeyBnYWluOiAwLjcgfSkgLy8gbmFtZSBub3QgcmVxdWlyZWQgc2luY2UgaXMgb25seSBvbmUgQXVkaW9CdWZmZXJcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIGRydW1zID0gcGxheWVyKGFjLCB7IHNuYXJlOiA8QXVkaW9CdWZmZXI+LCBraWNrOiA8QXVkaW9CdWZmZXI+LCAuLi4gfSkuY29ubmVjdChhYy5kZXN0aW5hdGlvbilcbiAgICogZHJ1bXMuc3RhcnQoJ3NuYXJlJylcbiAgICogZHJ1bXMuc3RhcnQoJ3NuYXJlJywgMCwgeyBnYWluOiAwLjMgfSlcbiAgICovXG4gIHBsYXllci5zdGFydCA9IGZ1bmN0aW9uIChuYW1lLCB3aGVuLCBvcHRpb25zKSB7XG4gICAgLy8gaWYgb25seSBvbmUgYnVmZmVyLCByZW9yZGVyIGFyZ3VtZW50c1xuICAgIGlmIChwbGF5ZXIuYnVmZmVyICYmIG5hbWUgIT09IG51bGwpIHJldHVybiBwbGF5ZXIuc3RhcnQobnVsbCwgbmFtZSwgd2hlbilcblxuICAgIHZhciBidWZmZXIgPSBuYW1lID8gcGxheWVyLmJ1ZmZlcnNbbmFtZV0gOiBwbGF5ZXIuYnVmZmVyXG4gICAgaWYgKCFidWZmZXIpIHtcbiAgICAgIGNvbnNvbGUud2FybignQnVmZmVyICcgKyBuYW1lICsgJyBub3QgZm91bmQuJylcbiAgICAgIHJldHVyblxuICAgIH0gZWxzZSBpZiAoIWNvbm5lY3RlZCkge1xuICAgICAgY29uc29sZS53YXJuKCdTYW1wbGVQbGF5ZXIgbm90IGNvbm5lY3RlZCB0byBhbnkgbm9kZS4nKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdmFyIG9wdHMgPSBvcHRpb25zIHx8IEVNUFRZXG4gICAgd2hlbiA9IE1hdGgubWF4KGFjLmN1cnJlbnRUaW1lLCB3aGVuIHx8IDApXG4gICAgcGxheWVyLmVtaXQoJ3N0YXJ0Jywgd2hlbiwgbmFtZSwgb3B0cylcbiAgICB2YXIgbm9kZSA9IGNyZWF0ZU5vZGUobmFtZSwgYnVmZmVyLCBvcHRzKVxuICAgIG5vZGUuaWQgPSB0cmFjayhuYW1lLCBub2RlKVxuICAgIG5vZGUuZW52LnN0YXJ0KHdoZW4pXG4gICAgbm9kZS5zb3VyY2Uuc3RhcnQod2hlbilcbiAgICBwbGF5ZXIuZW1pdCgnc3RhcnRlZCcsIHdoZW4sIG5vZGUuaWQsIG5vZGUpXG4gICAgaWYgKG9wdHMuZHVyYXRpb24pIG5vZGUuc3RvcCh3aGVuICsgb3B0cy5kdXJhdGlvbilcbiAgICByZXR1cm4gbm9kZVxuICB9XG5cbiAgLy8gTk9URTogc3RhcnQgd2lsbCBiZSBvdmVycmlkZSBzbyB3ZSBjYW4ndCBjb3B5IHRoZSBmdW5jdGlvbiByZWZlcmVuY2VcbiAgLy8gdGhpcyBpcyBvYnZpb3VzbHkgbm90IGEgZ29vZCBkZXNpZ24sIHNvIHRoaXMgY29kZSB3aWxsIGJlIGdvbmUgc29vbi5cbiAgLyoqXG4gICAqIEFuIGFsaWFzIGZvciBgcGxheWVyLnN0YXJ0YFxuICAgKiBAc2VlIHBsYXllci5zdGFydFxuICAgKiBAc2luY2UgMC4zLjBcbiAgICovXG4gIHBsYXllci5wbGF5ID0gZnVuY3Rpb24gKG5hbWUsIHdoZW4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gcGxheWVyLnN0YXJ0KG5hbWUsIHdoZW4sIG9wdGlvbnMpXG4gIH1cblxuICAvKipcbiAgICogU3RvcCBzb21lIG9yIGFsbCBzYW1wbGVzXG4gICAqXG4gICAqIEBwYXJhbSB7RmxvYXR9IHdoZW4gLSAoT3B0aW9uYWwpIGFuIGFic29sdXRlIHRpbWUgaW4gc2Vjb25kcyAob3IgY3VycmVudFRpbWVcbiAgICogaWYgbm90IHNwZWNpZmllZClcbiAgICogQHBhcmFtIHtBcnJheX0gbm9kZXMgLSAoT3B0aW9uYWwpIGFuIGFycmF5IG9mIG5vZGVzIG9yIG5vZGVzIGlkcyB0byBzdG9wXG4gICAqIEByZXR1cm4ge0FycmF5fSBhbiBhcnJheSBvZiBpZHMgb2YgdGhlIHN0b3BlZCBzYW1wbGVzXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBsb25nU291bmQgPSBwbGF5ZXIoYWMsIDxBdWRpb0J1ZmZlcj4pLmNvbm5lY3QoYWMuZGVzdGluYXRpb24pXG4gICAqIGxvbmdTb3VuZC5zdGFydChhYy5jdXJyZW50VGltZSlcbiAgICogbG9uZ1NvdW5kLnN0YXJ0KGFjLmN1cnJlbnRUaW1lICsgMSlcbiAgICogbG9uZ1NvdW5kLnN0YXJ0KGFjLmN1cnJlbnRUaW1lICsgMilcbiAgICogbG9uZ1NvdW5kLnN0b3AoYWMuY3VycmVudFRpbWUgKyAzKSAvLyBzdG9wIHRoZSB0aHJlZSBzb3VuZHNcbiAgICovXG4gIHBsYXllci5zdG9wID0gZnVuY3Rpb24gKHdoZW4sIGlkcykge1xuICAgIHZhciBub2RlXG4gICAgaWRzID0gaWRzIHx8IE9iamVjdC5rZXlzKHRyYWNrZWQpXG4gICAgcmV0dXJuIGlkcy5tYXAoZnVuY3Rpb24gKGlkKSB7XG4gICAgICBub2RlID0gdHJhY2tlZFtpZF1cbiAgICAgIGlmICghbm9kZSkgcmV0dXJuIG51bGxcbiAgICAgIG5vZGUuc3RvcCh3aGVuKVxuICAgICAgcmV0dXJuIG5vZGUuaWRcbiAgICB9KVxuICB9XG4gIC8qKlxuICAgKiBDb25uZWN0IHRoZSBwbGF5ZXIgdG8gYSBkZXN0aW5hdGlvbiBub2RlXG4gICAqXG4gICAqIEBwYXJhbSB7QXVkaW9Ob2RlfSBkZXN0aW5hdGlvbiAtIHRoZSBkZXN0aW5hdGlvbiBub2RlXG4gICAqIEByZXR1cm4ge0F1ZGlvUGxheWVyfSB0aGUgcGxheWVyXG4gICAqIEBjaGFpbmFibGVcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHNhbXBsZSA9IHBsYXllcihhYywgPEF1ZGlvQnVmZmVyPikuY29ubmVjdChhYy5kZXN0aW5hdGlvbilcbiAgICovXG4gIHBsYXllci5jb25uZWN0ID0gZnVuY3Rpb24gKGRlc3QpIHtcbiAgICBjb25uZWN0ZWQgPSB0cnVlXG4gICAgb3V0LmNvbm5lY3QoZGVzdClcbiAgICByZXR1cm4gcGxheWVyXG4gIH1cblxuICBwbGF5ZXIuZW1pdCA9IGZ1bmN0aW9uIChldmVudCwgd2hlbiwgb2JqLCBvcHRzKSB7XG4gICAgaWYgKHBsYXllci5vbmV2ZW50KSBwbGF5ZXIub25ldmVudChldmVudCwgd2hlbiwgb2JqLCBvcHRzKVxuICAgIHZhciBmbiA9IHBsYXllclsnb24nICsgZXZlbnRdXG4gICAgaWYgKGZuKSBmbih3aGVuLCBvYmosIG9wdHMpXG4gIH1cblxuICByZXR1cm4gcGxheWVyXG5cbiAgLy8gPT09PT09PT09PT09PT09IFBSSVZBVEUgRlVOQ1RJT05TID09PT09PT09PT09PT09IC8vXG5cbiAgZnVuY3Rpb24gdHJhY2sgKG5hbWUsIG5vZGUpIHtcbiAgICBub2RlLmlkID0gbmV4dElkKytcbiAgICB0cmFja2VkW25vZGUuaWRdID0gbm9kZVxuICAgIG5vZGUuc291cmNlLm9uZW5kZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbm93ID0gYWMuY3VycmVudFRpbWVcbiAgICAgIG5vZGUuc291cmNlLmRpc2Nvbm5lY3QoKVxuICAgICAgbm9kZS5lbnYuZGlzY29ubmVjdCgpXG4gICAgICBub2RlLmRpc2Nvbm5lY3QoKVxuICAgICAgcGxheWVyLmVtaXQoJ2VuZGVkJywgbm93LCBub2RlLmlkLCBub2RlKVxuICAgIH1cbiAgICByZXR1cm4gbm9kZS5pZFxuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlTm9kZSAobmFtZSwgYnVmZmVyLCBvcHRpb25zKSB7XG4gICAgdmFyIG5vZGUgPSBhYy5jcmVhdGVHYWluKClcbiAgICBub2RlLmdhaW4udmFsdWUgPSAwIC8vIHRoZSBlbnZlbG9wZSB3aWxsIGNvbnRyb2wgdGhlIGdhaW5cbiAgICBub2RlLmNvbm5lY3Qob3V0KVxuXG4gICAgbm9kZS5lbnYgPSBlbnZlbG9wZShhYywgb3B0aW9ucywgb3B0cylcbiAgICBub2RlLmVudi5jb25uZWN0KG5vZGUuZ2FpbilcblxuICAgIG5vZGUuc291cmNlID0gYWMuY3JlYXRlQnVmZmVyU291cmNlKClcbiAgICBub2RlLnNvdXJjZS5idWZmZXIgPSBidWZmZXJcbiAgICBub2RlLnNvdXJjZS5jb25uZWN0KG5vZGUpXG4gICAgbm9kZS5zb3VyY2UubG9vcCA9IG9wdGlvbnMubG9vcCB8fCBvcHRzLmxvb3BcbiAgICBub2RlLnNvdXJjZS5wbGF5YmFja1JhdGUudmFsdWUgPSBjZW50c1RvUmF0ZShvcHRpb25zLmNlbnRzIHx8IG9wdHMuY2VudHMpXG4gICAgbm9kZS5zb3VyY2UubG9vcFN0YXJ0ID0gb3B0aW9ucy5sb29wU3RhcnQgfHwgb3B0cy5sb29wU3RhcnRcbiAgICBub2RlLnNvdXJjZS5sb29wRW5kID0gb3B0aW9ucy5sb29wRW5kIHx8IG9wdHMubG9vcEVuZFxuICAgIG5vZGUuc3RvcCA9IGZ1bmN0aW9uICh3aGVuKSB7XG4gICAgICB2YXIgdGltZSA9IHdoZW4gfHwgYWMuY3VycmVudFRpbWVcbiAgICAgIHBsYXllci5lbWl0KCdzdG9wJywgdGltZSwgbmFtZSlcbiAgICAgIHZhciBzdG9wQXQgPSBub2RlLmVudi5zdG9wKHRpbWUpXG4gICAgICBub2RlLnNvdXJjZS5zdG9wKHN0b3BBdClcbiAgICB9XG4gICAgcmV0dXJuIG5vZGVcbiAgfVxufVxuXG5mdW5jdGlvbiBpc051bSAoeCkgeyByZXR1cm4gdHlwZW9mIHggPT09ICdudW1iZXInIH1cbnZhciBQQVJBTVMgPSBbJ2F0dGFjaycsICdkZWNheScsICdzdXN0YWluJywgJ3JlbGVhc2UnXVxuZnVuY3Rpb24gZW52ZWxvcGUgKGFjLCBvcHRpb25zLCBvcHRzKSB7XG4gIHZhciBlbnYgPSBBRFNSKGFjKVxuICB2YXIgYWRzciA9IG9wdGlvbnMuYWRzciB8fCBvcHRzLmFkc3JcbiAgUEFSQU1TLmZvckVhY2goZnVuY3Rpb24gKG5hbWUsIGkpIHtcbiAgICBpZiAoYWRzcikgZW52W25hbWVdID0gYWRzcltpXVxuICAgIGVsc2UgZW52W25hbWVdID0gb3B0aW9uc1tuYW1lXSB8fCBvcHRzW25hbWVdXG4gIH0pXG4gIGVudi52YWx1ZS52YWx1ZSA9IGlzTnVtKG9wdGlvbnMuZ2FpbikgPyBvcHRpb25zLmdhaW5cbiAgICA6IGlzTnVtKG9wdHMuZ2FpbikgPyBvcHRzLmdhaW4gOiAxXG4gIHJldHVybiBlbnZcbn1cblxuLypcbiAqIEdldCBwbGF5YmFjayByYXRlIGZvciBhIGdpdmVuIHBpdGNoIGNoYW5nZSAoaW4gY2VudHMpXG4gKiBCYXNpYyBbbWF0aF0oaHR0cDovL3d3dy5iaXJkc29mdC5kZW1vbi5jby51ay9tdXNpYy9zYW1wbGVydC5odG0pOlxuICogZjIgPSBmMSAqIDJeKCBDIC8gMTIwMCApXG4gKi9cbmZ1bmN0aW9uIGNlbnRzVG9SYXRlIChjZW50cykgeyByZXR1cm4gY2VudHMgPyBNYXRoLnBvdygyLCBjZW50cyAvIDEyMDApIDogMSB9XG5cbm1vZHVsZS5leHBvcnRzID0gU2FtcGxlUGxheWVyXG4iLCIndXNlIHN0cmljdCdcblxudmFyIGlzQXJyID0gQXJyYXkuaXNBcnJheVxudmFyIGlzT2JqID0gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgdHlwZW9mIG8gPT09ICdvYmplY3QnIH1cbnZhciBPUFRTID0ge31cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocGxheWVyKSB7XG4gIC8qKlxuICAgKiBTY2hlZHVsZSBhIGxpc3Qgb2YgZXZlbnRzIHRvIGJlIHBsYXllZCBhdCBzcGVjaWZpYyB0aW1lLlxuICAgKlxuICAgKiBJdCBzdXBwb3J0cyB0aHJlZSBmb3JtYXRzIG9mIGV2ZW50cyBmb3IgdGhlIGV2ZW50cyBsaXN0OlxuICAgKlxuICAgKiAtIEFuIGFycmF5IHdpdGggW3RpbWUsIG5vdGVdXG4gICAqIC0gQW4gYXJyYXkgd2l0aCBbdGltZSwgb2JqZWN0XVxuICAgKiAtIEFuIG9iamVjdCB3aXRoIHsgdGltZTogPywgW25hbWV8bm90ZXxtaWRpfGtleV06ID8gfVxuICAgKlxuICAgKiBAcGFyYW0ge0Zsb2F0fSB0aW1lIC0gYW4gYWJzb2x1dGUgdGltZSB0byBzdGFydCAob3IgQXVkaW9Db250ZXh0J3NcbiAgICogY3VycmVudFRpbWUgaWYgcHJvdmlkZWQgbnVtYmVyIGlzIDApXG4gICAqIEBwYXJhbSB7QXJyYXl9IGV2ZW50cyAtIHRoZSBldmVudHMgbGlzdC5cbiAgICogQHJldHVybiB7QXJyYXl9IGFuIGFycmF5IG9mIGlkc1xuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyBFdmVudCBmb3JtYXQ6IFt0aW1lLCBub3RlXVxuICAgKiB2YXIgcGlhbm8gPSBwbGF5ZXIoYWMsIC4uLikuY29ubmVjdChhYy5kZXN0aW5hdGlvbilcbiAgICogcGlhbm8uc2NoZWR1bGUoMCwgWyBbMCwgJ0MyJ10sIFswLjUsICdDMyddLCBbMSwgJ0M0J10gXSlcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogLy8gRXZlbnQgZm9ybWF0OiBhbiBvYmplY3QgeyB0aW1lOiA/LCBuYW1lOiA/IH1cbiAgICogdmFyIGRydW1zID0gcGxheWVyKGFjLCAuLi4pLmNvbm5lY3QoYWMuZGVzdGluYXRpb24pXG4gICAqIGRydW1zLnNjaGVkdWxlKDAsIFtcbiAgICogICB7IG5hbWU6ICdraWNrJywgdGltZTogMCB9LFxuICAgKiAgIHsgbmFtZTogJ3NuYXJlJywgdGltZTogMC41IH0sXG4gICAqICAgeyBuYW1lOiAna2ljaycsIHRpbWU6IDEgfSxcbiAgICogICB7IG5hbWU6ICdzbmFyZScsIHRpbWU6IDEuNSB9XG4gICAqIF0pXG4gICAqL1xuICBwbGF5ZXIuc2NoZWR1bGUgPSBmdW5jdGlvbiAodGltZSwgZXZlbnRzKSB7XG4gICAgdmFyIG5vdyA9IHBsYXllci5jb250ZXh0LmN1cnJlbnRUaW1lXG4gICAgdmFyIHdoZW4gPSB0aW1lIDwgbm93ID8gbm93IDogdGltZVxuICAgIHBsYXllci5lbWl0KCdzY2hlZHVsZScsIHdoZW4sIGV2ZW50cylcbiAgICB2YXIgdCwgbywgbm90ZSwgb3B0c1xuICAgIHJldHVybiBldmVudHMubWFwKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKCFldmVudCkgcmV0dXJuIG51bGxcbiAgICAgIGVsc2UgaWYgKGlzQXJyKGV2ZW50KSkge1xuICAgICAgICB0ID0gZXZlbnRbMF07IG8gPSBldmVudFsxXVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdCA9IGV2ZW50LnRpbWU7IG8gPSBldmVudFxuICAgICAgfVxuXG4gICAgICBpZiAoaXNPYmoobykpIHtcbiAgICAgICAgbm90ZSA9IG8ubmFtZSB8fCBvLmtleSB8fCBvLm5vdGUgfHwgby5taWRpIHx8IG51bGxcbiAgICAgICAgb3B0cyA9IG9cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vdGUgPSBvXG4gICAgICAgIG9wdHMgPSBPUFRTXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwbGF5ZXIuc3RhcnQobm90ZSwgd2hlbiArICh0IHx8IDApLCBvcHRzKVxuICAgIH0pXG4gIH1cbiAgcmV0dXJuIHBsYXllclxufVxuIiwiJ3VzZSBzdHJpY3QnXG5cbnZhciBSRUdFWCA9IC9eKFthLWdBLUddKSgjezEsfXxiezEsfXx4ezEsfXwpKC0/XFxkKilcXHMqKC4qKVxccyokL1xuLyoqXG4gKiBBIHJlZ2V4IGZvciBtYXRjaGluZyBub3RlIHN0cmluZ3MgaW4gc2NpZW50aWZpYyBub3RhdGlvbi5cbiAqXG4gKiBAbmFtZSByZWdleFxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJuIHtSZWdFeHB9IHRoZSByZWdleHAgdXNlZCB0byBwYXJzZSB0aGUgbm90ZSBuYW1lXG4gKlxuICogVGhlIG5vdGUgc3RyaW5nIHNob3VsZCBoYXZlIHRoZSBmb3JtIGBsZXR0ZXJbYWNjaWRlbnRhbHNdW29jdGF2ZV1bZWxlbWVudF1gXG4gKiB3aGVyZTpcbiAqXG4gKiAtIGxldHRlcjogKFJlcXVpcmVkKSBpcyBhIGxldHRlciBmcm9tIEEgdG8gRyBlaXRoZXIgdXBwZXIgb3IgbG93ZXIgY2FzZVxuICogLSBhY2NpZGVudGFsczogKE9wdGlvbmFsKSBjYW4gYmUgb25lIG9yIG1vcmUgYGJgIChmbGF0cyksIGAjYCAoc2hhcnBzKSBvciBgeGAgKGRvdWJsZSBzaGFycHMpLlxuICogVGhleSBjYW4gTk9UIGJlIG1peGVkLlxuICogLSBvY3RhdmU6IChPcHRpb25hbCkgYSBwb3NpdGl2ZSBvciBuZWdhdGl2ZSBpbnRlZ2VyXG4gKiAtIGVsZW1lbnQ6IChPcHRpb25hbCkgYWRkaXRpb25hbGx5IGFueXRoaW5nIGFmdGVyIHRoZSBkdXJhdGlvbiBpcyBjb25zaWRlcmVkIHRvXG4gKiBiZSB0aGUgZWxlbWVudCBuYW1lIChmb3IgZXhhbXBsZTogJ0MyIGRvcmlhbicpXG4gKlxuICogVGhlIGV4ZWN1dGVkIHJlZ2V4IGNvbnRhaW5zIChieSBhcnJheSBpbmRleCk6XG4gKlxuICogLSAwOiB0aGUgY29tcGxldGUgc3RyaW5nXG4gKiAtIDE6IHRoZSBub3RlIGxldHRlclxuICogLSAyOiB0aGUgb3B0aW9uYWwgYWNjaWRlbnRhbHNcbiAqIC0gMzogdGhlIG9wdGlvbmFsIG9jdGF2ZVxuICogLSA0OiB0aGUgcmVzdCBvZiB0aGUgc3RyaW5nICh0cmltbWVkKVxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgcGFyc2VyID0gcmVxdWlyZSgnbm90ZS1wYXJzZXInKVxuICogcGFyc2VyLnJlZ2V4LmV4ZWMoJ2MjNCcpXG4gKiAvLyA9PiBbJ2MjNCcsICdjJywgJyMnLCAnNCcsICcnXVxuICogcGFyc2VyLnJlZ2V4LmV4ZWMoJ2MjNCBtYWpvcicpXG4gKiAvLyA9PiBbJ2MjNG1ham9yJywgJ2MnLCAnIycsICc0JywgJ21ham9yJ11cbiAqIHBhcnNlci5yZWdleCgpLmV4ZWMoJ0NNYWo3JylcbiAqIC8vID0+IFsnQ01hajcnLCAnQycsICcnLCAnJywgJ01hajcnXVxuICovXG5mdW5jdGlvbiByZWdleCAoKSB7IHJldHVybiBSRUdFWCB9XG5cbnZhciBTRU1JVE9ORVMgPSBbMCwgMiwgNCwgNSwgNywgOSwgMTFdXG4vKipcbiAqIFBhcnNlIGEgbm90ZSBuYW1lIGluIHNjaWVudGlmaWMgbm90YXRpb24gYW4gcmV0dXJuIGl0J3MgY29tcG9uZW50cyxcbiAqIGFuZCBzb21lIG51bWVyaWMgcHJvcGVydGllcyBpbmNsdWRpbmcgbWlkaSBudW1iZXIgYW5kIGZyZXF1ZW5jeS5cbiAqXG4gKiBAbmFtZSBwYXJzZVxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge1N0cmluZ30gbm90ZSAtIHRoZSBub3RlIHN0cmluZyB0byBiZSBwYXJzZWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNUb25pYyAtIHRydWUgaWYgdGhlIG5vdGUgaXMgdGhlIHRvbmljIG9mIHNvbWV0aGluZy5cbiAqIElmIHRydWUsIGVuIGV4dHJhIHRvbmljT2YgcHJvcGVydHkgaXMgcmV0dXJuZWQuIEl0J3MgZmFsc2UgYnkgZGVmYXVsdC5cbiAqIEBwYXJhbSB7RmxvYXR9IHR1bm5pbmcgLSBUaGUgZnJlcXVlbmN5IG9mIEE0IG5vdGUgdG8gY2FsY3VsYXRlIGZyZXF1ZW5jaWVzLlxuICogQnkgZGVmYXVsdCBpdCA0NDAuXG4gKiBAcmV0dXJuIHtPYmplY3R9IHRoZSBwYXJzZWQgbm90ZSBuYW1lIG9yIG51bGwgaWYgbm90IGEgdmFsaWQgbm90ZVxuICpcbiAqIFRoZSBwYXJzZWQgbm90ZSBuYW1lIG9iamVjdCB3aWxsIEFMV0FZUyBjb250YWluczpcbiAqIC0gbGV0dGVyOiB0aGUgdXBwZXJjYXNlIGxldHRlciBvZiB0aGUgbm90ZVxuICogLSBhY2M6IHRoZSBhY2NpZGVudGFscyBvZiB0aGUgbm90ZSAob25seSBzaGFycHMgb3IgZmxhdHMpXG4gKiAtIHBjOiB0aGUgcGl0Y2ggY2xhc3MgKGxldHRlciArIGFjYylcbiAqIC0gc3RlcDogcyBhIG51bWVyaWMgcmVwcmVzZW50YXRpb24gb2YgdGhlIGxldHRlci4gSXQncyBhbiBpbnRlZ2VyIGZyb20gMCB0byA2XG4gKiB3aGVyZSAwID0gQywgMSA9IEQgLi4uIDYgPSBCXG4gKiAtIGFsdDogYSBudW1lcmljIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBhY2NpZGVudGFscy4gMCBtZWFucyBubyBhbHRlcmF0aW9uLFxuICogcG9zaXRpdmUgbnVtYmVycyBhcmUgZm9yIHNoYXJwcyBhbmQgbmVnYXRpdmUgZm9yIGZsYXRzXG4gKiAtIGNocm9tYTogYSBudW1lcmljIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwaXRjaCBjbGFzcy4gSXQncyBsaWtlIG1pZGkgZm9yXG4gKiBwaXRjaCBjbGFzc2VzLiAwID0gQywgMSA9IEMjLCAyID0gRCAuLi4gSXQgY2FuIGhhdmUgbmVnYXRpdmUgdmFsdWVzOiAtMSA9IENiLlxuICogQ2FuIGRldGVjdCBwaXRjaCBjbGFzcyBlbmhyYW1vbmljcy5cbiAqXG4gKiBJZiB0aGUgbm90ZSBoYXMgb2N0YXZlLCB0aGUgcGFyc2VyIG9iamVjdCB3aWxsIGNvbnRhaW46XG4gKiAtIG9jdDogdGhlIG9jdGF2ZSBudW1iZXIgKGFzIGludGVnZXIpXG4gKiAtIG1pZGk6IHRoZSBtaWRpIG51bWJlclxuICogLSBmcmVxOiB0aGUgZnJlcXVlbmN5ICh1c2luZyB0dW5pbmcgcGFyYW1ldGVyIGFzIGJhc2UpXG4gKlxuICogSWYgdGhlIHBhcmFtZXRlciBgaXNUb25pY2AgaXMgc2V0IHRvIHRydWUsIHRoZSBwYXJzZWQgb2JqZWN0IHdpbGwgY29udGFpbjpcbiAqIC0gdG9uaWNPZjogdGhlIHJlc3Qgb2YgdGhlIHN0cmluZyB0aGF0IGZvbGxvd3Mgbm90ZSBuYW1lIChsZWZ0IGFuZCByaWdodCB0cmltbWVkKVxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgcGFyc2UgPSByZXF1aXJlKCdub3RlLXBhcnNlcicpLnBhcnNlXG4gKiBwYXJzZSgnQ2I0JylcbiAqIC8vID0+IHsgbGV0dGVyOiAnQycsIGFjYzogJ2InLCBwYzogJ0NiJywgc3RlcDogMCwgYWx0OiAtMSwgY2hyb21hOiAtMSxcbiAqICAgICAgICAgb2N0OiA0LCBtaWRpOiA1OSwgZnJlcTogMjQ2Ljk0MTY1MDYyODA2MjA2IH1cbiAqIC8vIGlmIG5vIG9jdGF2ZSwgbm8gbWlkaSwgbm8gZnJlcVxuICogcGFyc2UoJ2Z4JylcbiAqIC8vID0+IHsgbGV0dGVyOiAnRicsIGFjYzogJyMjJywgcGM6ICdGIyMnLCBzdGVwOiAzLCBhbHQ6IDIsIGNocm9tYTogNyB9KVxuICovXG5mdW5jdGlvbiBwYXJzZSAoc3RyLCBpc1RvbmljLCB0dW5pbmcpIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSByZXR1cm4gbnVsbFxuICB2YXIgbSA9IFJFR0VYLmV4ZWMoc3RyKVxuICBpZiAoIW0gfHwgIWlzVG9uaWMgJiYgbVs0XSkgcmV0dXJuIG51bGxcblxuICB2YXIgcCA9IHsgbGV0dGVyOiBtWzFdLnRvVXBwZXJDYXNlKCksIGFjYzogbVsyXS5yZXBsYWNlKC94L2csICcjIycpIH1cbiAgcC5wYyA9IHAubGV0dGVyICsgcC5hY2NcbiAgcC5zdGVwID0gKHAubGV0dGVyLmNoYXJDb2RlQXQoMCkgKyAzKSAlIDdcbiAgcC5hbHQgPSBwLmFjY1swXSA9PT0gJ2InID8gLXAuYWNjLmxlbmd0aCA6IHAuYWNjLmxlbmd0aFxuICBwLmNocm9tYSA9IFNFTUlUT05FU1twLnN0ZXBdICsgcC5hbHRcbiAgaWYgKG1bM10pIHtcbiAgICBwLm9jdCA9ICttWzNdXG4gICAgcC5taWRpID0gcC5jaHJvbWEgKyAxMiAqIChwLm9jdCArIDEpXG4gICAgcC5mcmVxID0gbWlkaVRvRnJlcShwLm1pZGksIHR1bmluZylcbiAgfVxuICBpZiAoaXNUb25pYykgcC50b25pY09mID0gbVs0XVxuICByZXR1cm4gcFxufVxuXG4vKipcbiAqIEdpdmVuIGEgbWlkaSBudW1iZXIsIHJldHVybiBpdHMgZnJlcXVlbmN5XG4gKiBAcGFyYW0ge0ludGVnZXJ9IG1pZGkgLSBtaWRpIG5vdGUgbnVtYmVyXG4gKiBAcGFyYW0ge0Zsb2F0fSB0dW5pbmcgLSAoT3B0aW9uYWwpIHRoZSBBNCB0dW5pbmcgKDQ0MEh6IGJ5IGRlZmF1bHQpXG4gKiBAcmV0dXJuIHtGbG9hdH0gZnJlcXVlbmN5IGluIGhlcnR6c1xuICovXG5mdW5jdGlvbiBtaWRpVG9GcmVxIChtaWRpLCB0dW5pbmcpIHtcbiAgcmV0dXJuIE1hdGgucG93KDIsIChtaWRpIC0gNjkpIC8gMTIpICogKHR1bmluZyB8fCA0NDApXG59XG5cbnZhciBwYXJzZXIgPSB7IHBhcnNlOiBwYXJzZSwgcmVnZXg6IHJlZ2V4LCBtaWRpVG9GcmVxOiBtaWRpVG9GcmVxIH1cbnZhciBGTlMgPSBbJ2xldHRlcicsICdhY2MnLCAncGMnLCAnc3RlcCcsICdhbHQnLCAnY2hyb21hJywgJ29jdCcsICdtaWRpJywgJ2ZyZXEnXVxuRk5TLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgcGFyc2VyW25hbWVdID0gZnVuY3Rpb24gKHNyYykge1xuICAgIHZhciBwID0gcGFyc2Uoc3JjKVxuICAgIHJldHVybiBwICYmICh0eXBlb2YgcFtuYW1lXSAhPT0gJ3VuZGVmaW5lZCcpID8gcFtuYW1lXSA6IG51bGxcbiAgfVxufSlcblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZXJcblxuLy8gZXh0cmEgQVBJIGRvY3Ncbi8qKlxuICogR2V0IG1pZGkgb2YgYSBub3RlXG4gKlxuICogQG5hbWUgbWlkaVxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge1N0cmluZ30gbm90ZSAtIHRoZSBub3RlIG5hbWVcbiAqIEByZXR1cm4ge0ludGVnZXJ9IHRoZSBtaWRpIG51bWJlciBvZiB0aGUgbm90ZSBvciBudWxsIGlmIG5vdCBhIHZhbGlkIG5vdGVcbiAqIG9yIHRoZSBub3RlIGRvZXMgTk9UIGNvbnRhaW5zIG9jdGF2ZVxuICogQGV4YW1wbGVcbiAqIHZhciBwYXJzZXIgPSByZXF1aXJlKCdub3RlLXBhcnNlcicpXG4gKiBwYXJzZXIubWlkaSgnQTQnKSAvLyA9PiA2OVxuICogcGFyc2VyLm1pZGkoJ0EnKSAvLyA9PiBudWxsXG4gKi9cbi8qKlxuICogR2V0IGZyZXEgb2YgYSBub3RlIGluIGhlcnR6cyAoaW4gYSB3ZWxsIHRlbXBlcmVkIDQ0MEh6IEE0KVxuICpcbiAqIEBuYW1lIGZyZXFcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IG5vdGUgLSB0aGUgbm90ZSBuYW1lXG4gKiBAcmV0dXJuIHtGbG9hdH0gdGhlIGZyZXEgb2YgdGhlIG51bWJlciBpZiBoZXJ0enMgb3IgbnVsbCBpZiBub3QgdmFsaWQgbm90ZVxuICogb3IgdGhlIG5vdGUgZG9lcyBOT1QgY29udGFpbnMgb2N0YXZlXG4gKiBAZXhhbXBsZVxuICogdmFyIHBhcnNlciA9IHJlcXVpcmUoJ25vdGUtcGFyc2VyJylcbiAqIHBhcnNlci5mcmVxKCdBNCcpIC8vID0+IDQ0MFxuICogcGFyc2VyLmZyZXEoJ0EnKSAvLyA9PiBudWxsXG4gKi9cbiIsIid1c2Ugc3RyaWN0J1xuXG52YXIgbG9hZCA9IHJlcXVpcmUoJ2F1ZGlvLWxvYWRlcicpXG52YXIgcGxheWVyID0gcmVxdWlyZSgnc2FtcGxlLXBsYXllcicpXG5cbi8qKlxuICogTG9hZCBhIHNvdW5kZm9udCBpbnN0cnVtZW50LiBJdCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFcbiAqIGluc3RydW1lbnQgb2JqZWN0LlxuICpcbiAqIFRoZSBpbnN0cnVtZW50IG9iamVjdCByZXR1cm5lZCBieSB0aGUgcHJvbWlzZSBoYXMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICpcbiAqIC0gbmFtZTogdGhlIGluc3RydW1lbnQgbmFtZVxuICogLSBwbGF5OiBBIGZ1bmN0aW9uIHRvIHBsYXkgbm90ZXMgZnJvbSB0aGUgYnVmZmVyIHdpdGggdGhlIHNpZ25hdHVyZVxuICogYHBsYXkobm90ZSwgdGltZSwgZHVyYXRpb24sIG9wdGlvbnMpYFxuICpcbiAqXG4gKiBUaGUgdmFsaWQgb3B0aW9ucyBhcmU6XG4gKlxuICogLSBgZm9ybWF0YDogdGhlIHNvdW5kZm9udCBmb3JtYXQuICdtcDMnIGJ5IGRlZmF1bHQuIENhbiBiZSAnb2dnJ1xuICogLSBgc291bmRmb250YDogdGhlIHNvdW5kZm9udCBuYW1lLiAnTXVzeW5nS2l0ZScgYnkgZGVmYXVsdC4gQ2FuIGJlICdGbHVpZFIzX0dNJ1xuICogLSBgbmFtZVRvVXJsYCA8RnVuY3Rpb24+OiBhIGZ1bmN0aW9uIHRvIGNvbnZlcnQgZnJvbSBpbnN0cnVtZW50IG5hbWVzIHRvIFVSTFxuICogLSBgZGVzdGluYXRpb25gOiBieSBkZWZhdWx0IFNvdW5kZm9udCB1c2VzIHRoZSBgYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uYCBidXQgeW91IGNhbiBvdmVycmlkZSBpdC5cbiAqIC0gYGdhaW5gOiB0aGUgZ2FpbiBvZiB0aGUgcGxheWVyICgxIGJ5IGRlZmF1bHQpXG4gKiAtIGBub3Rlc2A6IGFuIGFycmF5IG9mIHRoZSBub3RlcyB0byBkZWNvZGUuIEl0IGNhbiBiZSBhbiBhcnJheSBvZiBzdHJpbmdzXG4gKiB3aXRoIG5vdGUgbmFtZXMgb3IgYW4gYXJyYXkgb2YgbnVtYmVycyB3aXRoIG1pZGkgbm90ZSBudW1iZXJzLiBUaGlzIGlzIGFcbiAqIHBlcmZvcm1hbmNlIG9wdGlvbjogc2luY2UgZGVjb2RpbmcgbXAzIGlzIGEgY3B1IGludGVuc2l2ZSBwcm9jZXNzLCB5b3UgY2FuIGxpbWl0XG4gKiBsaW1pdCB0aGUgbnVtYmVyIG9mIG5vdGVzIHlvdSB3YW50IGFuZCByZWR1Y2UgdGhlIHRpbWUgdG8gbG9hZCB0aGUgaW5zdHJ1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0F1ZGlvQ29udGV4dH0gYWMgLSB0aGUgYXVkaW8gY29udGV4dFxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSB0aGUgaW5zdHJ1bWVudCBuYW1lLiBGb3IgZXhhbXBsZTogJ2Fjb3VzdGljX2dyYW5kX3BpYW5vJ1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSAoT3B0aW9uYWwpIHRoZSBzYW1lIG9wdGlvbnMgYXMgU291bmRmb250LmxvYWRCdWZmZXJzXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgU291bmRmb250ID0gcmVxdWlyZSgnc291bmZvbnQtcGxheWVyJylcbiAqIFNvdW5kZm9udC5pbnN0cnVtZW50KCdtYXJpbWJhJykudGhlbihmdW5jdGlvbiAobWFyaW1iYSkge1xuICogICBtYXJpbWJhLnBsYXkoJ0M0JylcbiAqIH0pXG4gKi9cbmZ1bmN0aW9uIGluc3RydW1lbnQgKGFjLCBuYW1lLCBvcHRpb25zKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSByZXR1cm4gZnVuY3Rpb24gKG4sIG8pIHsgcmV0dXJuIGluc3RydW1lbnQoYWMsIG4sIG8pIH1cbiAgdmFyIG9wdHMgPSBvcHRpb25zIHx8IHt9XG4gIHZhciBpc1VybCA9IG9wdHMuaXNTb3VuZGZvbnRVUkwgfHwgaXNTb3VuZGZvbnRVUkxcbiAgdmFyIHRvVXJsID0gb3B0cy5uYW1lVG9VcmwgfHwgbmFtZVRvVXJsXG4gIHZhciB1cmwgPSBpc1VybChuYW1lKSA/IG5hbWUgOiB0b1VybChuYW1lLCBvcHRzLnNvdW5kZm9udCwgb3B0cy5mb3JtYXQpXG5cbiAgcmV0dXJuIGxvYWQoYWMsIHVybCwgeyBvbmx5OiBvcHRzLm9ubHkgfHwgb3B0cy5ub3RlcyB9KS50aGVuKGZ1bmN0aW9uIChidWZmZXJzKSB7XG4gICAgdmFyIHAgPSBwbGF5ZXIoYWMsIGJ1ZmZlcnMsIG9wdHMpLmNvbm5lY3QoYWMuZGVzdGluYXRpb24pXG4gICAgcC51cmwgPSB1cmxcbiAgICBwLm5hbWUgPSBuYW1lXG4gICAgcmV0dXJuIHBcbiAgfSlcbn1cblxuZnVuY3Rpb24gaXNTb3VuZGZvbnRVUkwgKG5hbWUpIHtcbiAgcmV0dXJuIC9cXC5qcyhcXD8uKik/JC9pLnRlc3QobmFtZSlcbn1cblxuLyoqXG4gKiBHaXZlbiBhbiBpbnN0cnVtZW50IG5hbWUgcmV0dXJucyBhIFVSTCB0byB0byB0aGUgQmVuamFtaW4gR2xlaXR6bWFuJ3NcbiAqIHBhY2thZ2Ugb2YgW3ByZS1yZW5kZXJlZCBzb3VuZCBmb250c10oaHR0cHM6Ly9naXRodWIuY29tL2dsZWl0ei9taWRpLWpzLXNvdW5kZm9udHMpXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSBpbnN0cnVtZW50IG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBzb3VuZGZvbnQgLSAoT3B0aW9uYWwpIHRoZSBzb3VuZGZvbnQgbmFtZS4gT25lIG9mICdGbHVpZFIzX0dNJ1xuICogb3IgJ011c3luZ0tpdGUnICgnTXVzeW5nS2l0ZScgYnkgZGVmYXVsdClcbiAqIEBwYXJhbSB7U3RyaW5nfSBmb3JtYXQgLSAoT3B0aW9uYWwpIENhbiBiZSAnbXAzJyBvciAnb2dnJyAobXAzIGJ5IGRlZmF1bHQpXG4gKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgU291bmRmb250IGZpbGUgdXJsXG4gKiBAZXhhbXBsZVxuICogdmFyIFNvdW5kZm9udCA9IHJlcXVpcmUoJ3NvdW5kZm9udC1wbGF5ZXInKVxuICogU291bmRmb250Lm5hbWVUb1VybCgnbWFyaW1iYScsICdtcDMnKVxuICovXG5mdW5jdGlvbiBuYW1lVG9VcmwgKG5hbWUsIHNmLCBmb3JtYXQpIHtcbiAgZm9ybWF0ID0gZm9ybWF0ID09PSAnb2dnJyA/IGZvcm1hdCA6ICdtcDMnXG4gIHNmID0gc2YgPT09ICdGbHVpZFIzX0dNJyA/IHNmIDogJ011c3luZ0tpdGUnXG4gIHJldHVybiAnaHR0cHM6Ly9nbGVpdHouZ2l0aHViLmlvL21pZGktanMtc291bmRmb250cy8nICsgc2YgKyAnLycgKyBuYW1lICsgJy0nICsgZm9ybWF0ICsgJy5qcydcbn1cblxuLy8gSW4gdGhlIDEuMC4wIHJlbGVhc2UgaXQgd2lsbCBiZTpcbi8vIHZhciBTb3VuZGZvbnQgPSB7fVxudmFyIFNvdW5kZm9udCA9IHJlcXVpcmUoJy4vbGVnYWN5JylcblNvdW5kZm9udC5pbnN0cnVtZW50ID0gaW5zdHJ1bWVudFxuU291bmRmb250Lm5hbWVUb1VybCA9IG5hbWVUb1VybFxuXG5pZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIG1vZHVsZS5leHBvcnRzID0gU291bmRmb250XG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHdpbmRvdy5Tb3VuZGZvbnQgPSBTb3VuZGZvbnRcbiIsIid1c2Ugc3RyaWN0J1xuXG52YXIgcGFyc2VyID0gcmVxdWlyZSgnbm90ZS1wYXJzZXInKVxuXG4vKipcbiAqIENyZWF0ZSBhIFNvdW5kZm9udCBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge0F1ZGlvQ29udGV4dH0gY29udGV4dCAtIHRoZSBbYXVkaW8gY29udGV4dF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvQVBJL0F1ZGlvQ29udGV4dClcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG5hbWVUb1VybCAtIChPcHRpb25hbCkgYSBmdW5jdGlvbiB0aGF0IG1hcHMgdGhlIHNvdW5kIGZvbnQgbmFtZSB0byB0aGUgdXJsXG4gKiBAcmV0dXJuIHtTb3VuZGZvbnR9IGEgc291bmRmb250IG9iamVjdFxuICovXG5mdW5jdGlvbiBTb3VuZGZvbnQgKGN0eCwgbmFtZVRvVXJsKSB7XG4gIGNvbnNvbGUud2FybignbmV3IFNvdW5kZm9udCgpIGlzIGRlcHJlY3RlZCcpXG4gIGNvbnNvbGUubG9nKCdQbGVhc2UgdXNlIFNvdW5kZm9udC5pbnN0cnVtZW50KCkgaW5zdGVhZCBvZiBuZXcgU291bmRmb250KCkuaW5zdHJ1bWVudCgpJylcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNvdW5kZm9udCkpIHJldHVybiBuZXcgU291bmRmb250KGN0eClcblxuICB0aGlzLm5hbWVUb1VybCA9IG5hbWVUb1VybCB8fCBTb3VuZGZvbnQubmFtZVRvVXJsXG4gIHRoaXMuY3R4ID0gY3R4XG4gIHRoaXMuaW5zdHJ1bWVudHMgPSB7fVxuICB0aGlzLnByb21pc2VzID0gW11cbn1cblxuU291bmRmb250LnByb3RvdHlwZS5vbnJlYWR5ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gIGNvbnNvbGUud2FybignZGVwcmVjYXRlZCBBUEknKVxuICBjb25zb2xlLmxvZygnUGxlYXNlIHVzZSBQcm9taXNlLmFsbChTb3VuZGZvbnQuaW5zdHJ1bWVudCgpLCBTb3VuZGZvbnQuaW5zdHJ1bWVudCgpKS50aGVuKCkgaW5zdGVhZCBvZiBuZXcgU291bmRmb250KCkub25yZWFkeSgpJylcbiAgUHJvbWlzZS5hbGwodGhpcy5wcm9taXNlcykudGhlbihjYWxsYmFjaylcbn1cblxuU291bmRmb250LnByb3RvdHlwZS5pbnN0cnVtZW50ID0gZnVuY3Rpb24gKG5hbWUsIG9wdGlvbnMpIHtcbiAgY29uc29sZS53YXJuKCduZXcgU291bmRmb250KCkuaW5zdHJ1bWVudCgpIGlzIGRlcHJlY2F0ZWQuJylcbiAgY29uc29sZS5sb2coJ1BsZWFzZSB1c2UgU291bmRmb250Lmluc3RydW1lbnQoKSBpbnN0ZWFkLicpXG4gIHZhciBjdHggPSB0aGlzLmN0eFxuICBuYW1lID0gbmFtZSB8fCAnZGVmYXVsdCdcbiAgaWYgKG5hbWUgaW4gdGhpcy5pbnN0cnVtZW50cykgcmV0dXJuIHRoaXMuaW5zdHJ1bWVudHNbbmFtZV1cbiAgdmFyIGluc3QgPSB7bmFtZTogbmFtZSwgcGxheTogb3NjaWxsYXRvclBsYXllcihjdHgsIG9wdGlvbnMpfVxuICB0aGlzLmluc3RydW1lbnRzW25hbWVdID0gaW5zdFxuICBpZiAobmFtZSAhPT0gJ2RlZmF1bHQnKSB7XG4gICAgdmFyIHByb21pc2UgPSBTb3VuZGZvbnQuaW5zdHJ1bWVudChjdHgsIG5hbWUsIG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKGluc3RydW1lbnQpIHtcbiAgICAgIGluc3QucGxheSA9IGluc3RydW1lbnQucGxheVxuICAgICAgcmV0dXJuIGluc3RcbiAgICB9KVxuICAgIHRoaXMucHJvbWlzZXMucHVzaChwcm9taXNlKVxuICAgIGluc3Qub25yZWFkeSA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgY29uc29sZS53YXJuKCdvbnJlYWR5IGlzIGRlcHJlY2F0ZWQuIFVzZSBTb3VuZGZvbnQuaW5zdHJ1bWVudCgpLnRoZW4oKScpXG4gICAgICBwcm9taXNlLnRoZW4oY2IpXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGluc3Qub25yZWFkeSA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgY29uc29sZS53YXJuKCdvbnJlYWR5IGlzIGRlcHJlY2F0ZWQuIFVzZSBTb3VuZGZvbnQuaW5zdHJ1bWVudCgpLnRoZW4oKScpXG4gICAgICBjYigpXG4gICAgfVxuICB9XG4gIHJldHVybiBpbnN0XG59XG5cbi8qXG4gKiBMb2FkIHRoZSBidWZmZXJzIG9mIGEgZ2l2ZW4gaW5zdHJ1bWVudCBuYW1lLiBJdCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzXG4gKiB0byBhIGhhc2ggd2l0aCBtaWRpIG5vdGUgbnVtYmVycyBhcyBrZXlzLCBhbmQgYXVkaW8gYnVmZmVycyBhcyB2YWx1ZXMuXG4gKlxuICogQHBhcmFtIHtBdWRpb0NvbnRleHR9IGFjIC0gdGhlIGF1ZGlvIGNvbnRleHRcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIC0gdGhlIGluc3RydW1lbnQgbmFtZSAoaXQgYWNjZXB0cyBhbiB1cmwgaWYgc3RhcnRzIHdpdGggXCJodHRwXCIpXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIChPcHRpb25hbCkgb3B0aW9ucyBvYmplY3RcbiAqIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgSGFzaCBvZiB7IG1pZGlOb3RlTnVtOiA8QXVkaW9CdWZmZXI+IH1cbiAqXG4gKiBUaGUgb3B0aW9ucyBvYmplY3QgYWNjZXB0cyB0aGUgZm9sbG93aW5nIGtleXM6XG4gKlxuICogLSBuYW1lVG9Vcmwge0Z1bmN0aW9ufTogYSBmdW5jdGlvbiB0byBjb252ZXJ0IGZyb20gaW5zdHJ1bWVudCBuYW1lcyB0byB1cmxzLlxuICogQnkgZGVmYXVsdCBpdCB1c2VzIEJlbmphbWluIEdsZWl0em1hbidzIHBhY2thZ2Ugb2ZcbiAqIFtwcmUtcmVuZGVyZWQgc291bmQgZm9udHNdKGh0dHBzOi8vZ2l0aHViLmNvbS9nbGVpdHovbWlkaS1qcy1zb3VuZGZvbnRzKVxuICogLSBub3RlcyB7QXJyYXl9OiB0aGUgbGlzdCBvZiBub3RlIG5hbWVzIHRvIGJlIGRlY29kZWQgKGFsbCBieSBkZWZhdWx0KVxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgU291bmRmb250ID0gcmVxdWlyZSgnc291bmRmb250LXBsYXllcicpXG4gKiBTb3VuZGZvbnQubG9hZEJ1ZmZlcnMoY3R4LCAnYWNvdXN0aWNfZ3JhbmRfcGlhbm8nKS50aGVuKGZ1bmN0aW9uKGJ1ZmZlcnMpIHtcbiAqICBidWZmZXJzWzYwXSAvLyA9PiBBbiA8QXVkaW9CdWZmZXI+IGNvcnJlc3BvbmRpbmcgdG8gbm90ZSBDNFxuICogfSlcbiAqL1xuZnVuY3Rpb24gbG9hZEJ1ZmZlcnMgKGFjLCBuYW1lLCBvcHRpb25zKSB7XG4gIGNvbnNvbGUud2FybignU291bmRmb250LmxvYWRCdWZmZXJzIGlzIGRlcHJlY2F0ZS4nKVxuICBjb25zb2xlLmxvZygnVXNlIFNvdW5kZm9udC5pbnN0cnVtZW50KC4uKSBhbmQgZ2V0IGJ1ZmZlcnMgcHJvcGVydGllcyBmcm9tIHRoZSByZXN1bHQuJylcbiAgcmV0dXJuIFNvdW5kZm9udC5pbnN0cnVtZW50KGFjLCBuYW1lLCBvcHRpb25zKS50aGVuKGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgcmV0dXJuIGluc3QuYnVmZmVyc1xuICB9KVxufVxuU291bmRmb250LmxvYWRCdWZmZXJzID0gbG9hZEJ1ZmZlcnNcblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBwbGF5cyBhbiBvc2NpbGxhdG9yXG4gKlxuICogQHBhcmFtIHtBdWRpb0NvbnRleHR9IGFjIC0gdGhlIGF1ZGlvIGNvbnRleHRcbiAqIEBwYXJhbSB7SGFzaH0gZGVmYXVsdE9wdGlvbnMgLSAoT3B0aW9uYWwpIGEgaGFzaCBvZiBvcHRpb25zOlxuICogLSB2Y29UeXBlOiB0aGUgb3NjaWxsYXRvciB0eXBlIChkZWZhdWx0OiAnc2luZScpXG4gKiAtIGdhaW46IHRoZSBvdXRwdXQgZ2FpbiB2YWx1ZSAoZGVmYXVsdDogMC40KVxuICAqIC0gZGVzdGluYXRpb246IHRoZSBwbGF5ZXIgZGVzdGluYXRpb24gKGRlZmF1bHQ6IGFjLmRlc3RpbmF0aW9uKVxuICovXG5mdW5jdGlvbiBvc2NpbGxhdG9yUGxheWVyIChjdHgsIGRlZmF1bHRPcHRpb25zKSB7XG4gIGRlZmF1bHRPcHRpb25zID0gZGVmYXVsdE9wdGlvbnMgfHwge31cbiAgcmV0dXJuIGZ1bmN0aW9uIChub3RlLCB0aW1lLCBkdXJhdGlvbiwgb3B0aW9ucykge1xuICAgIGNvbnNvbGUud2FybignVGhlIG9zY2lsbGF0b3IgcGxheWVyIGlzIGRlcHJlY2F0ZWQuJylcbiAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgd2l0aCB2ZXJzaW9uIDAuOS4wIHlvdSB3aWxsIGhhdmUgdG8gd2FpdCB1bnRpbCB0aGUgc291bmRmb250IGlzIGxvYWRlZCB0byBwbGF5IHNvdW5kcy4nKVxuICAgIHZhciBtaWRpID0gbm90ZSA+IDAgJiYgbm90ZSA8IDEyOSA/ICtub3RlIDogcGFyc2VyLm1pZGkobm90ZSlcbiAgICB2YXIgZnJlcSA9IG1pZGkgPyBwYXJzZXIubWlkaVRvRnJlcShtaWRpLCA0NDApIDogbnVsbFxuICAgIGlmICghZnJlcSkgcmV0dXJuXG5cbiAgICBkdXJhdGlvbiA9IGR1cmF0aW9uIHx8IDAuMlxuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbiAgICB2YXIgZGVzdGluYXRpb24gPSBvcHRpb25zLmRlc3RpbmF0aW9uIHx8IGRlZmF1bHRPcHRpb25zLmRlc3RpbmF0aW9uIHx8IGN0eC5kZXN0aW5hdGlvblxuICAgIHZhciB2Y29UeXBlID0gb3B0aW9ucy52Y29UeXBlIHx8IGRlZmF1bHRPcHRpb25zLnZjb1R5cGUgfHwgJ3NpbmUnXG4gICAgdmFyIGdhaW4gPSBvcHRpb25zLmdhaW4gfHwgZGVmYXVsdE9wdGlvbnMuZ2FpbiB8fCAwLjRcblxuICAgIHZhciB2Y28gPSBjdHguY3JlYXRlT3NjaWxsYXRvcigpXG4gICAgdmNvLnR5cGUgPSB2Y29UeXBlXG4gICAgdmNvLmZyZXF1ZW5jeS52YWx1ZSA9IGZyZXFcblxuICAgIC8qIFZDQSAqL1xuICAgIHZhciB2Y2EgPSBjdHguY3JlYXRlR2FpbigpXG4gICAgdmNhLmdhaW4udmFsdWUgPSBnYWluXG5cbiAgICAvKiBDb25uZWN0aW9ucyAqL1xuICAgIHZjby5jb25uZWN0KHZjYSlcbiAgICB2Y2EuY29ubmVjdChkZXN0aW5hdGlvbilcblxuICAgIHZjby5zdGFydCh0aW1lKVxuICAgIGlmIChkdXJhdGlvbiA+IDApIHZjby5zdG9wKHRpbWUgKyBkdXJhdGlvbilcbiAgICByZXR1cm4gdmNvXG4gIH1cbn1cblxuLyoqXG4gKiBHaXZlbiBhIG5vdGUgbmFtZSwgcmV0dXJuIHRoZSBub3RlIG1pZGkgbnVtYmVyXG4gKlxuICogQG5hbWUgbm90ZVRvTWlkaVxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge1N0cmluZ30gbm90ZU5hbWVcbiAqIEByZXR1cm4ge0ludGVnZXJ9IHRoZSBub3RlIG1pZGkgbnVtYmVyIG9yIG51bGwgaWYgbm90IGEgdmFsaWQgbm90ZSBuYW1lXG4gKi9cblNvdW5kZm9udC5ub3RlVG9NaWRpID0gcGFyc2VyLm1pZGlcblxubW9kdWxlLmV4cG9ydHMgPSBTb3VuZGZvbnRcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvaW5kZXgnKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9wb255ZmlsbCA9IHJlcXVpcmUoJy4vcG9ueWZpbGwnKTtcblxudmFyIF9wb255ZmlsbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb255ZmlsbCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxudmFyIHJvb3Q7IC8qIGdsb2JhbCB3aW5kb3cgKi9cblxuXG5pZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSBzZWxmO1xufSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gd2luZG93O1xufSBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gZ2xvYmFsO1xufSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gbW9kdWxlO1xufSBlbHNlIHtcbiAgcm9vdCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG59XG5cbnZhciByZXN1bHQgPSAoMCwgX3BvbnlmaWxsMlsnZGVmYXVsdCddKShyb290KTtcbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHJlc3VsdDsiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHR2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzWydkZWZhdWx0J10gPSBzeW1ib2xPYnNlcnZhYmxlUG9ueWZpbGw7XG5mdW5jdGlvbiBzeW1ib2xPYnNlcnZhYmxlUG9ueWZpbGwocm9vdCkge1xuXHR2YXIgcmVzdWx0O1xuXHR2YXIgX1N5bWJvbCA9IHJvb3QuU3ltYm9sO1xuXG5cdGlmICh0eXBlb2YgX1N5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdGlmIChfU3ltYm9sLm9ic2VydmFibGUpIHtcblx0XHRcdHJlc3VsdCA9IF9TeW1ib2wub2JzZXJ2YWJsZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzdWx0ID0gX1N5bWJvbCgnb2JzZXJ2YWJsZScpO1xuXHRcdFx0X1N5bWJvbC5vYnNlcnZhYmxlID0gcmVzdWx0O1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRyZXN1bHQgPSAnQEBvYnNlcnZhYmxlJztcblx0fVxuXG5cdHJldHVybiByZXN1bHQ7XG59OyIsImltcG9ydCBNaWRpQWN0aW9uIGZyb20gJy4uL2FjdGlvbnMvbWlkaS1hY3Rpb25zJztcbmltcG9ydCB7IE1pZGlVdGlscyB9IGZyb20gJy4uL3V0aWxzL21pZGknO1xuaW1wb3J0IHsgQXVkaW9VdGlscyB9IGZyb20gJy4uL3V0aWxzL2F1ZGlvJztcblxuXG5leHBvcnQgZnVuY3Rpb24gbm90ZU9uKGV2ZW50LCBtZXNzYWdlPSdub3RlT24nKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgbGV0IGRhdGEsIHN0YXRlLCBub3Rlcywgbm90ZSwgYWM7XG5cbiAgICBkYXRhID0gZXZlbnQuZGF0YSA/IGV2ZW50LmRhdGEgOiBNaWRpVXRpbHMuc2V0Tm90ZU9uTWVzc2FnZShldmVudC50YXJnZXQpO1xuICAgIG5vdGUgPSBNaWRpVXRpbHMuZ2V0Tm90ZShkYXRhKTtcblxuICAgIHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBub3RlcyA9IHN0YXRlLm1pZGkubm90ZXM7XG4gICAgYWMgICAgPSBzdGF0ZS5taWRpLmF1ZGlvQ29udGV4dDtcblxuICAgIGlmIChzdGF0ZS5zZXR0aW5ncy53ZWJBcGlBdWRpbykge1xuXG4gICAgICBpZiAobm90ZXNbbm90ZV0gPT09IG51bGwgfHwgbm90ZXNbbm90ZV0gPT09IHVuZGVmaW5lZCkgey8vIEZJWE1FXG4gICAgICAgIG5vdGVzW25vdGVdID0gQXVkaW9VdGlscy5nZW5lcmF0ZU9zY2lsbGF0b3Iobm90ZSwgYWMpO1xuICAgICAgICBub3Rlc1tub3RlXS5zdGFydCgpO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIG5vdGVzW25vdGVdID0gJ3BsYXlpbmcnO1xuICAgICAgc3RhdGUuc2V0dGluZ3Muc291bmRmb250SW5zdHJ1bWVudC5wbGF5KG5vdGUpO1xuICAgIH1cblxuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IE1pZGlBY3Rpb24uTk9URV9PTixcbiAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgbWVzc2FnZSwgZGF0YSwgbm90ZXNcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vdGVPZmYoZXZlbnQsIG1lc3NhZ2U9J25vdGVPZmYnKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgbGV0IGRhdGEsIHN0YXRlLCBub3Rlcywgbm90ZTtcblxuICAgIGRhdGEgPSBldmVudC5kYXRhID8gZXZlbnQuZGF0YSA6IE1pZGlVdGlscy5zZXROb3RlT2ZmTWVzc2FnZShldmVudC50YXJnZXQpO1xuICAgIG5vdGUgPSBNaWRpVXRpbHMuZ2V0Tm90ZShkYXRhKTtcblxuICAgIHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBub3RlcyA9IHN0YXRlLm1pZGkubm90ZXM7XG5cbiAgICBpZiAoc3RhdGUuc2V0dGluZ3Mud2ViQXBpQXVkaW8pIHtcblxuICAgICAgaWYgKG5vdGVzW25vdGVdICE9PSBudWxsIHx8IG5vdGVzW25vdGVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbm90ZXNbbm90ZV0uc3RvcCgpO1xuICAgICAgICBub3Rlc1tub3RlXS5kaXNjb25uZWN0KCk7XG4gICAgICB9XG5cbiAgICAgIG5vdGVzW25vdGVdID0gbnVsbDtcblxuICAgIH0gZWxzZSB7XG4gICAgICBub3Rlc1tub3RlXSA9IG51bGw7XG4gICAgICBzdGF0ZS5zZXR0aW5ncy5zb3VuZGZvbnRJbnN0cnVtZW50LnN0b3Aobm90ZSk7XG4gICAgfVxuXG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogTWlkaUFjdGlvbi5OT1RFX09GRixcbiAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgbm90ZXNcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRyb2xsZXIoZXZlbnQsIG1lc3NhZ2UpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBsZXQgc3RhdGUsIGdhaW5Ob2RlO1xuXG4gICAgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICAgIGdhaW5Ob2RlID0gc3RhdGUuc2V0dGluZ3MuZ2Fpbk5vZGU7XG4gICAgLy8gY29uc29sZS5sb2coJyEhIScsIGV2ZW50LmRhdGEpO1xuICAgIC8vIGNvbnNvbGUubG9nKCchISEnLCBnYWluTm9kZSk7XG4gICAgLy8gZ2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IGV2ZW50LmRhdGFbMl0gLyAxMjc7XG5cbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBNaWRpQWN0aW9uLkNPTlRST0xMRVIsXG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIGdhaW5Ob2RlXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBNaWRpTWVzc2FnZXMgfSBmcm9tICcuLi9jb25zdGFudHMvbWlkaS1tZXNzYWdlcyc7XG5pbXBvcnQgeyBNaWRpVXRpbHMgfSBmcm9tICcuLi91dGlscy9taWRpJztcbmltcG9ydCAqIGFzIE1pZGlFdmVudHMgZnJvbSAnLi4vYWN0aW9uLWNyZWF0b3JzL21pZGktZXZlbnRzLWFjdGlvbi1jcmVhdG9ycyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBtaWRpTWVzc2FnZShldmVudCkge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGxldCBtaWRpTWVzc2FnZSwgbWVzc2FnZTtcblxuICAgIG1pZGlNZXNzYWdlID0gTWlkaVV0aWxzLmdldEV2ZW50VHlwZShldmVudC5kYXRhKTtcbiAgICBtZXNzYWdlID0gTWlkaU1lc3NhZ2VzW21pZGlNZXNzYWdlXTtcblxuICAgIGRpc3BhdGNoKE1pZGlFdmVudHNbbWVzc2FnZV0oZXZlbnQsIG1lc3NhZ2UpKTtcbiAgfTtcbn1cbiIsImltcG9ydCBNaWRpQ29ubmVjdCBmcm9tICcuLi9hY3Rpb25zL21pZGktY29ubmVjdCc7XG5pbXBvcnQgU291bmRmb250IGZyb20gJ3NvdW5kZm9udC1wbGF5ZXInO1xuaW1wb3J0ICogYXMgTWlkaU1lc3NhZ2VzIGZyb20gJy4uL2FjdGlvbi1jcmVhdG9ycy9taWRpLW1lc3NhZ2VzLWFjdGlvbi1jcmVhdG9ycyc7XG5pbXBvcnQgeyBiaW5kQWN0aW9uQ3JlYXRvcnMgfSBmcm9tICdyZWR1eCc7XG5cbmltcG9ydCB7XG4gIFNPVU5EU19QQVRILFxuICBTT1VORFNfRklMRVRZUEUsXG4gIFNPVU5EU19GSUxFX0VYVEVOU0lPTlxufSBmcm9tICcuLi9jb25zdGFudHMvbWlkaS1zb3VuZHBhdGhzJztcblxuZXhwb3J0IGZ1bmN0aW9uIG1pZGlTdWNjZXNzKG1pZGlBY2Nlc3MpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBsZXQgaW5wdXRzLCBzdGF0ZSwgbWlkaU1lc3NhZ2VzLCBpbnB1dCwgZ2Fpbk5vZGU7XG5cbiAgICBpbnB1dHMgPSBtaWRpQWNjZXNzLmlucHV0cy52YWx1ZXMoKTtcbiAgICBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgZ2Fpbk5vZGUgPSBzdGF0ZS5taWRpLmF1ZGlvQ29udGV4dC5jcmVhdGVHYWluKCk7XG4gICAgZ2Fpbk5vZGUuY29ubmVjdChzdGF0ZS5taWRpLmF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgbWlkaU1lc3NhZ2VzID0gYmluZEFjdGlvbkNyZWF0b3JzKE1pZGlNZXNzYWdlcywgZGlzcGF0Y2gpO1xuXG4gICAgZm9yKGlucHV0ID0gaW5wdXRzLm5leHQoKTsgaW5wdXQgJiYgIWlucHV0LmRvbmU7IGlucHV0ID0gaW5wdXRzLm5leHQoKSkge1xuICAgICAgaW5wdXQudmFsdWUub25taWRpbWVzc2FnZSA9IG1pZGlNZXNzYWdlcy5taWRpTWVzc2FnZTtcbiAgICB9XG5cbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBNaWRpQ29ubmVjdC5NSURJX1NVQ0NFU1MsXG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIHN0YXR1czogJ01pZGkgU3VjY2VlZGVkJyxcbiAgICAgICAgbWlkaUFjY2VzcyxcbiAgICAgICAgaW5wdXRzLFxuICAgICAgICBnYWluTm9kZVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWlkaUZhaWx1cmUobWlkaUFjY2Vzcykge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogTWlkaUNvbm5lY3QuTUlESV9GQUlMVVJFLFxuICAgICAgcGF5bG9hZDoge1xuICAgICAgICBzdGF0dXM6ICdNaWRpIEZhaWxlZCdcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRTb3VuZGZvbnRJbnN0cnVtZW50KGluc3RydW1lbnQpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBsZXQgc3RhdGUsIGFjLCBpbnN0cnVtZW50UGF0aDtcblxuICAgIHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBhYyA9IHN0YXRlLm1pZGkuYXVkaW9Db250ZXh0O1xuICAgIGluc3RydW1lbnRQYXRoID0gX2dldEluc3RydW1lbnRQYXRoLmNhbGwodGhpcywgaW5zdHJ1bWVudCk7XG5cbiAgICBTb3VuZGZvbnQuaW5zdHJ1bWVudChhYywgaW5zdHJ1bWVudFBhdGgpXG4gICAgICAudGhlbigoc291bmRmb250SW5zdHJ1bWVudCkgPT4ge1xuICAgICAgICBkaXNwYXRjaCh7XG4gICAgICAgICAgdHlwZTogTWlkaUNvbm5lY3QuTUlESV9MT0FEX0lOU1RSVU1FTlQsXG4gICAgICAgICAgcGF5bG9hZDogeyBzb3VuZGZvbnRJbnN0cnVtZW50IH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZUF1ZGlvKGF1ZGlvKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgbGV0IHN0YXRlLCB3ZWJBcGlBdWRpbztcblxuICAgIHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICB3ZWJBcGlBdWRpbyA9IGF1ZGlvO1xuXG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogTWlkaUNvbm5lY3QuQ0hBTkdFX0FVRElPLFxuICAgICAgcGF5bG9hZDogeyB3ZWJBcGlBdWRpbyB9XG4gICAgfSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIF9nZXRJbnN0cnVtZW50UGF0aChpbnN0cnVtZW50KSB7XG4gIHJldHVybiBgJHtTT1VORFNfUEFUSH0vJHtpbnN0cnVtZW50fS0ke1NPVU5EU19GSUxFVFlQRX0uJHtTT1VORFNfRklMRV9FWFRFTlNJT059YDtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoe1xuICBDT05UUk9MTEVSOiAgICAgICAgICAnY29udHJvbGxlcicsXG4gIElOU1RSVU1FTlRfTkFNRTogICAgICdpbnN0cnVtZW50TmFtZScsXG4gIE5PVEVfT0ZGOiAgICAgICAgICAgICdub3RlT2ZmJyxcbiAgTk9URV9PTjogICAgICAgICAgICAgJ25vdGVPbicsXG4gIFBST0dSQU1fQ0hBTkdFOiAgICAgICdwcm9ncmFtQ2hhbmdlJyxcbiAgU1lTX0VYOiAgICAgICAgICAgICAgJ3N5c0V4J1xufSk7XG4iLCJleHBvcnQgZGVmYXVsdCBPYmplY3QuZnJlZXplKHtcbiAgTUlESV9TVUNDRVNTOiAnbWlkaVN1Y2Nlc3MnLFxuICBNSURJX0ZBSUxVUkU6ICdtaWRpRmFpbHVyZScsXG4gIE1JRElfTUVTU0FHRTogJ21pZGlNZXNzYWdlJyxcbiAgQ0hBTkdFX0FVRElPOiAnY2hhbmdlQXVkaW8nLFxuICBNSURJX0xPQURfSU5TVFJVTUVOVDogJ2xvYWRJbnN0cnVtZW50J1xufSk7XG4iLCJleHBvcnQgY29uc3QgTWlkaUF1ZGlvU2VsZWN0b3IgPSB7XG4gIGluaXQoc3RvcmU9e30sIG1pZGlTZXR1cEFjdGlvbnM9e30pIHtcbiAgICB0aGlzLnN0b3JlID0gc3RvcmU7XG4gICAgdGhpcy5taWRpU2V0dXBBY3Rpb25zID0gbWlkaVNldHVwQWN0aW9ucztcbiAgICB0aGlzLmF1ZGlvU2VsZWN0b3JzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1ZGlvLXNlbGVjdG9yJykuYXVkaW9TZWxlY3RvcnM7XG5cblxuICAgIHRoaXMuYXVkaW9TZWxlY3RvcnMuZm9yRWFjaCgoc2VsZWN0b3IpID0+IHtcbiAgICAgIHNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuY2hhbmdlQXVkaW8uYmluZCh0aGlzKSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9LFxuXG4gIGNoYW5nZUF1ZGlvKGV2ZW50KSB7XG4gICAgbGV0IGF1ZGlvID0gZXZlbnQudGFyZ2V0LnZhbHVlID09PSBcInRydWVcIjtcbiAgICB0aGlzLm1pZGlTZXR1cEFjdGlvbnMuY2hhbmdlQXVkaW8oYXVkaW8pO1xuICB9LFxuXG4gIHJlbmRlcigpIHtcbiAgICBsZXQgc3RvcmU7XG5cbiAgICBzdG9yZSA9IHRoaXMuc3RvcmU7XG5cbiAgICBzdG9yZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgbGV0IHN0YXRlO1xuICAgICAgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICAgIH0pO1xuICB9XG59O1xuIiwiaW1wb3J0IHsgTUlESUluc3RydW1lbnRzIH0gZnJvbSAnLi4vY29uc3RhbnRzL21pZGktaW5zdHJ1bWVudHMnO1xuXG5leHBvcnQgY29uc3QgTWlkaUluc3RydW1lbnRzU2VsZWN0b3IgPSB7XG4gIGluaXQoc3RvcmU9e30sIG1pZGlTZXR1cEFjdGlvbnM9e30pIHtcbiAgICB0aGlzLnN0b3JlID0gc3RvcmU7XG4gICAgdGhpcy5taWRpU2V0dXBBY3Rpb25zID0gbWlkaVNldHVwQWN0aW9ucztcbiAgICB0aGlzLmluc3RydW1lbnRTZWxlY3RvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnN0cnVtZW50LXNlbGVjdG9yJyk7XG5cbiAgICB0aGlzLmluc3RydW1lbnRTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLmxvYWRJbnN0cnVtZW50LmJpbmQodGhpcykpO1xuXG4gICAgX2FkZEluc3RydW1lbnRPcHRpb25zLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9LFxuXG4gIGxvYWRJbnN0cnVtZW50KGV2ZW50KSB7XG4gICAgbGV0IGluc3RydW1lbnQgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgdGhpcy5taWRpU2V0dXBBY3Rpb25zLmxvYWRTb3VuZGZvbnRJbnN0cnVtZW50KGluc3RydW1lbnQpO1xuICB9LFxuXG4gIHJlbmRlcigpIHtcbiAgICBsZXQgc3RvcmU7XG5cbiAgICBzdG9yZSA9IHRoaXMuc3RvcmU7XG5cbiAgICBzdG9yZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgbGV0IHN0YXRlO1xuICAgICAgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpO1xuXG4gICAgICBpZiAoc3RhdGUuc2V0dGluZ3Mud2ViQXBpQXVkaW8pIHtcbiAgICAgICAgdGhpcy5pbnN0cnVtZW50U2VsZWN0b3IuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmluc3RydW1lbnRTZWxlY3Rvci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufTtcblxuXG5mdW5jdGlvbiBfYWRkSW5zdHJ1bWVudE9wdGlvbnMoKSB7XG4gIGxldCBpbnN0cnVtZW50LCBpbnN0cnVtZW50T3B0aW9uO1xuXG4gIGZvciAoaW5zdHJ1bWVudCBpbiBNSURJSW5zdHJ1bWVudHMpIHtcbiAgICBpbnN0cnVtZW50T3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgaW5zdHJ1bWVudE9wdGlvbi52YWx1ZSA9IE1JRElJbnN0cnVtZW50c1tpbnN0cnVtZW50XTtcbiAgICBpbnN0cnVtZW50T3B0aW9uLnRleHQgPSBNSURJSW5zdHJ1bWVudHNbaW5zdHJ1bWVudF07XG4gICAgdGhpcy5pbnN0cnVtZW50U2VsZWN0b3IuYXBwZW5kQ2hpbGQoaW5zdHJ1bWVudE9wdGlvbik7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBNaWRpUGlhbm8gPSB7XG4gIGluaXQoc3RvcmU9e30sIG1pZGlFdmVudHNBY3Rpb25zPXt9KSB7XG4gICAgdGhpcy5zdG9yZSA9IHN0b3JlO1xuICAgIHRoaXMubWlkaUV2ZW50c0FjdGlvbnMgPSBtaWRpRXZlbnRzQWN0aW9ucztcbiAgICB0aGlzLm5vdGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbm90ZScpO1xuICAgIHRoaXMua2V5cyAgPSB7fTtcblxuICAgIF9pbml0S2V5RWxlbWVudHMuY2FsbCh0aGlzKTtcblxuICAgIHRoaXMucmVuZGVyKCk7XG4gIH0sXG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCBzdG9yZTtcblxuICAgIHN0b3JlID0gdGhpcy5zdG9yZTtcblxuICAgIHN0b3JlLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICBsZXQgbm90ZSwgc3RhdGU7XG4gICAgICBzdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCk7XG5cbiAgICAgIGZvciAobm90ZSBpbiBzdGF0ZS5taWRpLm5vdGVzKSB7XG4gICAgICAgIF90b2dnbGVQbGF5aW5nTm90ZS5jYWxsKHRoaXMsIHN0YXRlLm1pZGkubm90ZXNbbm90ZV0sIHRoaXMua2V5c1tub3RlXSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9pbml0S2V5RWxlbWVudHMoKSB7XG4gIGxldCBub3RlTnVtYmVyID0gNDg7XG5cbiAgW10uZm9yRWFjaC5jYWxsKHRoaXMubm90ZXMsIChub3RlKSA9PiB7XG4gICAgbm90ZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbm90ZScsIG5vdGVOdW1iZXIpO1xuXG4gICAgbm90ZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm1pZGlFdmVudHNBY3Rpb25zLm5vdGVPbik7XG4gICAgbm90ZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5taWRpRXZlbnRzQWN0aW9ucy5ub3RlT2ZmKTtcblxuICAgIHRoaXMua2V5c1tub3RlTnVtYmVyXSA9IG5vdGU7XG4gICAgbm90ZU51bWJlcisrO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gX3RvZ2dsZVBsYXlpbmdOb3RlKG5vdGUsIGtleSkge1xuICByZXR1cm4gbm90ZSA/XG4gICAga2V5LmNsYXNzTGlzdC5hZGQoJ3BsYXlpbmcnKVxuICAgIDoga2V5LmNsYXNzTGlzdC5yZW1vdmUoJ3BsYXlpbmcnKTtcbn1cbiIsImV4cG9ydCBjb25zdCBNSURJSW5zdHJ1bWVudHMgPSB7XG4gIDA6ICdhY291c3RpY19ncmFuZF9waWFubycsXG4gIDE6ICdicmlnaHRfYWNvdXN0aWNfcGlhbm8nLFxuICAyOiAnZWxlY3RyaWNfZ3JhbmRfcGlhbm8nLFxuICAzOiAnaG9ua3l0b25rX3BpYW5vJyxcbiAgNDogJ2VsZWN0cmljX3BpYW5vXzEnLFxuICA1OiAnZWxlY3RyaWNfcGlhbm9fMicsXG4gIDY6ICdoYXJwc2ljaG9yZCcsXG4gIDc6ICdjbGF2aW5ldCcsXG4gIDg6ICdjZWxlc3RhJyxcbiAgOTogJ2dsb2NrZW5zcGllbCcsXG4gIDEwOiAnbXVzaWNfYm94JyxcbiAgMTE6ICd2aWJyYXBob25lJyxcbiAgMTI6ICdtYXJpbWJhJyxcbiAgMTM6ICd4eWxvcGhvbmUnLFxuICAxNDogJ3R1YnVsYXJfYmVsbHMnLFxuICAxNTogJ2R1bGNpbWVyJyxcbiAgMTY6ICdkcmF3YmFyX29yZ2FuJyxcbiAgMTc6ICdwZXJjdXNzaXZlX29yZ2FuJyxcbiAgMTg6ICdyb2NrX29yZ2FuJyxcbiAgMTk6ICdjaHVyY2hfb3JnYW4nLFxuICAyMDogJ3JlZWRfb3JnYW4nLFxuICAyMTogJ0FjY29yZGlvbicsXG4gIDIyOiAnaGFybW9uaWNhJyxcbiAgMjM6ICd0YW5nb19hY2NvcmRpb24nLFxuICAyNDogJ2Fjb3VzdGljX2d1aXRhcl9ueWxvbicsXG4gIDI1OiAnYWNvdXN0aWNfZ3VpdGFyX3N0ZWVsJyxcbiAgMjY6ICdlbGVjdHJpY19ndWl0YXJfamF6eicsXG4gIDI3OiAnZWxlY3RyaWNfZ3VpdGFyX2NsZWFuJyxcbiAgMjg6ICdlbGVjdHJpY19ndWl0YXJfbXV0ZWQnLFxuICAyOTogJ292ZXJkcml2ZW5fZ3VpdGFyJyxcbiAgMzA6ICdkaXN0b3J0aW9uX2d1aXRhcicsXG4gIDMxOiAnZ3VpdGFyX2hhcm1vbmljcycsXG4gIDMyOiAnYWNvdXN0aWNfYmFzcycsXG4gIDMzOiAnZWxlY3RyaWNfYmFzc19maW5nZXInLFxuICAzNDogJ2VsZWN0cmljX2Jhc3NfcGljaycsXG4gIDM1OiAnZnJldGxlc3NfYmFzcycsXG4gIDM2OiAnc2xhcF9iYXNzXzEnLFxuICAzNzogJ3NsYXBfYmFzc18yJyxcbiAgMzg6ICdzeW50aF9iYXNzXzEnLFxuICAzOTogJ3N5bnRoX2Jhc3NfMicsXG4gIDQwOiAndmlvbGluJyxcbiAgNDE6ICd2aW9sYScsXG4gIDQyOiAnY2VsbG8nLFxuICA0MzogJ2NvbnRyYWJhc3MnLFxuICA0NDogJ3RyZW1vbG9fc3RyaW5ncycsXG4gIDQ1OiAncGl6emljYXRvX3N0cmluZ3MnLFxuICA0NjogJ29yY2hlc3RyYWxfaGFycCcsXG4gIDQ3OiAndGltcGFuaScsXG4gIDQ4OiAnc3RyaW5nX2Vuc2VtYmxlXzEnLFxuICA0OTogJ3N0cmluZ19lbnNlbWJsZV8yJyxcbiAgNTA6ICdzeW50aHN0cmluZ3NfMScsXG4gIDUxOiAnc3ludGhzdHJpbmdzXzInLFxuICA1MjogJ2Nob2lyX2FhaHMnLFxuICA1MzogJ3ZvaWNlX29vaHMnLFxuICA1NDogJ3N5bnRoX3ZvaWNlJyxcbiAgNTU6ICdvcmNoZXN0cmFfaGl0JyxcbiAgNTY6ICd0cnVtcGV0JyxcbiAgNTc6ICd0cm9tYm9uZScsXG4gIDU4OiAndHViYScsXG4gIDU5OiAnbXV0ZWRfdHJ1bXBldCcsXG4gIDYwOiAnZnJlbmNoX2hvcm4nLFxuICA2MTogJ2JyYXNzX3NlY3Rpb24nLFxuICA2MjogJ3N5bnRoX2JyYXNzXzEnLFxuICA2MzogJ3N5bnRoX2JyYXNzXzInLFxuICA2NDogJ3NvcHJhbm9fc2F4JyxcbiAgNjU6ICdhbHRvX3NheCcsXG4gIDY2OiAndGVub3Jfc2F4JyxcbiAgNjc6ICdiYXJpdG9uZV9zYXgnLFxuICA2ODogJ29ib2UnLFxuICA2OTogJ2VuZ2xpc2hfaG9ybicsXG4gIDcwOiAnYmFzc29vbicsXG4gIDcxOiAnY2xhcmluZXQnLFxuICA3MjogJ3BpY2NvbG8nLFxuICA3MzogJ2ZsdXRlJyxcbiAgNzQ6ICdyZWNvcmRlcicsXG4gIDc1OiAncGFuX2ZsdXRlJyxcbiAgNzY6ICdibG93bl9ib3R0bGUnLFxuICA3NzogJ3NoYWt1aGFjaGknLFxuICA3ODogJ3doaXN0bGUnLFxuICA3OTogJ29jYXJpbmEnLFxuICA4MDogJ2xlYWRfMV9zcXVhcmUnLFxuICA4MTogJ2xlYWRfMl9zYXd0b290aCcsXG4gIDgyOiAnbGVhZF8zX2NhbGxpb3BlJyxcbiAgODM6ICdsZWFkXzRfY2hpZmYnLFxuICA4NDogJ2xlYWRfNV9jaGFyYW5nJyxcbiAgODU6ICdsZWFkXzZfdm9pY2UnLFxuICA4NjogJ2xlYWRfN19maWZ0aHMnLFxuICA4NzogJ2xlYWRfOF9iYXNzX2xlYWQnLFxuICA4ODogJ3BhZF8xX25ld19hZ2UnLFxuICA4OTogJ3BhZF8yX3dhcm0nLFxuICA5MDogJ3BhZF8zX3BvbHlzeW50aCcsXG4gIDkxOiAncGFkXzRfY2hvaXInLFxuICA5MjogJ3BhZF81X2Jvd2VkJyxcbiAgOTM6ICdwYWRfNl9tZXRhbGxpYycsXG4gIDk0OiAncGFkXzdfaGFsbycsXG4gIDk1OiAncGFkXzhfc3dlZXAnLFxuICA5NjogJ2Z4XzFfcmFpbicsXG4gIDk3OiAnZnhfMl9zb3VuZHRyYWNrJyxcbiAgOTg6ICdmeF8zX2NyeXN0YWwnLFxuICA5OTogJ2Z4XzRfYXRtb3NwaGVyZScsXG4gIDEwMDogJ2Z4XzVfYnJpZ2h0bmVzcycsXG4gIDEwMTogJ2Z4XzZfZ29ibGlucycsXG4gIDEwMjogJ2Z4XzdfZWNob2VzJyxcbiAgMTAzOiAnZnhfOF9zY2lmaScsXG4gIDEwNDogJ3NpdGFyJyxcbiAgMTA1OiAnYmFuam8nLFxuICAxMDY6ICdzaGFtaXNlbicsXG4gIDEwNzogJ2tvdG8nLFxuICAxMDg6ICdrYWxpbWJhJyxcbiAgMTA5OiAnYmFnX3BpcGUnLFxuICAxMTA6ICdmaWRkbGUnLFxuICAxMTE6ICdzaGFuYWknLFxuICAxMTI6ICd0aW5rbGVfYmVsbCcsXG4gIDExMzogJ2Fnb2dvJyxcbiAgMTE0OiAnc3RlZWxfZHJ1bXMnLFxuICAxMTU6ICd3b29kYmxvY2snLFxuICAxMTY6ICd0YWlrb19kcnVtJyxcbiAgMTE3OiAnbWVsb2RpY190b20nLFxuICAxMTg6ICdzeW50aF9kcnVtJyxcbiAgMTE5OiAncmV2ZXJzZV9jeW1iYWwnLFxuICAxMjA6ICdndWl0YXJfZnJldF9ub2lzZScsXG4gIDEyMTogJ2JyZWF0aF9ub2lzZScsXG4gIDEyMjogJ3NlYXNob3JlJyxcbiAgMTIzOiAnYmlyZF90d2VldCcsXG4gIDEyNDogJ3RlbGVwaG9uZV9yaW5nJyxcbiAgMTI1OiAnaGVsaWNvcHRlcicsXG4gIDEyNjogJ2FwcGxhdXNlJyxcbiAgMTI3OiAnZ3Vuc2hvdCdcbn07XG4iLCJleHBvcnQgY29uc3QgTWlkaU1lc3NhZ2VzSGV4ID0gT2JqZWN0LmZyZWV6ZSh7XG4gIFNFUVVFTkNFX05VTUJFUjogMHgwMCxcbiAgVEVYVDogICAgICAgICAgICAweDAxLFxuICBJTlNUUlVNRU5UX05BTUU6IDB4MDQsXG4gIE5PVEVfT0ZGOiAgICAgICAgMHg4MCxcbiAgTk9URV9PTjogICAgICAgICAweDkwLFxuICBQUk9HUkFNX0NIQU5HRTogIDB4QzAsXG4gIENPTlRST0xMRVI6ICAgICAgMHhCMFxufSk7XG4iLCJleHBvcnQgY29uc3QgTWlkaU1lc3NhZ2VzID0gT2JqZWN0LmZyZWV6ZSh7XG4gIDB4MDA6ICdzZXF1ZW5jZU51bWJlcicsXG4gIDB4MDE6ICd0ZXh0JyxcbiAgMHgwNDogJ2luc3RydW1lbnROYW1lJyxcbiAgMHg4MDogJ25vdGVPZmYnLFxuICAweDkwOiAnbm90ZU9uJyxcbiAgMHhDMDogJ3Byb2dyYW1DaGFuZ2UnLFxuICAweEIwOiAnY29udHJvbGxlcicsXG59KTtcbiIsIi8qIFNvdW5kZm9uZCBMaWJyYXJ5OlxuXG4gIEJ5IEdsZWl0elxuICBodHRwczovL2dpdGh1Yi5jb20vZ2xlaXR6L21pZGktanMtc291bmRmb250cy90cmVlL2doLXBhZ2VzL0ZsdWlkUjNfR01cblxuKi9cblxuZXhwb3J0IGNvbnN0IEluc3RydW1lbnRTZXRzID0gT2JqZWN0LmZyZWV6ZSh7XG4gIE1VU1lOR19LSVRFOiAnTXVzeW5nS2l0ZScsXG4gIEZMVUlEX1IzX0dNOiAnRmx1aWRSM19HTSdcbn0pO1xuXG5leHBvcnQgY29uc3QgSW5zdHJ1bWVudFBhdGhDb25maWcgPSAoe1xuICBVUkw6ICdodHRwOi8vbG9jYWxob3N0JyxcbiAgUE9SVDogODAwMSxcbiAgU0VUOiBJbnN0cnVtZW50U2V0cy5NVVNZTkdfS0lURSxcbiAgVVJMX0dJVEhVQjogJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9nbGVpdHovbWlkaS1qcy1zb3VuZGZvbnRzL2doLXBhZ2VzLydcbn0pO1xuXG5leHBvcnQgY29uc3QgU09VTkRTX1BBVEggPVxuICBgJHtJbnN0cnVtZW50UGF0aENvbmZpZy5VUkx9OiR7SW5zdHJ1bWVudFBhdGhDb25maWcuUE9SVH0vJHtJbnN0cnVtZW50UGF0aENvbmZpZy5TRVR9YDtcblxuZXhwb3J0IGNvbnN0IFNPVU5EU19GSUxFVFlQRSA9ICdtcDMnO1xuZXhwb3J0IGNvbnN0IFNPVU5EU19GSUxFX0VYVEVOU0lPTiA9ICdqcyc7XG4iLCJpbXBvcnQgeyBjb21iaW5lUmVkdWNlcnMgfSBmcm9tICdyZWR1eCc7XG5cbmltcG9ydCBtaWRpIGZyb20gJy4uL3JlZHVjZXJzL21pZGktcmVkdWNlcic7XG5pbXBvcnQgc2V0dGluZ3MgZnJvbSAnLi4vcmVkdWNlcnMvc2V0dGluZ3MtcmVkdWNlcic7XG5cbmNvbnN0IHJvb3RSZWR1Y2VyID0gY29tYmluZVJlZHVjZXJzKHtcbiAgbWlkaSxcbiAgc2V0dGluZ3Ncbn0pO1xuXG5leHBvcnQgZGVmYXVsdCByb290UmVkdWNlcjtcbiIsImltcG9ydCBNSURJQWN0aW9uIGZyb20gJy4uL2FjdGlvbnMvbWlkaS1hY3Rpb25zLmpzJztcbmltcG9ydCBNSURJQ29ubmVjdCBmcm9tICcuLi9hY3Rpb25zL21pZGktY29ubmVjdC5qcyc7XG5cbmNvbnN0IGluaXRpYWxTdGF0ZSA9IHtcbiAgbWVzc2FnZTogJ05vbmUnLFxuICBpbnB1dHM6IFtdLFxuICBkYXRhOiBudWxsLFxuICBhdWRpb0NvbnRleHQ6ICEhd2luZG93LkF1ZGlvQ29udGV4dCA/IG5ldyB3aW5kb3cuQXVkaW9Db250ZXh0KCkgOiBuZXcgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCgpLFxuICBnYWluTm9kZTogbnVsbCxcbiAgbm90ZXM6IHt9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNSURJRXZlbnRzUmVkdWNlcihzdGF0ZT1pbml0aWFsU3RhdGUsIGFjdGlvbikge1xuICBjb25zdCB7IHR5cGUsIHBheWxvYWQgfSA9IGFjdGlvbjtcblxuICBjb25zb2xlLmxvZygnISEhJywgcGF5bG9hZCk7XG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBNSURJQWN0aW9uLk5PVEVfT046XG4gICAgY2FzZSBNSURJQWN0aW9uLk5PVEVfT0ZGOlxuICAgIGNhc2UgTUlESUFjdGlvbi5QUk9HUkFNX0NIQU5HRTpcbiAgICBjYXNlIE1JRElBY3Rpb24uSU5TVFJVTUVOVF9OQU1FOlxuICAgIGNhc2UgTUlESUFjdGlvbi5DT05UUk9MTEVSOlxuICAgIGNhc2UgTUlESUFjdGlvbi5TWVNfRVg6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgLi4ucGF5bG9hZFxuICAgICAgfTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICB9XG59XG4iLCJpbXBvcnQgTUlESUFjdGlvbiBmcm9tICcuLi9hY3Rpb25zL21pZGktYWN0aW9ucy5qcyc7XG5pbXBvcnQgTUlESUNvbm5lY3QgZnJvbSAnLi4vYWN0aW9ucy9taWRpLWNvbm5lY3QuanMnO1xuXG5jb25zdCBpbml0aWFsU3RhdGUgPSB7XG4gIG1pZGlBY2Nlc3M6IG51bGwsXG4gIHdlYkFwaUF1ZGlvOiBmYWxzZSxcbiAgZ2Fpbk5vZGU6IG51bGwsXG4gIHNvdW5kZm9udEluc3RydW1lbnQ6IG51bGxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1JRElFdmVudHNSZWR1Y2VyKHN0YXRlPWluaXRpYWxTdGF0ZSwgYWN0aW9uKSB7XG4gIGNvbnN0IHsgdHlwZSwgcGF5bG9hZCB9ID0gYWN0aW9uO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIE1JRElDb25uZWN0Lk1JRElfU1VDQ0VTUzpcbiAgICBjYXNlIE1JRElDb25uZWN0Lk1JRElfRkFJTFVSRTpcbiAgICBjYXNlIE1JRElDb25uZWN0Lk1JRElfTE9BRF9JTlNUUlVNRU5UOlxuICAgIGNhc2UgTUlESUNvbm5lY3QuQ0hBTkdFX0FVRElPOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIC4uLnBheWxvYWRcbiAgICAgIH07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlU3RvcmUsIGFwcGx5TWlkZGxld2FyZSwgY29tcG9zZSB9IGZyb20gJ3JlZHV4JztcbmltcG9ydCB0aHVua01pZGRsZXdhcmUgZnJvbSAncmVkdXgtdGh1bmsnO1xuaW1wb3J0IHJvb3RSZWR1Y2VyIGZyb20gJy4uL3JlZHVjZXJzL2luZGV4JztcblxuY29uc3QgY29tcG9zZUVuaGFuY2VycyA9IHdpbmRvdy5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9DT01QT1NFX18gfHwgY29tcG9zZTtcbmNvbnN0IG1pZGRsZXdhcmUgPSBjb21wb3NlRW5oYW5jZXJzKGFwcGx5TWlkZGxld2FyZSh0aHVua01pZGRsZXdhcmUpKTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29uZmlndXJlU3RvcmUoaW5pdGlhbFN0YXRlKSB7XG4gIHJldHVybiBjcmVhdGVTdG9yZShcbiAgICByb290UmVkdWNlcixcbiAgICBpbml0aWFsU3RhdGUsXG4gICAgbWlkZGxld2FyZVxuICApO1xufVxuIiwiZXhwb3J0IGNvbnN0IEF1ZGlvVXRpbHMgPSBPYmplY3QuZnJlZXplKHtcbiAgZ2V0RnJlcXVlbmN5KG5vdGUpIHtcbiAgICBjb25zdFxuICAgICAgTEFfSFogID0gNDQwLFxuICAgICAgTEFfREVDID0gNjksXG4gICAgICBPQ1RBVkUgPSAxMlxuICAgIDtcblxuICAgIHJldHVybiBMQV9IWiAqIE1hdGgucG93KDIsIChub3RlIC0gTEFfREVDKSAvIE9DVEFWRSk7XG4gIH0sXG5cbiAgZ2VuZXJhdGVPc2NpbGxhdG9yKG5vdGUsIGF1ZGlvQ29udGV4dCkge1xuICAgIGxldCBvc2NpbGxhdG9yLCBmcmVxdWVuY3k7XG5cbiAgICBvc2NpbGxhdG9yID0gYXVkaW9Db250ZXh0LmNyZWF0ZU9zY2lsbGF0b3IoKTtcbiAgICBmcmVxdWVuY3kgPSB0aGlzLmdldEZyZXF1ZW5jeShub3RlKTtcblxuICAgIG9zY2lsbGF0b3IudHlwZSA9ICdzcXVhcmUnO1xuICAgIG9zY2lsbGF0b3IuY29ubmVjdChhdWRpb0NvbnRleHQuZGVzdGluYXRpb24pO1xuICAgIG9zY2lsbGF0b3IuZnJlcXVlbmN5LnZhbHVlID0gZnJlcXVlbmN5O1xuXG4gICAgcmV0dXJuIG9zY2lsbGF0b3I7XG4gIH1cbn0pO1xuIiwiLypqc2xpbnQgYml0d2lzZTogdHJ1ZSAqL1xuXG5pbXBvcnQgeyBNaWRpTWVzc2FnZXNIZXggfSBmcm9tICcuLi9jb25zdGFudHMvbWlkaS1tZXNzYWdlcy1oZXgnO1xuXG5leHBvcnQgY29uc3QgTWlkaVV0aWxzID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGdldFR5cGUoZGF0YSkge1xuICAgIHJldHVybiBkYXRhWzBdO1xuICB9LFxuXG4gIGdldE5vdGUoZGF0YSkge1xuICAgIHJldHVybiBkYXRhWzFdO1xuICB9LFxuXG4gIGdldE5vdGVWZWxvY2l0eShkYXRhKSB7XG4gICAgcmV0dXJuIGRhdGFbMl07XG4gIH0sXG5cbiAgZ2V0RXZlbnRUeXBlKGRhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5pc05vdGVPbk9mZihkYXRhKSA/XG4gICAgICBNaWRpTWVzc2FnZXNIZXguTk9URV9PRkYgJiAweGYwXG4gICAgICA6IHRoaXMuZ2V0VHlwZShkYXRhKSAmIDB4ZjA7XG4gIH0sXG5cbiAgaXNOb3RlT25PZmYoZGF0YSkge1xuICAgIHJldHVybiB0aGlzLmdldFR5cGUoZGF0YSkgPT09IE1pZGlNZXNzYWdlc0hleC5OT1RFX09OICYmXG4gICAgICB0aGlzLmdldE5vdGVWZWxvY2l0eShkYXRhKSA9PT0gMDtcbiAgfSxcblxuICBzZXROb3RlT25NZXNzYWdlKHRhcmdldCkge1xuICAgIGNvbnN0IE5PVEVfT04gPSAxNDQ7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFtOT1RFX09OLCBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLW5vdGUnKSwgMV0pO1xuICB9LFxuXG4gIHNldE5vdGVPZmZNZXNzYWdlKHRhcmdldCkge1xuICAgIGNvbnN0IE5PVEVfT04gPSAxNDQ7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KFtOT1RFX09OLCBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLW5vdGUnKSwgMF0pO1xuICB9XG59KTtcbiJdfQ==\n"]}