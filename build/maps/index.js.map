{"version":3,"sources":["index.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","default","_configureStore","_configureStore2","_midiPiano","_midiInstrumentsSelector","_midiAudioSelector","_midiEventsActionCreators","MidiEvents","_midiSetupActionCreators","MidiSetup","_redux","store","midiSetupActions","bindActionCreators","dispatch","midiEventsActions","MidiPiano","init","MidiInstrumentsSelector","MidiAudioSelector","loadSoundfontInstrument","navigator","requestMIDIAccess","sysex","then","midiSuccess","./src/action-creators/midi-events-action-creators","./src/action-creators/midi-setup-action-creators","./src/components/midi-audio-selector","./src/components/midi-instruments-selector","./src/components/midi-piano","./src/store/configureStore","redux","2","ADSR","audioContext","node","createGain","voltage","_voltage","getVoltage","value","scale","startValue","endValue","_startAmount","_endAmount","_multiplier","connect","gain","defineProperties","props","context","createBufferSource","buffer","createBuffer","sampleRate","getChannelData","set","flat","loop","getTimeConstant","time","Math","log","getValue","start","end","fromTime","toTime","at","difference","truncateTime","phase","attack","writable","decay","sustain","release","getReleaseDuration","this","target","startAmount","endAmount","_decayFrom","_startedAt","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","setTargetAtTime","stop","isTarget","endTime","expFalloff","valueAtTime","onended","get","Float32Array","3","b64ToUint6","nChr","decode","sBase64","nBlocksSize","nMod3","nMod4","sB64Enc","replace","nInLen","nOutLen","ceil","taBytes","Uint8Array","nUint24","nOutIdx","nInIdx","charCodeAt","4","url","type","Promise","done","reject","req","XMLHttpRequest","responseType","open","onload","status","response","statusText","onerror","send","5","fromRegex","test","prefix","pre","name","load","ac","source","options","defVal","loader","isArrayBuffer","loadArrayBuffer","isAudioFileName","loadAudioFile","isPromise","loadPromise","isArray","loadArrayData","isObject","loadObjectData","isJsonFileName","loadJsonFile","isBase64Audio","loadBase64Audio","isJsFileName","loadMidiJSFile","opts","resolve","ArrayBuffer","array","decodeAudioData","slice","from","fetch","promise","all","map","data","dest","promises","keys","only","indexOf","audio","JSON","parse","base64","midiJsToJson","begin","lastIndexOf","Array","window","loadAudio","./base64","./fetch","6","root","Symbol","./_root","7","baseGetTag","undefined","undefinedTag","nullTag","symToStringTag","getRawTag","objectToString","toStringTag","./_Symbol","./_getRawTag","./_objectToString","8","global","freeGlobal","self","9","overArg","getPrototype","getPrototypeOf","./_overArg","10","isOwn","tag","result","nativeObjectToString","objectProto","toString","11","12","func","transform","arg","13","freeSelf","Function","./_freeGlobal","14","isObjectLike","15","isPlainObject","objectTag","proto","Ctor","constructor","funcToString","objectCtorString","funcProto","./_baseGetTag","./_getPrototype","./isObjectLike","16","define","amd","midimessage","h","c","defineProperty","_event","_data","receivedTime","console","warn","_messageCode","channel","messageType","velocity","pressure","controllerNumber","controllerValue","channelModeMessage","program","pitchBend","17","NoteParser","join","pow","b","exec","letter","toUpperCase","acc","pc","step","alt","A","chroma","oct","midi","freq","tonicOf","C","charAt","p","d","m","v","g","x","y","regex","build","18","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","setTimeout","runClearTimeout","marker","cachedClearTimeout","clearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","len","run","Item","noop","process","nextTick","args","arguments","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","cwd","chdir","dir","umask","19","createThunkMiddleware","extraArgument","_ref","getState","next","action","thunk","withExtraArgument","20","applyMiddleware","_len","middlewares","_key","createStore","reducer","preloadedState","enhancer","_dispatch","chain","middlewareAPI","middleware","_compose2","_extends","assign","_compose","./compose","21","bindActionCreator","actionCreator","actionCreators","boundActionCreators","22","_interopRequireDefault","getUndefinedStateErrorMessage","actionType","getUnexpectedStateShapeWarningMessage","inputState","reducers","unexpectedKeyCache","reducerKeys","argumentName","_createStore","ActionTypes","INIT","_isPlainObject2","match","unexpectedKeys","filter","forEach","assertReducerSanity","random","substring","split","combineReducers","finalReducers","NODE_ENV","_warning2","finalReducerKeys","sanityError","state","warningMessage","hasChanged","nextState","previousStateForKey","nextStateForKey","errorMessage","_isPlainObject","_warning","./createStore","./utils/warning","_process","lodash/isPlainObject","23","compose","funcs","last","rest","reduceRight","composed","24","ensureCanMutateNextListeners","nextListeners","currentListeners","currentState","subscribe","listener","isSubscribed","index","splice","isDispatching","currentReducer","listeners","replaceReducer","nextReducer","observable","outerSubscribe","observer","observeState","TypeError","unsubscribe","_symbolObservable2","_ref2","_symbolObservable","symbol-observable","25","isCrushed","_createStore2","_combineReducers","_combineReducers2","_bindActionCreators","_bindActionCreators2","_applyMiddleware","_applyMiddleware2","./applyMiddleware","./bindActionCreators","./combineReducers","26","warning","message","error","27","fn1","fn2","player","event","cb","prop","old","28","SamplePlayer","scheduler","notes","events","./events","./midi","./notes","./player","./scheduler","29","listenToMidi","input","started","vel","onmidimessage","msg","mm","play","30","mapBuffers","buffers","toKey","reduce","mapped","note","isMidi","toMidi","mapper","when","dec","floor","cents","note-parser","31","track","id","nextId","tracked","now","currentTime","disconnect","createNode","out","envelope","playbackRate","centsToRate","loopStart","loopEnd","stopAt","connected","DEFAULTS","AudioBuffer","EMPTY","max","duration","ids","onevent","fn","isNum","adsr","PARAMS","32","isArr","isObj","OPTS","schedule","33","REGEX","str","isTonic","tuning","SEMITONES","midiToFreq","parser","src","34","instrument","isUrl","isSoundfontURL","toUrl","nameToUrl","soundfont","format","destination","sf","Soundfont","./legacy","audio-loader","sample-player","35","ctx","instruments","loadBuffers","inst","oscillatorPlayer","defaultOptions","vcoType","vco","createOscillator","frequency","vca","onready","callback","noteToMidi","36","./lib/index","37","_ponyfill","_ponyfill2","./ponyfill","38","symbolObservablePonyfill","_Symbol","39","noteOn","_midi","MidiUtils","setNoteOnMessage","getNote","settings","webApiAudio","_audio","AudioUtils","generateOscillator","soundfontInstrument","_midiActions2","NOTE_ON","payload","noteOff","setNoteOffMessage","NOTE_OFF","controller","CONTROLLER","_midiActions","../actions/midi-actions","../utils/audio","../utils/midi","40","midiMessage","getEventType","_midiMessages","MidiMessages","../action-creators/midi-events-action-creators","../constants/midi-messages","41","midiAccess","midiMessages","inputs","values","gainNode","_midiConnect2","MIDI_SUCCESS","midiFailure","MIDI_FAILURE","_this","instrumentPath","_getInstrumentPath","_soundfontPlayer2","MIDI_LOAD_INSTRUMENT","changeAudio","CHANGE_AUDIO","_midiSoundpaths","SOUNDS_PATH","SOUNDS_FILETYPE","SOUNDS_FILE_EXTENSION","_midiConnect","_soundfontPlayer","_midiMessagesActionCreators","../action-creators/midi-messages-action-creators","../actions/midi-connect","../constants/midi-soundpaths","soundfont-player","42","freeze","INSTRUMENT_NAME","PROGRAM_CHANGE","SYS_EX","43","MIDI_MESSAGE","44","audioSelectors","document","getElementById","selector","addEventListener","bind","render","45","_addInstrumentOptions","_midiInstruments","MIDIInstruments","instrumentOption","createElement","text","instrumentSelector","appendChild","loadInstrument","toggleHidden","classList","../constants/midi-instruments","46","_initKeyElements","_this2","noteNumber","setAttribute","keys$","getElementsByClassName","key$","midiNote","toggle","47","0","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","MidiMessagesHex","SEQUENCE_NUMBER","TEXT","128","144","192","176","InstrumentSets","MUSYNG_KITE","FLUID_R3_GM","InstrumentPathConfig","URL","PORT","SET","URL_GITHUB","_midiReducer","_midiReducer2","_settingsReducer","_settingsReducer2","rootReducer","../reducers/midi-reducer","../reducers/settings-reducer","MIDIEventsReducer","initialState","AudioContext","webkitAudioContext","../actions/midi-actions.js","../actions/midi-connect.js","configureStore","_index2","_reduxThunk","_reduxThunk2","_index","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","../reducers/index","redux-thunk","getFrequency","oscillator","_midiMessagesHex","getType","getNoteVelocity","isNoteOnOff","getAttribute","../constants/midi-messages-hex"],"mappings":"CAAA,QAAUA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,IAAIK,GAAE,GAAIC,OAAM,uBAAuBN,EAAE,IAAK,MAAMK,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEX,EAAEG,IAAIS,WAAYb,GAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,GAAIF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGS,QAAkD,IAAI,GAA1CL,GAAkB,kBAATD,UAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKa,GAAG,SAAST,EAAQU,EAAOJ,GACvd,YAsBA,SAASK,GAAwBC,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIE,KAAa,IAAW,MAAPF,EAAe,IAAK,GAAIG,KAAOH,GAAWI,OAAOC,UAAUC,eAAeX,KAAKK,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,GAAgC,OAAtBD,GAAOK,QAAUP,EAAYE,EApBlQ,GAAIM,GAAkBpB,EAAQ,8BAE1BqB,EAoBJ,SAAgCT,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQO,QAASP,IApBzCQ,GAE1CE,EAAatB,EAAQ,+BAErBuB,EAA2BvB,EAAQ,8CAEnCwB,EAAqBxB,EAAQ,wCAE7ByB,EAA4BzB,EAAQ,qDAEpC0B,EAAaf,EAAwBc,GAErCE,EAA2B3B,EAAQ,oDAEnC4B,EAAYjB,EAAwBgB,GAEpCE,EAAS7B,EAAQ,SAMjB8B,GAAQ,EAAIT,EAAiBF,WAC7BY,GAAmB,EAAIF,EAAOG,oBAAoBJ,EAAWE,EAAMG,UACnEC,GAAoB,EAAIL,EAAOG,oBAAoBN,EAAYI,EAAMG,SAEzEX,GAAWa,UAAUC,KAAKN,EAAOI,GACjCX,EAAyBc,wBAAwBD,KAAKN,EAAOC,GAC7DP,EAAmBc,kBAAkBF,KAAKN,EAAOC,GAEjDA,EAAiBQ,wBAAwB,wBAErCC,UAAUC,mBACZD,UAAUC,mBAAoBC,OAAO,IAASC,KAAKZ,EAAiBa,eAGnEC,oDAAoD,GAAGC,mDAAmD,GAAGC,uCAAuC,GAAGC,6CAA6C,GAAGC,8BAA8B,GAAGC,6BAA6B,GAAGC,MAAQ,KAAKC,GAAG,SAASpD,EAAQU,EAAOJ,GAGnT,QAAS+C,GAAKC,GACZ,GAAIC,GAAOD,EAAaE,aAEpBC,EAAUF,EAAKG,SAAWC,EAAWL,GACrCM,EAAQC,EAAMJ,GACdK,EAAaD,EAAMJ,GACnBM,EAAWF,EAAMJ,EAkBrB,OAhBAF,GAAKS,aAAeH,EAAMC,GAC1BP,EAAKU,WAAaJ,EAAME,GAExBR,EAAKW,YAAcL,EAAMD,GACzBL,EAAKW,YAAYC,QAAQZ,GACzBA,EAAKS,aAAaG,QAAQZ,GAC1BA,EAAKU,WAAWE,QAAQZ,GAExBA,EAAKK,MAAQA,EAAMQ,KACnBb,EAAKO,WAAaA,EAAWM,KAC7Bb,EAAKQ,SAAWA,EAASK,KAEzBb,EAAKO,WAAWF,MAAQ,EACxBL,EAAKQ,SAASH,MAAQ,EAEtB5C,OAAOqD,iBAAiBd,EAAMe,GACvBf,EAmGT,QAASI,GAAWY,GAClB,GAAId,GAAUc,EAAQC,qBAClBC,EAASF,EAAQG,aAAa,EAAG,EAAGH,EAAQI,WAIhD,OAHAF,GAAOG,eAAe,GAAGC,IAAIC,GAC7BrB,EAAQgB,OAASA,EACjBhB,EAAQsB,MAAO,EACRtB,EAGT,QAASI,GAAMN,GACb,GAAIa,GAAOb,EAAKgB,QAAQf,YAExB,OADAD,GAAKY,QAAQC,GACNA,EAGT,QAASY,GAAgBC,GACvB,MAAOC,MAAKC,IAAIF,EAAK,GAAGC,KAAKC,IAAI,KAGnC,QAASC,GAASC,EAAOC,EAAKC,EAAUC,EAAQC,GAC9C,GAAIC,GAAaJ,EAAMD,EACnBJ,EAAOO,EAASD,EAChBI,EAAeF,EAAKF,EACpBK,EAAQD,EAAeV,EACvBrB,EAAQyB,EAAQO,EAAQF,CAS5B,OAPI9B,IAASyB,IACTzB,EAAQyB,GAERzB,GAAS0B,IACT1B,EAAQ0B,GAGL1B,EA9JTlD,EAAOJ,QAAU+C,CA6BjB,IAAIiB,IAEFuB,QAAUjC,MAAO,EAAGkC,UAAU,GAC9BC,OAASnC,MAAO,EAAGkC,UAAU,GAC7BE,SAAWpC,MAAO,EAAGkC,UAAU,GAC/BG,SAAUrC,MAAO,EAAGkC,UAAU,GAE9BI,oBACEtC,MAAO,WACL,MAAOuC,MAAKF,UAIhBZ,OACEzB,MAAO,SAAS6B,GACd,GAAIW,GAASD,KAAKjC,YAAYE,KAC1BiC,EAAcF,KAAKnC,aAAaI,KAChCkC,EAAYH,KAAKlC,WAAWG,IAEhC+B,MAAKzC,SAAS2B,MAAMI,GACpBU,KAAKI,WAAaJ,KAAKI,WAAad,EAAGU,KAAKN,OAC5CM,KAAKK,WAAaf,CAElB,IAAIO,GAAUG,KAAKH,OAEnBI,GAAOK,sBAAsBhB,GAC7BY,EAAYI,sBAAsBhB,GAClCa,EAAUG,sBAAsBhB,GAEhCa,EAAUI,eAAe,EAAGjB,GAExBU,KAAKN,QACPO,EAAOM,eAAe,EAAGjB,GACzBW,EAAOO,wBAAwB,EAAGlB,EAAKU,KAAKN,QAE5CQ,EAAYK,eAAe,EAAGjB,GAC9BY,EAAYM,wBAAwB,EAAGlB,EAAKU,KAAKN,UAEjDO,EAAOM,eAAe,EAAGjB,GACzBY,EAAYK,eAAe,EAAGjB,IAG5BU,KAAKJ,OACPK,EAAOQ,gBAAgBZ,EAASG,KAAKI,WAAYvB,EAAgBmB,KAAKJ,UAK5Ec,MACEjD,MAAO,SAAS6B,EAAIqB,GACdA,IACFrB,GAAUU,KAAKF,QAGjB,IAAIc,GAAUtB,EAAKU,KAAKF,OACxB,IAAIE,KAAKF,QAAQ,CAEf,GAAIG,GAASD,KAAKjC,YAAYE,KAC1BiC,EAAcF,KAAKnC,aAAaI,KAChCkC,EAAYH,KAAKlC,WAAWG,IAEhCgC,GAAOK,sBAAsBhB,GAC7BY,EAAYI,sBAAsBhB,GAClCa,EAAUG,sBAAsBhB,EAEhC,IAAIuB,GAAahC,EAAgBmB,KAAKF,QAGtC,IAAIE,KAAKN,QAAUJ,EAAKU,KAAKI,WAAW,CACtC,GAAIU,GAAc7B,EAAS,EAAG,EAAGe,KAAKK,WAAYL,KAAKI,WAAYd,EACnEW,GAAOO,wBAAwBM,EAAaxB,GAC5CY,EAAYM,wBAAwB,EAAEM,EAAaxB,GACnDY,EAAYO,gBAAgB,EAAGnB,EAAIuB,GAGrCV,EAAUM,gBAAgB,EAAGnB,EAAIuB,GACjCZ,EAAOQ,gBAAgB,EAAGnB,EAAIuB,GAIhC,MADAb,MAAKzC,SAASmD,KAAKE,GACZA,IAIXG,SACEC,IAAK,WACH,MAAOhB,MAAKzC,SAASwD,SAEvBrC,IAAK,SAASjB,GACZuC,KAAKzC,SAASwD,QAAUtD,KAM1BkB,EAAO,GAAIsC,eAAc,EAAE,SAqCzBC,GAAG,SAASrH,EAAQU,EAAOJ,GACjC,YAGA,SAASgH,GAAYC,GACnB,MAAOA,GAAO,IAAMA,EAAO,GAAKA,EAAO,GACnCA,EAAO,IAAMA,EAAO,IAAMA,EAAO,GACjCA,EAAO,IAAMA,EAAO,GAAKA,EAAO,EACvB,KAATA,EAAc,GACL,KAATA,EAAc,GACd,EAKN,QAASC,GAAQC,EAASC,GAQxB,IAAK,GAAIC,GAAOC,EAPZC,EAAUJ,EAAQK,QAAQ,oBAAqB,IAC/CC,EAASF,EAAQrH,OACjBwH,EAAUN,EACVxC,KAAK+C,MAAe,EAATF,EAAa,GAAK,GAAKL,GAAeA,EACxC,EAATK,EAAa,GAAK,EAClBG,EAAU,GAAIC,YAAWH,GAENI,EAAU,EAAGC,EAAU,EAAGC,EAAS,EAAGA,EAASP,EAAQO,IAG5E,GAFAV,EAAiB,EAATU,EACRF,GAAWd,EAAWO,EAAQU,WAAWD,KAAY,GAAK,EAAIV,EAChD,IAAVA,GAAeG,EAASO,GAAW,EAAG,CACxC,IAAKX,EAAQ,EAAGA,EAAQ,GAAKU,EAAUL,EAASL,IAASU,IACvDH,EAAQG,GAAWD,KAAa,KAAOT,EAAQ,IAAM,GAEvDS,GAAU,EAGd,MAAOF,GAGTxH,EAAOJ,SAAYkH,OAAQA,QAErBgB,GAAG,SAASxI,EAAQU,EAAOJ,GAEjC,YAUAI,GAAOJ,QAAU,SAAUmI,EAAKC,GAC9B,MAAO,IAAIC,SAAQ,SAAUC,EAAMC,GACjC,GAAIC,GAAM,GAAIC,eACVL,KAAMI,EAAIE,aAAeN,GAE7BI,EAAIG,KAAK,MAAOR,GAChBK,EAAII,OAAS,WACI,MAAfJ,EAAIK,OAAiBP,EAAKE,EAAIM,UAAYP,EAAO1I,MAAM2I,EAAIO,cAE7DP,EAAIQ,QAAU,WAAcT,EAAO1I,MAAM,mBACzC2I,EAAIS,eAIFC,GAAG,SAASxJ,EAAQU,EAAOJ,GACjC,YAMA,SAASmJ,GAAW9J,GAClB,MAAO,UAAUE,GAAK,MAAoB,gBAANA,IAAkBF,EAAE+J,KAAK7J,IAG/D,QAAS8J,GAAQC,EAAKC,GACpB,MAAsB,gBAARD,GAAmBA,EAAMC,EACpB,kBAARD,GAAqBA,EAAIC,GAChCA,EAuBN,QAASC,GAAMC,EAAIC,EAAQC,EAASC,GAClC,GAAIC,GAEAC,EAAcJ,GAAUK,EACxBC,EAAgBN,GAAUO,EAC1BC,EAAUR,GAAUS,EAEpBC,EAAQV,GAAUW,EAClBC,EAASZ,GAAUa,EACnBC,EAAed,GAAUe,EAEzBC,EAAchB,GAAUiB,EACxBC,EAAalB,GAAUmB,EACvB,KAEAC,EAAOnB,KACX,OAAOE,GAASA,EAAOJ,EAAIC,EAAQoB,GAC/BlB,EAASvB,QAAQ0C,QAAQnB,GACzBvB,QAAQE,OAAO,qBAAuBmB,EAAS,KAQrD,QAASI,GAAevK,GAAK,MAAOA,aAAayL,aACjD,QAASjB,GAAiBN,EAAIwB,EAAOtB,GACnC,MAAO,IAAItB,SAAQ,SAAUC,EAAMC,GACjCkB,EAAGyB,gBAAgBD,EACjB,SAAU9G,GAAUmE,EAAKnE,IACzB,WAAcoE,EAAO,4BAA8B0C,EAAME,MAAM,EAAG,IAAM,YAO9E,QAASlB,GAAeR,EAAIF,EAAMI,GAChC,GAAIxB,GAAMkB,EAAOM,EAAQyB,KAAM7B,EAC/B,OAAOC,GAAKC,EAAID,EAAK6B,MAAMlD,EAAK,eAAgBwB,GAIlD,QAASO,GAAW3K,GAAK,MAAOA,IAAuB,kBAAXA,GAAE8C,KAC9C,QAAS8H,GAAaV,EAAI6B,EAAS3B,GACjC,MAAO2B,GAAQjJ,KAAK,SAAUiB,GAC5B,MAAOkG,GAAKC,EAAInG,EAAOqG,KAS3B,QAASU,GAAeZ,EAAIwB,EAAOtB,GACjC,MAAOtB,SAAQkD,IAAIN,EAAMO,IAAI,SAAUC,GACrC,MAAOjC,GAAKC,EAAIgC,EAAM9B,EAAS8B,MAKnC,QAASnB,GAAU/K,GAAK,MAAOA,IAAkB,gBAANA,GAC3C,QAASgL,GAAgBd,EAAInJ,EAAKqJ,GAChC,GAAI+B,MACAC,EAAWjL,OAAOkL,KAAKtL,GAAKkL,IAAI,SAAU/K,GAC5C,GAAIkJ,EAAQkC,OAAuC,IAA/BlC,EAAQkC,KAAKC,QAAQrL,GAAa,MAAO,KAC7D,IAAI6C,GAAQhD,EAAIG,EAChB,OAAO+I,GAAKC,EAAInG,EAAOqG,EAASrG,GAAOjB,KAAK,SAAU0J,GACpDL,EAAKjL,GAAOsL,KAGhB,OAAO1D,SAAQkD,IAAII,GAAUtJ,KAAK,WAAc,MAAOqJ,KAKzD,QAASjB,GAAchB,EAAIF,EAAMI,GAC/B,GAAIxB,GAAMkB,EAAOM,EAAQyB,KAAM7B,EAC/B,OAAOC,GAAKC,EAAID,EAAK6B,MAAMlD,EAAK,QAAQ9F,KAAK2J,KAAKC,OAAQtC,GAQ5D,QAASgB,GAAiBlB,EAAIC,EAAQC,GACpC,GAAIhK,GAAI+J,EAAOoC,QAAQ,IACvB,OAAOtC,GAAKC,EAAIyC,EAAOhF,OAAOwC,EAAOyB,MAAMxL,EAAI,IAAIwE,OAAQwF,GAK7D,QAASkB,GAAgBpB,EAAIF,EAAMI,GACjC,GAAIxB,GAAMkB,EAAOM,EAAQyB,KAAM7B,EAC/B,OAAOC,GAAKC,EAAID,EAAK6B,MAAMlD,EAAK,QAAQ9F,KAAK8J,GAAexC,GAI9D,QAASwC,GAAcV,GACrB,GAAIW,GAAQX,EAAKK,QAAQ,kBACzB,IAAIM,EAAQ,EAAG,KAAMvM,OAAM,mCAC3BuM,GAAQX,EAAKK,QAAQ,IAAKM,GAAS,CACnC,IAAIpH,GAAMyG,EAAKY,YAAY,IAC3B,OAAOL,MAAKC,MAAMR,EAAKN,MAAMiB,EAAOpH,GAAO,KA5I7C,GAAIkH,GAASxM,EAAQ,YACjB2L,EAAQ3L,EAAQ,UAqDpB8J,GAAK6B,MAAQA,CAiBb,IAAIrB,GAAkBb,EAAU,4BAkB5BiB,EAAUkC,MAAMlC,QAsBhBI,EAAiBrB,EAAU,mBAU3BuB,EAAgBvB,EAAU,eAO1ByB,EAAezB,EAAU,gBAeP,iBAAX/I,IAAuBA,EAAOJ,UAASI,EAAOJ,QAAUwJ,GAC7C,mBAAX+C,UAAwBA,OAAOC,UAAYhD,KAEnDiD,WAAW,EAAEC,UAAU,IAAIC,GAAG,SAASjN,EAAQU,EAAOJ,GACzD,GAAI4M,GAAOlN,EAAQ,WAGfmN,EAASD,EAAKC,MAElBzM,GAAOJ,QAAU6M,IAEdC,UAAU,KAAKC,GAAG,SAASrN,EAAQU,EAAOJ,GAmB7C,QAASgN,GAAW1J,GAClB,MAAa,OAATA,MACe2J,KAAV3J,EAAsB4J,EAAeC,EAEtCC,GAAkBA,IAAkB1M,QAAO4C,GAC/C+J,EAAU/J,GACVgK,EAAehK,GAxBrB,GAAIuJ,GAASnN,EAAQ,aACjB2N,EAAY3N,EAAQ,gBACpB4N,EAAiB5N,EAAQ,qBAGzByN,EAAU,gBACVD,EAAe,qBAGfE,EAAiBP,EAASA,EAAOU,gBAAcN,EAkBnD7M,GAAOJ,QAAUgN,IAEdQ,YAAY,EAAEC,eAAe,GAAGC,oBAAoB,KAAKC,GAAG,SAASjO,EAAQU,EAAOJ,IACvF,SAAW4N,GAEX,GAAIC,GAA8B,gBAAVD,IAAsBA,GAAUA,EAAOlN,SAAWA,QAAUkN,CAEpFxN,GAAOJ,QAAU6N,IAEd5N,KAAK4F,KAAuB,mBAAX+H,QAAyBA,OAAyB,mBAATE,MAAuBA,KAAyB,mBAAXvB,QAAyBA,gBAErHwB,GAAG,SAASrO,EAAQU,EAAOJ,GACjC,GAAIgO,GAAUtO,EAAQ,cAGlBuO,EAAeD,EAAQtN,OAAOwN,eAAgBxN,OAElDN,GAAOJ,QAAUiO,IAEdE,aAAa,KAAKC,IAAI,SAAS1O,EAAQU,EAAOJ,GA0BjD,QAASqN,GAAU/J,GACjB,GAAI+K,GAAQzN,EAAeX,KAAKqD,EAAO8J,GACnCkB,EAAMhL,EAAM8J,EAEhB,KACE9J,EAAM8J,OAAkBH,GAExB,MAAO/N,IAET,GAAIqP,GAASC,EAAqBvO,KAAKqD,EAQvC,OANM+K,GACF/K,EAAM8J,GAAkBkB,QAEjBhL,GAAM8J,GAGVmB,EA1CT,GAAI1B,GAASnN,EAAQ,aAGjB+O,EAAc/N,OAAOC,UAGrBC,EAAiB6N,EAAY7N,eAO7B4N,EAAuBC,EAAYC,SAGnCtB,EAAiBP,EAASA,EAAOU,gBAAcN,EA6BnD7M,GAAOJ,QAAUqN,IAEdG,YAAY,IAAImB,IAAI,SAASjP,EAAQU,EAAOJ,GAkB/C,QAASsN,GAAehK,GACtB,MAAOkL,GAAqBvO,KAAKqD,GAjBnC,GAAImL,GAAc/N,OAAOC,UAOrB6N,EAAuBC,EAAYC,QAavCtO,GAAOJ,QAAUsN,OAEXsB,IAAI,SAASlP,EAAQU,EAAOJ,GASlC,QAASgO,GAAQa,EAAMC,GACrB,MAAO,UAASC,GACd,MAAOF,GAAKC,EAAUC,KAI1B3O,EAAOJ,QAAUgO,OAEXgB,IAAI,SAAStP,EAAQU,EAAOJ,GAClC,GAAI6N,GAAanO,EAAQ,iBAGrBuP,EAA0B,gBAARnB,OAAoBA,MAAQA,KAAKpN,SAAWA,QAAUoN,KAGxElB,EAAOiB,GAAcoB,GAAYC,SAAS,gBAE9C9O,GAAOJ,QAAU4M,IAEduC,gBAAgB,IAAIC,IAAI,SAAS1P,EAAQU,EAAOJ,GAyBnD,QAASqP,GAAa/L,GACpB,MAAgB,OAATA,GAAiC,gBAATA,GAGjClD,EAAOJ,QAAUqP,OAEXC,IAAI,SAAS5P,EAAQU,EAAOJ,GAiDlC,QAASuP,GAAcjM,GACrB,IAAK+L,EAAa/L,IAAU0J,EAAW1J,IAAUkM,EAC/C,OAAO,CAET,IAAIC,GAAQxB,EAAa3K,EACzB,IAAc,OAAVmM,EACF,OAAO,CAET,IAAIC,GAAO9O,EAAeX,KAAKwP,EAAO,gBAAkBA,EAAME,WAC9D,OAAsB,kBAARD,IAAsBA,YAAgBA,IAClDE,EAAa3P,KAAKyP,IAASG,EA1D/B,GAAI7C,GAAatN,EAAQ,iBACrBuO,EAAevO,EAAQ,mBACvB2P,EAAe3P,EAAQ,kBAGvB8P,EAAY,kBAGZM,EAAYZ,SAASvO,UACrB8N,EAAc/N,OAAOC,UAGrBiP,EAAeE,EAAUpB,SAGzB9N,EAAiB6N,EAAY7N,eAG7BiP,EAAmBD,EAAa3P,KAAKS,OA2CzCN,GAAOJ,QAAUuP,IAEdQ,gBAAgB,EAAEC,kBAAkB,EAAEC,iBAAiB,KAAKC,IAAI,SAASxQ,EAAQU,EAAOJ,IAC3F,SAAW4N,IACX,SAAU1O,GAAG,GAAoB,gBAAVc,QAAoC,KAATI,EAAsBA,EAAOJ,QAAQd,QAAS,IAAmB,kBAATiR,SAAqBA,OAAOC,IAAKD,UAAUjR,OAAO,CAAC,GAAIC,EAAkCA,GAAb,mBAAToN,QAAwBA,WAA+B,KAATqB,EAAwBA,EAA6B,mBAAPE,MAAsBA,KAAYjI,KAAK1G,EAAEkR,YAAYnR,MAAO,WAAqB,MAAO,SAASK,GAAEL,EAAEC,EAAEG,GAAG,QAASG,GAAEL,EAAEO,GAAG,IAAIR,EAAEC,GAAG,CAAC,IAAIF,EAAEE,GAAG,CAAC,GAAIW,GAAkB,kBAATL,IAAqBA,CAAQ,KAAIC,GAAGI,EAAE,MAAOA,GAAEX,GAAE,EAAI,IAAGC,EAAE,MAAOA,GAAED,GAAE,EAAI,IAAIkR,GAAE,GAAIzQ,OAAM,uBAAuBT,EAAE,IAAK,MAAMkR,GAAExQ,KAAK,mBAAmBwQ,EAAE,GAAIC,GAAEpR,EAAEC,IAAIY,WAAYd,GAAEE,GAAG,GAAGa,KAAKsQ,EAAEvQ,QAAQ,SAASb,GAAG,GAAIG,GAAEJ,EAAEE,GAAG,GAAGD,EAAG,OAAOM,GAAEH,GAAIH,IAAIoR,EAAEA,EAAEvQ,QAAQT,EAAEL,EAAEC,EAAEG,GAAG,MAAOH,GAAEC,GAAGY,QAAkD,IAAI,GAA1CX,GAAkB,kBAATK,IAAqBA,EAAgBN,EAAE,EAAEA,EAAEE,EAAEY,OAAOd,IAAIK,EAAEH,EAAEF,GAAI,OAAOK,KAAIU,GAAG,SAASjB,EAAEC,EAAEG,GAAG,YAAaoB,QAAO8P,eAAelR,EAAE,cAAcgE,OAAM,IAAOhE,EAAW,QAAE,SAASJ,GAAG,QAASC,GAAED,GAAoE,GAAjE2G,KAAK4K,OAAOvR,EAAE2G,KAAK6K,MAAMxR,EAAEuM,KAAK5F,KAAK8K,aAAazR,EAAEyR,aAAgB9K,KAAK6K,OAAO7K,KAAK6K,MAAMxQ,OAAO,EAAoE,WAAjE0Q,SAAQC,KAAK,iCAAiChL,KAAK6K,MAAMxQ,OAAyE,QAA1D2F,KAAKiL,aAAuB,IAAV5R,EAAEuM,KAAK,GAAO5F,KAAKkL,QAAkB,GAAV7R,EAAEuM,KAAK,GAAa5F,KAAKiL,cAAc,IAAK,KAAIjL,KAAKmL,YAAY,UAAUnL,KAAKpF,IAAc,IAAVvB,EAAEuM,KAAK,GAAO5F,KAAKoL,SAAmB,IAAV/R,EAAEuM,KAAK,EAAO,MAAM,KAAK,KAAI5F,KAAKmL,YAAY,SAASnL,KAAKpF,IAAc,IAAVvB,EAAEuM,KAAK,GAAO5F,KAAKoL,SAAmB,IAAV/R,EAAEuM,KAAK,EAAO,MAAM,KAAK,KAAI5F,KAAKmL,YAAY,cAAcnL,KAAKpF,IAAc,IAAVvB,EAAEuM,KAAK,GAAO5F,KAAKqL,SAAmB,IAAVhS,EAAEuM,KAAK,EAAO,MAAM,KAAK,KAAI5F,KAAKmL,YAAY,gBAAgBnL,KAAKsL,iBAA2B,IAAVjS,EAAEuM,KAAK,GAAO5F,KAAKuL,gBAA0B,IAAVlS,EAAEuM,KAAK,GAAkC,MAAxB5F,KAAKsL,kBAA+C,IAAvBtL,KAAKuL,gBAAqBvL,KAAKwL,mBAAmB,cAA8C,MAAxBxL,KAAKsL,iBAAwBtL,KAAKwL,mBAAmB,sBAAsD,MAAxBxL,KAAKsL,iBAAkD,IAAvBtL,KAAKuL,gBAAqBvL,KAAKwL,mBAAmB,kBAAuBxL,KAAKwL,mBAAmB,iBAAkD,MAAxBxL,KAAKsL,kBAA+C,IAAvBtL,KAAKuL,gBAAqBvL,KAAKwL,mBAAmB,cAA8C,MAAxBxL,KAAKsL,kBAA+C,IAAvBtL,KAAKuL,gBAAqBvL,KAAKwL,mBAAmB,cAA8C,MAAxBxL,KAAKsL,kBAA+C,IAAvBtL,KAAKuL,gBAAqBvL,KAAKwL,mBAAmB,aAA6C,MAAxBxL,KAAKsL,iBAAwBtL,KAAKwL,mBAAmB,aAA6C,MAAxBxL,KAAKsL,mBAAwBtL,KAAKwL,mBAAmB,aAAa,MAAM,KAAK,KAAIxL,KAAKmL,YAAY,gBAAgBnL,KAAKyL,QAAQpS,EAAEuM,KAAK,EAAG,MAAM,KAAK,KAAI5F,KAAKmL,YAAY,kBAAkBnL,KAAKqL,SAAmB,IAAVhS,EAAEuM,KAAK,EAAO,MAAM,KAAK,KAAI5F,KAAKmL,YAAY,iBAAkB,IAAI7R,GAAY,IAAVD,EAAEuM,KAAK,GAAWnM,EAAY,IAAVJ,EAAEuM,KAAK,EAAO5F,MAAK0L,WAAWpS,GAAG,GAAGG,GAAS,MAAO,IAAIH,GAAED,IAAIC,EAAEa,QAAQV,EAAW,kBAAY,IAAI,OAElnFW,KAAK4F,KAAuB,mBAAX+H,QAAyBA,OAAyB,mBAATE,MAAuBA,KAAyB,mBAAXvB,QAAyBA,gBAErHiF,IAAI,SAAS9R,EAAQU,EAAOJ,IACjC,SAASb,EAAEC,GAAG,gBAAiBY,QAAS,KAAoBI,EAAOhB,EAAEY,GAAS,kBAAmBmQ,SAAQA,OAAOC,IAAID,QAAQ,WAAW/Q,GAAGA,EAAED,EAAEsS,WAAWtS,EAAEsS,iBAAiB5L,KAAK,SAAS1G,GAAG,YAAa,SAASC,GAAED,EAAEC,GAAG,MAAOkN,OAAMlN,EAAE,GAAGsS,KAAKvS,GAAG,QAASE,GAAEF,GAAG,MAAM,gBAAiBA,GAAE,QAASD,GAAEC,GAAG,MAAM,gBAAiBA,GAAE,QAASK,GAAEL,GAAG,WAAO,KAASA,EAAE,QAASoR,GAAEpR,EAAEC,GAAG,MAAOwF,MAAK+M,IAAI,GAAGxS,EAAE,IAAI,KAAKC,GAAG,KAAK,QAASG,KAAI,MAAOqS,GAAE,QAASjS,GAAER,EAAEC,EAAEC,GAAG,GAAG,gBAAiBF,GAAE,MAAO,KAAK,IAAID,GAAE0S,EAAEC,KAAK1S,EAAG,KAAID,IAAIE,GAAGF,EAAE,GAAG,MAAO,KAAK,IAAIM,IAAGsS,OAAO5S,EAAE,GAAG6S,cAAcC,IAAI9S,EAAE,GAAGsI,QAAQ,KAAK,MAAOhI,GAAEyS,GAAGzS,EAAEsS,OAAOtS,EAAEwS,IAAIxS,EAAE0S,MAAM1S,EAAEsS,OAAO7J,WAAW,GAAG,GAAG,EAAEzI,EAAE2S,IAAI,MAAM3S,EAAEwS,IAAI,IAAIxS,EAAEwS,IAAI9R,OAAOV,EAAEwS,IAAI9R,MAAO,IAAIX,GAAE6S,EAAE5S,EAAE0S,MAAM1S,EAAE2S,GAAI,OAAO3S,GAAE6S,OAAO9S,EAAE,EAAE,GAAGA,EAAEA,EAAE,GAAGL,EAAE,KAAKM,EAAE8S,KAAKpT,EAAE,GAAGM,EAAE+S,KAAKhT,EAAE,IAAIC,EAAE8S,IAAI,GAAG9S,EAAEgT,KAAKjC,EAAE/Q,EAAE+S,KAAKlT,IAAID,IAAII,EAAEiT,QAAQvT,EAAE,IAAIM,EAAE,QAASI,GAAET,GAAG,MAAOE,GAAEF,GAAGA,EAAE,EAAEC,EAAE,KAAKD,GAAGC,EAAE,IAAID,GAAG,GAAG,QAASM,GAAEN,GAAG,MAAOE,GAAEF,GAAG,GAAGA,EAAE,GAAG,QAASY,GAAEZ,EAAEC,EAAEC,GAAG,MAAO,QAAOF,OAAG,KAASA,EAAE,KAAKA,EAAE+S,KAAKnS,EAAEZ,EAAE+S,KAAK/S,EAAEgT,IAAIhT,EAAEmT,KAAKnT,EAAE,GAAGA,EAAE,EAAE,KAAKuT,EAAEC,OAAOxT,GAAGS,EAAER,GAAGK,EAAEJ,GAAG,QAASuT,GAAEzT,GAAG,IAAIE,EAAEF,IAAID,EAAEC,KAAKA,GAAG,GAAGA,EAAE,IAAI,OAAOA,CAAE,IAAIC,GAAEO,EAAER,EAAG,OAAOC,IAAGI,EAAEJ,EAAEmT,MAAMnT,EAAEmT,KAAK,KAAK,QAASjT,GAAEH,EAAEC,GAAG,GAAIC,GAAEuT,EAAEzT,EAAG,OAAO,QAAOE,EAAE,KAAKkR,EAAElR,EAAED,GAAG,QAASyT,GAAE1T,GAAG,OAAOQ,EAAER,QAAQ2S,OAAO,QAASgB,GAAE3T,GAAG,OAAOQ,EAAER,QAAQ6S,IAAI,QAAS1B,GAAEnR,GAAG,OAAOQ,EAAER,QAAQ8S,GAAG,QAASc,GAAE5T,GAAG,OAAOQ,EAAER,QAAQ+S,KAAK,QAASc,GAAE7T,GAAG,OAAOQ,EAAER,QAAQgT,IAAI,QAASc,GAAE9T,GAAG,OAAOQ,EAAER,QAAQkT,OAAO,QAASa,GAAE/T,GAAG,OAAOQ,EAAER,QAAQmT,IAAI,GAAIV,GAAE,oDAAoDQ,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAAIM,EAAE,SAAUvT,GAAEgU,MAAM5T,EAAEJ,EAAE8M,MAAMtM,EAAER,EAAEiU,MAAMrT,EAAEZ,EAAEoT,KAAKK,EAAEzT,EAAEqT,KAAKlT,EAAEH,EAAE2S,OAAOe,EAAE1T,EAAE6S,IAAIc,EAAE3T,EAAE8S,GAAG3B,EAAEnR,EAAE+S,KAAKa,EAAE5T,EAAEgT,IAAIa,EAAE7T,EAAEkT,OAAOY,EAAE9T,EAAEmT,IAAIY,SAGtlDG,IAAI,SAAS3T,EAAQU,EAAOJ,GAYlC,QAASsT,KACL,KAAM,IAAIzT,OAAM,mCAEpB,QAAS0T,KACL,KAAM,IAAI1T,OAAM,qCAsBpB,QAAS2T,GAAWC,GAChB,GAAIC,IAAqBC,WAErB,MAAOA,YAAWF,EAAK,EAG3B,KAAKC,IAAqBJ,IAAqBI,IAAqBC,WAEhE,MADAD,GAAmBC,WACZA,WAAWF,EAAK,EAE3B,KAEI,MAAOC,GAAiBD,EAAK,GAC/B,MAAMvU,GACJ,IAEI,MAAOwU,GAAiBzT,KAAK,KAAMwT,EAAK,GAC1C,MAAMvU,GAEJ,MAAOwU,GAAiBzT,KAAK4F,KAAM4N,EAAK,KAMpD,QAASG,GAAgBC,GACrB,GAAIC,IAAuBC,aAEvB,MAAOA,cAAaF,EAGxB,KAAKC,IAAuBP,IAAwBO,IAAuBC,aAEvE,MADAD,GAAqBC,aACdA,aAAaF,EAExB,KAEI,MAAOC,GAAmBD,GAC5B,MAAO3U,GACL,IAEI,MAAO4U,GAAmB7T,KAAK,KAAM4T,GACvC,MAAO3U,GAGL,MAAO4U,GAAmB7T,KAAK4F,KAAMgO,KAYjD,QAASG,KACAC,GAAaC,IAGlBD,GAAW,EACPC,EAAahU,OACbiU,EAAQD,EAAaE,OAAOD,GAE5BE,GAAc,EAEdF,EAAMjU,QACNoU,KAIR,QAASA,KACL,IAAIL,EAAJ,CAGA,GAAIM,GAAUf,EAAWQ,EACzBC,IAAW,CAGX,KADA,GAAIO,GAAML,EAAMjU,OACVsU,GAAK,CAGP,IAFAN,EAAeC,EACfA,OACSE,EAAaG,GACdN,GACAA,EAAaG,GAAYI,KAGjCJ,IAAc,EACdG,EAAML,EAAMjU,OAEhBgU,EAAe,KACfD,GAAW,EACXL,EAAgBW,IAiBpB,QAASG,GAAKjB,EAAKxI,GACfpF,KAAK4N,IAAMA,EACX5N,KAAKoF,MAAQA,EAYjB,QAAS0J,MAhKT,GAOIjB,GACAI,EARAc,EAAUxU,EAAOJ,YAgBpB,WACG,IAEQ0T,EADsB,kBAAfC,YACYA,WAEAL,EAEzB,MAAOpU,GACLwU,EAAmBJ,EAEvB,IAEQQ,EADwB,kBAAjBC,cACcA,aAEAR,EAE3B,MAAOrU,GACL4U,EAAqBP,KAuD7B,IAEIW,GAFAC,KACAF,GAAW,EAEXI,GAAc,CAyClBO,GAAQC,SAAW,SAAUpB,GACzB,GAAIqB,GAAO,GAAIxI,OAAMyI,UAAU7U,OAAS,EACxC,IAAI6U,UAAU7U,OAAS,EACnB,IAAK,GAAIP,GAAI,EAAGA,EAAIoV,UAAU7U,OAAQP,IAClCmV,EAAKnV,EAAI,GAAKoV,UAAUpV,EAGhCwU,GAAMa,KAAK,GAAIN,GAAKjB,EAAKqB,IACJ,IAAjBX,EAAMjU,QAAiB+T,GACvBT,EAAWc,IASnBI,EAAK/T,UAAU8T,IAAM,WACjB5O,KAAK4N,IAAIwB,MAAM,KAAMpP,KAAKoF,QAE9B2J,EAAQM,MAAQ,UAChBN,EAAQO,SAAU,EAClBP,EAAQQ,OACRR,EAAQS,QACRT,EAAQU,QAAU,GAClBV,EAAQW,YAIRX,EAAQY,GAAKb,EACbC,EAAQa,YAAcd,EACtBC,EAAQc,KAAOf,EACfC,EAAQe,IAAMhB,EACdC,EAAQgB,eAAiBjB,EACzBC,EAAQiB,mBAAqBlB,EAC7BC,EAAQkB,KAAOnB,EAEfC,EAAQmB,QAAU,SAAUxM,GACxB,KAAM,IAAI1J,OAAM,qCAGpB+U,EAAQoB,IAAM,WAAc,MAAO,KACnCpB,EAAQqB,MAAQ,SAAUC,GACtB,KAAM,IAAIrW,OAAM,mCAEpB+U,EAAQuB,MAAQ,WAAa,MAAO,SAE9BC,IAAI,SAAS1W,EAAQU,EAAOJ,GAClC,YAGA,SAASqW,GAAsBC,GAC7B,MAAO,UAAUC,GACf,GAAI5U,GAAW4U,EAAK5U,SAChB6U,EAAWD,EAAKC,QACpB,OAAO,UAAUC,GACf,MAAO,UAAUC,GACf,MAAsB,kBAAXA,GACFA,EAAO/U,EAAU6U,EAAUF,GAG7BG,EAAKC,MAXpB1W,EAAQO,YAAa,CAiBrB,IAAIoW,GAAQN,GACZM,GAAMC,kBAAoBP,EAE1BrW,EAAiB,QAAI2W,OACfE,IAAI,SAASnX,EAAQU,EAAOJ,GAClC,YA8BA,SAAS8W,KACP,IAAK,GAAIC,GAAOhC,UAAU7U,OAAQ8W,EAAc1K,MAAMyK,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IAClFD,EAAYC,GAAQlC,UAAUkC,EAGhC,OAAO,UAAUC,GACf,MAAO,UAAUC,EAASC,EAAgBC,GACxC,GAAI7V,GAAQ0V,EAAYC,EAASC,EAAgBC,GAC7CC,EAAY9V,EAAMG,SAClB4V,KAEAC,GACFhB,SAAUhV,EAAMgV,SAChB7U,SAAU,SAAkB+U,GAC1B,MAAOY,GAAUZ,IAQrB,OALAa,GAAQP,EAAYxL,IAAI,SAAUiM,GAChC,MAAOA,GAAWD,KAEpBF,EAAYI,EAAmB,QAAEzC,UAAMhI,GAAWsK,GAAO/V,EAAMG,UAExDgW,KAAanW,GAClBG,SAAU2V,MAnDlBtX,EAAQO,YAAa,CAErB,IAAIoX,GAAWjX,OAAOkX,QAAU,SAAU9R,GAAU,IAAK,GAAInG,GAAI,EAAGA,EAAIoV,UAAU7U,OAAQP,IAAK,CAAE,GAAI+J,GAASqL,UAAUpV,EAAI,KAAK,GAAIc,KAAOiJ,GAAchJ,OAAOC,UAAUC,eAAeX,KAAKyJ,EAAQjJ,KAAQqF,EAAOrF,GAAOiJ,EAAOjJ,IAAY,MAAOqF,GAEvP9F,GAAiB,QAAI8W,CAErB,IAAIe,GAAWnY,EAAQ,aAEnBgY,EAEJ,SAAgCpX,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQO,QAAWP,IAFlDuX,KAgDpCC,YAAY,KAAKC,IAAI,SAASrY,EAAQU,EAAOJ,GAChD,YAIA,SAASgY,GAAkBC,EAAetW,GACxC,MAAO,YACL,MAAOA,GAASsW,EAAchD,UAAMhI,GAAW8H,aAyBnD,QAASrT,GAAmBwW,EAAgBvW,GAC1C,GAA8B,kBAAnBuW,GACT,MAAOF,GAAkBE,EAAgBvW,EAG3C,IAA8B,gBAAnBuW,IAAkD,OAAnBA,EACxC,KAAM,IAAIrY,OAAM,0EAA+F,OAAnBqY,EAA0B,aAAgBA,IAAkB,6FAK1J,KAAK,GAFDtM,GAAOlL,OAAOkL,KAAKsM,GACnBC,KACKxY,EAAI,EAAGA,EAAIiM,EAAK1L,OAAQP,IAAK,CACpC,GAAIc,GAAMmL,EAAKjM,GACXsY,EAAgBC,EAAezX,EACN,mBAAlBwX,KACTE,EAAoB1X,GAAOuX,EAAkBC,EAAetW,IAGhE,MAAOwW,GA/CTnY,EAAQO,YAAa,EACrBP,EAAiB,QAAI0B,OAgDf0W,IAAI,SAAS1Y,EAAQU,EAAOJ,IAClC,SAAW4U,GACX,YAeA,SAASyD,GAAuB/X,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQO,QAAWP,GAEzF,QAASgY,GAA8B7X,EAAKiW,GAC1C,GAAI6B,GAAa7B,GAAUA,EAAOtO,IAGlC,OAAO,iBAFUmQ,GAAc,IAAMA,EAAW7J,WAAa,KAAO,aAE9B,cAAgBjO,EAAM,4FAG9D,QAAS+X,GAAsCC,EAAYC,EAAUhC,EAAQiC,GAC3E,GAAIC,GAAclY,OAAOkL,KAAK8M,GAC1BG,EAAenC,GAAUA,EAAOtO,OAAS0Q,EAAaC,YAAYC,KAAO,gDAAkD,wCAE/H,IAA2B,IAAvBJ,EAAY1Y,OACd,MAAO,+HAGT,MAAK,EAAI+Y,EAAyB,SAAGR,GACnC,MAAO,OAASI,EAAe,+BAAiCnK,SAASzO,KAAKwY,GAAYS,MAAM,kBAAkB,GAAK,kEAA0EN,EAAYlH,KAAK,QAAU,GAG9N,IAAIyH,GAAiBzY,OAAOkL,KAAK6M,GAAYW,OAAO,SAAU3Y,GAC5D,OAAQiY,EAAS9X,eAAeH,KAASkY,EAAmBlY,IAO9D,OAJA0Y,GAAeE,QAAQ,SAAU5Y,GAC/BkY,EAAmBlY,IAAO,IAGxB0Y,EAAejZ,OAAS,EACnB,eAAiBiZ,EAAejZ,OAAS,EAAI,OAAS,OAAS,KAAaiZ,EAAezH,KAAK,QAAU,cAAgBmH,EAAe,8DAA4ED,EAAYlH,KAAK,QAAU,0CADzP,GAKF,QAAS4H,GAAoBZ,GAC3BhY,OAAOkL,KAAK8M,GAAUW,QAAQ,SAAU5Y,GACtC,GAAI0W,GAAUuB,EAASjY,EAGvB,QAA4B,KAFT0W,MAAQlK,IAAa7E,KAAM0Q,EAAaC,YAAYC,OAGrE,KAAM,IAAInZ,OAAM,YAAcY,EAAM,qLAItC,QAAkD,KAAvC0W,MAAQlK,IAAa7E,KADrB,gCAAkCxD,KAAK2U,SAAS7K,SAAS,IAAI8K,UAAU,GAAGC,MAAM,IAAI/H,KAAK,OAElG,KAAM,IAAI7R,OAAM,YAAcY,EAAM,6EAAqFqY,EAAaC,YAAYC,KAAO,gSAqB/J,QAASU,GAAgBhB,GAGvB,IAAK,GAFDE,GAAclY,OAAOkL,KAAK8M,GAC1BiB,KACKha,EAAI,EAAGA,EAAIiZ,EAAY1Y,OAAQP,IAAK,CAC3C,GAAIc,GAAMmY,EAAYjZ,EAEO,gBAAzBiV,EAAQQ,IAAIwE,cACe,KAAlBlB,EAASjY,KAClB,EAAIoZ,EAAmB,SAAG,gCAAkCpZ,EAAM,KAIzC,kBAAlBiY,GAASjY,KAClBkZ,EAAclZ,GAAOiY,EAASjY,IAGlC,GAAIqZ,GAAmBpZ,OAAOkL,KAAK+N,EAEnC,IAA6B,eAAzB/E,EAAQQ,IAAIwE,SACd,GAAIjB,KAGN,IAAIoB,EACJ,KACET,EAAoBK,GACpB,MAAOza,GACP6a,EAAc7a,EAGhB,MAAO,YACL,GAAI8a,GAAQjF,UAAU7U,QAAU,OAAsB+M,KAAjB8H,UAAU,MAAwBA,UAAU,GAC7E2B,EAAS3B,UAAU,EAEvB,IAAIgF,EACF,KAAMA,EAGR,IAA6B,eAAzBnF,EAAQQ,IAAIwE,SAA2B,CACzC,GAAIK,GAAiBzB,EAAsCwB,EAAOL,EAAejD,EAAQiC,EACrFsB,KACF,EAAIJ,EAAmB,SAAGI,GAM9B,IAAK,GAFDC,IAAa,EACbC,KACKxa,EAAI,EAAGA,EAAIma,EAAiB5Z,OAAQP,IAAK,CAChD,GAAIc,GAAMqZ,EAAiBna,GACvBwX,EAAUwC,EAAclZ,GACxB2Z,EAAsBJ,EAAMvZ,GAC5B4Z,EAAkBlD,EAAQiD,EAAqB1D,EACnD,QAA+B,KAApB2D,EAAiC,CAC1C,GAAIC,GAAehC,EAA8B7X,EAAKiW,EACtD,MAAM,IAAI7W,OAAMya,GAElBH,EAAU1Z,GAAO4Z,EACjBH,EAAaA,GAAcG,IAAoBD,EAEjD,MAAOF,GAAaC,EAAYH,GAzIpCha,EAAQO,YAAa,EACrBP,EAAiB,QAAI0Z,CAErB,IAAIZ,GAAepZ,EAAQ,iBAEvB6a,EAAiB7a,EAAQ,wBAEzBuZ,EAAkBZ,EAAuBkC,GAEzCC,EAAW9a,EAAQ,mBAEnBma,EAAYxB,EAAuBmC,KAiIpCva,KAAK4F,KAAKnG,EAAQ,eAElB+a,gBAAgB,GAAGC,kBAAkB,GAAGC,SAAW,GAAGC,uBAAuB,KAAKC,IAAI,SAASnb,EAAQU,EAAOJ,GACjH,YAeA,SAAS8a,KACP,IAAK,GAAI/D,GAAOhC,UAAU7U,OAAQ6a,EAAQzO,MAAMyK,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IAC5E8D,EAAM9D,GAAQlC,UAAUkC,EAG1B,IAAqB,IAAjB8D,EAAM7a,OACR,MAAO,UAAU6O,GACf,MAAOA,GAIX,IAAqB,IAAjBgM,EAAM7a,OACR,MAAO6a,GAAM,EAGf,IAAIC,GAAOD,EAAMA,EAAM7a,OAAS,GAC5B+a,EAAOF,EAAM5P,MAAM,GAAI,EAC3B,OAAO,YACL,MAAO8P,GAAKC,YAAY,SAAUC,EAAUvb,GAC1C,MAAOA,GAAEub,IACRH,EAAK/F,UAAMhI,GAAW8H,aAjC7B/U,EAAQO,YAAa,EACrBP,EAAiB,QAAI8a,OAmCfM,IAAI,SAAS1b,EAAQU,EAAOJ,GAClC,YAcA,SAASqY,GAAuB/X,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQO,QAAWP,GAqCzF,QAAS4W,GAAYC,EAASC,EAAgBC,GA0B5C,QAASgE,KACHC,IAAkBC,IACpBD,EAAgBC,EAAiBpQ,SASrC,QAASqL,KACP,MAAOgF,GA0BT,QAASC,GAAUC,GACjB,GAAwB,kBAAbA,GACT,KAAM,IAAI7b,OAAM,sCAGlB,IAAI8b,IAAe,CAKnB,OAHAN,KACAC,EAActG,KAAK0G,GAEZ,WACL,GAAKC,EAAL,CAIAA,GAAe,EAEfN,GACA,IAAIO,GAAQN,EAAcxP,QAAQ4P,EAClCJ,GAAcO,OAAOD,EAAO,KA6BhC,QAASja,GAAS+U,GAChB,KAAK,EAAIuC,EAAyB,SAAGvC,GACnC,KAAM,IAAI7W,OAAM,0EAGlB,QAA2B,KAAhB6W,EAAOtO,KAChB,KAAM,IAAIvI,OAAM,qFAGlB,IAAIic,EACF,KAAM,IAAIjc,OAAM,qCAGlB,KACEic,GAAgB,EAChBN,EAAeO,EAAeP,EAAc9E,GAC5C,QACAoF,GAAgB,EAIlB,IAAK,GADDE,GAAYT,EAAmBD,EAC1B3b,EAAI,EAAGA,EAAIqc,EAAU9b,OAAQP,IACpCqc,EAAUrc,IAGZ,OAAO+W,GAaT,QAASuF,GAAeC,GACtB,GAA2B,kBAAhBA,GACT,KAAM,IAAIrc,OAAM,6CAGlBkc,GAAiBG,EACjBva,GAAWyG,KAAM2Q,EAAYC,OAS/B,QAASmD,KACP,GAAI5F,GAEA6F,EAAiBX,CACrB,OAAOlF,IASLkF,UAAW,SAAmBY,GAK5B,QAASC,KACHD,EAAS5F,MACX4F,EAAS5F,KAAKD,KANlB,GAAwB,gBAAb6F,GACT,KAAM,IAAIE,WAAU,yCAWtB,OAFAD,MAESE,YADSJ,EAAeE,MAGlC/F,EAAKkG,EAA4B,SAAK,WACvC,MAAO5W,OACN0Q,EAlML,GAAImG,EAOJ,IAL8B,kBAAnBtF,QAAqD,KAAbC,IACjDA,EAAWD,EACXA,MAAiBnK,QAGK,KAAboK,EAA0B,CACnC,GAAwB,kBAAbA,GACT,KAAM,IAAIxX,OAAM,0CAGlB,OAAOwX,GAASH,GAAaC,EAASC,GAGxC,GAAuB,kBAAZD,GACT,KAAM,IAAItX,OAAM,yCAGlB,IAAIkc,GAAiB5E,EACjBqE,EAAepE,EACfmE,KACAD,EAAgBC,EAChBO,GAAgB,CAmLpB,OAFAna,IAAWyG,KAAM2Q,EAAYC,OAEtB0D,GACL/a,SAAUA,EACV8Z,UAAWA,EACXjF,SAAUA,EACVyF,eAAgBA,GACfS,EAAMD,EAA4B,SAAKN,EAAYO,EAjQxD1c,EAAQO,YAAa,EACrBP,EAAQ+Y,gBAAc9L,GACtBjN,EAAiB,QAAIkX,CAErB,IAAIqD,GAAiB7a,EAAQ,wBAEzBuZ,EAAkBZ,EAAuBkC,GAEzCoC,EAAoBjd,EAAQ,qBAE5B+c,EAAqBpE,EAAuBsE,GAU5C5D,EAAc/Y,EAAQ+Y,aACxBC,KAAM,kBA8OL4B,uBAAuB,GAAGgC,oBAAoB,KAAKC,IAAI,SAASnd,EAAQU,EAAOJ,IAClF,SAAW4U,GACX,YA6BA,SAASyD,GAAuB/X,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQO,QAAWP,GAMzF,QAASwc,MAjCT9c,EAAQO,YAAa,EACrBP,EAAQ8a,QAAU9a,EAAQ8W,gBAAkB9W,EAAQ0B,mBAAqB1B,EAAQ0Z,gBAAkB1Z,EAAQkX,gBAAcjK,EAEzH,IAAI6L,GAAepZ,EAAQ,iBAEvBqd,EAAgB1E,EAAuBS,GAEvCkE,EAAmBtd,EAAQ,qBAE3Bud,EAAoB5E,EAAuB2E,GAE3CE,EAAsBxd,EAAQ,wBAE9Byd,EAAuB9E,EAAuB6E,GAE9CE,EAAmB1d,EAAQ,qBAE3B2d,EAAoBhF,EAAuB+E,GAE3CvF,EAAWnY,EAAQ,aAEnBgY,EAAYW,EAAuBR,GAEnC2C,EAAW9a,EAAQ,mBAEnBma,EAAYxB,EAAuBmC,EAUV,gBAAzB5F,EAAQQ,IAAIwE,UAAuD,gBAAnBkD,GAAUvT,MAAwC,cAAnBuT,EAAUvT,OAC3F,EAAIsQ,EAAmB,SAAG,+WAG5B7Z,EAAQkX,YAAc6F,EAAuB,QAC7C/c,EAAQ0Z,gBAAkBuD,EAA2B,QACrDjd,EAAQ0B,mBAAqByb,EAA8B,QAC3Dnd,EAAQ8W,gBAAkBuG,EAA2B,QACrDrd,EAAQ8a,QAAUpD,EAAmB,UAClCzX,KAAK4F,KAAKnG,EAAQ,eAElB4d,oBAAoB,GAAGC,uBAAuB,GAAGC,oBAAoB,GAAG1F,YAAY,GAAG2C,gBAAgB,GAAGC,kBAAkB,GAAGC,SAAW,KAAK8C,IAAI,SAAS/d,EAAQU,EAAOJ,GAC9K,YAUA,SAAS0d,GAAQC,GAEQ,mBAAZ/M,UAAoD,kBAAlBA,SAAQgN,OACnDhN,QAAQgN,MAAMD,EAGhB,KAIE,KAAM,IAAI9d,OAAM8d,GAEhB,MAAOze,KApBXc,EAAQO,YAAa,EACrBP,EAAiB,QAAI0d,OAsBfG,IAAI,SAASne,EAAQU,EAAOJ,GAwBlC,QAASuX,GAAOuG,EAAKC,GACnB,MAAO,UAAUte,EAAGmS,EAAGrB,EAAGsC,GAAKiL,EAAIre,EAAGmS,EAAGrB,EAAGsC,GAAIkL,EAAIte,EAAGmS,EAAGrB,EAAGsC,IAvB/DzS,EAAOJ,QAAU,SAAUge,GAmBzB,MAPAA,GAAOxI,GAAK,SAAUyI,EAAOC,GAC3B,GAAyB,IAArBnJ,UAAU7U,QAAiC,kBAAV+d,GAAsB,MAAOD,GAAOxI,GAAG,QAASyI,EACrF,IAAIE,GAAO,KAAOF,EACdG,EAAMJ,EAAOG,EAEjB,OADAH,GAAOG,GAAQC,EAAM7G,EAAM6G,EAAKF,GAAMA,EAC/BF,GAEFA,QAOHK,IAAI,SAAS3e,EAAQU,EAAOJ,GAClC,YAQA,SAASse,GAAc7U,EAAIC,EAAQC,GACjC,MAAO4I,GAAKgM,EAAUC,EAAMC,EAAOT,EAAOvU,EAAIC,EAAQC,OAPxD,GAAIqU,GAASte,EAAQ,YACjB+e,EAAS/e,EAAQ,YACjB8e,EAAQ9e,EAAQ,WAChB6e,EAAY7e,EAAQ,eACpB6S,EAAO7S,EAAQ,SAMG,iBAAXU,IAAuBA,EAAOJ,UAASI,EAAOJ,QAAUse,GAC7C,mBAAX/R,UAAwBA,OAAO+R,aAAeA,KAEtDI,WAAW,GAAGC,SAAS,GAAGC,UAAU,GAAGC,WAAW,GAAGC,cAAc,KAAKC,IAAI,SAASrf,EAAQU,EAAOJ,GACvG,GAAIqQ,GAAc3Q,EAAQ,cAE1BU,GAAOJ,QAAU,SAAUge,GA6CzB,MA1BAA,GAAOgB,aAAe,SAAUC,EAAOtV,GACrC,GAAIuV,MACApU,EAAOnB,MACP7F,EAAOgH,EAAKhH,MAAQ,SAAUqb,GAAO,MAAOA,GAAM,IAqBtD,OAnBAF,GAAMG,cAAgB,SAAUC,GAC9B,GAAIC,GAAKD,EAAIrO,YAAcqO,EAAMhP,EAAYgP,EAI7C,IAHuB,WAAnBC,EAAGtO,aAA4C,IAAhBsO,EAAGrO,WACpCqO,EAAGtO,YAAc,YAEflG,EAAKiG,SAAWuO,EAAGvO,UAAYjG,EAAKiG,QAExC,OAAQuO,EAAGtO,aACT,IAAK,SACHkO,EAAQI,EAAG7e,KAAOud,EAAOuB,KAAKD,EAAG7e,IAAK,GAAKqD,KAAMA,EAAKwb,EAAGrO,WACzD,MACF,KAAK,UACCiO,EAAQI,EAAG7e,OACbye,EAAQI,EAAG7e,KAAK8F,aACT2Y,GAAQI,EAAG7e,QAKnBud,GAEFA,KAGN3N,YAAc,KAAKmP,IAAI,SAAS9f,EAAQU,EAAOJ,GAClD,YA8BA,SAASyf,GAAYC,EAASC,GAC5B,MAAOjf,QAAOkL,KAAK8T,GAASE,OAAO,SAAUC,EAAQtW,GAEnD,MADAsW,GAAOF,EAAMpW,IAASmW,EAAQnW,GACvBsW,OA/BX,GAAIC,GAAOpgB,EAAQ,eACfqgB,EAAS,SAAU3gB,GAAK,MAAa,QAANA,GAAcA,QAAYA,GAAK,GAAKA,EAAI,KACvE4gB,EAAS,SAAU5gB,GAAK,MAAO2gB,GAAO3gB,IAAMA,EAAI0gB,EAAKvN,KAAKnT,GAG9DgB,GAAOJ,QAAU,SAAUge,GACzB,GAAIA,EAAO0B,QAAS,CAClB,GAAIlU,GAAMwS,EAAOlT,KAAKU,IAClBmU,EAAuB,kBAARnU,GAAqBA,EAAMwU,EAC1CC,EAAS,SAAU1W,GACrB,MAAOA,GAAOoW,EAAMpW,IAASA,EAAO,KAGtCyU,GAAO0B,QAAUD,EAAWzB,EAAO0B,QAASO,EAC5C,IAAIlb,GAAQiZ,EAAOjZ,KACnBiZ,GAAOjZ,MAAQ,SAAUwE,EAAM2W,EAAMvW,GACnC,GAAIlJ,GAAMwf,EAAO1W,GACb4W,EAAM1f,EAAM,CAKhB,OAJI0f,KACF1f,EAAMmE,KAAKwb,MAAM3f,GACjBkJ,EAAUjJ,OAAOkX,OAAOjO,OAAiB0W,MAAOzb,KAAKwb,MAAY,IAAND,MAEtDpb,EAAMtE,EAAKyf,EAAMvW,IAG5B,MAAOqU,MAUNsC,cAAc,KAAKC,IAAI,SAAS7gB,EAAQU,EAAOJ,GAElD,YA8BA,SAASse,GAAc7U,EAAIC,EAAQC,GAyHjC,QAAS6W,GAAOjX,EAAMtG,GAUpB,MATAA,GAAKwd,GAAKC,IACVC,EAAQ1d,EAAKwd,IAAMxd,EACnBA,EAAKyG,OAAO9C,QAAU,WACpB,GAAIga,GAAMnX,EAAGoX,WACb5d,GAAKyG,OAAOoX,aACZ7d,EAAKmS,IAAI0L,aACT7d,EAAK6d,aACL9C,EAAOlI,KAAK,QAAS8K,EAAK3d,EAAKwd,GAAIxd,IAE9BA,EAAKwd,GAGd,QAASM,GAAYxX,EAAMpF,EAAQwF,GACjC,GAAI1G,GAAOwG,EAAGvG,YAoBd,OAnBAD,GAAKa,KAAKR,MAAQ,EAClBL,EAAKY,QAAQmd,GAEb/d,EAAKmS,IAAM6L,EAASxX,EAAIE,EAASmB,GACjC7H,EAAKmS,IAAIvR,QAAQZ,EAAKa,MAEtBb,EAAKyG,OAASD,EAAGvF,qBACjBjB,EAAKyG,OAAOvF,OAASA,EACrBlB,EAAKyG,OAAO7F,QAAQZ,GACpBA,EAAKyG,OAAOjF,KAAOkF,EAAQlF,MAAQqG,EAAKrG,KACxCxB,EAAKyG,OAAOwX,aAAa5d,MAAQ6d,EAAYxX,EAAQ0W,OAASvV,EAAKuV,OACnEpd,EAAKyG,OAAO0X,UAAYzX,EAAQyX,WAAatW,EAAKsW,UAClDne,EAAKyG,OAAO2X,QAAU1X,EAAQ0X,SAAWvW,EAAKuW,QAC9Cpe,EAAKsD,KAAO,SAAU2Z,GACpB,GAAIvb,GAAOub,GAAQzW,EAAGoX,WACtB7C,GAAOlI,KAAK,OAAQnR,EAAM4E,EAC1B,IAAI+X,GAASre,EAAKmS,IAAI7O,KAAK5B,EAC3B1B,GAAKyG,OAAOnD,KAAK+a,IAEZre,EA1JT,GAAIse,IAAY,EACZb,EAAS,EACTC,KACAK,EAAMvX,EAAGvG,YACb8d,GAAIld,KAAKR,MAAQ,CAEjB,IAAIwH,GAAOpK,OAAOkX,UAAW4J,EAAU7X,GAKnCqU,GAAW/Z,QAASwF,EAAIuX,IAAKA,EAAKlW,KAAMA,EAyG5C,OAxGIpB,aAAkB+X,aAAazD,EAAO7Z,OAASuF,EAC9CsU,EAAO0B,QAAUhW,EAqBtBsU,EAAOjZ,MAAQ,SAAUwE,EAAM2W,EAAMvW,GAEnC,GAAIqU,EAAO7Z,QAAmB,OAAToF,EAAe,MAAOyU,GAAOjZ,MAAM,KAAMwE,EAAM2W,EAEpE,IAAI/b,GAASoF,EAAOyU,EAAO0B,QAAQnW,GAAQyU,EAAO7Z,MAClD,KAAKA,EAEH,WADAyM,SAAQC,KAAK,UAAYtH,EAAO,cAE3B,KAAKgY,EAEV,WADA3Q,SAAQC,KAAK,0CAIf,IAAI/F,GAAOnB,GAAW+X,CACtBxB,GAAOtb,KAAK+c,IAAIlY,EAAGoX,YAAaX,GAAQ,GACxClC,EAAOlI,KAAK,QAASoK,EAAM3W,EAAMuB,EACjC,IAAI7H,GAAO8d,EAAWxX,EAAMpF,EAAQ2G,EAMpC,OALA7H,GAAKwd,GAAKD,EAAMjX,EAAMtG,GACtBA,EAAKmS,IAAIrQ,MAAMmb,GACfjd,EAAKyG,OAAO3E,MAAMmb,GAClBlC,EAAOlI,KAAK,UAAWoK,EAAMjd,EAAKwd,GAAIxd,GAClC6H,EAAK8W,UAAU3e,EAAKsD,KAAK2Z,EAAOpV,EAAK8W,UAClC3e,GAUT+a,EAAOuB,KAAO,SAAUhW,EAAM2W,EAAMvW,GAClC,MAAOqU,GAAOjZ,MAAMwE,EAAM2W,EAAMvW,IAkBlCqU,EAAOzX,KAAO,SAAU2Z,EAAM2B,GAC5B,GAAI5e,EAEJ,OADA4e,GAAMA,GAAOnhB,OAAOkL,KAAK+U,GAClBkB,EAAIrW,IAAI,SAAUiV,GAEvB,OADAxd,EAAO0d,EAAQF,KAEfxd,EAAKsD,KAAK2Z,GACHjd,EAAKwd,IAFM,QActBzC,EAAOna,QAAU,SAAU6H,GAGzB,MAFA6V,IAAY,EACZP,EAAInd,QAAQ6H,GACLsS,GAGTA,EAAOlI,KAAO,SAAUmI,EAAOiC,EAAM5f,EAAKwK,GACpCkT,EAAO8D,SAAS9D,EAAO8D,QAAQ7D,EAAOiC,EAAM5f,EAAKwK,EACrD,IAAIiX,GAAK/D,EAAO,KAAOC,EACnB8D,IAAIA,EAAG7B,EAAM5f,EAAKwK,IAGjBkT,EA0CT,QAASgE,GAAO/O,GAAK,MAAoB,gBAANA,GAEnC,QAASgO,GAAUxX,EAAIE,EAASmB,GAC9B,GAAIsK,GAAMrS,EAAK0G,GACXwY,EAAOtY,EAAQsY,MAAQnX,EAAKmX,IAOhC,OANAC,GAAO7I,QAAQ,SAAU9P,EAAM5J,GACnByV,EAAI7L,GAAV0Y,EAAkBA,EAAKtiB,GACVgK,EAAQJ,IAASuB,EAAKvB,KAEzC6L,EAAI9R,MAAMA,MAAQ0e,EAAMrY,EAAQ7F,MAAQ6F,EAAQ7F,KAC5Cke,EAAMlX,EAAKhH,MAAQgH,EAAKhH,KAAO,EAC5BsR,EAQT,QAAS+L,GAAad,GAAS,MAAOA,GAAQzb,KAAK+M,IAAI,EAAG0O,EAAQ,MAAQ,EA9M1E,GAAItd,GAAOrD,EAAQ,QAEfgiB,KACAF,GACF1d,KAAM,EACNyB,OAAQ,IACRE,MAAO,GACPC,QAAS,GACTC,QAAS,GACTlB,MAAM,EACN4b,MAAO,EACPe,UAAW,EACXC,QAAS,GAgLPa,GAAU,SAAU,QAAS,UAAW,UAoB5C9hB,GAAOJ,QAAUse,IAEd2D,KAAO,IAAIE,IAAI,SAASziB,EAAQU,EAAOJ,GAC1C,YAEA,IAAIoiB,GAAQ9V,MAAMlC,QACdiY,EAAQ,SAAU9iB,GAAK,MAAOA,IAAkB,gBAANA,IAC1C+iB,IAEJliB,GAAOJ,QAAU,SAAUge,GAsDzB,MAxBAA,GAAOuE,SAAW,SAAU5d,EAAM8Z,GAChC,GAAImC,GAAM5C,EAAO/Z,QAAQ4c,YACrBX,EAAOvb,EAAOic,EAAMA,EAAMjc,CAC9BqZ,GAAOlI,KAAK,WAAYoK,EAAMzB,EAC9B,IAAItf,GAAGI,EAAGugB,EAAMhV,CAChB,OAAO2T,GAAOjT,IAAI,SAAUyS,GAC1B,MAAKA,IACImE,EAAMnE,IACb9e,EAAI8e,EAAM,GAAI1e,EAAI0e,EAAM,KAExB9e,EAAI8e,EAAMtZ,KAAMpF,EAAI0e,GAGlBoE,EAAM9iB,IACRugB,EAAOvgB,EAAEgK,MAAQhK,EAAEkB,KAAOlB,EAAEugB,MAAQvgB,EAAEgT,MAAQ,KAC9CzH,EAAOvL,IAEPugB,EAAOvgB,EACPuL,EAAOwX,GAGFtE,EAAOjZ,MAAM+a,EAAMI,GAAQ/gB,GAAK,GAAI2L,IAfxB,QAkBhBkT,QAGHwE,IAAI,SAAS9iB,EAAQU,EAAOJ,GAClC,YAqCA,SAASmT,KAAW,MAAOsP,GA6C3B,QAASxW,GAAOyW,EAAKC,EAASC,GAC5B,GAAmB,gBAARF,GAAkB,MAAO,KACpC,IAAI5P,GAAI2P,EAAM5Q,KAAK6Q,EACnB,KAAK5P,IAAM6P,GAAW7P,EAAE,GAAI,MAAO,KAEnC,IAAIF,IAAMd,OAAQgB,EAAE,GAAGf,cAAeC,IAAKc,EAAE,GAAGtL,QAAQ,KAAM,MAW9D,OAVAoL,GAAEX,GAAKW,EAAEd,OAASc,EAAEZ,IACpBY,EAAEV,MAAQU,EAAEd,OAAO7J,WAAW,GAAK,GAAK,EACxC2K,EAAET,IAAmB,MAAbS,EAAEZ,IAAI,IAAcY,EAAEZ,IAAI9R,OAAS0S,EAAEZ,IAAI9R,OACjD0S,EAAEP,OAASwQ,EAAUjQ,EAAEV,MAAQU,EAAET,IAC7BW,EAAE,KACJF,EAAEN,KAAOQ,EAAE,GACXF,EAAEL,KAAOK,EAAEP,OAAS,IAAMO,EAAEN,IAAM,GAClCM,EAAEJ,KAAOsQ,EAAWlQ,EAAEL,KAAMqQ,IAE1BD,IAAS/P,EAAEH,QAAUK,EAAE,IACpBF,EAST,QAASkQ,GAAYvQ,EAAMqQ,GACzB,MAAOhe,MAAK+M,IAAI,GAAIY,EAAO,IAAM,KAAOqQ,GAAU,KA1GpD,GAAIH,GAAQ,oDAqCRI,GAAa,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAwE/BE,GAAW9W,MAAOA,EAAOkH,MAAOA,EAAO2P,WAAYA,IAC5C,SAAU,MAAO,KAAM,OAAQ,MAAO,SAAU,MAAO,OAAQ,QACtEzJ,QAAQ,SAAU9P,GACpBwZ,EAAOxZ,GAAQ,SAAUyZ,GACvB,GAAIpQ,GAAI3G,EAAM+W,EACd,OAAOpQ,QAAyB,KAAZA,EAAErJ,GAAyBqJ,EAAErJ,GAAQ,QAI7DnJ,EAAOJ,QAAU+iB,OA8BXE,IAAI,SAASvjB,EAAQU,EAAOJ,GAClC,YAuCA,SAASkjB,GAAYzZ,EAAIF,EAAMI,GAC7B,GAAyB,IAArBoL,UAAU7U,OAAc,MAAO,UAAUd,EAAGG,GAAK,MAAO2jB,GAAWzZ,EAAIrK,EAAGG,GAC9E,IAAIuL,GAAOnB,MACPwZ,EAAQrY,EAAKsY,gBAAkBA,EAC/BC,EAAQvY,EAAKwY,WAAaA,EAC1Bnb,EAAMgb,EAAM5Z,GAAQA,EAAO8Z,EAAM9Z,EAAMuB,EAAKyY,UAAWzY,EAAK0Y,OAEhE,OAAOha,GAAKC,EAAItB,GAAO0D,KAAMf,EAAKe,MAAQf,EAAK0T,QAASnc,KAAK,SAAUqd,GACrE,GAAI9M,GAAIoL,EAAOvU,EAAIiW,EAAS5U,GAAMjH,QAAQ4F,EAAGga,YAG7C,OAFA7Q,GAAEzK,IAAMA,EACRyK,EAAErJ,KAAOA,EACFqJ,IAIX,QAASwQ,GAAgB7Z,GACvB,MAAO,gBAAgBH,KAAKG,GAgB9B,QAAS+Z,GAAW/Z,EAAMma,EAAIF,GAG5B,MAFAA,GAAoB,QAAXA,EAAmBA,EAAS,MAE9B,gDADPE,EAAY,eAAPA,EAAsBA,EAAK,cAC6B,IAAMna,EAAO,IAAMia,EAAS,MAxE3F,GAAIha,GAAO9J,EAAQ,gBACfse,EAASte,EAAQ,iBA4EjBikB,EAAYjkB,EAAQ,WACxBikB,GAAUT,WAAaA,EACvBS,EAAUL,UAAYA,EAEA,gBAAXljB,IAAuBA,EAAOJ,UAASI,EAAOJ,QAAU2jB,GAC7C,mBAAXpX,UAAwBA,OAAOoX,UAAYA,KAEnDC,WAAW,GAAGC,eAAe,EAAEC,gBAAgB,KAAKC,IAAI,SAASrkB,EAAQU,EAAOJ,GACnF,YAWA,SAAS2jB,GAAWK,EAAKV,GAGvB,GAFA1S,QAAQC,KAAK,gCACbD,QAAQ/L,IAAI,+EACNgB,eAAgB8d,IAAY,MAAO,IAAIA,GAAUK,EAEvDne,MAAKyd,UAAYA,GAAaK,EAAUL,UACxCzd,KAAKme,IAAMA,EACXne,KAAKoe,eACLpe,KAAK8F,YA0DP,QAASuY,GAAaza,EAAIF,EAAMI,GAG9B,MAFAiH,SAAQC,KAAK,uCACbD,QAAQ/L,IAAI,4EACL8e,EAAUT,WAAWzZ,EAAIF,EAAMI,GAAStH,KAAK,SAAU8hB,GAC5D,MAAOA,GAAKzE,UAchB,QAAS0E,GAAkBJ,EAAKK,GAE9B,MADAA,GAAiBA,MACV,SAAUvE,EAAMnb,EAAMid,EAAUjY,GACrCiH,QAAQC,KAAK,wCACbD,QAAQ/L,IAAI,kGACZ,IAAI0N,GAAOuN,EAAO,GAAKA,EAAO,KAAOA,EAAOiD,EAAOxQ,KAAKuN,GACpDtN,EAAOD,EAAOwQ,EAAOD,WAAWvQ,EAAM,KAAO,IACjD,IAAKC,EAAL,CAEAoP,EAAWA,GAAY,GAEvBjY,EAAUA,KACV,IAAI8Z,GAAc9Z,EAAQ8Z,aAAeY,EAAeZ,aAAeO,EAAIP,YACvEa,EAAU3a,EAAQ2a,SAAWD,EAAeC,SAAW,OACvDxgB,EAAO6F,EAAQ7F,MAAQugB,EAAevgB,MAAQ,GAE9CygB,EAAMP,EAAIQ,kBACdD,GAAInc,KAAOkc,EACXC,EAAIE,UAAUnhB,MAAQkP,CAGtB,IAAIkS,GAAMV,EAAI9gB,YASd,OARAwhB,GAAI5gB,KAAKR,MAAQQ,EAGjBygB,EAAI1gB,QAAQ6gB,GACZA,EAAI7gB,QAAQ4f,GAEZc,EAAIxf,MAAMJ,GACNid,EAAW,GAAG2C,EAAIhe,KAAK5B,EAAOid,GAC3B2C,IA3HX,GAAIxB,GAASrjB,EAAQ,cAoBrBikB,GAAUhjB,UAAUgkB,QAAU,SAAUC,GACtChU,QAAQC,KAAK,kBACbD,QAAQ/L,IAAI,sHACZwD,QAAQkD,IAAI1F,KAAK8F,UAAUtJ,KAAKuiB,IAGlCjB,EAAUhjB,UAAUuiB,WAAa,SAAU3Z,EAAMI,GAC/CiH,QAAQC,KAAK,+CACbD,QAAQ/L,IAAI,6CACZ,IAAImf,GAAMne,KAAKme,GAEf,KADAza,EAAOA,GAAQ,YACH1D,MAAKoe,YAAa,MAAOpe,MAAKoe,YAAY1a,EACtD,IAAI4a,IAAQ5a,KAAMA,EAAMgW,KAAM6E,EAAiBJ,EAAKra,GAEpD,IADA9D,KAAKoe,YAAY1a,GAAQ4a,EACZ,YAAT5a,EAAoB,CACtB,GAAI+B,GAAUqY,EAAUT,WAAWc,EAAKza,EAAMI,GAAStH,KAAK,SAAU6gB,GAEpE,MADAiB,GAAK5E,KAAO2D,EAAW3D,KAChB4E,GAETte,MAAK8F,SAASqJ,KAAK1J,GACnB6Y,EAAKQ,QAAU,SAAUzG,GACvBtN,QAAQC,KAAK,4DACbvF,EAAQjJ,KAAK6b,QAGfiG,GAAKQ,QAAU,SAAUzG,GACvBtN,QAAQC,KAAK,4DACbqN,IAGJ,OAAOiG,IAgCTR,EAAUO,YAAcA,EAqDxBP,EAAUkB,WAAa9B,EAAOxQ,KAE9BnS,EAAOJ,QAAU2jB,IAEdrD,cAAc,KAAKwE,IAAI,SAASplB,EAAQU,EAAOJ,GAClDI,EAAOJ,QAAUN,EAAQ,iBAEtBqlB,cAAc,KAAKC,IAAI,SAAStlB,EAAQU,EAAOJ,IAClD,SAAW4N,GACX,YAEAlN,QAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,GAGT,IAMIsJ,GANAqY,EAAYvlB,EAAQ,cAEpBwlB,EAEJ,SAAgC5kB,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQO,QAAWP,IAFjD2kB,EAQtCrY,GADkB,mBAATkB,MACFA,KACoB,mBAAXvB,QACTA,WACoB,KAAXqB,EACTA,MACoB,KAAXxN,EACTA,EAEA8O,SAAS,gBAGlB,IAAIX,IAAS,EAAI2W,EAAoB,SAAGtY,EACxC5M,GAAiB,QAAIuO,IAClBtO,KAAK4F,KAAuB,mBAAX+H,QAAyBA,OAAyB,mBAATE,MAAuBA,KAAyB,mBAAXvB,QAAyBA,aAExH4Y,aAAa,KAAKC,IAAI,SAAS1lB,EAAQU,EAAOJ,GACjD,YAMA,SAASqlB,GAAyBzY,GACjC,GAAI2B,GACA+W,EAAU1Y,EAAKC,MAanB,OAXuB,kBAAZyY,GACNA,EAAQnJ,WACX5N,EAAS+W,EAAQnJ,YAEjB5N,EAAS+W,EAAQ,cACjBA,EAAQnJ,WAAa5N,GAGtBA,EAAS,eAGHA,EAnBR7N,OAAO8P,eAAexQ,EAAS,cAC9BsD,OAAO,IAERtD,EAAiB,QAAIqlB,OAkBfE,IAAI,SAAS7lB,EAAQU,EAAOJ,GAClC,YAmBA,SAASwlB,GAAOvH,GACd,GAAIN,GAAU5I,UAAU7U,OAAS,OAAsB+M,KAAjB8H,UAAU,GAAmBA,UAAU,GAAK,QAElF,OAAO,UAAUpT,EAAU6U,GACzB,GAAIwD,GAAQxD,IACR/K,EAAOwS,EAAMxS,KAAOwS,EAAMxS,KAAOga,EAAMC,UAAUC,iBAAiB1H,EAAMnY,QAExEga,EAAO2F,EAAMC,UAAUE,QAAQna,GAE/BhC,EAAKuQ,EAAMzH,KAAKvP,aAChBwb,EAAQxE,EAAMzH,KAAKiM,KAEnBxE,GAAM6L,SAASC,YAEZtH,EAAMsB,KACTtB,EAAMsB,GAAQiG,EAAOC,WAAWC,mBAAmBnG,EAAMrW,GACzD+U,EAAMsB,GAAM/a,UAGdyZ,EAAMsB,GAAQ,UACd9F,EAAM6L,SAASK,oBAAoB3G,KAAKO,IAG1Cne,GACEyG,KAAM+d,EAActlB,QAAQulB,QAC5BC,SAAW1I,QAASA,EAASlS,KAAMA,EAAM+S,MAAOA,MAKtD,QAAS8H,GAAQrI,GACf,GAAIN,GAAU5I,UAAU7U,OAAS,OAAsB+M,KAAjB8H,UAAU,GAAmBA,UAAU,GAAK,SAElF,OAAO,UAAUpT,EAAU6U,GACzB,GAAIwD,GAAQxD,IACR/K,EAAOwS,EAAMxS,KAAOwS,EAAMxS,KAAOga,EAAMC,UAAUa,kBAAkBtI,EAAMnY,QAEzEga,EAAO2F,EAAMC,UAAUE,QAAQna,GAC/B+S,EAAQxE,EAAMzH,KAAKiM,KAEnBxE,GAAM6L,SAASC,YAEbtH,EAAMsB,KACRtB,EAAMsB,GAAMvZ,OACZiY,EAAMsB,GAAMgB,cAGd9G,EAAM6L,SAASK,oBAAoB3f,KAAKuZ,GAG1CtB,EAAMsB,GAAQ,KAEdne,GACEyG,KAAM+d,EAActlB,QAAQ2lB,SAC5BH,SAAW1I,QAASA,EAASlS,KAAMA,EAAM+S,MAAOA,MAKtD,QAASiI,GAAWxI,EAAON,GACzB,MAAO,UAAUhc,EAAU6U,GACzB,GAAImH,GAAUM,EAAMxS,IAEpB9J,IACEyG,KAAM+d,EAActlB,QAAQ6lB,WAC5BL,SAAW1I,QAASA,MAlF1Bjd,OAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,IAETtD,EAAQwlB,OAASA,EACjBxlB,EAAQsmB,QAAUA,EAClBtmB,EAAQymB,WAAaA,CAErB,IAAIE,GAAejnB,EAAQ,2BAEvBymB,EAMJ,SAAgC7lB,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQO,QAASP,IAN5CqmB,GAEvClB,EAAQ/lB,EAAQ,iBAEhBqmB,EAASrmB,EAAQ,oBA0ElBknB,0BAA0B,GAAGC,iBAAiB,GAAGC,gBAAgB,KAAKC,IAAI,SAASrnB,EAAQU,EAAOJ,GACrG,YAiBA,SAASgnB,GAAY/I,GACnB,MAAO,UAAUtc,EAAU6U,GACzB,GAAIwQ,GAAcvB,EAAMC,UAAUuB,aAAahJ,EAAMxS,MACjDkS,EAAUuJ,EAAcC,aAAaH,EAEzCrlB,GAASP,EAAWuc,GAASM,KApBjCvd,OAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,IAETtD,EAAQgnB,YAAcA,CAEtB,IAAIE,GAAgBxnB,EAAQ,8BAExB+lB,EAAQ/lB,EAAQ,iBAEhByB,EAA4BzB,EAAQ,kDAEpC0B,EAEJ,SAAiCd,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIE,KAAa,IAAW,MAAPF,EAAe,IAAK,GAAIG,KAAOH,GAAWI,OAAOC,UAAUC,eAAeX,KAAKK,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,GAAgC,OAAtBD,GAAOK,QAAUP,EAAYE,GAFzNW,KAatCimB,iDAAiD,GAAGC,6BAA6B,GAAGP,gBAAgB,KAAKQ,IAAI,SAAS5nB,EAAQU,EAAOJ,GACxI,YA4BA,SAASqY,GAAuB/X,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQO,QAASP,GAEvF,QAASgC,GAAYilB,GACnB,MAAO,UAAU5lB,EAAU6U,GACzB,GAAIwD,GAAQxD,IACRgR,GAAe,EAAIjmB,EAAOG,oBAAoBylB,EAAcxlB,GAG5D8lB,EAASF,EAAWE,OAAOC,SAC3BC,EAAW3N,EAAMzH,KAAKvP,aAAaE,YAEvCykB,GAAS9jB,QAAQmW,EAAMzH,KAAKvP,aAAaygB,YAEzC,KAAK,GAAIxE,GAAQwI,EAAOhR,OAAQwI,IAAUA,EAAM3W,KAAM2W,EAAQwI,EAAOhR,OACnEwI,EAAM3b,MAAM8b,cAAgBoI,EAAaR;6EAG3CrlB,IACEyG,KAAMwf,EAAc/mB,QAAQgnB,aAC5BxB,SAAWxd,OAbA,iBAagB0e,WAAYA,EAAYE,OAAQA,EAAQE,SAAUA,MAKnF,QAASG,GAAYP,GACnB,MAAO,UAAU5lB,GAGfA,GACEyG,KAAMwf,EAAc/mB,QAAQknB,aAC5B1B,SAAWxd,OAJA,kBASjB,QAAS5G,GAAwBihB,GAC/B,GAAI8E,GAAQniB,IAEZ,OAAO,UAAUlE,EAAU6U,GACzB,GAAIwD,GAAQxD,IACRyR,EAAiBC,EAAmBjoB,KAAK+nB,EAAO9E,GAChDzZ,EAAKuQ,EAAMzH,KAAKvP,YAEpBmlB,GAAkBtnB,QAAQqiB,WAAWzZ,EAAIwe,GAAgB5lB,KAAK,SAAU6jB,GACtEvkB,GACEyG,KAAMwf,EAAc/mB,QAAQunB,qBAC5B/B,SAAWH,oBAAqBA,QAMxC,QAASmC,GAAYtc,GACnB,MAAO,UAAUpK,GACf,GAAImkB,GAAc/Z,CAElBpK,IACEyG,KAAMwf,EAAc/mB,QAAQynB,aAC5BjC,SAAWP,YAAaA,MAK9B,QAASoC,GAAmBhF,GAC1B,MAAOqF,GAAgBC,YAAc,IAAMtF,EAAa,IAAMqF,EAAgBE,gBAAkB,IAAMF,EAAgBG,sBA1FxHhoB,OAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,IAETtD,EAAQsC,YAAcA,EACtBtC,EAAQ8nB,YAAcA,EACtB9nB,EAAQiC,wBAA0BA,EAClCjC,EAAQqoB,YAAcA,CAEtB,IAAIM,GAAejpB,EAAQ,2BAEvBkoB,EAAgBvP,EAAuBsQ,GAEvCC,EAAmBlpB,EAAQ,oBAE3ByoB,EAAoB9P,EAAuBuQ,GAE3CC,EAA8BnpB,EAAQ,oDAEtCynB,EAMJ,SAAiC7mB,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIE,KAAa,IAAW,MAAPF,EAAe,IAAK,GAAIG,KAAOH,GAAWI,OAAOC,UAAUC,eAAeX,KAAKK,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,GAAgC,OAAtBD,GAAOK,QAAUP,EAAYE,GANvNqoB,GAEvCtnB,EAAS7B,EAAQ,SAEjB6oB,EAAkB7oB,EAAQ,kCAuE3BopB,mDAAmD,GAAGC,0BAA0B,GAAGC,+BAA+B,GAAGnmB,MAAQ,GAAGomB,mBAAmB,KAAKC,IAAI,SAASxpB,EAAQU,EAAOJ,GACvL,YAEAU,QAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,IAETtD,EAAQa,QAAUH,OAAOyoB,QACvBzC,WAAY,aACZ0C,gBAAiB,iBACjB5C,SAAU,UACVJ,QAAS,SACTiD,eAAgB,gBAChBC,OAAQ,eAGJC,IAAI,SAAS7pB,EAAQU,EAAOJ,GAClC,YAEAU,QAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,IAETtD,EAAQa,QAAUH,OAAOyoB,QACvBtB,aAAc,cACdE,aAAc,cACdyB,aAAc,cACdlB,aAAc,cACdF,qBAAsB,wBAGlBqB,IAAI,SAAS/pB,EAAQU,EAAOJ,GAClC,YAEAU,QAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,GAEetD,GAAQgC,mBAC9BF,KAAM,WACJ,GAAIkmB,GAAQniB,KAERrE,EAAQuT,UAAU7U,OAAS,OAAsB+M,KAAjB8H,UAAU,GAAmBA,UAAU,MACvEtT,EAAmBsT,UAAU7U,OAAS,OAAsB+M,KAAjB8H,UAAU,GAAmBA,UAAU,KAEtFlP,MAAKrE,MAAQA,EACbqE,KAAKpE,iBAAmBA,EACxBoE,KAAK6jB,eAAiBC,SAASC,eAAe,kBAAkBF,eAEhE7jB,KAAK6jB,eAAerQ,QAAQ,SAAUwQ,GACpCA,EAASC,iBAAiB,SAAU9B,EAAMK,YAAY0B,KAAK/B,MAG7DniB,KAAKmkB,UAEP3B,YAAa,SAAqBpK,GAChC,GAAIlS,GAA+B,SAAvBkS,EAAMnY,OAAOxC,KACzBuC,MAAKpE,iBAAiB4mB,YAAYtc,IAEpCie,OAAQ,WACMnkB,KAAKrE,MAEXia,UAAU,qBAIdwO,IAAI,SAASvqB,EAAQU,EAAOJ,GAClC,YA2CA,SAASkqB,KACP,IAAK,GAAIhH,KAAciH,GAAiBC,gBAAiB,CACvD,GAAIC,GAAmBV,SAASW,cAAc,SAC9CD,GAAiB/mB,MAAQ6mB,EAAiBC,gBAAgBlH,GAC1DmH,EAAiBE,KAAOJ,EAAiBC,gBAAgBlH,GACzDrd,KAAK2kB,mBAAmBC,YAAYJ,IA9CxC3pB,OAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,IAETtD,EAAQ+B,4BAA0BkL,EAElC,IAAIkd,GAAmBzqB,EAAQ,gCAEDM,GAAQ+B,yBACpCD,KAAM,WACJ,GAAIN,GAAQuT,UAAU7U,OAAS,OAAsB+M,KAAjB8H,UAAU,GAAmBA,UAAU,MACvEtT,EAAmBsT,UAAU7U,OAAS,OAAsB+M,KAAjB8H,UAAU,GAAmBA,UAAU,KAEtFlP,MAAKrE,MAAQA,EACbqE,KAAKpE,iBAAmBA,EACxBoE,KAAK2kB,mBAAqBb,SAASC,eAAe,uBAElD/jB,KAAK2kB,mBAAmBV,iBAAiB,SAAUjkB,KAAK6kB,eAAeX,KAAKlkB,OAE5EqkB,EAAsBjqB,KAAK4F,MAE3BA,KAAKmkB,UAEPU,eAAgB,SAAwBzM,GACtC,GAAIiF,GAAajF,EAAMnY,OAAOxC,KAC9BuC,MAAKpE,iBAAiBQ,wBAAwBihB,IAEhD8G,OAAQ,WACN,GAAIhC,GAAQniB,KAERrE,EAAQqE,KAAKrE,KAEjBA,GAAMia,UAAU,WACd,GAAIzB,GAAQxY,EAAMgV,WAEdmU,EAAe3Q,EAAM6L,SAASC,YAAc,MAAQ,QAExDkC,GAAMwC,mBAAmBI,UAAUD,GAHjB,gBAiBrBE,gCAAgC,KAAKC,IAAI,SAASprB,EAAQU,EAAOJ,GACpE,YAuCA,SAAS+qB,KACP,GAAIC,GAASnlB,KAETolB,EAAa,MAEd5R,QAAQpZ,KAAK4F,KAAK2Y,MAAO,SAAUsB,GACpCA,EAAKoL,aAAa,YAAaD,GAE/BnL,EAAKgK,iBAAiB,YAAakB,EAAOppB,kBAAkB4jB,QAC5D1F,EAAKgK,iBAAiB,UAAWkB,EAAOppB,kBAAkB0kB,SAE1D0E,EAAOG,MAAMF,GAAcnL,EAC3BmL,MAjDJvqB,OAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,GAEOtD,GAAQ6B,WACtBC,KAAM,WACJ,GAAIN,GAAQuT,UAAU7U,OAAS,OAAsB+M,KAAjB8H,UAAU,GAAmBA,UAAU,MACvEnT,EAAoBmT,UAAU7U,OAAS,OAAsB+M,KAAjB8H,UAAU,GAAmBA,UAAU,KAEvFlP,MAAKrE,MAAQA,EACbqE,KAAKjE,kBAAoBA,EACzBiE,KAAK2Y,MAAQmL,SAASyB,uBAAuB,QAC7CvlB,KAAKslB,SAELJ,EAAiB9qB,KAAK4F,MAEtBA,KAAKmkB,UAEPA,OAAQ,WACN,GAAIhC,GAAQniB,KAERrE,EAAQqE,KAAKrE,KAEjBA,GAAMia,UAAU,WACd,GAAIzB,GAAQxY,EAAMgV,UAElB,KAAK,GAAIsJ,KAAQ9F,GAAMzH,KAAKiM,MAAO,CACjC,GAAI6M,GAAOrD,EAAMmD,MAAMrL,GACnBwL,EAAWtR,EAAMzH,KAAKiM,MAAMsB,GAC5ByL,EAASD,EAAW,MAAQ,QAGhCD,GAAKT,UAAUW,GAFI,qBAwBrBC,IAAI,SAAS9rB,EAAQU,EAAOJ,GAClC,YAEAU,QAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,GAEatD,GAAQoqB,iBAC5BqB,EAAG,uBACHtrB,EAAG,wBACH2C,EAAG,uBACHiE,EAAG,kBACHmB,EAAG,mBACHgB,EAAG,mBACHyD,EAAG,cACHI,EAAG,WACHY,EAAG,UACHI,EAAG,eACHK,GAAI,YACJO,GAAI,aACJC,GAAI,UACJI,GAAI,YACJI,GAAI,gBACJE,GAAI,WACJY,GAAI,gBACJsB,GAAI,mBACJ6B,GAAI,aACJ+C,GAAI,eACJS,GAAI,aACJkB,GAAI,YACJK,GAAI,YACJyC,GAAI,kBACJO,GAAI,wBACJyB,GAAI,wBACJY,GAAI,uBACJI,GAAI,wBACJQ,GAAI,wBACJU,GAAI,oBACJS,GAAI,oBACJe,GAAI,mBACJ4B,GAAI,gBACJK,GAAI,uBACJS,GAAI,qBACJc,GAAI,gBACJe,GAAI,cACJE,GAAI,cACJI,GAAI,eACJG,GAAI,eACJwB,GAAI,SACJO,GAAI,QACJ4B,GAAI,QACJK,GAAI,aACJE,GAAI,kBACJQ,GAAI,oBACJa,GAAI,kBACJU,GAAI,UACJE,GAAI,oBACJC,GAAI,oBACJC,GAAI,iBACJC,GAAI,iBACJC,GAAI,aACJC,GAAI,aACJC,GAAI,cACJC,GAAI,gBACJC,GAAI,UACJC,GAAI,WACJC,GAAI,OACJC,GAAI,gBACJC,GAAI,cACJC,GAAI,gBACJC,GAAI,gBACJC,GAAI,gBACJC,GAAI,cACJC,GAAI,WACJC,GAAI,YACJC,GAAI,eACJC,GAAI,OACJC,GAAI,eACJC,GAAI,UACJC,GAAI,WACJC,GAAI,UACJC,GAAI,QACJC,GAAI,WACJC,GAAI,YACJC,GAAI,eACJC,GAAI,aACJC,GAAI,UACJC,GAAI,UACJC,GAAI,gBACJC,GAAI,kBACJC,GAAI,kBACJC,GAAI,eACJC,GAAI,iBACJC,GAAI,eACJC,GAAI,gBACJC,GAAI,mBACJC,GAAI,gBACJC,GAAI,aACJC,GAAI,kBACJC,GAAI,cACJC,GAAI,cACJC,GAAI,iBACJC,GAAI,aACJC,GAAI,cACJC,GAAI,YACJC,GAAI,kBACJC,GAAI,eACJC,GAAI,kBACJC,IAAK,kBACLC,IAAK,eACLC,IAAK,cACLC,IAAK,aACLC,IAAK,QACLC,IAAK,QACLC,IAAK,WACLC,IAAK,OACLC,IAAK,UACLC,IAAK,WACLC,IAAK,SACLC,IAAK,SACLC,IAAK,cACLC,IAAK,QACLC,IAAK,cACLC,IAAK,YACLC,IAAK,aACLC,IAAK,cACLC,IAAK,aACLC,IAAK,iBACLC,IAAK,oBACLC,IAAK,eACLC,IAAK,WACLC,IAAK,aACLC,IAAK,iBACLC,IAAK,aACLC,IAAK,WACLC,IAAK,gBAGD/E,IAAI,SAAShsB,EAAQU,EAAOJ,GAClC,YAEAU,QAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,GAEatD,GAAQ0wB,gBAAkBhwB,OAAOyoB,QACrDwH,gBAAiB,EACjBC,KAAM,EACNxH,gBAAiB,EACjB5C,SAAU,IACVJ,QAAS,IACTiD,eAAgB,IAChB3C,WAAY,WAGRiF,IAAI,SAASjsB,EAAQU,EAAOJ,GAClC,YAEAU,QAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,GAEUtD,GAAQmnB,aAAezmB,OAAOyoB,QAC/CsC,EAAM,iBACNtrB,EAAM,OACN+H,EAAM,iBACN2oB,IAAM,UACNC,IAAM,SACNC,IAAM,gBACNC,IAAM,oBAGFpF,IAAI,SAASlsB,EAAQU,EAAOJ,GAClC,YAEAU,QAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,GAST,IAAI2tB,GAAiBjxB,EAAQixB,eAAiBvwB,OAAOyoB,QACnD+H,YAAa,aACbC,YAAa,eAGXC,EAAuBpxB,EAAQoxB,sBACjCC,IAAK,mBACLC,KAAM,KACNC,IAAKN,EAAeC,YACpBM,WAAY,wEAGIxxB,GAAQwoB,YAAc4I,EAAqBC,IAAM,IAAMD,EAAqBE,KAAO,IAAMF,EAAqBG,IAE1GvxB,EAAQyoB,gBAAkB,MACpBzoB,EAAQ0oB,sBAAwB,UAEtDmD,IAAI,SAASnsB,EAAQU,EAAOJ,GAClC,YAgBA,SAASqY,GAAuB/X,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQO,QAASP,GAdvFI,OAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,GAGT,IAAI/B,GAAS7B,EAAQ,SAEjB+xB,EAAe/xB,EAAQ,4BAEvBgyB,EAAgBrZ,EAAuBoZ,GAEvCE,EAAmBjyB,EAAQ,gCAE3BkyB,EAAoBvZ,EAAuBsZ,GAI3CE,GAAc,EAAItwB,EAAOmY,kBAC3BnH,KAAMmf,EAAc7wB,QACpBglB,SAAU+L,EAAkB/wB,SAG9Bb,GAAQa,QAAUgxB,IAEfC,2BAA2B,GAAGC,+BAA+B,GAAGlvB,MAAQ,KAAKipB,IAAI,SAASpsB,EAAQU,EAAOJ,GAC5G,YAkBA,SAASqY,GAAuB/X,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQO,QAASP,GAUvF,QAAS0xB,KACP,GAAIhY,GAAQjF,UAAU7U,OAAS,OAAsB+M,KAAjB8H,UAAU,GAAmBA,UAAU,GAAKkd,EAC5Evb,EAAS3B,UAAU,GACnB3M,EAAOsO,EAAOtO,KACdie,EAAU3P,EAAO2P,OAGrB,QAAQje,GACN,IAAK+d,GAActlB,QAAQulB,QAC3B,IAAKD,GAActlB,QAAQ2lB,SAC3B,IAAKL,GAActlB,QAAQwoB,eAC3B,IAAKlD,GAActlB,QAAQuoB,gBAC3B,IAAKjD,GAActlB,QAAQ6lB,WAC3B,IAAKP,GAActlB,QAAQyoB,OACzB,MAAO3R,MAAaqC,EAAOqM,EAC7B,SACE,MAAOrM,IA1CbtZ,OAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,GAGT,IAAIqU,GAAWjX,OAAOkX,QAAU,SAAU9R,GAAU,IAAK,GAAInG,GAAI,EAAGA,EAAIoV,UAAU7U,OAAQP,IAAK,CAAE,GAAI+J,GAASqL,UAAUpV,EAAI,KAAK,GAAIc,KAAOiJ,GAAchJ,OAAOC,UAAUC,eAAeX,KAAKyJ,EAAQjJ,KAAQqF,EAAOrF,GAAOiJ,EAAOjJ,IAAY,MAAOqF,GAEvP9F,GAAQa,QAAUmxB,CAElB,IAAIrL,GAAejnB,EAAQ,8BAEvBymB,EAAgB9N,EAAuBsO,GAEvCgC,EAAejpB,EAAQ,8BAMvBuyB,GAJgB5Z,EAAuBsQ,IAKzChL,QAAS,OACT8J,UACAhc,KAAM,KACNzI,aAAgBuJ,OAAO2lB,aAAe,GAAI3lB,QAAO2lB,aAAiB,GAAI3lB,QAAO4lB,mBAC7E3T,aAuBC4T,6BAA6B,GAAGC,6BAA6B,KAAKtG,IAAI,SAASrsB,EAAQU,EAAOJ,GACjG,YAkBA,SAASqY,GAAuB/X,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQO,QAASP,GASvF,QAAS0xB,KACP,GAAIhY,GAAQjF,UAAU7U,OAAS,OAAsB+M,KAAjB8H,UAAU,GAAmBA,UAAU,GAAKkd,EAC5Evb,EAAS3B,UAAU,GACnB3M,EAAOsO,EAAOtO,KACdie,EAAU3P,EAAO2P,OAErB,QAAQje,GACN,IAAKwf,GAAc/mB,QAAQgnB,aAC3B,IAAKD,GAAc/mB,QAAQknB,aAC3B,IAAKH,GAAc/mB,QAAQunB,qBAC3B,IAAKR,GAAc/mB,QAAQynB,aACzB,MAAO3Q,MAAaqC,EAAOqM,EAC7B,SACE,MAAOrM,IAtCbtZ,OAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,GAGT,IAAIqU,GAAWjX,OAAOkX,QAAU,SAAU9R,GAAU,IAAK,GAAInG,GAAI,EAAGA,EAAIoV,UAAU7U,OAAQP,IAAK,CAAE,GAAI+J,GAASqL,UAAUpV,EAAI,KAAK,GAAIc,KAAOiJ,GAAchJ,OAAOC,UAAUC,eAAeX,KAAKyJ,EAAQjJ,KAAQqF,EAAOrF,GAAOiJ,EAAOjJ,IAAY,MAAOqF,GAEvP9F,GAAQa,QAAUmxB,CAElB,IAAIrL,GAAejnB,EAAQ,8BAIvBipB,GAFgBtQ,EAAuBsO,GAExBjnB,EAAQ,+BAEvBkoB,EAAgBvP,EAAuBsQ,GAIvCsJ,GACF1K,WAAY,KACZzB,aAAa,EACb6B,SAAU,KACVzB,oBAAqB,QAoBpBkM,6BAA6B,GAAGC,6BAA6B,KAAKrG,IAAI,SAAStsB,EAAQU,EAAOJ,GACjG,YAiBA,SAASqY,GAAuB/X,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQO,QAASP,GAKvF,QAASgyB,GAAeL,GACtB,OAAO,EAAI1wB,EAAO2V,aAAaqb,EAAQ1xB,QAASoxB,EAAcxa,GArBhE/W,OAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,IAETtD,EAAQa,QAAUyxB,CAElB,IAAI/wB,GAAS7B,EAAQ,SAEjB8yB,EAAc9yB,EAAQ,eAEtB+yB,EAAepa,EAAuBma,GAEtCE,EAAShzB,EAAQ,qBAEjB6yB,EAAUla,EAAuBqa,GAIjCC,EAAmBpmB,OAAOqmB,sCAAwCrxB,EAAOuZ,QACzErD,EAAakb,GAAiB,EAAIpxB,EAAOuV,iBAAiB2b,EAAa5xB,YAMxEgyB,oBAAoB,GAAGhwB,MAAQ,GAAGiwB,cAAc,KAAK7G,IAAI,SAASvsB,EAAQU,EAAOJ,GACpF,YAEAU,QAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,GAEQtD,GAAQgmB,WAAatlB,OAAOyoB,QAC3C4J,aAAc,SAAsBjT,GAKlC,MAJY,KAIGlb,KAAK+M,IAAI,GAAImO,EAHf,IACA,KAIfmG,mBAAoB,SAA4BnG,EAAM9c,GACpD,GAAIyhB,GAAY5e,KAAKktB,aAAajT,GAC9BkT,EAAahwB,EAAawhB,kBAM9B,OAJAwO,GAAW5qB,KAAO,SAClB4qB,EAAWnvB,QAAQb,EAAaygB,aAChCuP,EAAWvO,UAAUnhB,MAAQmhB,EAEtBuO,UAIL9G,IAAI,SAASxsB,EAAQU,EAAOJ,GAClC,YAEAU,QAAO8P,eAAexQ,EAAS,cAC7BsD,OAAO,IAETtD,EAAQ0lB,cAAYzY,EAEpB,IAAIgmB,GAAmBvzB,EAAQ,iCAEfM,GAAQ0lB,UAAYhlB,OAAOyoB,QACzC+J,QAAS,SAAiBznB,GACxB,MAAOA,GAAK,IAEdma,QAAS,SAAiBna,GACxB,MAAOA,GAAK,IAEd0nB,gBAAiB,SAAyB1nB,GACxC,MAAOA,GAAK,IAEdwb,aAAc,SAAsBxb,GAClC,MAAO5F,MAAKutB,YAAY3nB,GAAoD,IAA5CwnB,EAAiBvC,gBAAgBlK,SAAuC,IAArB3gB,KAAKqtB,QAAQznB,IAElG2nB,YAAa,SAAqB3nB,GAChC,MAAO5F,MAAKqtB,QAAQznB,KAAUwnB,EAAiBvC,gBAAgBtK,SAA0C,IAA/BvgB,KAAKstB,gBAAgB1nB,IAEjGka,iBAAkB,SAA0B7f,GAE1C,MAAO,IAAI+B,aADG,IACkBoW,MAAMnY,OAAOutB,aAAa,aAAc,KAE1E9M,kBAAmB,SAA2BzgB,GAE5C,MAAO,IAAI+B,aADG,IACkBoW,MAAMnY,OAAOutB,aAAa,aAAc,SAIzEC,iCAAiC,UAAU","file":"../index.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _configureStore = require('./src/store/configureStore');\n\nvar _configureStore2 = _interopRequireDefault(_configureStore);\n\nvar _midiPiano = require('./src/components/midi-piano');\n\nvar _midiInstrumentsSelector = require('./src/components/midi-instruments-selector');\n\nvar _midiAudioSelector = require('./src/components/midi-audio-selector');\n\nvar _midiEventsActionCreators = require('./src/action-creators/midi-events-action-creators');\n\nvar MidiEvents = _interopRequireWildcard(_midiEventsActionCreators);\n\nvar _midiSetupActionCreators = require('./src/action-creators/midi-setup-action-creators');\n\nvar MidiSetup = _interopRequireWildcard(_midiSetupActionCreators);\n\nvar _redux = require('redux');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar store = (0, _configureStore2.default)();\nvar midiSetupActions = (0, _redux.bindActionCreators)(MidiSetup, store.dispatch);\nvar midiEventsActions = (0, _redux.bindActionCreators)(MidiEvents, store.dispatch);\n\n_midiPiano.MidiPiano.init(store, midiEventsActions);\n_midiInstrumentsSelector.MidiInstrumentsSelector.init(store, midiSetupActions);\n_midiAudioSelector.MidiAudioSelector.init(store, midiSetupActions);\n\nmidiSetupActions.loadSoundfontInstrument('acoustic_grand_piano');\n\nif (navigator.requestMIDIAccess) {\n  navigator.requestMIDIAccess({ sysex: false }).then(midiSetupActions.midiSuccess);\n}\n\n},{\"./src/action-creators/midi-events-action-creators\":39,\"./src/action-creators/midi-setup-action-creators\":41,\"./src/components/midi-audio-selector\":44,\"./src/components/midi-instruments-selector\":45,\"./src/components/midi-piano\":46,\"./src/store/configureStore\":54,\"redux\":25}],2:[function(require,module,exports){\nmodule.exports = ADSR\n\nfunction ADSR(audioContext){\n  var node = audioContext.createGain()\n\n  var voltage = node._voltage = getVoltage(audioContext)\n  var value = scale(voltage)\n  var startValue = scale(voltage)\n  var endValue = scale(voltage)\n\n  node._startAmount = scale(startValue)\n  node._endAmount = scale(endValue)\n\n  node._multiplier = scale(value)\n  node._multiplier.connect(node)\n  node._startAmount.connect(node)\n  node._endAmount.connect(node)\n\n  node.value = value.gain\n  node.startValue = startValue.gain\n  node.endValue = endValue.gain\n\n  node.startValue.value = 0\n  node.endValue.value = 0\n\n  Object.defineProperties(node, props)\n  return node\n}\n\nvar props = {\n\n  attack: { value: 0, writable: true },\n  decay: { value: 0, writable: true },\n  sustain: { value: 1, writable: true },\n  release: {value: 0, writable: true },\n\n  getReleaseDuration: {\n    value: function(){\n      return this.release\n    }\n  },\n\n  start: {\n    value: function(at){\n      var target = this._multiplier.gain\n      var startAmount = this._startAmount.gain\n      var endAmount = this._endAmount.gain\n\n      this._voltage.start(at)\n      this._decayFrom = this._decayFrom = at+this.attack\n      this._startedAt = at\n\n      var sustain = this.sustain\n\n      target.cancelScheduledValues(at)\n      startAmount.cancelScheduledValues(at)\n      endAmount.cancelScheduledValues(at)\n\n      endAmount.setValueAtTime(0, at)\n\n      if (this.attack){\n        target.setValueAtTime(0, at)\n        target.linearRampToValueAtTime(1, at + this.attack)\n\n        startAmount.setValueAtTime(1, at)\n        startAmount.linearRampToValueAtTime(0, at + this.attack)\n      } else {\n        target.setValueAtTime(1, at)\n        startAmount.setValueAtTime(0, at)\n      }\n\n      if (this.decay){\n        target.setTargetAtTime(sustain, this._decayFrom, getTimeConstant(this.decay))\n      }\n    }\n  },\n\n  stop: {\n    value: function(at, isTarget){\n      if (isTarget){\n        at = at - this.release\n      }\n\n      var endTime = at + this.release\n      if (this.release){\n\n        var target = this._multiplier.gain\n        var startAmount = this._startAmount.gain\n        var endAmount = this._endAmount.gain\n\n        target.cancelScheduledValues(at)\n        startAmount.cancelScheduledValues(at)\n        endAmount.cancelScheduledValues(at)\n\n        var expFalloff = getTimeConstant(this.release)\n\n        // truncate attack (required as linearRamp is removed by cancelScheduledValues)\n        if (this.attack && at < this._decayFrom){\n          var valueAtTime = getValue(0, 1, this._startedAt, this._decayFrom, at)\n          target.linearRampToValueAtTime(valueAtTime, at)\n          startAmount.linearRampToValueAtTime(1-valueAtTime, at)\n          startAmount.setTargetAtTime(0, at, expFalloff)\n        }\n\n        endAmount.setTargetAtTime(1, at, expFalloff)\n        target.setTargetAtTime(0, at, expFalloff)\n      }\n\n      this._voltage.stop(endTime)\n      return endTime\n    }\n  },\n\n  onended: {\n    get: function(){\n      return this._voltage.onended\n    },\n    set: function(value){\n      this._voltage.onended = value\n    }\n  }\n\n}\n\nvar flat = new Float32Array([1,1])\nfunction getVoltage(context){\n  var voltage = context.createBufferSource()\n  var buffer = context.createBuffer(1, 2, context.sampleRate)\n  buffer.getChannelData(0).set(flat)\n  voltage.buffer = buffer\n  voltage.loop = true\n  return voltage\n}\n\nfunction scale(node){\n  var gain = node.context.createGain()\n  node.connect(gain)\n  return gain\n}\n\nfunction getTimeConstant(time){\n  return Math.log(time+1)/Math.log(100)\n}\n\nfunction getValue(start, end, fromTime, toTime, at){\n  var difference = end - start\n  var time = toTime - fromTime\n  var truncateTime = at - fromTime\n  var phase = truncateTime / time\n  var value = start + phase * difference\n\n  if (value <= start) {\n      value = start\n  }\n  if (value >= end) {\n      value = end\n  }\n\n  return value\n}\n\n},{}],3:[function(require,module,exports){\n'use strict'\n\n// DECODE UTILITIES\nfunction b64ToUint6 (nChr) {\n  return nChr > 64 && nChr < 91 ? nChr - 65\n    : nChr > 96 && nChr < 123 ? nChr - 71\n    : nChr > 47 && nChr < 58 ? nChr + 4\n    : nChr === 43 ? 62\n    : nChr === 47 ? 63\n    : 0\n}\n\n// Decode Base64 to Uint8Array\n// ---------------------------\nfunction decode (sBase64, nBlocksSize) {\n  var sB64Enc = sBase64.replace(/[^A-Za-z0-9\\+\\/]/g, '')\n  var nInLen = sB64Enc.length\n  var nOutLen = nBlocksSize\n    ? Math.ceil((nInLen * 3 + 1 >> 2) / nBlocksSize) * nBlocksSize\n    : nInLen * 3 + 1 >> 2\n  var taBytes = new Uint8Array(nOutLen)\n\n  for (var nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) {\n    nMod4 = nInIdx & 3\n    nUint24 |= b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << 18 - 6 * nMod4\n    if (nMod4 === 3 || nInLen - nInIdx === 1) {\n      for (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) {\n        taBytes[nOutIdx] = nUint24 >>> (16 >>> nMod3 & 24) & 255\n      }\n      nUint24 = 0\n    }\n  }\n  return taBytes\n}\n\nmodule.exports = { decode: decode }\n\n},{}],4:[function(require,module,exports){\n/* global XMLHttpRequest */\n'use strict'\n\n/**\n * Given a url and a return type, returns a promise to the content of the url\n * Basically it wraps a XMLHttpRequest into a Promise\n *\n * @param {String} url\n * @param {String} type - can be 'text' or 'arraybuffer'\n * @return {Promise}\n */\nmodule.exports = function (url, type) {\n  return new Promise(function (done, reject) {\n    var req = new XMLHttpRequest()\n    if (type) req.responseType = type\n\n    req.open('GET', url)\n    req.onload = function () {\n      req.status === 200 ? done(req.response) : reject(Error(req.statusText))\n    }\n    req.onerror = function () { reject(Error('Network Error')) }\n    req.send()\n  })\n}\n\n},{}],5:[function(require,module,exports){\n'use strict'\n\nvar base64 = require('./base64')\nvar fetch = require('./fetch')\n\n// Given a regex, return a function that test if against a string\nfunction fromRegex (r) {\n  return function (o) { return typeof o === 'string' && r.test(o) }\n}\n// Try to apply a prefix to a name\nfunction prefix (pre, name) {\n  return typeof pre === 'string' ? pre + name\n    : typeof pre === 'function' ? pre(name)\n    : name\n}\n\n/**\n * Load one or more audio files\n *\n *\n * Possible option keys:\n *\n * - __from__ {Function|String}: a function or string to convert from file names to urls.\n * If is a string it will be prefixed to the name:\n * `load(ac, 'snare.mp3', { from: 'http://audio.net/samples/' })`\n * If it's a function it receives the file name and should return the url as string.\n * - __only__ {Array} - when loading objects, if provided, only the given keys\n * will be included in the decoded object:\n * `load(ac, 'piano.json', { only: ['C2', 'D2'] })`\n *\n * @param {AudioContext} ac - the audio context\n * @param {Object} source - the object to be loaded\n * @param {Object} options - (Optional) the load options for that object\n * @param {Object} defaultValue - (Optional) the default value to return as\n * in a promise if not valid loader found\n */\nfunction load (ac, source, options, defVal) {\n  var loader =\n    // Basic audio loading\n      isArrayBuffer(source) ? loadArrayBuffer\n    : isAudioFileName(source) ? loadAudioFile\n    : isPromise(source) ? loadPromise\n    // Compound objects\n    : isArray(source) ? loadArrayData\n    : isObject(source) ? loadObjectData\n    : isJsonFileName(source) ? loadJsonFile\n    // Base64 encoded audio\n    : isBase64Audio(source) ? loadBase64Audio\n    : isJsFileName(source) ? loadMidiJSFile\n    : null\n\n  var opts = options || {}\n  return loader ? loader(ac, source, opts)\n    : defVal ? Promise.resolve(defVal)\n    : Promise.reject('Source not valid (' + source + ')')\n}\nload.fetch = fetch\n\n// BASIC AUDIO LOADING\n// ===================\n\n// Load (decode) an array buffer\nfunction isArrayBuffer (o) { return o instanceof ArrayBuffer }\nfunction loadArrayBuffer (ac, array, options) {\n  return new Promise(function (done, reject) {\n    ac.decodeAudioData(array,\n      function (buffer) { done(buffer) },\n      function () { reject(\"Can't decode audio data (\" + array.slice(0, 30) + '...)') }\n    )\n  })\n}\n\n// Load an audio filename\nvar isAudioFileName = fromRegex(/\\.(mp3|wav|ogg)(\\?.*)?$/i)\nfunction loadAudioFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'arraybuffer'), options)\n}\n\n// Load the result of a promise\nfunction isPromise (o) { return o && typeof o.then === 'function' }\nfunction loadPromise (ac, promise, options) {\n  return promise.then(function (value) {\n    return load(ac, value, options)\n  })\n}\n\n// COMPOUND OBJECTS\n// ================\n\n// Try to load all the items of an array\nvar isArray = Array.isArray\nfunction loadArrayData (ac, array, options) {\n  return Promise.all(array.map(function (data) {\n    return load(ac, data, options, data)\n  }))\n}\n\n// Try to load all the values of a key/value object\nfunction isObject (o) { return o && typeof o === 'object' }\nfunction loadObjectData (ac, obj, options) {\n  var dest = {}\n  var promises = Object.keys(obj).map(function (key) {\n    if (options.only && options.only.indexOf(key) === -1) return null\n    var value = obj[key]\n    return load(ac, value, options, value).then(function (audio) {\n      dest[key] = audio\n    })\n  })\n  return Promise.all(promises).then(function () { return dest })\n}\n\n// Load the content of a JSON file\nvar isJsonFileName = fromRegex(/\\.json(\\?.*)?$/i)\nfunction loadJsonFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'text').then(JSON.parse), options)\n}\n\n// BASE64 ENCODED FORMATS\n// ======================\n\n// Load strings with Base64 encoded audio\nvar isBase64Audio = fromRegex(/^data:audio/)\nfunction loadBase64Audio (ac, source, options) {\n  var i = source.indexOf(',')\n  return load(ac, base64.decode(source.slice(i + 1)).buffer, options)\n}\n\n// Load .js files with MidiJS soundfont prerendered audio\nvar isJsFileName = fromRegex(/\\.js(\\?.*)?$/i)\nfunction loadMidiJSFile (ac, name, options) {\n  var url = prefix(options.from, name)\n  return load(ac, load.fetch(url, 'text').then(midiJsToJson), options)\n}\n\n// convert a MIDI.js javascript soundfont file to json\nfunction midiJsToJson (data) {\n  var begin = data.indexOf('MIDI.Soundfont.')\n  if (begin < 0) throw Error('Invalid MIDI.js Soundfont format')\n  begin = data.indexOf('=', begin) + 2\n  var end = data.lastIndexOf(',')\n  return JSON.parse(data.slice(begin, end) + '}')\n}\n\nif (typeof module === 'object' && module.exports) module.exports = load\nif (typeof window !== 'undefined') window.loadAudio = load\n\n},{\"./base64\":3,\"./fetch\":4}],6:[function(require,module,exports){\nvar root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n\n},{\"./_root\":13}],7:[function(require,module,exports){\nvar Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n\n},{\"./_Symbol\":6,\"./_getRawTag\":10,\"./_objectToString\":11}],8:[function(require,module,exports){\n(function (global){\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],9:[function(require,module,exports){\nvar overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n\n},{\"./_overArg\":12}],10:[function(require,module,exports){\nvar Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n\n},{\"./_Symbol\":6}],11:[function(require,module,exports){\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n\n},{}],12:[function(require,module,exports){\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n\n},{}],13:[function(require,module,exports){\nvar freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n\n},{\"./_freeGlobal\":8}],14:[function(require,module,exports){\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n},{}],15:[function(require,module,exports){\nvar baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n\n},{\"./_baseGetTag\":7,\"./_getPrototype\":9,\"./isObjectLike\":14}],16:[function(require,module,exports){\n(function (global){\n(function(e){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=e()}else if(typeof define===\"function\"&&define.amd){define([],e)}else{var t;if(typeof window!==\"undefined\"){t=window}else if(typeof global!==\"undefined\"){t=global}else if(typeof self!==\"undefined\"){t=self}else{t=this}t.midimessage=e()}})(function(){var e,t,s;return function o(e,t,s){function a(n,i){if(!t[n]){if(!e[n]){var l=typeof require==\"function\"&&require;if(!i&&l)return l(n,!0);if(r)return r(n,!0);var h=new Error(\"Cannot find module '\"+n+\"'\");throw h.code=\"MODULE_NOT_FOUND\",h}var c=t[n]={exports:{}};e[n][0].call(c.exports,function(t){var s=e[n][1][t];return a(s?s:t)},c,c.exports,o,e,t,s)}return t[n].exports}var r=typeof require==\"function\"&&require;for(var n=0;n<s.length;n++)a(s[n]);return a}({1:[function(e,t,s){\"use strict\";Object.defineProperty(s,\"__esModule\",{value:true});s[\"default\"]=function(e){function t(e){this._event=e;this._data=e.data;this.receivedTime=e.receivedTime;if(this._data&&this._data.length<2){console.warn(\"Illegal MIDI message of length\",this._data.length);return}this._messageCode=e.data[0]&240;this.channel=e.data[0]&15;switch(this._messageCode){case 128:this.messageType=\"noteoff\";this.key=e.data[1]&127;this.velocity=e.data[2]&127;break;case 144:this.messageType=\"noteon\";this.key=e.data[1]&127;this.velocity=e.data[2]&127;break;case 160:this.messageType=\"keypressure\";this.key=e.data[1]&127;this.pressure=e.data[2]&127;break;case 176:this.messageType=\"controlchange\";this.controllerNumber=e.data[1]&127;this.controllerValue=e.data[2]&127;if(this.controllerNumber===120&&this.controllerValue===0){this.channelModeMessage=\"allsoundoff\"}else if(this.controllerNumber===121){this.channelModeMessage=\"resetallcontrollers\"}else if(this.controllerNumber===122){if(this.controllerValue===0){this.channelModeMessage=\"localcontroloff\"}else{this.channelModeMessage=\"localcontrolon\"}}else if(this.controllerNumber===123&&this.controllerValue===0){this.channelModeMessage=\"allnotesoff\"}else if(this.controllerNumber===124&&this.controllerValue===0){this.channelModeMessage=\"omnimodeoff\"}else if(this.controllerNumber===125&&this.controllerValue===0){this.channelModeMessage=\"omnimodeon\"}else if(this.controllerNumber===126){this.channelModeMessage=\"monomodeon\"}else if(this.controllerNumber===127){this.channelModeMessage=\"polymodeon\"}break;case 192:this.messageType=\"programchange\";this.program=e.data[1];break;case 208:this.messageType=\"channelpressure\";this.pressure=e.data[1]&127;break;case 224:this.messageType=\"pitchbendchange\";var t=e.data[2]&127;var s=e.data[1]&127;this.pitchBend=(t<<8)+s;break}}return new t(e)};t.exports=s[\"default\"]},{}]},{},[1])(1)});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],17:[function(require,module,exports){\n!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],n):n(t.NoteParser=t.NoteParser||{})}(this,function(t){\"use strict\";function n(t,n){return Array(n+1).join(t)}function r(t){return\"number\"==typeof t}function e(t){return\"string\"==typeof t}function u(t){return void 0!==t}function c(t,n){return Math.pow(2,(t-69)/12)*(n||440)}function o(){return b}function i(t,n,r){if(\"string\"!=typeof t)return null;var e=b.exec(t);if(!e||!n&&e[4])return null;var u={letter:e[1].toUpperCase(),acc:e[2].replace(/x/g,\"##\")};u.pc=u.letter+u.acc,u.step=(u.letter.charCodeAt(0)+3)%7,u.alt=\"b\"===u.acc[0]?-u.acc.length:u.acc.length;var o=A[u.step]+u.alt;return u.chroma=o<0?12+o:o%12,e[3]&&(u.oct=+e[3],u.midi=o+12*(u.oct+1),u.freq=c(u.midi,r)),n&&(u.tonicOf=e[4]),u}function f(t){return r(t)?t<0?n(\"b\",-t):n(\"#\",t):\"\"}function a(t){return r(t)?\"\"+t:\"\"}function l(t,n,r){return null===t||void 0===t?null:t.step?l(t.step,t.alt,t.oct):t<0||t>6?null:C.charAt(t)+f(n)+a(r)}function p(t){if((r(t)||e(t))&&t>=0&&t<128)return+t;var n=i(t);return n&&u(n.midi)?n.midi:null}function s(t,n){var r=p(t);return null===r?null:c(r,n)}function d(t){return(i(t)||{}).letter}function m(t){return(i(t)||{}).acc}function h(t){return(i(t)||{}).pc}function v(t){return(i(t)||{}).step}function g(t){return(i(t)||{}).alt}function x(t){return(i(t)||{}).chroma}function y(t){return(i(t)||{}).oct}var b=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)\\s*$/,A=[0,2,4,5,7,9,11],C=\"CDEFGAB\";t.regex=o,t.parse=i,t.build=l,t.midi=p,t.freq=s,t.letter=d,t.acc=m,t.pc=h,t.step=v,t.alt=g,t.chroma=x,t.oct=y});\n\n\n},{}],18:[function(require,module,exports){\n// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],19:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nfunction createThunkMiddleware(extraArgument) {\n  return function (_ref) {\n    var dispatch = _ref.dispatch,\n        getState = _ref.getState;\n    return function (next) {\n      return function (action) {\n        if (typeof action === 'function') {\n          return action(dispatch, getState, extraArgument);\n        }\n\n        return next(action);\n      };\n    };\n  };\n}\n\nvar thunk = createThunkMiddleware();\nthunk.withExtraArgument = createThunkMiddleware;\n\nexports['default'] = thunk;\n},{}],20:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = applyMiddleware;\n\nvar _compose = require('./compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function (reducer, preloadedState, enhancer) {\n      var store = createStore(reducer, preloadedState, enhancer);\n      var _dispatch = store.dispatch;\n      var chain = [];\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch(action) {\n          return _dispatch(action);\n        }\n      };\n      chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = _compose2['default'].apply(undefined, chain)(store.dispatch);\n\n      return _extends({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n},{\"./compose\":23}],21:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = bindActionCreators;\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(undefined, arguments));\n  };\n}\n\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error('bindActionCreators expected an object or a function, instead received ' + (actionCreators === null ? 'null' : typeof actionCreators) + '. ' + 'Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?');\n  }\n\n  var keys = Object.keys(actionCreators);\n  var boundActionCreators = {};\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var actionCreator = actionCreators[key];\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n  return boundActionCreators;\n}\n},{}],22:[function(require,module,exports){\n(function (process){\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = combineReducers;\n\nvar _createStore = require('./createStore');\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _warning = require('./utils/warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionName = actionType && '\"' + actionType.toString() + '\"' || 'an action';\n\n  return 'Given action ' + actionName + ', reducer \"' + key + '\" returned undefined. ' + 'To ignore an action, you must explicitly return the previous state.';\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === _createStore.ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!(0, _isPlainObject2['default'])(inputState)) {\n    return 'The ' + argumentName + ' has unexpected type of \"' + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + '\". Expected argument to be an object with the following ' + ('keys: \"' + reducerKeys.join('\", \"') + '\"');\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n\n  if (unexpectedKeys.length > 0) {\n    return 'Unexpected ' + (unexpectedKeys.length > 1 ? 'keys' : 'key') + ' ' + ('\"' + unexpectedKeys.join('\", \"') + '\" found in ' + argumentName + '. ') + 'Expected to find one of the known reducer keys instead: ' + ('\"' + reducerKeys.join('\", \"') + '\". Unexpected keys will be ignored.');\n  }\n}\n\nfunction assertReducerSanity(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, { type: _createStore.ActionTypes.INIT });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined during initialization. ' + 'If the state passed to the reducer is undefined, you must ' + 'explicitly return the initial state. The initial state may ' + 'not be undefined.');\n    }\n\n    var type = '@@redux/PROBE_UNKNOWN_ACTION_' + Math.random().toString(36).substring(7).split('').join('.');\n    if (typeof reducer(undefined, { type: type }) === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined when probed with a random type. ' + ('Don\\'t try to handle ' + _createStore.ActionTypes.INIT + ' or other actions in \"redux/*\" ') + 'namespace. They are considered private. Instead, you must return the ' + 'current state for any unknown actions, unless it is undefined, ' + 'in which case you must return the initial state, regardless of the ' + 'action type. The initial state may not be undefined.');\n    }\n  });\n}\n\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        (0, _warning2['default'])('No reducer provided for key \"' + key + '\"');\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  var finalReducerKeys = Object.keys(finalReducers);\n\n  if (process.env.NODE_ENV !== 'production') {\n    var unexpectedKeyCache = {};\n  }\n\n  var sanityError;\n  try {\n    assertReducerSanity(finalReducers);\n  } catch (e) {\n    sanityError = e;\n  }\n\n  return function combination() {\n    var state = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n    var action = arguments[1];\n\n    if (sanityError) {\n      throw sanityError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n      if (warningMessage) {\n        (0, _warning2['default'])(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n    for (var i = 0; i < finalReducerKeys.length; i++) {\n      var key = finalReducerKeys[i];\n      var reducer = finalReducers[key];\n      var previousStateForKey = state[key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(key, action);\n        throw new Error(errorMessage);\n      }\n      nextState[key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    return hasChanged ? nextState : state;\n  };\n}\n}).call(this,require('_process'))\n\n},{\"./createStore\":24,\"./utils/warning\":26,\"_process\":18,\"lodash/isPlainObject\":15}],23:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = compose;\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  var last = funcs[funcs.length - 1];\n  var rest = funcs.slice(0, -1);\n  return function () {\n    return rest.reduceRight(function (composed, f) {\n      return f(composed);\n    }, last.apply(undefined, arguments));\n  };\n}\n},{}],24:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nexports.ActionTypes = undefined;\nexports['default'] = createStore;\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _symbolObservable = require('symbol-observable');\n\nvar _symbolObservable2 = _interopRequireDefault(_symbolObservable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar ActionTypes = exports.ActionTypes = {\n  INIT: '@@redux/INIT'\n};\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} enhancer The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    return currentState;\n  }\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected listener to be a function.');\n    }\n\n    var isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action) {\n    if (!(0, _isPlainObject2['default'])(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      listeners[i]();\n    }\n\n    return action;\n  }\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({ type: ActionTypes.INIT });\n  }\n\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/zenparsing/es-observable\n   */\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object') {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return { unsubscribe: unsubscribe };\n      }\n    }, _ref[_symbolObservable2['default']] = function () {\n      return this;\n    }, _ref;\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch({ type: ActionTypes.INIT });\n\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[_symbolObservable2['default']] = observable, _ref2;\n}\n},{\"lodash/isPlainObject\":15,\"symbol-observable\":36}],25:[function(require,module,exports){\n(function (process){\n'use strict';\n\nexports.__esModule = true;\nexports.compose = exports.applyMiddleware = exports.bindActionCreators = exports.combineReducers = exports.createStore = undefined;\n\nvar _createStore = require('./createStore');\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _combineReducers = require('./combineReducers');\n\nvar _combineReducers2 = _interopRequireDefault(_combineReducers);\n\nvar _bindActionCreators = require('./bindActionCreators');\n\nvar _bindActionCreators2 = _interopRequireDefault(_bindActionCreators);\n\nvar _applyMiddleware = require('./applyMiddleware');\n\nvar _applyMiddleware2 = _interopRequireDefault(_applyMiddleware);\n\nvar _compose = require('./compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _warning = require('./utils/warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n/*\n* This is a dummy function to check if the function name has been altered by minification.\n* If the function has been minified and NODE_ENV !== 'production', warn the user.\n*/\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  (0, _warning2['default'])('You are currently using minified code outside of NODE_ENV === \\'production\\'. ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexports.createStore = _createStore2['default'];\nexports.combineReducers = _combineReducers2['default'];\nexports.bindActionCreators = _bindActionCreators2['default'];\nexports.applyMiddleware = _applyMiddleware2['default'];\nexports.compose = _compose2['default'];\n}).call(this,require('_process'))\n\n},{\"./applyMiddleware\":20,\"./bindActionCreators\":21,\"./combineReducers\":22,\"./compose\":23,\"./createStore\":24,\"./utils/warning\":26,\"_process\":18}],26:[function(require,module,exports){\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = warning;\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n    /* eslint-disable no-empty */\n  } catch (e) {}\n  /* eslint-enable no-empty */\n}\n},{}],27:[function(require,module,exports){\n\nmodule.exports = function (player) {\n  /**\n   * Adds a listener of an event\n   * @chainable\n   * @param {String} event - the event name\n   * @param {Function} callback - the event handler\n   * @return {SamplePlayer} the player\n   * @example\n   * player.on('start', function(time, note) {\n   *   console.log(time, note)\n   * })\n   */\n  player.on = function (event, cb) {\n    if (arguments.length === 1 && typeof event === 'function') return player.on('event', event)\n    var prop = 'on' + event\n    var old = player[prop]\n    player[prop] = old ? chain(old, cb) : cb\n    return player\n  }\n  return player\n}\n\nfunction chain (fn1, fn2) {\n  return function (a, b, c, d) { fn1(a, b, c, d); fn2(a, b, c, d) }\n}\n\n},{}],28:[function(require,module,exports){\n'use strict'\n\nvar player = require('./player')\nvar events = require('./events')\nvar notes = require('./notes')\nvar scheduler = require('./scheduler')\nvar midi = require('./midi')\n\nfunction SamplePlayer (ac, source, options) {\n  return midi(scheduler(notes(events(player(ac, source, options)))))\n}\n\nif (typeof module === 'object' && module.exports) module.exports = SamplePlayer\nif (typeof window !== 'undefined') window.SamplePlayer = SamplePlayer\n\n},{\"./events\":27,\"./midi\":29,\"./notes\":30,\"./player\":31,\"./scheduler\":32}],29:[function(require,module,exports){\nvar midimessage = require('midimessage')\n\nmodule.exports = function (player) {\n  /**\n  * Connect a player to a midi input\n  *\n  * The options accepts:\n  *\n  * - channel: the channel to listen to. Listen to all channels by default.\n  *\n  * @param {MIDIInput} input\n  * @param {Object} options - (Optional)\n  * @return {SamplePlayer} the player\n  * @example\n  * var piano = player(...)\n  * window.navigator.requestMIDIAccess().then(function (midiAccess) {\n  *   midiAccess.inputs.forEach(function (midiInput) {\n  *     piano.listenToMidi(midiInput)\n  *   })\n  * })\n  */\n  player.listenToMidi = function (input, options) {\n    var started = {}\n    var opts = options || {}\n    var gain = opts.gain || function (vel) { return vel / 127 }\n\n    input.onmidimessage = function (msg) {\n      var mm = msg.messageType ? msg : midimessage(msg)\n      if (mm.messageType === 'noteon' && mm.velocity === 0) {\n        mm.messageType = 'noteoff'\n      }\n      if (opts.channel && mm.channel !== opts.channel) return\n\n      switch (mm.messageType) {\n        case 'noteon':\n          started[mm.key] = player.play(mm.key, 0, { gain: gain(mm.velocity) })\n          break\n        case 'noteoff':\n          if (started[mm.key]) {\n            started[mm.key].stop()\n            delete started[mm.key]\n          }\n          break\n      }\n    }\n    return player\n  }\n  return player\n}\n\n},{\"midimessage\":16}],30:[function(require,module,exports){\n'use strict'\n\nvar note = require('note-parser')\nvar isMidi = function (n) { return n !== null && n !== [] && n >= 0 && n < 129 }\nvar toMidi = function (n) { return isMidi(n) ? +n : note.midi(n) }\n\n// Adds note name to midi conversion\nmodule.exports = function (player) {\n  if (player.buffers) {\n    var map = player.opts.map\n    var toKey = typeof map === 'function' ? map : toMidi\n    var mapper = function (name) {\n      return name ? toKey(name) || name : null\n    }\n\n    player.buffers = mapBuffers(player.buffers, mapper)\n    var start = player.start\n    player.start = function (name, when, options) {\n      var key = mapper(name)\n      var dec = key % 1\n      if (dec) {\n        key = Math.floor(key)\n        options = Object.assign(options || {}, { cents: Math.floor(dec * 100) })\n      }\n      return start(key, when, options)\n    }\n  }\n  return player\n}\n\nfunction mapBuffers (buffers, toKey) {\n  return Object.keys(buffers).reduce(function (mapped, name) {\n    mapped[toKey(name)] = buffers[name]\n    return mapped\n  }, {})\n}\n\n},{\"note-parser\":33}],31:[function(require,module,exports){\n/* global AudioBuffer */\n'use strict'\n\nvar ADSR = require('adsr')\n\nvar EMPTY = {}\nvar DEFAULTS = {\n  gain: 1,\n  attack: 0.01,\n  decay: 0.1,\n  sustain: 0.9,\n  release: 0.3,\n  loop: false,\n  cents: 0,\n  loopStart: 0,\n  loopEnd: 0\n}\n\n/**\n * Create a sample player.\n *\n * @param {AudioContext} ac - the audio context\n * @param {ArrayBuffer|Object<String,ArrayBuffer>} source\n * @param {Onject} options - (Optional) an options object\n * @return {player} the player\n * @example\n * var SamplePlayer = require('sample-player')\n * var ac = new AudioContext()\n * var snare = SamplePlayer(ac, <AudioBuffer>)\n * snare.play()\n */\nfunction SamplePlayer (ac, source, options) {\n  var connected = false\n  var nextId = 0\n  var tracked = {}\n  var out = ac.createGain()\n  out.gain.value = 1\n\n  var opts = Object.assign({}, DEFAULTS, options)\n\n  /**\n   * @namespace\n   */\n  var player = { context: ac, out: out, opts: opts }\n  if (source instanceof AudioBuffer) player.buffer = source\n  else player.buffers = source\n\n  /**\n   * Start a sample buffer.\n   *\n   * The returned object has a function `stop(when)` to stop the sound.\n   *\n   * @param {String} name - the name of the buffer. If the source of the\n   * SamplePlayer is one sample buffer, this parameter is not required\n   * @param {Float} when - (Optional) when to start (current time if by default)\n   * @param {Object} options - additional sample playing options\n   * @return {AudioNode} an audio node with a `stop` function\n   * @example\n   * var sample = player(ac, <AudioBuffer>).connect(ac.destination)\n   * sample.start()\n   * sample.start(5, { gain: 0.7 }) // name not required since is only one AudioBuffer\n   * @example\n   * var drums = player(ac, { snare: <AudioBuffer>, kick: <AudioBuffer>, ... }).connect(ac.destination)\n   * drums.start('snare')\n   * drums.start('snare', 0, { gain: 0.3 })\n   */\n  player.start = function (name, when, options) {\n    // if only one buffer, reorder arguments\n    if (player.buffer && name !== null) return player.start(null, name, when)\n\n    var buffer = name ? player.buffers[name] : player.buffer\n    if (!buffer) {\n      console.warn('Buffer ' + name + ' not found.')\n      return\n    } else if (!connected) {\n      console.warn('SamplePlayer not connected to any node.')\n      return\n    }\n\n    var opts = options || EMPTY\n    when = Math.max(ac.currentTime, when || 0)\n    player.emit('start', when, name, opts)\n    var node = createNode(name, buffer, opts)\n    node.id = track(name, node)\n    node.env.start(when)\n    node.source.start(when)\n    player.emit('started', when, node.id, node)\n    if (opts.duration) node.stop(when + opts.duration)\n    return node\n  }\n\n  // NOTE: start will be override so we can't copy the function reference\n  // this is obviously not a good design, so this code will be gone soon.\n  /**\n   * An alias for `player.start`\n   * @see player.start\n   * @since 0.3.0\n   */\n  player.play = function (name, when, options) {\n    return player.start(name, when, options)\n  }\n\n  /**\n   * Stop some or all samples\n   *\n   * @param {Float} when - (Optional) an absolute time in seconds (or currentTime\n   * if not specified)\n   * @param {Array} nodes - (Optional) an array of nodes or nodes ids to stop\n   * @return {Array} an array of ids of the stoped samples\n   *\n   * @example\n   * var longSound = player(ac, <AudioBuffer>).connect(ac.destination)\n   * longSound.start(ac.currentTime)\n   * longSound.start(ac.currentTime + 1)\n   * longSound.start(ac.currentTime + 2)\n   * longSound.stop(ac.currentTime + 3) // stop the three sounds\n   */\n  player.stop = function (when, ids) {\n    var node\n    ids = ids || Object.keys(tracked)\n    return ids.map(function (id) {\n      node = tracked[id]\n      if (!node) return null\n      node.stop(when)\n      return node.id\n    })\n  }\n  /**\n   * Connect the player to a destination node\n   *\n   * @param {AudioNode} destination - the destination node\n   * @return {AudioPlayer} the player\n   * @chainable\n   * @example\n   * var sample = player(ac, <AudioBuffer>).connect(ac.destination)\n   */\n  player.connect = function (dest) {\n    connected = true\n    out.connect(dest)\n    return player\n  }\n\n  player.emit = function (event, when, obj, opts) {\n    if (player.onevent) player.onevent(event, when, obj, opts)\n    var fn = player['on' + event]\n    if (fn) fn(when, obj, opts)\n  }\n\n  return player\n\n  // =============== PRIVATE FUNCTIONS ============== //\n\n  function track (name, node) {\n    node.id = nextId++\n    tracked[node.id] = node\n    node.source.onended = function () {\n      var now = ac.currentTime\n      node.source.disconnect()\n      node.env.disconnect()\n      node.disconnect()\n      player.emit('ended', now, node.id, node)\n    }\n    return node.id\n  }\n\n  function createNode (name, buffer, options) {\n    var node = ac.createGain()\n    node.gain.value = 0 // the envelope will control the gain\n    node.connect(out)\n\n    node.env = envelope(ac, options, opts)\n    node.env.connect(node.gain)\n\n    node.source = ac.createBufferSource()\n    node.source.buffer = buffer\n    node.source.connect(node)\n    node.source.loop = options.loop || opts.loop\n    node.source.playbackRate.value = centsToRate(options.cents || opts.cents)\n    node.source.loopStart = options.loopStart || opts.loopStart\n    node.source.loopEnd = options.loopEnd || opts.loopEnd\n    node.stop = function (when) {\n      var time = when || ac.currentTime\n      player.emit('stop', time, name)\n      var stopAt = node.env.stop(time)\n      node.source.stop(stopAt)\n    }\n    return node\n  }\n}\n\nfunction isNum (x) { return typeof x === 'number' }\nvar PARAMS = ['attack', 'decay', 'sustain', 'release']\nfunction envelope (ac, options, opts) {\n  var env = ADSR(ac)\n  var adsr = options.adsr || opts.adsr\n  PARAMS.forEach(function (name, i) {\n    if (adsr) env[name] = adsr[i]\n    else env[name] = options[name] || opts[name]\n  })\n  env.value.value = isNum(options.gain) ? options.gain\n    : isNum(opts.gain) ? opts.gain : 1\n  return env\n}\n\n/*\n * Get playback rate for a given pitch change (in cents)\n * Basic [math](http://www.birdsoft.demon.co.uk/music/samplert.htm):\n * f2 = f1 * 2^( C / 1200 )\n */\nfunction centsToRate (cents) { return cents ? Math.pow(2, cents / 1200) : 1 }\n\nmodule.exports = SamplePlayer\n\n},{\"adsr\":2}],32:[function(require,module,exports){\n'use strict'\n\nvar isArr = Array.isArray\nvar isObj = function (o) { return o && typeof o === 'object' }\nvar OPTS = {}\n\nmodule.exports = function (player) {\n  /**\n   * Schedule a list of events to be played at specific time.\n   *\n   * It supports three formats of events for the events list:\n   *\n   * - An array with [time, note]\n   * - An array with [time, object]\n   * - An object with { time: ?, [name|note|midi|key]: ? }\n   *\n   * @param {Float} time - an absolute time to start (or AudioContext's\n   * currentTime if provided number is 0)\n   * @param {Array} events - the events list.\n   * @return {Array} an array of ids\n   *\n   * @example\n   * // Event format: [time, note]\n   * var piano = player(ac, ...).connect(ac.destination)\n   * piano.schedule(0, [ [0, 'C2'], [0.5, 'C3'], [1, 'C4'] ])\n   *\n   * @example\n   * // Event format: an object { time: ?, name: ? }\n   * var drums = player(ac, ...).connect(ac.destination)\n   * drums.schedule(0, [\n   *   { name: 'kick', time: 0 },\n   *   { name: 'snare', time: 0.5 },\n   *   { name: 'kick', time: 1 },\n   *   { name: 'snare', time: 1.5 }\n   * ])\n   */\n  player.schedule = function (time, events) {\n    var now = player.context.currentTime\n    var when = time < now ? now : time\n    player.emit('schedule', when, events)\n    var t, o, note, opts\n    return events.map(function (event) {\n      if (!event) return null\n      else if (isArr(event)) {\n        t = event[0]; o = event[1]\n      } else {\n        t = event.time; o = event\n      }\n\n      if (isObj(o)) {\n        note = o.name || o.key || o.note || o.midi || null\n        opts = o\n      } else {\n        note = o\n        opts = OPTS\n      }\n\n      return player.start(note, when + (t || 0), opts)\n    })\n  }\n  return player\n}\n\n},{}],33:[function(require,module,exports){\n'use strict'\n\nvar REGEX = /^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\\d*)\\s*(.*)\\s*$/\n/**\n * A regex for matching note strings in scientific notation.\n *\n * @name regex\n * @function\n * @return {RegExp} the regexp used to parse the note name\n *\n * The note string should have the form `letter[accidentals][octave][element]`\n * where:\n *\n * - letter: (Required) is a letter from A to G either upper or lower case\n * - accidentals: (Optional) can be one or more `b` (flats), `#` (sharps) or `x` (double sharps).\n * They can NOT be mixed.\n * - octave: (Optional) a positive or negative integer\n * - element: (Optional) additionally anything after the duration is considered to\n * be the element name (for example: 'C2 dorian')\n *\n * The executed regex contains (by array index):\n *\n * - 0: the complete string\n * - 1: the note letter\n * - 2: the optional accidentals\n * - 3: the optional octave\n * - 4: the rest of the string (trimmed)\n *\n * @example\n * var parser = require('note-parser')\n * parser.regex.exec('c#4')\n * // => ['c#4', 'c', '#', '4', '']\n * parser.regex.exec('c#4 major')\n * // => ['c#4major', 'c', '#', '4', 'major']\n * parser.regex().exec('CMaj7')\n * // => ['CMaj7', 'C', '', '', 'Maj7']\n */\nfunction regex () { return REGEX }\n\nvar SEMITONES = [0, 2, 4, 5, 7, 9, 11]\n/**\n * Parse a note name in scientific notation an return it's components,\n * and some numeric properties including midi number and frequency.\n *\n * @name parse\n * @function\n * @param {String} note - the note string to be parsed\n * @param {Boolean} isTonic - true if the note is the tonic of something.\n * If true, en extra tonicOf property is returned. It's false by default.\n * @param {Float} tunning - The frequency of A4 note to calculate frequencies.\n * By default it 440.\n * @return {Object} the parsed note name or null if not a valid note\n *\n * The parsed note name object will ALWAYS contains:\n * - letter: the uppercase letter of the note\n * - acc: the accidentals of the note (only sharps or flats)\n * - pc: the pitch class (letter + acc)\n * - step: s a numeric representation of the letter. It's an integer from 0 to 6\n * where 0 = C, 1 = D ... 6 = B\n * - alt: a numeric representation of the accidentals. 0 means no alteration,\n * positive numbers are for sharps and negative for flats\n * - chroma: a numeric representation of the pitch class. It's like midi for\n * pitch classes. 0 = C, 1 = C#, 2 = D ... It can have negative values: -1 = Cb.\n * Can detect pitch class enhramonics.\n *\n * If the note has octave, the parser object will contain:\n * - oct: the octave number (as integer)\n * - midi: the midi number\n * - freq: the frequency (using tuning parameter as base)\n *\n * If the parameter `isTonic` is set to true, the parsed object will contain:\n * - tonicOf: the rest of the string that follows note name (left and right trimmed)\n *\n * @example\n * var parse = require('note-parser').parse\n * parse('Cb4')\n * // => { letter: 'C', acc: 'b', pc: 'Cb', step: 0, alt: -1, chroma: -1,\n *         oct: 4, midi: 59, freq: 246.94165062806206 }\n * // if no octave, no midi, no freq\n * parse('fx')\n * // => { letter: 'F', acc: '##', pc: 'F##', step: 3, alt: 2, chroma: 7 })\n */\nfunction parse (str, isTonic, tuning) {\n  if (typeof str !== 'string') return null\n  var m = REGEX.exec(str)\n  if (!m || !isTonic && m[4]) return null\n\n  var p = { letter: m[1].toUpperCase(), acc: m[2].replace(/x/g, '##') }\n  p.pc = p.letter + p.acc\n  p.step = (p.letter.charCodeAt(0) + 3) % 7\n  p.alt = p.acc[0] === 'b' ? -p.acc.length : p.acc.length\n  p.chroma = SEMITONES[p.step] + p.alt\n  if (m[3]) {\n    p.oct = +m[3]\n    p.midi = p.chroma + 12 * (p.oct + 1)\n    p.freq = midiToFreq(p.midi, tuning)\n  }\n  if (isTonic) p.tonicOf = m[4]\n  return p\n}\n\n/**\n * Given a midi number, return its frequency\n * @param {Integer} midi - midi note number\n * @param {Float} tuning - (Optional) the A4 tuning (440Hz by default)\n * @return {Float} frequency in hertzs\n */\nfunction midiToFreq (midi, tuning) {\n  return Math.pow(2, (midi - 69) / 12) * (tuning || 440)\n}\n\nvar parser = { parse: parse, regex: regex, midiToFreq: midiToFreq }\nvar FNS = ['letter', 'acc', 'pc', 'step', 'alt', 'chroma', 'oct', 'midi', 'freq']\nFNS.forEach(function (name) {\n  parser[name] = function (src) {\n    var p = parse(src)\n    return p && (typeof p[name] !== 'undefined') ? p[name] : null\n  }\n})\n\nmodule.exports = parser\n\n// extra API docs\n/**\n * Get midi of a note\n *\n * @name midi\n * @function\n * @param {String} note - the note name\n * @return {Integer} the midi number of the note or null if not a valid note\n * or the note does NOT contains octave\n * @example\n * var parser = require('note-parser')\n * parser.midi('A4') // => 69\n * parser.midi('A') // => null\n */\n/**\n * Get freq of a note in hertzs (in a well tempered 440Hz A4)\n *\n * @name freq\n * @function\n * @param {String} note - the note name\n * @return {Float} the freq of the number if hertzs or null if not valid note\n * or the note does NOT contains octave\n * @example\n * var parser = require('note-parser')\n * parser.freq('A4') // => 440\n * parser.freq('A') // => null\n */\n\n},{}],34:[function(require,module,exports){\n'use strict'\n\nvar load = require('audio-loader')\nvar player = require('sample-player')\n\n/**\n * Load a soundfont instrument. It returns a promise that resolves to a\n * instrument object.\n *\n * The instrument object returned by the promise has the following properties:\n *\n * - name: the instrument name\n * - play: A function to play notes from the buffer with the signature\n * `play(note, time, duration, options)`\n *\n *\n * The valid options are:\n *\n * - `format`: the soundfont format. 'mp3' by default. Can be 'ogg'\n * - `soundfont`: the soundfont name. 'MusyngKite' by default. Can be 'FluidR3_GM'\n * - `nameToUrl` <Function>: a function to convert from instrument names to URL\n * - `destination`: by default Soundfont uses the `audioContext.destination` but you can override it.\n * - `gain`: the gain of the player (1 by default)\n * - `notes`: an array of the notes to decode. It can be an array of strings\n * with note names or an array of numbers with midi note numbers. This is a\n * performance option: since decoding mp3 is a cpu intensive process, you can limit\n * limit the number of notes you want and reduce the time to load the instrument.\n *\n * @param {AudioContext} ac - the audio context\n * @param {String} name - the instrument name. For example: 'acoustic_grand_piano'\n * @param {Object} options - (Optional) the same options as Soundfont.loadBuffers\n * @return {Promise}\n *\n * @example\n * var Soundfont = require('sounfont-player')\n * Soundfont.instrument('marimba').then(function (marimba) {\n *   marimba.play('C4')\n * })\n */\nfunction instrument (ac, name, options) {\n  if (arguments.length === 1) return function (n, o) { return instrument(ac, n, o) }\n  var opts = options || {}\n  var isUrl = opts.isSoundfontURL || isSoundfontURL\n  var toUrl = opts.nameToUrl || nameToUrl\n  var url = isUrl(name) ? name : toUrl(name, opts.soundfont, opts.format)\n\n  return load(ac, url, { only: opts.only || opts.notes }).then(function (buffers) {\n    var p = player(ac, buffers, opts).connect(ac.destination)\n    p.url = url\n    p.name = name\n    return p\n  })\n}\n\nfunction isSoundfontURL (name) {\n  return /\\.js(\\?.*)?$/i.test(name)\n}\n\n/**\n * Given an instrument name returns a URL to to the Benjamin Gleitzman's\n * package of [pre-rendered sound fonts](https://github.com/gleitz/midi-js-soundfonts)\n *\n * @param {String} name - instrument name\n * @param {String} soundfont - (Optional) the soundfont name. One of 'FluidR3_GM'\n * or 'MusyngKite' ('MusyngKite' by default)\n * @param {String} format - (Optional) Can be 'mp3' or 'ogg' (mp3 by default)\n * @returns {String} the Soundfont file url\n * @example\n * var Soundfont = require('soundfont-player')\n * Soundfont.nameToUrl('marimba', 'mp3')\n */\nfunction nameToUrl (name, sf, format) {\n  format = format === 'ogg' ? format : 'mp3'\n  sf = sf === 'FluidR3_GM' ? sf : 'MusyngKite'\n  return 'https://gleitz.github.io/midi-js-soundfonts/' + sf + '/' + name + '-' + format + '.js'\n}\n\n// In the 1.0.0 release it will be:\n// var Soundfont = {}\nvar Soundfont = require('./legacy')\nSoundfont.instrument = instrument\nSoundfont.nameToUrl = nameToUrl\n\nif (typeof module === 'object' && module.exports) module.exports = Soundfont\nif (typeof window !== 'undefined') window.Soundfont = Soundfont\n\n},{\"./legacy\":35,\"audio-loader\":5,\"sample-player\":28}],35:[function(require,module,exports){\n'use strict'\n\nvar parser = require('note-parser')\n\n/**\n * Create a Soundfont object\n *\n * @param {AudioContext} context - the [audio context](https://developer.mozilla.org/en/docs/Web/API/AudioContext)\n * @param {Function} nameToUrl - (Optional) a function that maps the sound font name to the url\n * @return {Soundfont} a soundfont object\n */\nfunction Soundfont (ctx, nameToUrl) {\n  console.warn('new Soundfont() is deprected')\n  console.log('Please use Soundfont.instrument() instead of new Soundfont().instrument()')\n  if (!(this instanceof Soundfont)) return new Soundfont(ctx)\n\n  this.nameToUrl = nameToUrl || Soundfont.nameToUrl\n  this.ctx = ctx\n  this.instruments = {}\n  this.promises = []\n}\n\nSoundfont.prototype.onready = function (callback) {\n  console.warn('deprecated API')\n  console.log('Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()')\n  Promise.all(this.promises).then(callback)\n}\n\nSoundfont.prototype.instrument = function (name, options) {\n  console.warn('new Soundfont().instrument() is deprecated.')\n  console.log('Please use Soundfont.instrument() instead.')\n  var ctx = this.ctx\n  name = name || 'default'\n  if (name in this.instruments) return this.instruments[name]\n  var inst = {name: name, play: oscillatorPlayer(ctx, options)}\n  this.instruments[name] = inst\n  if (name !== 'default') {\n    var promise = Soundfont.instrument(ctx, name, options).then(function (instrument) {\n      inst.play = instrument.play\n      return inst\n    })\n    this.promises.push(promise)\n    inst.onready = function (cb) {\n      console.warn('onready is deprecated. Use Soundfont.instrument().then()')\n      promise.then(cb)\n    }\n  } else {\n    inst.onready = function (cb) {\n      console.warn('onready is deprecated. Use Soundfont.instrument().then()')\n      cb()\n    }\n  }\n  return inst\n}\n\n/*\n * Load the buffers of a given instrument name. It returns a promise that resolves\n * to a hash with midi note numbers as keys, and audio buffers as values.\n *\n * @param {AudioContext} ac - the audio context\n * @param {String} name - the instrument name (it accepts an url if starts with \"http\")\n * @param {Object} options - (Optional) options object\n * @return {Promise} a promise that resolves to a Hash of { midiNoteNum: <AudioBuffer> }\n *\n * The options object accepts the following keys:\n *\n * - nameToUrl {Function}: a function to convert from instrument names to urls.\n * By default it uses Benjamin Gleitzman's package of\n * [pre-rendered sound fonts](https://github.com/gleitz/midi-js-soundfonts)\n * - notes {Array}: the list of note names to be decoded (all by default)\n *\n * @example\n * var Soundfont = require('soundfont-player')\n * Soundfont.loadBuffers(ctx, 'acoustic_grand_piano').then(function(buffers) {\n *  buffers[60] // => An <AudioBuffer> corresponding to note C4\n * })\n */\nfunction loadBuffers (ac, name, options) {\n  console.warn('Soundfont.loadBuffers is deprecate.')\n  console.log('Use Soundfont.instrument(..) and get buffers properties from the result.')\n  return Soundfont.instrument(ac, name, options).then(function (inst) {\n    return inst.buffers\n  })\n}\nSoundfont.loadBuffers = loadBuffers\n\n/**\n * Returns a function that plays an oscillator\n *\n * @param {AudioContext} ac - the audio context\n * @param {Hash} defaultOptions - (Optional) a hash of options:\n * - vcoType: the oscillator type (default: 'sine')\n * - gain: the output gain value (default: 0.4)\n  * - destination: the player destination (default: ac.destination)\n */\nfunction oscillatorPlayer (ctx, defaultOptions) {\n  defaultOptions = defaultOptions || {}\n  return function (note, time, duration, options) {\n    console.warn('The oscillator player is deprecated.')\n    console.log('Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.')\n    var midi = note > 0 && note < 129 ? +note : parser.midi(note)\n    var freq = midi ? parser.midiToFreq(midi, 440) : null\n    if (!freq) return\n\n    duration = duration || 0.2\n\n    options = options || {}\n    var destination = options.destination || defaultOptions.destination || ctx.destination\n    var vcoType = options.vcoType || defaultOptions.vcoType || 'sine'\n    var gain = options.gain || defaultOptions.gain || 0.4\n\n    var vco = ctx.createOscillator()\n    vco.type = vcoType\n    vco.frequency.value = freq\n\n    /* VCA */\n    var vca = ctx.createGain()\n    vca.gain.value = gain\n\n    /* Connections */\n    vco.connect(vca)\n    vca.connect(destination)\n\n    vco.start(time)\n    if (duration > 0) vco.stop(time + duration)\n    return vco\n  }\n}\n\n/**\n * Given a note name, return the note midi number\n *\n * @name noteToMidi\n * @function\n * @param {String} noteName\n * @return {Integer} the note midi number or null if not a valid note name\n */\nSoundfont.noteToMidi = parser.midi\n\nmodule.exports = Soundfont\n\n},{\"note-parser\":17}],36:[function(require,module,exports){\nmodule.exports = require('./lib/index');\n\n},{\"./lib/index\":37}],37:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ponyfill = require('./ponyfill');\n\nvar _ponyfill2 = _interopRequireDefault(_ponyfill);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar root; /* global window */\n\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = (0, _ponyfill2['default'])(root);\nexports['default'] = result;\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./ponyfill\":38}],38:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports['default'] = symbolObservablePonyfill;\nfunction symbolObservablePonyfill(root) {\n\tvar result;\n\tvar _Symbol = root.Symbol;\n\n\tif (typeof _Symbol === 'function') {\n\t\tif (_Symbol.observable) {\n\t\t\tresult = _Symbol.observable;\n\t\t} else {\n\t\t\tresult = _Symbol('observable');\n\t\t\t_Symbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n},{}],39:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.noteOn = noteOn;\nexports.noteOff = noteOff;\nexports.controller = controller;\n\nvar _midiActions = require('../actions/midi-actions');\n\nvar _midiActions2 = _interopRequireDefault(_midiActions);\n\nvar _midi = require('../utils/midi');\n\nvar _audio = require('../utils/audio');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction noteOn(event) {\n  var message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'noteOn';\n\n  return function (dispatch, getState) {\n    var state = getState();\n    var data = event.data ? event.data : _midi.MidiUtils.setNoteOnMessage(event.target);\n\n    var note = _midi.MidiUtils.getNote(data);\n\n    var ac = state.midi.audioContext;\n    var notes = state.midi.notes;\n\n    if (state.settings.webApiAudio) {\n\n      if (!notes[note]) {\n        notes[note] = _audio.AudioUtils.generateOscillator(note, ac);\n        notes[note].start();\n      }\n    } else {\n      notes[note] = 'playing';\n      state.settings.soundfontInstrument.play(note);\n    }\n\n    dispatch({\n      type: _midiActions2.default.NOTE_ON,\n      payload: { message: message, data: data, notes: notes }\n    });\n  };\n}\n\nfunction noteOff(event) {\n  var message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'noteOff';\n\n  return function (dispatch, getState) {\n    var state = getState();\n    var data = event.data ? event.data : _midi.MidiUtils.setNoteOffMessage(event.target);\n\n    var note = _midi.MidiUtils.getNote(data);\n    var notes = state.midi.notes;\n\n    if (state.settings.webApiAudio) {\n\n      if (notes[note]) {\n        notes[note].stop();\n        notes[note].disconnect();\n      }\n    } else {\n      state.settings.soundfontInstrument.stop(note);\n    }\n\n    notes[note] = null;\n\n    dispatch({\n      type: _midiActions2.default.NOTE_OFF,\n      payload: { message: message, data: data, notes: notes }\n    });\n  };\n}\n\nfunction controller(event, message) {\n  return function (dispatch, getState) {\n    var message = event.data;\n\n    dispatch({\n      type: _midiActions2.default.CONTROLLER,\n      payload: { message: message }\n    });\n  };\n}\n\n},{\"../actions/midi-actions\":42,\"../utils/audio\":55,\"../utils/midi\":56}],40:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.midiMessage = midiMessage;\n\nvar _midiMessages = require('../constants/midi-messages');\n\nvar _midi = require('../utils/midi');\n\nvar _midiEventsActionCreators = require('../action-creators/midi-events-action-creators');\n\nvar MidiEvents = _interopRequireWildcard(_midiEventsActionCreators);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction midiMessage(event) {\n  return function (dispatch, getState) {\n    var midiMessage = _midi.MidiUtils.getEventType(event.data);\n    var message = _midiMessages.MidiMessages[midiMessage];\n\n    dispatch(MidiEvents[message](event));\n  };\n}\n\n},{\"../action-creators/midi-events-action-creators\":39,\"../constants/midi-messages\":49,\"../utils/midi\":56}],41:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.midiSuccess = midiSuccess;\nexports.midiFailure = midiFailure;\nexports.loadSoundfontInstrument = loadSoundfontInstrument;\nexports.changeAudio = changeAudio;\n\nvar _midiConnect = require('../actions/midi-connect');\n\nvar _midiConnect2 = _interopRequireDefault(_midiConnect);\n\nvar _soundfontPlayer = require('soundfont-player');\n\nvar _soundfontPlayer2 = _interopRequireDefault(_soundfontPlayer);\n\nvar _midiMessagesActionCreators = require('../action-creators/midi-messages-action-creators');\n\nvar MidiMessages = _interopRequireWildcard(_midiMessagesActionCreators);\n\nvar _redux = require('redux');\n\nvar _midiSoundpaths = require('../constants/midi-soundpaths');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction midiSuccess(midiAccess) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var midiMessages = (0, _redux.bindActionCreators)(MidiMessages, dispatch);\n    var status = 'MIDI Succeeded';\n\n    var inputs = midiAccess.inputs.values();\n    var gainNode = state.midi.audioContext.createGain();\n\n    gainNode.connect(state.midi.audioContext.destination);\n\n    for (var input = inputs.next(); input && !input.done; input = inputs.next()) {\n      input.value.onmidimessage = midiMessages.midiMessage;\n    }\n\n    dispatch({\n      type: _midiConnect2.default.MIDI_SUCCESS,\n      payload: { status: status, midiAccess: midiAccess, inputs: inputs, gainNode: gainNode }\n    });\n  };\n}\n\nfunction midiFailure(midiAccess) {\n  return function (dispatch) {\n    var status = 'MIDI Failed';\n\n    dispatch({\n      type: _midiConnect2.default.MIDI_FAILURE,\n      payload: { status: status }\n    });\n  };\n}\n\nfunction loadSoundfontInstrument(instrument) {\n  var _this = this;\n\n  return function (dispatch, getState) {\n    var state = getState();\n    var instrumentPath = _getInstrumentPath.call(_this, instrument);\n    var ac = state.midi.audioContext;\n\n    _soundfontPlayer2.default.instrument(ac, instrumentPath).then(function (soundfontInstrument) {\n      dispatch({\n        type: _midiConnect2.default.MIDI_LOAD_INSTRUMENT,\n        payload: { soundfontInstrument: soundfontInstrument }\n      });\n    });\n  };\n}\n\nfunction changeAudio(audio) {\n  return function (dispatch) {\n    var webApiAudio = audio;\n\n    dispatch({\n      type: _midiConnect2.default.CHANGE_AUDIO,\n      payload: { webApiAudio: webApiAudio }\n    });\n  };\n}\n\nfunction _getInstrumentPath(instrument) {\n  return _midiSoundpaths.SOUNDS_PATH + '/' + instrument + '-' + _midiSoundpaths.SOUNDS_FILETYPE + '.' + _midiSoundpaths.SOUNDS_FILE_EXTENSION;\n}\n\n},{\"../action-creators/midi-messages-action-creators\":40,\"../actions/midi-connect\":43,\"../constants/midi-soundpaths\":50,\"redux\":25,\"soundfont-player\":34}],42:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Object.freeze({\n  CONTROLLER: 'controller',\n  INSTRUMENT_NAME: 'instrumentName',\n  NOTE_OFF: 'noteOff',\n  NOTE_ON: 'noteOn',\n  PROGRAM_CHANGE: 'programChange',\n  SYS_EX: 'sysEx'\n});\n\n},{}],43:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Object.freeze({\n  MIDI_SUCCESS: 'midiSuccess',\n  MIDI_FAILURE: 'midiFailure',\n  MIDI_MESSAGE: 'midiMessage',\n  CHANGE_AUDIO: 'changeAudio',\n  MIDI_LOAD_INSTRUMENT: 'loadInstrument'\n});\n\n},{}],44:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MidiAudioSelector = exports.MidiAudioSelector = {\n  init: function init() {\n    var _this = this;\n\n    var store = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var midiSetupActions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    this.store = store;\n    this.midiSetupActions = midiSetupActions;\n    this.audioSelectors = document.getElementById('audio-selector').audioSelectors;\n\n    this.audioSelectors.forEach(function (selector) {\n      selector.addEventListener('change', _this.changeAudio.bind(_this));\n    });\n\n    this.render();\n  },\n  changeAudio: function changeAudio(event) {\n    var audio = event.target.value === \"true\";\n    this.midiSetupActions.changeAudio(audio);\n  },\n  render: function render() {\n    var store = this.store;\n\n    store.subscribe(function () {});\n  }\n};\n\n},{}],45:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MidiInstrumentsSelector = undefined;\n\nvar _midiInstruments = require('../constants/midi-instruments');\n\nvar MidiInstrumentsSelector = exports.MidiInstrumentsSelector = {\n  init: function init() {\n    var store = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var midiSetupActions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    this.store = store;\n    this.midiSetupActions = midiSetupActions;\n    this.instrumentSelector = document.getElementById('instrument-selector');\n\n    this.instrumentSelector.addEventListener('change', this.loadInstrument.bind(this));\n\n    _addInstrumentOptions.call(this);\n\n    this.render();\n  },\n  loadInstrument: function loadInstrument(event) {\n    var instrument = event.target.value;\n    this.midiSetupActions.loadSoundfontInstrument(instrument);\n  },\n  render: function render() {\n    var _this = this;\n\n    var store = this.store;\n\n    store.subscribe(function () {\n      var state = store.getState();\n      var hiddenClass = 'hidden';\n      var toggleHidden = state.settings.webApiAudio ? 'add' : 'remove';\n\n      _this.instrumentSelector.classList[toggleHidden](hiddenClass);\n    });\n  }\n};\n\nfunction _addInstrumentOptions() {\n  for (var instrument in _midiInstruments.MIDIInstruments) {\n    var instrumentOption = document.createElement('option');\n    instrumentOption.value = _midiInstruments.MIDIInstruments[instrument];\n    instrumentOption.text = _midiInstruments.MIDIInstruments[instrument];\n    this.instrumentSelector.appendChild(instrumentOption);\n  }\n}\n\n},{\"../constants/midi-instruments\":47}],46:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MidiPiano = exports.MidiPiano = {\n  init: function init() {\n    var store = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var midiEventsActions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    this.store = store;\n    this.midiEventsActions = midiEventsActions;\n    this.notes = document.getElementsByClassName('note');\n    this.keys$ = {};\n\n    _initKeyElements.call(this);\n\n    this.render();\n  },\n  render: function render() {\n    var _this = this;\n\n    var store = this.store;\n\n    store.subscribe(function () {\n      var state = store.getState();\n\n      for (var note in state.midi.notes) {\n        var key$ = _this.keys$[note];\n        var midiNote = state.midi.notes[note];\n        var toggle = midiNote ? 'add' : 'remove';\n        var playingClass = 'playing';\n\n        key$.classList[toggle](playingClass);\n      }\n    });\n  }\n};\n\nfunction _initKeyElements() {\n  var _this2 = this;\n\n  var noteNumber = 48;\n\n  [].forEach.call(this.notes, function (note) {\n    note.setAttribute('data-note', noteNumber);\n\n    note.addEventListener('mousedown', _this2.midiEventsActions.noteOn);\n    note.addEventListener('mouseup', _this2.midiEventsActions.noteOff);\n\n    _this2.keys$[noteNumber] = note;\n    noteNumber++;\n  });\n}\n\n},{}],47:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MIDIInstruments = exports.MIDIInstruments = {\n  0: 'acoustic_grand_piano',\n  1: 'bright_acoustic_piano',\n  2: 'electric_grand_piano',\n  3: 'honkytonk_piano',\n  4: 'electric_piano_1',\n  5: 'electric_piano_2',\n  6: 'harpsichord',\n  7: 'clavinet',\n  8: 'celesta',\n  9: 'glockenspiel',\n  10: 'music_box',\n  11: 'vibraphone',\n  12: 'marimba',\n  13: 'xylophone',\n  14: 'tubular_bells',\n  15: 'dulcimer',\n  16: 'drawbar_organ',\n  17: 'percussive_organ',\n  18: 'rock_organ',\n  19: 'church_organ',\n  20: 'reed_organ',\n  21: 'Accordion',\n  22: 'harmonica',\n  23: 'tango_accordion',\n  24: 'acoustic_guitar_nylon',\n  25: 'acoustic_guitar_steel',\n  26: 'electric_guitar_jazz',\n  27: 'electric_guitar_clean',\n  28: 'electric_guitar_muted',\n  29: 'overdriven_guitar',\n  30: 'distortion_guitar',\n  31: 'guitar_harmonics',\n  32: 'acoustic_bass',\n  33: 'electric_bass_finger',\n  34: 'electric_bass_pick',\n  35: 'fretless_bass',\n  36: 'slap_bass_1',\n  37: 'slap_bass_2',\n  38: 'synth_bass_1',\n  39: 'synth_bass_2',\n  40: 'violin',\n  41: 'viola',\n  42: 'cello',\n  43: 'contrabass',\n  44: 'tremolo_strings',\n  45: 'pizzicato_strings',\n  46: 'orchestral_harp',\n  47: 'timpani',\n  48: 'string_ensemble_1',\n  49: 'string_ensemble_2',\n  50: 'synthstrings_1',\n  51: 'synthstrings_2',\n  52: 'choir_aahs',\n  53: 'voice_oohs',\n  54: 'synth_voice',\n  55: 'orchestra_hit',\n  56: 'trumpet',\n  57: 'trombone',\n  58: 'tuba',\n  59: 'muted_trumpet',\n  60: 'french_horn',\n  61: 'brass_section',\n  62: 'synth_brass_1',\n  63: 'synth_brass_2',\n  64: 'soprano_sax',\n  65: 'alto_sax',\n  66: 'tenor_sax',\n  67: 'baritone_sax',\n  68: 'oboe',\n  69: 'english_horn',\n  70: 'bassoon',\n  71: 'clarinet',\n  72: 'piccolo',\n  73: 'flute',\n  74: 'recorder',\n  75: 'pan_flute',\n  76: 'blown_bottle',\n  77: 'shakuhachi',\n  78: 'whistle',\n  79: 'ocarina',\n  80: 'lead_1_square',\n  81: 'lead_2_sawtooth',\n  82: 'lead_3_calliope',\n  83: 'lead_4_chiff',\n  84: 'lead_5_charang',\n  85: 'lead_6_voice',\n  86: 'lead_7_fifths',\n  87: 'lead_8_bass_lead',\n  88: 'pad_1_new_age',\n  89: 'pad_2_warm',\n  90: 'pad_3_polysynth',\n  91: 'pad_4_choir',\n  92: 'pad_5_bowed',\n  93: 'pad_6_metallic',\n  94: 'pad_7_halo',\n  95: 'pad_8_sweep',\n  96: 'fx_1_rain',\n  97: 'fx_2_soundtrack',\n  98: 'fx_3_crystal',\n  99: 'fx_4_atmosphere',\n  100: 'fx_5_brightness',\n  101: 'fx_6_goblins',\n  102: 'fx_7_echoes',\n  103: 'fx_8_scifi',\n  104: 'sitar',\n  105: 'banjo',\n  106: 'shamisen',\n  107: 'koto',\n  108: 'kalimba',\n  109: 'bag_pipe',\n  110: 'fiddle',\n  111: 'shanai',\n  112: 'tinkle_bell',\n  113: 'agogo',\n  114: 'steel_drums',\n  115: 'woodblock',\n  116: 'taiko_drum',\n  117: 'melodic_tom',\n  118: 'synth_drum',\n  119: 'reverse_cymbal',\n  120: 'guitar_fret_noise',\n  121: 'breath_noise',\n  122: 'seashore',\n  123: 'bird_tweet',\n  124: 'telephone_ring',\n  125: 'helicopter',\n  126: 'applause',\n  127: 'gunshot'\n};\n\n},{}],48:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MidiMessagesHex = exports.MidiMessagesHex = Object.freeze({\n  SEQUENCE_NUMBER: 0x00,\n  TEXT: 0x01,\n  INSTRUMENT_NAME: 0x04,\n  NOTE_OFF: 0x80,\n  NOTE_ON: 0x90,\n  PROGRAM_CHANGE: 0xC0,\n  CONTROLLER: 0xB0\n});\n\n},{}],49:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MidiMessages = exports.MidiMessages = Object.freeze({\n  0x00: 'sequenceNumber',\n  0x01: 'text',\n  0x04: 'instrumentName',\n  0x80: 'noteOff',\n  0x90: 'noteOn',\n  0xC0: 'programChange',\n  0xB0: 'controller'\n});\n\n},{}],50:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* Soundfond Library:\n\n  By Gleitz\n  https://github.com/gleitz/midi-js-soundfonts/tree/gh-pages/FluidR3_GM\n\n*/\n\nvar InstrumentSets = exports.InstrumentSets = Object.freeze({\n  MUSYNG_KITE: 'MusyngKite',\n  FLUID_R3_GM: 'FluidR3_GM'\n});\n\nvar InstrumentPathConfig = exports.InstrumentPathConfig = {\n  URL: 'http://localhost',\n  PORT: 8001,\n  SET: InstrumentSets.MUSYNG_KITE,\n  URL_GITHUB: 'https://raw.githubusercontent.com/gleitz/midi-js-soundfonts/gh-pages/'\n};\n\nvar SOUNDS_PATH = exports.SOUNDS_PATH = InstrumentPathConfig.URL + ':' + InstrumentPathConfig.PORT + '/' + InstrumentPathConfig.SET;\n\nvar SOUNDS_FILETYPE = exports.SOUNDS_FILETYPE = 'mp3';\nvar SOUNDS_FILE_EXTENSION = exports.SOUNDS_FILE_EXTENSION = 'js';\n\n},{}],51:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _redux = require('redux');\n\nvar _midiReducer = require('../reducers/midi-reducer');\n\nvar _midiReducer2 = _interopRequireDefault(_midiReducer);\n\nvar _settingsReducer = require('../reducers/settings-reducer');\n\nvar _settingsReducer2 = _interopRequireDefault(_settingsReducer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar rootReducer = (0, _redux.combineReducers)({\n  midi: _midiReducer2.default,\n  settings: _settingsReducer2.default\n});\n\nexports.default = rootReducer;\n\n},{\"../reducers/midi-reducer\":52,\"../reducers/settings-reducer\":53,\"redux\":25}],52:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = MIDIEventsReducer;\n\nvar _midiActions = require('../actions/midi-actions.js');\n\nvar _midiActions2 = _interopRequireDefault(_midiActions);\n\nvar _midiConnect = require('../actions/midi-connect.js');\n\nvar _midiConnect2 = _interopRequireDefault(_midiConnect);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar initialState = {\n  message: 'None',\n  inputs: [],\n  data: null,\n  audioContext: !!window.AudioContext ? new window.AudioContext() : new window.webkitAudioContext(),\n  notes: {}\n};\n\nfunction MIDIEventsReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments[1];\n  var type = action.type,\n      payload = action.payload;\n\n\n  switch (type) {\n    case _midiActions2.default.NOTE_ON:\n    case _midiActions2.default.NOTE_OFF:\n    case _midiActions2.default.PROGRAM_CHANGE:\n    case _midiActions2.default.INSTRUMENT_NAME:\n    case _midiActions2.default.CONTROLLER:\n    case _midiActions2.default.SYS_EX:\n      return _extends({}, state, payload);\n    default:\n      return state;\n  }\n}\n\n},{\"../actions/midi-actions.js\":42,\"../actions/midi-connect.js\":43}],53:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = MIDIEventsReducer;\n\nvar _midiActions = require('../actions/midi-actions.js');\n\nvar _midiActions2 = _interopRequireDefault(_midiActions);\n\nvar _midiConnect = require('../actions/midi-connect.js');\n\nvar _midiConnect2 = _interopRequireDefault(_midiConnect);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar initialState = {\n  midiAccess: null,\n  webApiAudio: false,\n  gainNode: null,\n  soundfontInstrument: null\n};\n\nfunction MIDIEventsReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments[1];\n  var type = action.type,\n      payload = action.payload;\n\n  switch (type) {\n    case _midiConnect2.default.MIDI_SUCCESS:\n    case _midiConnect2.default.MIDI_FAILURE:\n    case _midiConnect2.default.MIDI_LOAD_INSTRUMENT:\n    case _midiConnect2.default.CHANGE_AUDIO:\n      return _extends({}, state, payload);\n    default:\n      return state;\n  }\n}\n\n},{\"../actions/midi-actions.js\":42,\"../actions/midi-connect.js\":43}],54:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = configureStore;\n\nvar _redux = require('redux');\n\nvar _reduxThunk = require('redux-thunk');\n\nvar _reduxThunk2 = _interopRequireDefault(_reduxThunk);\n\nvar _index = require('../reducers/index');\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || _redux.compose;\nvar middleware = composeEnhancers((0, _redux.applyMiddleware)(_reduxThunk2.default));\n\nfunction configureStore(initialState) {\n  return (0, _redux.createStore)(_index2.default, initialState, middleware);\n}\n\n},{\"../reducers/index\":51,\"redux\":25,\"redux-thunk\":19}],55:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar AudioUtils = exports.AudioUtils = Object.freeze({\n  getFrequency: function getFrequency(note) {\n    var LA_HZ = 440;\n    var LA_DEC = 69;\n    var OCTAVE = 12;\n\n    return LA_HZ * Math.pow(2, (note - LA_DEC) / OCTAVE);\n  },\n  generateOscillator: function generateOscillator(note, audioContext) {\n    var frequency = this.getFrequency(note);\n    var oscillator = audioContext.createOscillator();\n\n    oscillator.type = 'square';\n    oscillator.connect(audioContext.destination);\n    oscillator.frequency.value = frequency;\n\n    return oscillator;\n  }\n});\n\n},{}],56:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MidiUtils = undefined;\n\nvar _midiMessagesHex = require('../constants/midi-messages-hex');\n\nvar MidiUtils = exports.MidiUtils = Object.freeze({\n  getType: function getType(data) {\n    return data[0];\n  },\n  getNote: function getNote(data) {\n    return data[1];\n  },\n  getNoteVelocity: function getNoteVelocity(data) {\n    return data[2];\n  },\n  getEventType: function getEventType(data) {\n    return this.isNoteOnOff(data) ? _midiMessagesHex.MidiMessagesHex.NOTE_OFF & 0xf0 : this.getType(data) & 0xf0;\n  },\n  isNoteOnOff: function isNoteOnOff(data) {\n    return this.getType(data) === _midiMessagesHex.MidiMessagesHex.NOTE_ON && this.getNoteVelocity(data) === 0;\n  },\n  setNoteOnMessage: function setNoteOnMessage(target) {\n    var NOTE_ON = 144;\n    return new Uint8Array([NOTE_ON, event.target.getAttribute('data-note'), 1]);\n  },\n  setNoteOffMessage: function setNoteOffMessage(target) {\n    var NOTE_ON = 144;\n    return new Uint8Array([NOTE_ON, event.target.getAttribute('data-note'), 0]);\n  }\n}); /*jslint bitwise: true */\n\n},{\"../constants/midi-messages-hex\":48}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9hZHNyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2F1ZGlvLWxvYWRlci9saWIvYmFzZTY0LmpzIiwibm9kZV9tb2R1bGVzL2F1ZGlvLWxvYWRlci9saWIvZmV0Y2guanMiLCJub2RlX21vZHVsZXMvYXVkaW8tbG9hZGVyL2xpYi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvX1N5bWJvbC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvX2Jhc2VHZXRUYWcuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL19mcmVlR2xvYmFsLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9fZ2V0UHJvdG90eXBlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9fZ2V0UmF3VGFnLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9fb2JqZWN0VG9TdHJpbmcuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL19vdmVyQXJnLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9fcm9vdC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaXNPYmplY3RMaWtlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pc1BsYWluT2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL21pZGltZXNzYWdlL2Rpc3QvaW5kZXgubWluLmpzIiwibm9kZV9tb2R1bGVzL25vdGUtcGFyc2VyL2Rpc3Qvbm90ZS1wYXJzZXIuanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3JlZHV4LXRodW5rL2xpYi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9yZWR1eC9saWIvYXBwbHlNaWRkbGV3YXJlLmpzIiwibm9kZV9tb2R1bGVzL3JlZHV4L2xpYi9iaW5kQWN0aW9uQ3JlYXRvcnMuanMiLCJub2RlX21vZHVsZXMvcmVkdXgvbGliL2NvbWJpbmVSZWR1Y2Vycy5qcyIsIm5vZGVfbW9kdWxlcy9yZWR1eC9saWIvY29tcG9zZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWR1eC9saWIvY3JlYXRlU3RvcmUuanMiLCJub2RlX21vZHVsZXMvcmVkdXgvbGliL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlZHV4L2xpYi91dGlscy93YXJuaW5nLmpzIiwibm9kZV9tb2R1bGVzL3NhbXBsZS1wbGF5ZXIvbGliL2V2ZW50cy5qcyIsIm5vZGVfbW9kdWxlcy9zYW1wbGUtcGxheWVyL2xpYi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9zYW1wbGUtcGxheWVyL2xpYi9taWRpLmpzIiwibm9kZV9tb2R1bGVzL3NhbXBsZS1wbGF5ZXIvbGliL25vdGVzLmpzIiwibm9kZV9tb2R1bGVzL3NhbXBsZS1wbGF5ZXIvbGliL3BsYXllci5qcyIsIm5vZGVfbW9kdWxlcy9zYW1wbGUtcGxheWVyL2xpYi9zY2hlZHVsZXIuanMiLCJub2RlX21vZHVsZXMvc2FtcGxlLXBsYXllci9ub2RlX21vZHVsZXMvbm90ZS1wYXJzZXIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc291bmRmb250LXBsYXllci9saWIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc291bmRmb250LXBsYXllci9saWIvbGVnYWN5LmpzIiwibm9kZV9tb2R1bGVzL3N5bWJvbC1vYnNlcnZhYmxlL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3N5bWJvbC1vYnNlcnZhYmxlL2xpYi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9zeW1ib2wtb2JzZXJ2YWJsZS9saWIvcG9ueWZpbGwuanMiLCJzcmMvYWN0aW9uLWNyZWF0b3JzL21pZGktZXZlbnRzLWFjdGlvbi1jcmVhdG9ycy5qcyIsInNyYy9hY3Rpb24tY3JlYXRvcnMvbWlkaS1tZXNzYWdlcy1hY3Rpb24tY3JlYXRvcnMuanMiLCJzcmMvYWN0aW9uLWNyZWF0b3JzL21pZGktc2V0dXAtYWN0aW9uLWNyZWF0b3JzLmpzIiwic3JjL2FjdGlvbnMvbWlkaS1hY3Rpb25zLmpzIiwic3JjL2FjdGlvbnMvbWlkaS1jb25uZWN0LmpzIiwic3JjL2NvbXBvbmVudHMvbWlkaS1hdWRpby1zZWxlY3Rvci5qcyIsInNyYy9jb21wb25lbnRzL21pZGktaW5zdHJ1bWVudHMtc2VsZWN0b3IuanMiLCJzcmMvY29tcG9uZW50cy9taWRpLXBpYW5vLmpzIiwic3JjL2NvbnN0YW50cy9taWRpLWluc3RydW1lbnRzLmpzIiwic3JjL2NvbnN0YW50cy9taWRpLW1lc3NhZ2VzLWhleC5qcyIsInNyYy9jb25zdGFudHMvbWlkaS1tZXNzYWdlcy5qcyIsInNyYy9jb25zdGFudHMvbWlkaS1zb3VuZHBhdGhzLmpzIiwic3JjL3JlZHVjZXJzL2luZGV4LmpzIiwic3JjL3JlZHVjZXJzL21pZGktcmVkdWNlci5qcyIsInNyYy9yZWR1Y2Vycy9zZXR0aW5ncy1yZWR1Y2VyLmpzIiwic3JjL3N0b3JlL2NvbmZpZ3VyZVN0b3JlLmpzIiwic3JjL3V0aWxzL2F1ZGlvLmpzIiwic3JjL3V0aWxzL21pZGkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0lBQVksVTs7QUFDWjs7SUFBWSxTOztBQUVaOzs7Ozs7QUFFQSxJQUFNLFFBQVEsK0JBQWQ7QUFDQSxJQUFNLG1CQUFtQiwrQkFBbUIsU0FBbkIsRUFBOEIsTUFBTSxRQUFwQyxDQUF6QjtBQUNBLElBQU0sb0JBQW9CLCtCQUFtQixVQUFuQixFQUErQixNQUFNLFFBQXJDLENBQTFCOztBQUVBLHFCQUFVLElBQVYsQ0FBZSxLQUFmLEVBQXNCLGlCQUF0QjtBQUNBLGlEQUF3QixJQUF4QixDQUE2QixLQUE3QixFQUFvQyxnQkFBcEM7QUFDQSxxQ0FBa0IsSUFBbEIsQ0FBdUIsS0FBdkIsRUFBOEIsZ0JBQTlCOztBQUVBLGlCQUFpQix1QkFBakIsQ0FBeUMsc0JBQXpDOztBQUVBLElBQUksVUFBVSxpQkFBZCxFQUFpQztBQUMvQixZQUFVLGlCQUFWLENBQTRCLEVBQUMsT0FBTyxLQUFSLEVBQTVCLEVBQ0csSUFESCxDQUNRLGlCQUFpQixXQUR6QjtBQUVEOzs7QUN0QkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOURBO0FBQ0E7Ozs7QUNEQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzdJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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RUFDdkI7QUFDWixXQUFPLEtBQUssQ0FBTCxDQUFQO0FBQ0QsR0FIb0M7QUFLckMsU0FMcUMsbUJBSzdCLElBTDZCLEVBS3ZCO0FBQ1osV0FBTyxLQUFLLENBQUwsQ0FBUDtBQUNELEdBUG9DO0FBU3JDLGlCQVRxQywyQkFTckIsSUFUcUIsRUFTZjtBQUNwQixXQUFPLEtBQUssQ0FBTCxDQUFQO0FBQ0QsR0FYb0M7QUFhckMsY0FicUMsd0JBYXhCLElBYndCLEVBYWxCO0FBQ2pCLFdBQU8sS0FBSyxXQUFMLENBQWlCLElBQWpCLElBQ0wsaUNBQWdCLFFBQWhCLEdBQTJCLElBRHRCLEdBRUgsS0FBSyxPQUFMLENBQWEsSUFBYixJQUFxQixJQUZ6QjtBQUdELEdBakJvQztBQW1CckMsYUFuQnFDLHVCQW1CekIsSUFuQnlCLEVBbUJuQjtBQUNoQixXQUFPLEtBQUssT0FBTCxDQUFhLElBQWIsTUFBdUIsaUNBQWdCLE9BQXZDLElBQ0wsS0FBSyxlQUFMLENBQXFCLElBQXJCLE1BQStCLENBRGpDO0FBRUQsR0F0Qm9DO0FBd0JyQyxrQkF4QnFDLDRCQXdCcEIsTUF4Qm9CLEVBd0JaO0FBQ3ZCLFFBQU0sVUFBVSxHQUFoQjtBQUNBLFdBQU8sSUFBSSxVQUFKLENBQWUsQ0FBQyxPQUFELEVBQVUsTUFBTSxNQUFOLENBQWEsWUFBYixDQUEwQixXQUExQixDQUFWLEVBQWtELENBQWxELENBQWYsQ0FBUDtBQUNELEdBM0JvQztBQTZCckMsbUJBN0JxQyw2QkE2Qm5CLE1BN0JtQixFQTZCWDtBQUN4QixRQUFNLFVBQVUsR0FBaEI7QUFDQSxXQUFPLElBQUksVUFBSixDQUFlLENBQUMsT0FBRCxFQUFVLE1BQU0sTUFBTixDQUFhLFlBQWIsQ0FBMEIsV0FBMUIsQ0FBVixFQUFrRCxDQUFsRCxDQUFmLENBQVA7QUFDRDtBQWhDb0MsQ0FBZCxDQUFsQixDLENBSlAiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IGNvbmZpZ3VyZVN0b3JlIGZyb20gJy4vc3JjL3N0b3JlL2NvbmZpZ3VyZVN0b3JlJztcbmltcG9ydCB7IE1pZGlQaWFubyB9IGZyb20gJy4vc3JjL2NvbXBvbmVudHMvbWlkaS1waWFubyc7XG5pbXBvcnQgeyBNaWRpSW5zdHJ1bWVudHNTZWxlY3RvciB9IGZyb20gJy4vc3JjL2NvbXBvbmVudHMvbWlkaS1pbnN0cnVtZW50cy1zZWxlY3Rvcic7XG5pbXBvcnQgeyBNaWRpQXVkaW9TZWxlY3RvciB9IGZyb20gJy4vc3JjL2NvbXBvbmVudHMvbWlkaS1hdWRpby1zZWxlY3Rvcic7XG5pbXBvcnQgKiBhcyBNaWRpRXZlbnRzIGZyb20gJy4vc3JjL2FjdGlvbi1jcmVhdG9ycy9taWRpLWV2ZW50cy1hY3Rpb24tY3JlYXRvcnMnO1xuaW1wb3J0ICogYXMgTWlkaVNldHVwIGZyb20gJy4vc3JjL2FjdGlvbi1jcmVhdG9ycy9taWRpLXNldHVwLWFjdGlvbi1jcmVhdG9ycyc7XG5cbmltcG9ydCB7IGJpbmRBY3Rpb25DcmVhdG9ycyB9IGZyb20gJ3JlZHV4JztcblxuY29uc3Qgc3RvcmUgPSBjb25maWd1cmVTdG9yZSgpO1xuY29uc3QgbWlkaVNldHVwQWN0aW9ucyA9IGJpbmRBY3Rpb25DcmVhdG9ycyhNaWRpU2V0dXAsIHN0b3JlLmRpc3BhdGNoKTtcbmNvbnN0IG1pZGlFdmVudHNBY3Rpb25zID0gYmluZEFjdGlvbkNyZWF0b3JzKE1pZGlFdmVudHMsIHN0b3JlLmRpc3BhdGNoKTtcblxuTWlkaVBpYW5vLmluaXQoc3RvcmUsIG1pZGlFdmVudHNBY3Rpb25zKTtcbk1pZGlJbnN0cnVtZW50c1NlbGVjdG9yLmluaXQoc3RvcmUsIG1pZGlTZXR1cEFjdGlvbnMpO1xuTWlkaUF1ZGlvU2VsZWN0b3IuaW5pdChzdG9yZSwgbWlkaVNldHVwQWN0aW9ucyk7XG5cbm1pZGlTZXR1cEFjdGlvbnMubG9hZFNvdW5kZm9udEluc3RydW1lbnQoJ2Fjb3VzdGljX2dyYW5kX3BpYW5vJyk7XG5cbmlmIChuYXZpZ2F0b3IucmVxdWVzdE1JRElBY2Nlc3MpIHtcbiAgbmF2aWdhdG9yLnJlcXVlc3RNSURJQWNjZXNzKHtzeXNleDogZmFsc2V9KVxuICAgIC50aGVuKG1pZGlTZXR1cEFjdGlvbnMubWlkaVN1Y2Nlc3MpO1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBBRFNSXG5cbmZ1bmN0aW9uIEFEU1IoYXVkaW9Db250ZXh0KXtcbiAgdmFyIG5vZGUgPSBhdWRpb0NvbnRleHQuY3JlYXRlR2FpbigpXG5cbiAgdmFyIHZvbHRhZ2UgPSBub2RlLl92b2x0YWdlID0gZ2V0Vm9sdGFnZShhdWRpb0NvbnRleHQpXG4gIHZhciB2YWx1ZSA9IHNjYWxlKHZvbHRhZ2UpXG4gIHZhciBzdGFydFZhbHVlID0gc2NhbGUodm9sdGFnZSlcbiAgdmFyIGVuZFZhbHVlID0gc2NhbGUodm9sdGFnZSlcblxuICBub2RlLl9zdGFydEFtb3VudCA9IHNjYWxlKHN0YXJ0VmFsdWUpXG4gIG5vZGUuX2VuZEFtb3VudCA9IHNjYWxlKGVuZFZhbHVlKVxuXG4gIG5vZGUuX211bHRpcGxpZXIgPSBzY2FsZSh2YWx1ZSlcbiAgbm9kZS5fbXVsdGlwbGllci5jb25uZWN0KG5vZGUpXG4gIG5vZGUuX3N0YXJ0QW1vdW50LmNvbm5lY3Qobm9kZSlcbiAgbm9kZS5fZW5kQW1vdW50LmNvbm5lY3Qobm9kZSlcblxuICBub2RlLnZhbHVlID0gdmFsdWUuZ2FpblxuICBub2RlLnN0YXJ0VmFsdWUgPSBzdGFydFZhbHVlLmdhaW5cbiAgbm9kZS5lbmRWYWx1ZSA9IGVuZFZhbHVlLmdhaW5cblxuICBub2RlLnN0YXJ0VmFsdWUudmFsdWUgPSAwXG4gIG5vZGUuZW5kVmFsdWUudmFsdWUgPSAwXG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobm9kZSwgcHJvcHMpXG4gIHJldHVybiBub2RlXG59XG5cbnZhciBwcm9wcyA9IHtcblxuICBhdHRhY2s6IHsgdmFsdWU6IDAsIHdyaXRhYmxlOiB0cnVlIH0sXG4gIGRlY2F5OiB7IHZhbHVlOiAwLCB3cml0YWJsZTogdHJ1ZSB9LFxuICBzdXN0YWluOiB7IHZhbHVlOiAxLCB3cml0YWJsZTogdHJ1ZSB9LFxuICByZWxlYXNlOiB7dmFsdWU6IDAsIHdyaXRhYmxlOiB0cnVlIH0sXG5cbiAgZ2V0UmVsZWFzZUR1cmF0aW9uOiB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gdGhpcy5yZWxlYXNlXG4gICAgfVxuICB9LFxuXG4gIHN0YXJ0OiB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uKGF0KXtcbiAgICAgIHZhciB0YXJnZXQgPSB0aGlzLl9tdWx0aXBsaWVyLmdhaW5cbiAgICAgIHZhciBzdGFydEFtb3VudCA9IHRoaXMuX3N0YXJ0QW1vdW50LmdhaW5cbiAgICAgIHZhciBlbmRBbW91bnQgPSB0aGlzLl9lbmRBbW91bnQuZ2FpblxuXG4gICAgICB0aGlzLl92b2x0YWdlLnN0YXJ0KGF0KVxuICAgICAgdGhpcy5fZGVjYXlGcm9tID0gdGhpcy5fZGVjYXlGcm9tID0gYXQrdGhpcy5hdHRhY2tcbiAgICAgIHRoaXMuX3N0YXJ0ZWRBdCA9IGF0XG5cbiAgICAgIHZhciBzdXN0YWluID0gdGhpcy5zdXN0YWluXG5cbiAgICAgIHRhcmdldC5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoYXQpXG4gICAgICBzdGFydEFtb3VudC5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoYXQpXG4gICAgICBlbmRBbW91bnQuY2FuY2VsU2NoZWR1bGVkVmFsdWVzKGF0KVxuXG4gICAgICBlbmRBbW91bnQuc2V0VmFsdWVBdFRpbWUoMCwgYXQpXG5cbiAgICAgIGlmICh0aGlzLmF0dGFjayl7XG4gICAgICAgIHRhcmdldC5zZXRWYWx1ZUF0VGltZSgwLCBhdClcbiAgICAgICAgdGFyZ2V0LmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDEsIGF0ICsgdGhpcy5hdHRhY2spXG5cbiAgICAgICAgc3RhcnRBbW91bnQuc2V0VmFsdWVBdFRpbWUoMSwgYXQpXG4gICAgICAgIHN0YXJ0QW1vdW50LmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAsIGF0ICsgdGhpcy5hdHRhY2spXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXQuc2V0VmFsdWVBdFRpbWUoMSwgYXQpXG4gICAgICAgIHN0YXJ0QW1vdW50LnNldFZhbHVlQXRUaW1lKDAsIGF0KVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kZWNheSl7XG4gICAgICAgIHRhcmdldC5zZXRUYXJnZXRBdFRpbWUoc3VzdGFpbiwgdGhpcy5fZGVjYXlGcm9tLCBnZXRUaW1lQ29uc3RhbnQodGhpcy5kZWNheSkpXG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHN0b3A6IHtcbiAgICB2YWx1ZTogZnVuY3Rpb24oYXQsIGlzVGFyZ2V0KXtcbiAgICAgIGlmIChpc1RhcmdldCl7XG4gICAgICAgIGF0ID0gYXQgLSB0aGlzLnJlbGVhc2VcbiAgICAgIH1cblxuICAgICAgdmFyIGVuZFRpbWUgPSBhdCArIHRoaXMucmVsZWFzZVxuICAgICAgaWYgKHRoaXMucmVsZWFzZSl7XG5cbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuX211bHRpcGxpZXIuZ2FpblxuICAgICAgICB2YXIgc3RhcnRBbW91bnQgPSB0aGlzLl9zdGFydEFtb3VudC5nYWluXG4gICAgICAgIHZhciBlbmRBbW91bnQgPSB0aGlzLl9lbmRBbW91bnQuZ2FpblxuXG4gICAgICAgIHRhcmdldC5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoYXQpXG4gICAgICAgIHN0YXJ0QW1vdW50LmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhhdClcbiAgICAgICAgZW5kQW1vdW50LmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhhdClcblxuICAgICAgICB2YXIgZXhwRmFsbG9mZiA9IGdldFRpbWVDb25zdGFudCh0aGlzLnJlbGVhc2UpXG5cbiAgICAgICAgLy8gdHJ1bmNhdGUgYXR0YWNrIChyZXF1aXJlZCBhcyBsaW5lYXJSYW1wIGlzIHJlbW92ZWQgYnkgY2FuY2VsU2NoZWR1bGVkVmFsdWVzKVxuICAgICAgICBpZiAodGhpcy5hdHRhY2sgJiYgYXQgPCB0aGlzLl9kZWNheUZyb20pe1xuICAgICAgICAgIHZhciB2YWx1ZUF0VGltZSA9IGdldFZhbHVlKDAsIDEsIHRoaXMuX3N0YXJ0ZWRBdCwgdGhpcy5fZGVjYXlGcm9tLCBhdClcbiAgICAgICAgICB0YXJnZXQubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodmFsdWVBdFRpbWUsIGF0KVxuICAgICAgICAgIHN0YXJ0QW1vdW50LmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDEtdmFsdWVBdFRpbWUsIGF0KVxuICAgICAgICAgIHN0YXJ0QW1vdW50LnNldFRhcmdldEF0VGltZSgwLCBhdCwgZXhwRmFsbG9mZilcbiAgICAgICAgfVxuXG4gICAgICAgIGVuZEFtb3VudC5zZXRUYXJnZXRBdFRpbWUoMSwgYXQsIGV4cEZhbGxvZmYpXG4gICAgICAgIHRhcmdldC5zZXRUYXJnZXRBdFRpbWUoMCwgYXQsIGV4cEZhbGxvZmYpXG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3ZvbHRhZ2Uuc3RvcChlbmRUaW1lKVxuICAgICAgcmV0dXJuIGVuZFRpbWVcbiAgICB9XG4gIH0sXG5cbiAgb25lbmRlZDoge1xuICAgIGdldDogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiB0aGlzLl92b2x0YWdlLm9uZW5kZWRcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24odmFsdWUpe1xuICAgICAgdGhpcy5fdm9sdGFnZS5vbmVuZGVkID0gdmFsdWVcbiAgICB9XG4gIH1cblxufVxuXG52YXIgZmxhdCA9IG5ldyBGbG9hdDMyQXJyYXkoWzEsMV0pXG5mdW5jdGlvbiBnZXRWb2x0YWdlKGNvbnRleHQpe1xuICB2YXIgdm9sdGFnZSA9IGNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKClcbiAgdmFyIGJ1ZmZlciA9IGNvbnRleHQuY3JlYXRlQnVmZmVyKDEsIDIsIGNvbnRleHQuc2FtcGxlUmF0ZSlcbiAgYnVmZmVyLmdldENoYW5uZWxEYXRhKDApLnNldChmbGF0KVxuICB2b2x0YWdlLmJ1ZmZlciA9IGJ1ZmZlclxuICB2b2x0YWdlLmxvb3AgPSB0cnVlXG4gIHJldHVybiB2b2x0YWdlXG59XG5cbmZ1bmN0aW9uIHNjYWxlKG5vZGUpe1xuICB2YXIgZ2FpbiA9IG5vZGUuY29udGV4dC5jcmVhdGVHYWluKClcbiAgbm9kZS5jb25uZWN0KGdhaW4pXG4gIHJldHVybiBnYWluXG59XG5cbmZ1bmN0aW9uIGdldFRpbWVDb25zdGFudCh0aW1lKXtcbiAgcmV0dXJuIE1hdGgubG9nKHRpbWUrMSkvTWF0aC5sb2coMTAwKVxufVxuXG5mdW5jdGlvbiBnZXRWYWx1ZShzdGFydCwgZW5kLCBmcm9tVGltZSwgdG9UaW1lLCBhdCl7XG4gIHZhciBkaWZmZXJlbmNlID0gZW5kIC0gc3RhcnRcbiAgdmFyIHRpbWUgPSB0b1RpbWUgLSBmcm9tVGltZVxuICB2YXIgdHJ1bmNhdGVUaW1lID0gYXQgLSBmcm9tVGltZVxuICB2YXIgcGhhc2UgPSB0cnVuY2F0ZVRpbWUgLyB0aW1lXG4gIHZhciB2YWx1ZSA9IHN0YXJ0ICsgcGhhc2UgKiBkaWZmZXJlbmNlXG5cbiAgaWYgKHZhbHVlIDw9IHN0YXJ0KSB7XG4gICAgICB2YWx1ZSA9IHN0YXJ0XG4gIH1cbiAgaWYgKHZhbHVlID49IGVuZCkge1xuICAgICAgdmFsdWUgPSBlbmRcbiAgfVxuXG4gIHJldHVybiB2YWx1ZVxufVxuIiwiJ3VzZSBzdHJpY3QnXG5cbi8vIERFQ09ERSBVVElMSVRJRVNcbmZ1bmN0aW9uIGI2NFRvVWludDYgKG5DaHIpIHtcbiAgcmV0dXJuIG5DaHIgPiA2NCAmJiBuQ2hyIDwgOTEgPyBuQ2hyIC0gNjVcbiAgICA6IG5DaHIgPiA5NiAmJiBuQ2hyIDwgMTIzID8gbkNociAtIDcxXG4gICAgOiBuQ2hyID4gNDcgJiYgbkNociA8IDU4ID8gbkNociArIDRcbiAgICA6IG5DaHIgPT09IDQzID8gNjJcbiAgICA6IG5DaHIgPT09IDQ3ID8gNjNcbiAgICA6IDBcbn1cblxuLy8gRGVjb2RlIEJhc2U2NCB0byBVaW50OEFycmF5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmZ1bmN0aW9uIGRlY29kZSAoc0Jhc2U2NCwgbkJsb2Nrc1NpemUpIHtcbiAgdmFyIHNCNjRFbmMgPSBzQmFzZTY0LnJlcGxhY2UoL1teQS1aYS16MC05XFwrXFwvXS9nLCAnJylcbiAgdmFyIG5JbkxlbiA9IHNCNjRFbmMubGVuZ3RoXG4gIHZhciBuT3V0TGVuID0gbkJsb2Nrc1NpemVcbiAgICA/IE1hdGguY2VpbCgobkluTGVuICogMyArIDEgPj4gMikgLyBuQmxvY2tzU2l6ZSkgKiBuQmxvY2tzU2l6ZVxuICAgIDogbkluTGVuICogMyArIDEgPj4gMlxuICB2YXIgdGFCeXRlcyA9IG5ldyBVaW50OEFycmF5KG5PdXRMZW4pXG5cbiAgZm9yICh2YXIgbk1vZDMsIG5Nb2Q0LCBuVWludDI0ID0gMCwgbk91dElkeCA9IDAsIG5JbklkeCA9IDA7IG5JbklkeCA8IG5JbkxlbjsgbkluSWR4KyspIHtcbiAgICBuTW9kNCA9IG5JbklkeCAmIDNcbiAgICBuVWludDI0IHw9IGI2NFRvVWludDYoc0I2NEVuYy5jaGFyQ29kZUF0KG5JbklkeCkpIDw8IDE4IC0gNiAqIG5Nb2Q0XG4gICAgaWYgKG5Nb2Q0ID09PSAzIHx8IG5JbkxlbiAtIG5JbklkeCA9PT0gMSkge1xuICAgICAgZm9yIChuTW9kMyA9IDA7IG5Nb2QzIDwgMyAmJiBuT3V0SWR4IDwgbk91dExlbjsgbk1vZDMrKywgbk91dElkeCsrKSB7XG4gICAgICAgIHRhQnl0ZXNbbk91dElkeF0gPSBuVWludDI0ID4+PiAoMTYgPj4+IG5Nb2QzICYgMjQpICYgMjU1XG4gICAgICB9XG4gICAgICBuVWludDI0ID0gMFxuICAgIH1cbiAgfVxuICByZXR1cm4gdGFCeXRlc1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgZGVjb2RlOiBkZWNvZGUgfVxuIiwiLyogZ2xvYmFsIFhNTEh0dHBSZXF1ZXN0ICovXG4ndXNlIHN0cmljdCdcblxuLyoqXG4gKiBHaXZlbiBhIHVybCBhbmQgYSByZXR1cm4gdHlwZSwgcmV0dXJucyBhIHByb21pc2UgdG8gdGhlIGNvbnRlbnQgb2YgdGhlIHVybFxuICogQmFzaWNhbGx5IGl0IHdyYXBzIGEgWE1MSHR0cFJlcXVlc3QgaW50byBhIFByb21pc2VcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIGNhbiBiZSAndGV4dCcgb3IgJ2FycmF5YnVmZmVyJ1xuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXJsLCB0eXBlKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoZG9uZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG4gICAgaWYgKHR5cGUpIHJlcS5yZXNwb25zZVR5cGUgPSB0eXBlXG5cbiAgICByZXEub3BlbignR0VUJywgdXJsKVxuICAgIHJlcS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXEuc3RhdHVzID09PSAyMDAgPyBkb25lKHJlcS5yZXNwb25zZSkgOiByZWplY3QoRXJyb3IocmVxLnN0YXR1c1RleHQpKVxuICAgIH1cbiAgICByZXEub25lcnJvciA9IGZ1bmN0aW9uICgpIHsgcmVqZWN0KEVycm9yKCdOZXR3b3JrIEVycm9yJykpIH1cbiAgICByZXEuc2VuZCgpXG4gIH0pXG59XG4iLCIndXNlIHN0cmljdCdcblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJy4vYmFzZTY0JylcbnZhciBmZXRjaCA9IHJlcXVpcmUoJy4vZmV0Y2gnKVxuXG4vLyBHaXZlbiBhIHJlZ2V4LCByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHRlc3QgaWYgYWdhaW5zdCBhIHN0cmluZ1xuZnVuY3Rpb24gZnJvbVJlZ2V4IChyKSB7XG4gIHJldHVybiBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG8gPT09ICdzdHJpbmcnICYmIHIudGVzdChvKSB9XG59XG4vLyBUcnkgdG8gYXBwbHkgYSBwcmVmaXggdG8gYSBuYW1lXG5mdW5jdGlvbiBwcmVmaXggKHByZSwgbmFtZSkge1xuICByZXR1cm4gdHlwZW9mIHByZSA9PT0gJ3N0cmluZycgPyBwcmUgKyBuYW1lXG4gICAgOiB0eXBlb2YgcHJlID09PSAnZnVuY3Rpb24nID8gcHJlKG5hbWUpXG4gICAgOiBuYW1lXG59XG5cbi8qKlxuICogTG9hZCBvbmUgb3IgbW9yZSBhdWRpbyBmaWxlc1xuICpcbiAqXG4gKiBQb3NzaWJsZSBvcHRpb24ga2V5czpcbiAqXG4gKiAtIF9fZnJvbV9fIHtGdW5jdGlvbnxTdHJpbmd9OiBhIGZ1bmN0aW9uIG9yIHN0cmluZyB0byBjb252ZXJ0IGZyb20gZmlsZSBuYW1lcyB0byB1cmxzLlxuICogSWYgaXMgYSBzdHJpbmcgaXQgd2lsbCBiZSBwcmVmaXhlZCB0byB0aGUgbmFtZTpcbiAqIGBsb2FkKGFjLCAnc25hcmUubXAzJywgeyBmcm9tOiAnaHR0cDovL2F1ZGlvLm5ldC9zYW1wbGVzLycgfSlgXG4gKiBJZiBpdCdzIGEgZnVuY3Rpb24gaXQgcmVjZWl2ZXMgdGhlIGZpbGUgbmFtZSBhbmQgc2hvdWxkIHJldHVybiB0aGUgdXJsIGFzIHN0cmluZy5cbiAqIC0gX19vbmx5X18ge0FycmF5fSAtIHdoZW4gbG9hZGluZyBvYmplY3RzLCBpZiBwcm92aWRlZCwgb25seSB0aGUgZ2l2ZW4ga2V5c1xuICogd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgZGVjb2RlZCBvYmplY3Q6XG4gKiBgbG9hZChhYywgJ3BpYW5vLmpzb24nLCB7IG9ubHk6IFsnQzInLCAnRDInXSB9KWBcbiAqXG4gKiBAcGFyYW0ge0F1ZGlvQ29udGV4dH0gYWMgLSB0aGUgYXVkaW8gY29udGV4dFxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSAtIHRoZSBvYmplY3QgdG8gYmUgbG9hZGVkXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIChPcHRpb25hbCkgdGhlIGxvYWQgb3B0aW9ucyBmb3IgdGhhdCBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0VmFsdWUgLSAoT3B0aW9uYWwpIHRoZSBkZWZhdWx0IHZhbHVlIHRvIHJldHVybiBhc1xuICogaW4gYSBwcm9taXNlIGlmIG5vdCB2YWxpZCBsb2FkZXIgZm91bmRcbiAqL1xuZnVuY3Rpb24gbG9hZCAoYWMsIHNvdXJjZSwgb3B0aW9ucywgZGVmVmFsKSB7XG4gIHZhciBsb2FkZXIgPVxuICAgIC8vIEJhc2ljIGF1ZGlvIGxvYWRpbmdcbiAgICAgIGlzQXJyYXlCdWZmZXIoc291cmNlKSA/IGxvYWRBcnJheUJ1ZmZlclxuICAgIDogaXNBdWRpb0ZpbGVOYW1lKHNvdXJjZSkgPyBsb2FkQXVkaW9GaWxlXG4gICAgOiBpc1Byb21pc2Uoc291cmNlKSA/IGxvYWRQcm9taXNlXG4gICAgLy8gQ29tcG91bmQgb2JqZWN0c1xuICAgIDogaXNBcnJheShzb3VyY2UpID8gbG9hZEFycmF5RGF0YVxuICAgIDogaXNPYmplY3Qoc291cmNlKSA/IGxvYWRPYmplY3REYXRhXG4gICAgOiBpc0pzb25GaWxlTmFtZShzb3VyY2UpID8gbG9hZEpzb25GaWxlXG4gICAgLy8gQmFzZTY0IGVuY29kZWQgYXVkaW9cbiAgICA6IGlzQmFzZTY0QXVkaW8oc291cmNlKSA/IGxvYWRCYXNlNjRBdWRpb1xuICAgIDogaXNKc0ZpbGVOYW1lKHNvdXJjZSkgPyBsb2FkTWlkaUpTRmlsZVxuICAgIDogbnVsbFxuXG4gIHZhciBvcHRzID0gb3B0aW9ucyB8fCB7fVxuICByZXR1cm4gbG9hZGVyID8gbG9hZGVyKGFjLCBzb3VyY2UsIG9wdHMpXG4gICAgOiBkZWZWYWwgPyBQcm9taXNlLnJlc29sdmUoZGVmVmFsKVxuICAgIDogUHJvbWlzZS5yZWplY3QoJ1NvdXJjZSBub3QgdmFsaWQgKCcgKyBzb3VyY2UgKyAnKScpXG59XG5sb2FkLmZldGNoID0gZmV0Y2hcblxuLy8gQkFTSUMgQVVESU8gTE9BRElOR1xuLy8gPT09PT09PT09PT09PT09PT09PVxuXG4vLyBMb2FkIChkZWNvZGUpIGFuIGFycmF5IGJ1ZmZlclxuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlciAobykgeyByZXR1cm4gbyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIH1cbmZ1bmN0aW9uIGxvYWRBcnJheUJ1ZmZlciAoYWMsIGFycmF5LCBvcHRpb25zKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoZG9uZSwgcmVqZWN0KSB7XG4gICAgYWMuZGVjb2RlQXVkaW9EYXRhKGFycmF5LFxuICAgICAgZnVuY3Rpb24gKGJ1ZmZlcikgeyBkb25lKGJ1ZmZlcikgfSxcbiAgICAgIGZ1bmN0aW9uICgpIHsgcmVqZWN0KFwiQ2FuJ3QgZGVjb2RlIGF1ZGlvIGRhdGEgKFwiICsgYXJyYXkuc2xpY2UoMCwgMzApICsgJy4uLiknKSB9XG4gICAgKVxuICB9KVxufVxuXG4vLyBMb2FkIGFuIGF1ZGlvIGZpbGVuYW1lXG52YXIgaXNBdWRpb0ZpbGVOYW1lID0gZnJvbVJlZ2V4KC9cXC4obXAzfHdhdnxvZ2cpKFxcPy4qKT8kL2kpXG5mdW5jdGlvbiBsb2FkQXVkaW9GaWxlIChhYywgbmFtZSwgb3B0aW9ucykge1xuICB2YXIgdXJsID0gcHJlZml4KG9wdGlvbnMuZnJvbSwgbmFtZSlcbiAgcmV0dXJuIGxvYWQoYWMsIGxvYWQuZmV0Y2godXJsLCAnYXJyYXlidWZmZXInKSwgb3B0aW9ucylcbn1cblxuLy8gTG9hZCB0aGUgcmVzdWx0IG9mIGEgcHJvbWlzZVxuZnVuY3Rpb24gaXNQcm9taXNlIChvKSB7IHJldHVybiBvICYmIHR5cGVvZiBvLnRoZW4gPT09ICdmdW5jdGlvbicgfVxuZnVuY3Rpb24gbG9hZFByb21pc2UgKGFjLCBwcm9taXNlLCBvcHRpb25zKSB7XG4gIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIGxvYWQoYWMsIHZhbHVlLCBvcHRpb25zKVxuICB9KVxufVxuXG4vLyBDT01QT1VORCBPQkpFQ1RTXG4vLyA9PT09PT09PT09PT09PT09XG5cbi8vIFRyeSB0byBsb2FkIGFsbCB0aGUgaXRlbXMgb2YgYW4gYXJyYXlcbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheVxuZnVuY3Rpb24gbG9hZEFycmF5RGF0YSAoYWMsIGFycmF5LCBvcHRpb25zKSB7XG4gIHJldHVybiBQcm9taXNlLmFsbChhcnJheS5tYXAoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICByZXR1cm4gbG9hZChhYywgZGF0YSwgb3B0aW9ucywgZGF0YSlcbiAgfSkpXG59XG5cbi8vIFRyeSB0byBsb2FkIGFsbCB0aGUgdmFsdWVzIG9mIGEga2V5L3ZhbHVlIG9iamVjdFxuZnVuY3Rpb24gaXNPYmplY3QgKG8pIHsgcmV0dXJuIG8gJiYgdHlwZW9mIG8gPT09ICdvYmplY3QnIH1cbmZ1bmN0aW9uIGxvYWRPYmplY3REYXRhIChhYywgb2JqLCBvcHRpb25zKSB7XG4gIHZhciBkZXN0ID0ge31cbiAgdmFyIHByb21pc2VzID0gT2JqZWN0LmtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgIGlmIChvcHRpb25zLm9ubHkgJiYgb3B0aW9ucy5vbmx5LmluZGV4T2Yoa2V5KSA9PT0gLTEpIHJldHVybiBudWxsXG4gICAgdmFyIHZhbHVlID0gb2JqW2tleV1cbiAgICByZXR1cm4gbG9hZChhYywgdmFsdWUsIG9wdGlvbnMsIHZhbHVlKS50aGVuKGZ1bmN0aW9uIChhdWRpbykge1xuICAgICAgZGVzdFtrZXldID0gYXVkaW9cbiAgICB9KVxuICB9KVxuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gZGVzdCB9KVxufVxuXG4vLyBMb2FkIHRoZSBjb250ZW50IG9mIGEgSlNPTiBmaWxlXG52YXIgaXNKc29uRmlsZU5hbWUgPSBmcm9tUmVnZXgoL1xcLmpzb24oXFw/LiopPyQvaSlcbmZ1bmN0aW9uIGxvYWRKc29uRmlsZSAoYWMsIG5hbWUsIG9wdGlvbnMpIHtcbiAgdmFyIHVybCA9IHByZWZpeChvcHRpb25zLmZyb20sIG5hbWUpXG4gIHJldHVybiBsb2FkKGFjLCBsb2FkLmZldGNoKHVybCwgJ3RleHQnKS50aGVuKEpTT04ucGFyc2UpLCBvcHRpb25zKVxufVxuXG4vLyBCQVNFNjQgRU5DT0RFRCBGT1JNQVRTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09XG5cbi8vIExvYWQgc3RyaW5ncyB3aXRoIEJhc2U2NCBlbmNvZGVkIGF1ZGlvXG52YXIgaXNCYXNlNjRBdWRpbyA9IGZyb21SZWdleCgvXmRhdGE6YXVkaW8vKVxuZnVuY3Rpb24gbG9hZEJhc2U2NEF1ZGlvIChhYywgc291cmNlLCBvcHRpb25zKSB7XG4gIHZhciBpID0gc291cmNlLmluZGV4T2YoJywnKVxuICByZXR1cm4gbG9hZChhYywgYmFzZTY0LmRlY29kZShzb3VyY2Uuc2xpY2UoaSArIDEpKS5idWZmZXIsIG9wdGlvbnMpXG59XG5cbi8vIExvYWQgLmpzIGZpbGVzIHdpdGggTWlkaUpTIHNvdW5kZm9udCBwcmVyZW5kZXJlZCBhdWRpb1xudmFyIGlzSnNGaWxlTmFtZSA9IGZyb21SZWdleCgvXFwuanMoXFw/LiopPyQvaSlcbmZ1bmN0aW9uIGxvYWRNaWRpSlNGaWxlIChhYywgbmFtZSwgb3B0aW9ucykge1xuICB2YXIgdXJsID0gcHJlZml4KG9wdGlvbnMuZnJvbSwgbmFtZSlcbiAgcmV0dXJuIGxvYWQoYWMsIGxvYWQuZmV0Y2godXJsLCAndGV4dCcpLnRoZW4obWlkaUpzVG9Kc29uKSwgb3B0aW9ucylcbn1cblxuLy8gY29udmVydCBhIE1JREkuanMgamF2YXNjcmlwdCBzb3VuZGZvbnQgZmlsZSB0byBqc29uXG5mdW5jdGlvbiBtaWRpSnNUb0pzb24gKGRhdGEpIHtcbiAgdmFyIGJlZ2luID0gZGF0YS5pbmRleE9mKCdNSURJLlNvdW5kZm9udC4nKVxuICBpZiAoYmVnaW4gPCAwKSB0aHJvdyBFcnJvcignSW52YWxpZCBNSURJLmpzIFNvdW5kZm9udCBmb3JtYXQnKVxuICBiZWdpbiA9IGRhdGEuaW5kZXhPZignPScsIGJlZ2luKSArIDJcbiAgdmFyIGVuZCA9IGRhdGEubGFzdEluZGV4T2YoJywnKVxuICByZXR1cm4gSlNPTi5wYXJzZShkYXRhLnNsaWNlKGJlZ2luLCBlbmQpICsgJ30nKVxufVxuXG5pZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIG1vZHVsZS5leHBvcnRzID0gbG9hZFxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cubG9hZEF1ZGlvID0gbG9hZFxuIiwidmFyIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIFN5bWJvbCA9IHJvb3QuU3ltYm9sO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bWJvbDtcbiIsInZhciBTeW1ib2wgPSByZXF1aXJlKCcuL19TeW1ib2wnKSxcbiAgICBnZXRSYXdUYWcgPSByZXF1aXJlKCcuL19nZXRSYXdUYWcnKSxcbiAgICBvYmplY3RUb1N0cmluZyA9IHJlcXVpcmUoJy4vX29iamVjdFRvU3RyaW5nJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBudWxsVGFnID0gJ1tvYmplY3QgTnVsbF0nLFxuICAgIHVuZGVmaW5lZFRhZyA9ICdbb2JqZWN0IFVuZGVmaW5lZF0nO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1Ub1N0cmluZ1RhZyA9IFN5bWJvbCA/IFN5bWJvbC50b1N0cmluZ1RhZyA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgZ2V0VGFnYCB3aXRob3V0IGZhbGxiYWNrcyBmb3IgYnVnZ3kgZW52aXJvbm1lbnRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuXG4gKi9cbmZ1bmN0aW9uIGJhc2VHZXRUYWcodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZFRhZyA6IG51bGxUYWc7XG4gIH1cbiAgcmV0dXJuIChzeW1Ub1N0cmluZ1RhZyAmJiBzeW1Ub1N0cmluZ1RhZyBpbiBPYmplY3QodmFsdWUpKVxuICAgID8gZ2V0UmF3VGFnKHZhbHVlKVxuICAgIDogb2JqZWN0VG9TdHJpbmcodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VHZXRUYWc7XG4iLCIvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZyZWVHbG9iYWw7XG4iLCJ2YXIgb3ZlckFyZyA9IHJlcXVpcmUoJy4vX292ZXJBcmcnKTtcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgZ2V0UHJvdG90eXBlID0gb3ZlckFyZyhPYmplY3QuZ2V0UHJvdG90eXBlT2YsIE9iamVjdCk7XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0UHJvdG90eXBlO1xuIiwidmFyIFN5bWJvbCA9IHJlcXVpcmUoJy4vX1N5bWJvbCcpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgbmF0aXZlT2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgc3ltVG9TdHJpbmdUYWcgPSBTeW1ib2wgPyBTeW1ib2wudG9TdHJpbmdUYWcgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlR2V0VGFnYCB3aGljaCBpZ25vcmVzIGBTeW1ib2wudG9TdHJpbmdUYWdgIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSByYXcgYHRvU3RyaW5nVGFnYC5cbiAqL1xuZnVuY3Rpb24gZ2V0UmF3VGFnKHZhbHVlKSB7XG4gIHZhciBpc093biA9IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIHN5bVRvU3RyaW5nVGFnKSxcbiAgICAgIHRhZyA9IHZhbHVlW3N5bVRvU3RyaW5nVGFnXTtcblxuICB0cnkge1xuICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnXSA9IHVuZGVmaW5lZDtcbiAgICB2YXIgdW5tYXNrZWQgPSB0cnVlO1xuICB9IGNhdGNoIChlKSB7fVxuXG4gIHZhciByZXN1bHQgPSBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgaWYgKHVubWFza2VkKSB7XG4gICAgaWYgKGlzT3duKSB7XG4gICAgICB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ10gPSB0YWc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ107XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0UmF3VGFnO1xuIiwiLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG5hdGl2ZU9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyB1c2luZyBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gbmF0aXZlT2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gb2JqZWN0VG9TdHJpbmc7XG4iLCIvKipcbiAqIENyZWF0ZXMgYSB1bmFyeSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggaXRzIGFyZ3VtZW50IHRyYW5zZm9ybWVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gb3ZlckFyZyhmdW5jLCB0cmFuc2Zvcm0pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiBmdW5jKHRyYW5zZm9ybShhcmcpKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvdmVyQXJnO1xuIiwidmFyIGZyZWVHbG9iYWwgPSByZXF1aXJlKCcuL19mcmVlR2xvYmFsJyk7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxubW9kdWxlLmV4cG9ydHMgPSByb290O1xuIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3RMaWtlO1xuIiwidmFyIGJhc2VHZXRUYWcgPSByZXF1aXJlKCcuL19iYXNlR2V0VGFnJyksXG4gICAgZ2V0UHJvdG90eXBlID0gcmVxdWlyZSgnLi9fZ2V0UHJvdG90eXBlJyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi9pc09iamVjdExpa2UnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgZnVuY1Byb3RvID0gRnVuY3Rpb24ucHJvdG90eXBlLFxuICAgIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZ1bmNUb1N0cmluZyA9IGZ1bmNQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqIFVzZWQgdG8gaW5mZXIgdGhlIGBPYmplY3RgIGNvbnN0cnVjdG9yLiAqL1xudmFyIG9iamVjdEN0b3JTdHJpbmcgPSBmdW5jVG9TdHJpbmcuY2FsbChPYmplY3QpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCB0aGF0IGlzLCBhbiBvYmplY3QgY3JlYXRlZCBieSB0aGVcbiAqIGBPYmplY3RgIGNvbnN0cnVjdG9yIG9yIG9uZSB3aXRoIGEgYFtbUHJvdG90eXBlXV1gIG9mIGBudWxsYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuOC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHBsYWluIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiB9XG4gKlxuICogXy5pc1BsYWluT2JqZWN0KG5ldyBGb28pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc1BsYWluT2JqZWN0KHsgJ3gnOiAwLCAneSc6IDAgfSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1BsYWluT2JqZWN0KE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3RMaWtlKHZhbHVlKSB8fCBiYXNlR2V0VGFnKHZhbHVlKSAhPSBvYmplY3RUYWcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHByb3RvID0gZ2V0UHJvdG90eXBlKHZhbHVlKTtcbiAgaWYgKHByb3RvID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgdmFyIEN0b3IgPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3RvLCAnY29uc3RydWN0b3InKSAmJiBwcm90by5jb25zdHJ1Y3RvcjtcbiAgcmV0dXJuIHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3RvciBpbnN0YW5jZW9mIEN0b3IgJiZcbiAgICBmdW5jVG9TdHJpbmcuY2FsbChDdG9yKSA9PSBvYmplY3RDdG9yU3RyaW5nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzUGxhaW5PYmplY3Q7XG4iLCIoZnVuY3Rpb24oZSl7aWYodHlwZW9mIGV4cG9ydHM9PT1cIm9iamVjdFwiJiZ0eXBlb2YgbW9kdWxlIT09XCJ1bmRlZmluZWRcIil7bW9kdWxlLmV4cG9ydHM9ZSgpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PVwiZnVuY3Rpb25cIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKFtdLGUpfWVsc2V7dmFyIHQ7aWYodHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCIpe3Q9d2luZG93fWVsc2UgaWYodHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCIpe3Q9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiKXt0PXNlbGZ9ZWxzZXt0PXRoaXN9dC5taWRpbWVzc2FnZT1lKCl9fSkoZnVuY3Rpb24oKXt2YXIgZSx0LHM7cmV0dXJuIGZ1bmN0aW9uIG8oZSx0LHMpe2Z1bmN0aW9uIGEobixpKXtpZighdFtuXSl7aWYoIWVbbl0pe3ZhciBsPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIWkmJmwpcmV0dXJuIGwobiwhMCk7aWYocilyZXR1cm4gcihuLCEwKTt2YXIgaD1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK24rXCInXCIpO3Rocm93IGguY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixofXZhciBjPXRbbl09e2V4cG9ydHM6e319O2Vbbl1bMF0uY2FsbChjLmV4cG9ydHMsZnVuY3Rpb24odCl7dmFyIHM9ZVtuXVsxXVt0XTtyZXR1cm4gYShzP3M6dCl9LGMsYy5leHBvcnRzLG8sZSx0LHMpfXJldHVybiB0W25dLmV4cG9ydHN9dmFyIHI9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG49MDtuPHMubGVuZ3RoO24rKylhKHNbbl0pO3JldHVybiBhfSh7MTpbZnVuY3Rpb24oZSx0LHMpe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTp0cnVlfSk7c1tcImRlZmF1bHRcIl09ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt0aGlzLl9ldmVudD1lO3RoaXMuX2RhdGE9ZS5kYXRhO3RoaXMucmVjZWl2ZWRUaW1lPWUucmVjZWl2ZWRUaW1lO2lmKHRoaXMuX2RhdGEmJnRoaXMuX2RhdGEubGVuZ3RoPDIpe2NvbnNvbGUud2FybihcIklsbGVnYWwgTUlESSBtZXNzYWdlIG9mIGxlbmd0aFwiLHRoaXMuX2RhdGEubGVuZ3RoKTtyZXR1cm59dGhpcy5fbWVzc2FnZUNvZGU9ZS5kYXRhWzBdJjI0MDt0aGlzLmNoYW5uZWw9ZS5kYXRhWzBdJjE1O3N3aXRjaCh0aGlzLl9tZXNzYWdlQ29kZSl7Y2FzZSAxMjg6dGhpcy5tZXNzYWdlVHlwZT1cIm5vdGVvZmZcIjt0aGlzLmtleT1lLmRhdGFbMV0mMTI3O3RoaXMudmVsb2NpdHk9ZS5kYXRhWzJdJjEyNzticmVhaztjYXNlIDE0NDp0aGlzLm1lc3NhZ2VUeXBlPVwibm90ZW9uXCI7dGhpcy5rZXk9ZS5kYXRhWzFdJjEyNzt0aGlzLnZlbG9jaXR5PWUuZGF0YVsyXSYxMjc7YnJlYWs7Y2FzZSAxNjA6dGhpcy5tZXNzYWdlVHlwZT1cImtleXByZXNzdXJlXCI7dGhpcy5rZXk9ZS5kYXRhWzFdJjEyNzt0aGlzLnByZXNzdXJlPWUuZGF0YVsyXSYxMjc7YnJlYWs7Y2FzZSAxNzY6dGhpcy5tZXNzYWdlVHlwZT1cImNvbnRyb2xjaGFuZ2VcIjt0aGlzLmNvbnRyb2xsZXJOdW1iZXI9ZS5kYXRhWzFdJjEyNzt0aGlzLmNvbnRyb2xsZXJWYWx1ZT1lLmRhdGFbMl0mMTI3O2lmKHRoaXMuY29udHJvbGxlck51bWJlcj09PTEyMCYmdGhpcy5jb250cm9sbGVyVmFsdWU9PT0wKXt0aGlzLmNoYW5uZWxNb2RlTWVzc2FnZT1cImFsbHNvdW5kb2ZmXCJ9ZWxzZSBpZih0aGlzLmNvbnRyb2xsZXJOdW1iZXI9PT0xMjEpe3RoaXMuY2hhbm5lbE1vZGVNZXNzYWdlPVwicmVzZXRhbGxjb250cm9sbGVyc1wifWVsc2UgaWYodGhpcy5jb250cm9sbGVyTnVtYmVyPT09MTIyKXtpZih0aGlzLmNvbnRyb2xsZXJWYWx1ZT09PTApe3RoaXMuY2hhbm5lbE1vZGVNZXNzYWdlPVwibG9jYWxjb250cm9sb2ZmXCJ9ZWxzZXt0aGlzLmNoYW5uZWxNb2RlTWVzc2FnZT1cImxvY2FsY29udHJvbG9uXCJ9fWVsc2UgaWYodGhpcy5jb250cm9sbGVyTnVtYmVyPT09MTIzJiZ0aGlzLmNvbnRyb2xsZXJWYWx1ZT09PTApe3RoaXMuY2hhbm5lbE1vZGVNZXNzYWdlPVwiYWxsbm90ZXNvZmZcIn1lbHNlIGlmKHRoaXMuY29udHJvbGxlck51bWJlcj09PTEyNCYmdGhpcy5jb250cm9sbGVyVmFsdWU9PT0wKXt0aGlzLmNoYW5uZWxNb2RlTWVzc2FnZT1cIm9tbmltb2Rlb2ZmXCJ9ZWxzZSBpZih0aGlzLmNvbnRyb2xsZXJOdW1iZXI9PT0xMjUmJnRoaXMuY29udHJvbGxlclZhbHVlPT09MCl7dGhpcy5jaGFubmVsTW9kZU1lc3NhZ2U9XCJvbW5pbW9kZW9uXCJ9ZWxzZSBpZih0aGlzLmNvbnRyb2xsZXJOdW1iZXI9PT0xMjYpe3RoaXMuY2hhbm5lbE1vZGVNZXNzYWdlPVwibW9ub21vZGVvblwifWVsc2UgaWYodGhpcy5jb250cm9sbGVyTnVtYmVyPT09MTI3KXt0aGlzLmNoYW5uZWxNb2RlTWVzc2FnZT1cInBvbHltb2Rlb25cIn1icmVhaztjYXNlIDE5Mjp0aGlzLm1lc3NhZ2VUeXBlPVwicHJvZ3JhbWNoYW5nZVwiO3RoaXMucHJvZ3JhbT1lLmRhdGFbMV07YnJlYWs7Y2FzZSAyMDg6dGhpcy5tZXNzYWdlVHlwZT1cImNoYW5uZWxwcmVzc3VyZVwiO3RoaXMucHJlc3N1cmU9ZS5kYXRhWzFdJjEyNzticmVhaztjYXNlIDIyNDp0aGlzLm1lc3NhZ2VUeXBlPVwicGl0Y2hiZW5kY2hhbmdlXCI7dmFyIHQ9ZS5kYXRhWzJdJjEyNzt2YXIgcz1lLmRhdGFbMV0mMTI3O3RoaXMucGl0Y2hCZW5kPSh0PDw4KStzO2JyZWFrfX1yZXR1cm4gbmV3IHQoZSl9O3QuZXhwb3J0cz1zW1wiZGVmYXVsdFwiXX0se31dfSx7fSxbMV0pKDEpfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kaXN0L2luZGV4LmpzLm1hcCIsIiFmdW5jdGlvbih0LG4pe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP24oZXhwb3J0cyk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJleHBvcnRzXCJdLG4pOm4odC5Ob3RlUGFyc2VyPXQuTm90ZVBhcnNlcnx8e30pfSh0aGlzLGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIG4odCxuKXtyZXR1cm4gQXJyYXkobisxKS5qb2luKHQpfWZ1bmN0aW9uIHIodCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHR9ZnVuY3Rpb24gZSh0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdH1mdW5jdGlvbiB1KHQpe3JldHVybiB2b2lkIDAhPT10fWZ1bmN0aW9uIGModCxuKXtyZXR1cm4gTWF0aC5wb3coMiwodC02OSkvMTIpKihufHw0NDApfWZ1bmN0aW9uIG8oKXtyZXR1cm4gYn1mdW5jdGlvbiBpKHQsbixyKXtpZihcInN0cmluZ1wiIT10eXBlb2YgdClyZXR1cm4gbnVsbDt2YXIgZT1iLmV4ZWModCk7aWYoIWV8fCFuJiZlWzRdKXJldHVybiBudWxsO3ZhciB1PXtsZXR0ZXI6ZVsxXS50b1VwcGVyQ2FzZSgpLGFjYzplWzJdLnJlcGxhY2UoL3gvZyxcIiMjXCIpfTt1LnBjPXUubGV0dGVyK3UuYWNjLHUuc3RlcD0odS5sZXR0ZXIuY2hhckNvZGVBdCgwKSszKSU3LHUuYWx0PVwiYlwiPT09dS5hY2NbMF0/LXUuYWNjLmxlbmd0aDp1LmFjYy5sZW5ndGg7dmFyIG89QVt1LnN0ZXBdK3UuYWx0O3JldHVybiB1LmNocm9tYT1vPDA/MTIrbzpvJTEyLGVbM10mJih1Lm9jdD0rZVszXSx1Lm1pZGk9bysxMioodS5vY3QrMSksdS5mcmVxPWModS5taWRpLHIpKSxuJiYodS50b25pY09mPWVbNF0pLHV9ZnVuY3Rpb24gZih0KXtyZXR1cm4gcih0KT90PDA/bihcImJcIiwtdCk6bihcIiNcIix0KTpcIlwifWZ1bmN0aW9uIGEodCl7cmV0dXJuIHIodCk/XCJcIit0OlwiXCJ9ZnVuY3Rpb24gbCh0LG4scil7cmV0dXJuIG51bGw9PT10fHx2b2lkIDA9PT10P251bGw6dC5zdGVwP2wodC5zdGVwLHQuYWx0LHQub2N0KTp0PDB8fHQ+Nj9udWxsOkMuY2hhckF0KHQpK2YobikrYShyKX1mdW5jdGlvbiBwKHQpe2lmKChyKHQpfHxlKHQpKSYmdD49MCYmdDwxMjgpcmV0dXJuK3Q7dmFyIG49aSh0KTtyZXR1cm4gbiYmdShuLm1pZGkpP24ubWlkaTpudWxsfWZ1bmN0aW9uIHModCxuKXt2YXIgcj1wKHQpO3JldHVybiBudWxsPT09cj9udWxsOmMocixuKX1mdW5jdGlvbiBkKHQpe3JldHVybihpKHQpfHx7fSkubGV0dGVyfWZ1bmN0aW9uIG0odCl7cmV0dXJuKGkodCl8fHt9KS5hY2N9ZnVuY3Rpb24gaCh0KXtyZXR1cm4oaSh0KXx8e30pLnBjfWZ1bmN0aW9uIHYodCl7cmV0dXJuKGkodCl8fHt9KS5zdGVwfWZ1bmN0aW9uIGcodCl7cmV0dXJuKGkodCl8fHt9KS5hbHR9ZnVuY3Rpb24geCh0KXtyZXR1cm4oaSh0KXx8e30pLmNocm9tYX1mdW5jdGlvbiB5KHQpe3JldHVybihpKHQpfHx7fSkub2N0fXZhciBiPS9eKFthLWdBLUddKSgjezEsfXxiezEsfXx4ezEsfXwpKC0/XFxkKilcXHMqKC4qKVxccyokLyxBPVswLDIsNCw1LDcsOSwxMV0sQz1cIkNERUZHQUJcIjt0LnJlZ2V4PW8sdC5wYXJzZT1pLHQuYnVpbGQ9bCx0Lm1pZGk9cCx0LmZyZXE9cyx0LmxldHRlcj1kLHQuYWNjPW0sdC5wYz1oLHQuc3RlcD12LHQuYWx0PWcsdC5jaHJvbWE9eCx0Lm9jdD15fSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub3RlLXBhcnNlci5qcy5tYXBcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5mdW5jdGlvbiBjcmVhdGVUaHVua01pZGRsZXdhcmUoZXh0cmFBcmd1bWVudCkge1xuICByZXR1cm4gZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoLFxuICAgICAgICBnZXRTdGF0ZSA9IF9yZWYuZ2V0U3RhdGU7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHJldHVybiBhY3Rpb24oZGlzcGF0Y2gsIGdldFN0YXRlLCBleHRyYUFyZ3VtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXh0KGFjdGlvbik7XG4gICAgICB9O1xuICAgIH07XG4gIH07XG59XG5cbnZhciB0aHVuayA9IGNyZWF0ZVRodW5rTWlkZGxld2FyZSgpO1xudGh1bmsud2l0aEV4dHJhQXJndW1lbnQgPSBjcmVhdGVUaHVua01pZGRsZXdhcmU7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHRodW5rOyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gYXBwbHlNaWRkbGV3YXJlO1xuXG52YXIgX2NvbXBvc2UgPSByZXF1aXJlKCcuL2NvbXBvc2UnKTtcblxudmFyIF9jb21wb3NlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbXBvc2UpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbi8qKlxuICogQ3JlYXRlcyBhIHN0b3JlIGVuaGFuY2VyIHRoYXQgYXBwbGllcyBtaWRkbGV3YXJlIHRvIHRoZSBkaXNwYXRjaCBtZXRob2RcbiAqIG9mIHRoZSBSZWR1eCBzdG9yZS4gVGhpcyBpcyBoYW5keSBmb3IgYSB2YXJpZXR5IG9mIHRhc2tzLCBzdWNoIGFzIGV4cHJlc3NpbmdcbiAqIGFzeW5jaHJvbm91cyBhY3Rpb25zIGluIGEgY29uY2lzZSBtYW5uZXIsIG9yIGxvZ2dpbmcgZXZlcnkgYWN0aW9uIHBheWxvYWQuXG4gKlxuICogU2VlIGByZWR1eC10aHVua2AgcGFja2FnZSBhcyBhbiBleGFtcGxlIG9mIHRoZSBSZWR1eCBtaWRkbGV3YXJlLlxuICpcbiAqIEJlY2F1c2UgbWlkZGxld2FyZSBpcyBwb3RlbnRpYWxseSBhc3luY2hyb25vdXMsIHRoaXMgc2hvdWxkIGJlIHRoZSBmaXJzdFxuICogc3RvcmUgZW5oYW5jZXIgaW4gdGhlIGNvbXBvc2l0aW9uIGNoYWluLlxuICpcbiAqIE5vdGUgdGhhdCBlYWNoIG1pZGRsZXdhcmUgd2lsbCBiZSBnaXZlbiB0aGUgYGRpc3BhdGNoYCBhbmQgYGdldFN0YXRlYCBmdW5jdGlvbnNcbiAqIGFzIG5hbWVkIGFyZ3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBtaWRkbGV3YXJlcyBUaGUgbWlkZGxld2FyZSBjaGFpbiB0byBiZSBhcHBsaWVkLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIHN0b3JlIGVuaGFuY2VyIGFwcGx5aW5nIHRoZSBtaWRkbGV3YXJlLlxuICovXG5mdW5jdGlvbiBhcHBseU1pZGRsZXdhcmUoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBtaWRkbGV3YXJlcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIG1pZGRsZXdhcmVzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChjcmVhdGVTdG9yZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocmVkdWNlciwgcHJlbG9hZGVkU3RhdGUsIGVuaGFuY2VyKSB7XG4gICAgICB2YXIgc3RvcmUgPSBjcmVhdGVTdG9yZShyZWR1Y2VyLCBwcmVsb2FkZWRTdGF0ZSwgZW5oYW5jZXIpO1xuICAgICAgdmFyIF9kaXNwYXRjaCA9IHN0b3JlLmRpc3BhdGNoO1xuICAgICAgdmFyIGNoYWluID0gW107XG5cbiAgICAgIHZhciBtaWRkbGV3YXJlQVBJID0ge1xuICAgICAgICBnZXRTdGF0ZTogc3RvcmUuZ2V0U3RhdGUsXG4gICAgICAgIGRpc3BhdGNoOiBmdW5jdGlvbiBkaXNwYXRjaChhY3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gX2Rpc3BhdGNoKGFjdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjaGFpbiA9IG1pZGRsZXdhcmVzLm1hcChmdW5jdGlvbiAobWlkZGxld2FyZSkge1xuICAgICAgICByZXR1cm4gbWlkZGxld2FyZShtaWRkbGV3YXJlQVBJKTtcbiAgICAgIH0pO1xuICAgICAgX2Rpc3BhdGNoID0gX2NvbXBvc2UyWydkZWZhdWx0J10uYXBwbHkodW5kZWZpbmVkLCBjaGFpbikoc3RvcmUuZGlzcGF0Y2gpO1xuXG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIHN0b3JlLCB7XG4gICAgICAgIGRpc3BhdGNoOiBfZGlzcGF0Y2hcbiAgICAgIH0pO1xuICAgIH07XG4gIH07XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1snZGVmYXVsdCddID0gYmluZEFjdGlvbkNyZWF0b3JzO1xuZnVuY3Rpb24gYmluZEFjdGlvbkNyZWF0b3IoYWN0aW9uQ3JlYXRvciwgZGlzcGF0Y2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZGlzcGF0Y2goYWN0aW9uQ3JlYXRvci5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuXG4vKipcbiAqIFR1cm5zIGFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGFjdGlvbiBjcmVhdG9ycywgaW50byBhbiBvYmplY3Qgd2l0aCB0aGVcbiAqIHNhbWUga2V5cywgYnV0IHdpdGggZXZlcnkgZnVuY3Rpb24gd3JhcHBlZCBpbnRvIGEgYGRpc3BhdGNoYCBjYWxsIHNvIHRoZXlcbiAqIG1heSBiZSBpbnZva2VkIGRpcmVjdGx5LiBUaGlzIGlzIGp1c3QgYSBjb252ZW5pZW5jZSBtZXRob2QsIGFzIHlvdSBjYW4gY2FsbFxuICogYHN0b3JlLmRpc3BhdGNoKE15QWN0aW9uQ3JlYXRvcnMuZG9Tb21ldGhpbmcoKSlgIHlvdXJzZWxmIGp1c3QgZmluZS5cbiAqXG4gKiBGb3IgY29udmVuaWVuY2UsIHlvdSBjYW4gYWxzbyBwYXNzIGEgc2luZ2xlIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCxcbiAqIGFuZCBnZXQgYSBmdW5jdGlvbiBpbiByZXR1cm4uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R9IGFjdGlvbkNyZWF0b3JzIEFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGFjdGlvblxuICogY3JlYXRvciBmdW5jdGlvbnMuIE9uZSBoYW5keSB3YXkgdG8gb2J0YWluIGl0IGlzIHRvIHVzZSBFUzYgYGltcG9ydCAqIGFzYFxuICogc3ludGF4LiBZb3UgbWF5IGFsc28gcGFzcyBhIHNpbmdsZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBkaXNwYXRjaCBUaGUgYGRpc3BhdGNoYCBmdW5jdGlvbiBhdmFpbGFibGUgb24geW91ciBSZWR1eFxuICogc3RvcmUuXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufE9iamVjdH0gVGhlIG9iamVjdCBtaW1pY2tpbmcgdGhlIG9yaWdpbmFsIG9iamVjdCwgYnV0IHdpdGhcbiAqIGV2ZXJ5IGFjdGlvbiBjcmVhdG9yIHdyYXBwZWQgaW50byB0aGUgYGRpc3BhdGNoYCBjYWxsLiBJZiB5b3UgcGFzc2VkIGFcbiAqIGZ1bmN0aW9uIGFzIGBhY3Rpb25DcmVhdG9yc2AsIHRoZSByZXR1cm4gdmFsdWUgd2lsbCBhbHNvIGJlIGEgc2luZ2xlXG4gKiBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmluZEFjdGlvbkNyZWF0b3JzKGFjdGlvbkNyZWF0b3JzLCBkaXNwYXRjaCkge1xuICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3JzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3JzLCBkaXNwYXRjaCk7XG4gIH1cblxuICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3JzICE9PSAnb2JqZWN0JyB8fCBhY3Rpb25DcmVhdG9ycyA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcignYmluZEFjdGlvbkNyZWF0b3JzIGV4cGVjdGVkIGFuIG9iamVjdCBvciBhIGZ1bmN0aW9uLCBpbnN0ZWFkIHJlY2VpdmVkICcgKyAoYWN0aW9uQ3JlYXRvcnMgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgYWN0aW9uQ3JlYXRvcnMpICsgJy4gJyArICdEaWQgeW91IHdyaXRlIFwiaW1wb3J0IEFjdGlvbkNyZWF0b3JzIGZyb21cIiBpbnN0ZWFkIG9mIFwiaW1wb3J0ICogYXMgQWN0aW9uQ3JlYXRvcnMgZnJvbVwiPycpO1xuICB9XG5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhY3Rpb25DcmVhdG9ycyk7XG4gIHZhciBib3VuZEFjdGlvbkNyZWF0b3JzID0ge307XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgIHZhciBhY3Rpb25DcmVhdG9yID0gYWN0aW9uQ3JlYXRvcnNba2V5XTtcbiAgICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGJvdW5kQWN0aW9uQ3JlYXRvcnNba2V5XSA9IGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3IsIGRpc3BhdGNoKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGJvdW5kQWN0aW9uQ3JlYXRvcnM7XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1snZGVmYXVsdCddID0gY29tYmluZVJlZHVjZXJzO1xuXG52YXIgX2NyZWF0ZVN0b3JlID0gcmVxdWlyZSgnLi9jcmVhdGVTdG9yZScpO1xuXG52YXIgX2lzUGxhaW5PYmplY3QgPSByZXF1aXJlKCdsb2Rhc2gvaXNQbGFpbk9iamVjdCcpO1xuXG52YXIgX2lzUGxhaW5PYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXNQbGFpbk9iamVjdCk7XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoJy4vdXRpbHMvd2FybmluZycpO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxuZnVuY3Rpb24gZ2V0VW5kZWZpbmVkU3RhdGVFcnJvck1lc3NhZ2Uoa2V5LCBhY3Rpb24pIHtcbiAgdmFyIGFjdGlvblR5cGUgPSBhY3Rpb24gJiYgYWN0aW9uLnR5cGU7XG4gIHZhciBhY3Rpb25OYW1lID0gYWN0aW9uVHlwZSAmJiAnXCInICsgYWN0aW9uVHlwZS50b1N0cmluZygpICsgJ1wiJyB8fCAnYW4gYWN0aW9uJztcblxuICByZXR1cm4gJ0dpdmVuIGFjdGlvbiAnICsgYWN0aW9uTmFtZSArICcsIHJlZHVjZXIgXCInICsga2V5ICsgJ1wiIHJldHVybmVkIHVuZGVmaW5lZC4gJyArICdUbyBpZ25vcmUgYW4gYWN0aW9uLCB5b3UgbXVzdCBleHBsaWNpdGx5IHJldHVybiB0aGUgcHJldmlvdXMgc3RhdGUuJztcbn1cblxuZnVuY3Rpb24gZ2V0VW5leHBlY3RlZFN0YXRlU2hhcGVXYXJuaW5nTWVzc2FnZShpbnB1dFN0YXRlLCByZWR1Y2VycywgYWN0aW9uLCB1bmV4cGVjdGVkS2V5Q2FjaGUpIHtcbiAgdmFyIHJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMocmVkdWNlcnMpO1xuICB2YXIgYXJndW1lbnROYW1lID0gYWN0aW9uICYmIGFjdGlvbi50eXBlID09PSBfY3JlYXRlU3RvcmUuQWN0aW9uVHlwZXMuSU5JVCA/ICdwcmVsb2FkZWRTdGF0ZSBhcmd1bWVudCBwYXNzZWQgdG8gY3JlYXRlU3RvcmUnIDogJ3ByZXZpb3VzIHN0YXRlIHJlY2VpdmVkIGJ5IHRoZSByZWR1Y2VyJztcblxuICBpZiAocmVkdWNlcktleXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICdTdG9yZSBkb2VzIG5vdCBoYXZlIGEgdmFsaWQgcmVkdWNlci4gTWFrZSBzdXJlIHRoZSBhcmd1bWVudCBwYXNzZWQgJyArICd0byBjb21iaW5lUmVkdWNlcnMgaXMgYW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgcmVkdWNlcnMuJztcbiAgfVxuXG4gIGlmICghKDAsIF9pc1BsYWluT2JqZWN0MlsnZGVmYXVsdCddKShpbnB1dFN0YXRlKSkge1xuICAgIHJldHVybiAnVGhlICcgKyBhcmd1bWVudE5hbWUgKyAnIGhhcyB1bmV4cGVjdGVkIHR5cGUgb2YgXCInICsge30udG9TdHJpbmcuY2FsbChpbnB1dFN0YXRlKS5tYXRjaCgvXFxzKFthLXp8QS1aXSspLylbMV0gKyAnXCIuIEV4cGVjdGVkIGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgJyArICgna2V5czogXCInICsgcmVkdWNlcktleXMuam9pbignXCIsIFwiJykgKyAnXCInKTtcbiAgfVxuXG4gIHZhciB1bmV4cGVjdGVkS2V5cyA9IE9iamVjdC5rZXlzKGlucHV0U3RhdGUpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuICFyZWR1Y2Vycy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmICF1bmV4cGVjdGVkS2V5Q2FjaGVba2V5XTtcbiAgfSk7XG5cbiAgdW5leHBlY3RlZEtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdW5leHBlY3RlZEtleUNhY2hlW2tleV0gPSB0cnVlO1xuICB9KTtcblxuICBpZiAodW5leHBlY3RlZEtleXMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiAnVW5leHBlY3RlZCAnICsgKHVuZXhwZWN0ZWRLZXlzLmxlbmd0aCA+IDEgPyAna2V5cycgOiAna2V5JykgKyAnICcgKyAoJ1wiJyArIHVuZXhwZWN0ZWRLZXlzLmpvaW4oJ1wiLCBcIicpICsgJ1wiIGZvdW5kIGluICcgKyBhcmd1bWVudE5hbWUgKyAnLiAnKSArICdFeHBlY3RlZCB0byBmaW5kIG9uZSBvZiB0aGUga25vd24gcmVkdWNlciBrZXlzIGluc3RlYWQ6ICcgKyAoJ1wiJyArIHJlZHVjZXJLZXlzLmpvaW4oJ1wiLCBcIicpICsgJ1wiLiBVbmV4cGVjdGVkIGtleXMgd2lsbCBiZSBpZ25vcmVkLicpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFzc2VydFJlZHVjZXJTYW5pdHkocmVkdWNlcnMpIHtcbiAgT2JqZWN0LmtleXMocmVkdWNlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciByZWR1Y2VyID0gcmVkdWNlcnNba2V5XTtcbiAgICB2YXIgaW5pdGlhbFN0YXRlID0gcmVkdWNlcih1bmRlZmluZWQsIHsgdHlwZTogX2NyZWF0ZVN0b3JlLkFjdGlvblR5cGVzLklOSVQgfSk7XG5cbiAgICBpZiAodHlwZW9mIGluaXRpYWxTdGF0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmVkdWNlciBcIicgKyBrZXkgKyAnXCIgcmV0dXJuZWQgdW5kZWZpbmVkIGR1cmluZyBpbml0aWFsaXphdGlvbi4gJyArICdJZiB0aGUgc3RhdGUgcGFzc2VkIHRvIHRoZSByZWR1Y2VyIGlzIHVuZGVmaW5lZCwgeW91IG11c3QgJyArICdleHBsaWNpdGx5IHJldHVybiB0aGUgaW5pdGlhbCBzdGF0ZS4gVGhlIGluaXRpYWwgc3RhdGUgbWF5ICcgKyAnbm90IGJlIHVuZGVmaW5lZC4nKTtcbiAgICB9XG5cbiAgICB2YXIgdHlwZSA9ICdAQHJlZHV4L1BST0JFX1VOS05PV05fQUNUSU9OXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNykuc3BsaXQoJycpLmpvaW4oJy4nKTtcbiAgICBpZiAodHlwZW9mIHJlZHVjZXIodW5kZWZpbmVkLCB7IHR5cGU6IHR5cGUgfSkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlZHVjZXIgXCInICsga2V5ICsgJ1wiIHJldHVybmVkIHVuZGVmaW5lZCB3aGVuIHByb2JlZCB3aXRoIGEgcmFuZG9tIHR5cGUuICcgKyAoJ0RvblxcJ3QgdHJ5IHRvIGhhbmRsZSAnICsgX2NyZWF0ZVN0b3JlLkFjdGlvblR5cGVzLklOSVQgKyAnIG9yIG90aGVyIGFjdGlvbnMgaW4gXCJyZWR1eC8qXCIgJykgKyAnbmFtZXNwYWNlLiBUaGV5IGFyZSBjb25zaWRlcmVkIHByaXZhdGUuIEluc3RlYWQsIHlvdSBtdXN0IHJldHVybiB0aGUgJyArICdjdXJyZW50IHN0YXRlIGZvciBhbnkgdW5rbm93biBhY3Rpb25zLCB1bmxlc3MgaXQgaXMgdW5kZWZpbmVkLCAnICsgJ2luIHdoaWNoIGNhc2UgeW91IG11c3QgcmV0dXJuIHRoZSBpbml0aWFsIHN0YXRlLCByZWdhcmRsZXNzIG9mIHRoZSAnICsgJ2FjdGlvbiB0eXBlLiBUaGUgaW5pdGlhbCBzdGF0ZSBtYXkgbm90IGJlIHVuZGVmaW5lZC4nKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFR1cm5zIGFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGRpZmZlcmVudCByZWR1Y2VyIGZ1bmN0aW9ucywgaW50byBhIHNpbmdsZVxuICogcmVkdWNlciBmdW5jdGlvbi4gSXQgd2lsbCBjYWxsIGV2ZXJ5IGNoaWxkIHJlZHVjZXIsIGFuZCBnYXRoZXIgdGhlaXIgcmVzdWx0c1xuICogaW50byBhIHNpbmdsZSBzdGF0ZSBvYmplY3QsIHdob3NlIGtleXMgY29ycmVzcG9uZCB0byB0aGUga2V5cyBvZiB0aGUgcGFzc2VkXG4gKiByZWR1Y2VyIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcmVkdWNlcnMgQW4gb2JqZWN0IHdob3NlIHZhbHVlcyBjb3JyZXNwb25kIHRvIGRpZmZlcmVudFxuICogcmVkdWNlciBmdW5jdGlvbnMgdGhhdCBuZWVkIHRvIGJlIGNvbWJpbmVkIGludG8gb25lLiBPbmUgaGFuZHkgd2F5IHRvIG9idGFpblxuICogaXQgaXMgdG8gdXNlIEVTNiBgaW1wb3J0ICogYXMgcmVkdWNlcnNgIHN5bnRheC4gVGhlIHJlZHVjZXJzIG1heSBuZXZlciByZXR1cm5cbiAqIHVuZGVmaW5lZCBmb3IgYW55IGFjdGlvbi4gSW5zdGVhZCwgdGhleSBzaG91bGQgcmV0dXJuIHRoZWlyIGluaXRpYWwgc3RhdGVcbiAqIGlmIHRoZSBzdGF0ZSBwYXNzZWQgdG8gdGhlbSB3YXMgdW5kZWZpbmVkLCBhbmQgdGhlIGN1cnJlbnQgc3RhdGUgZm9yIGFueVxuICogdW5yZWNvZ25pemVkIGFjdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgcmVkdWNlciBmdW5jdGlvbiB0aGF0IGludm9rZXMgZXZlcnkgcmVkdWNlciBpbnNpZGUgdGhlXG4gKiBwYXNzZWQgb2JqZWN0LCBhbmQgYnVpbGRzIGEgc3RhdGUgb2JqZWN0IHdpdGggdGhlIHNhbWUgc2hhcGUuXG4gKi9cbmZ1bmN0aW9uIGNvbWJpbmVSZWR1Y2VycyhyZWR1Y2Vycykge1xuICB2YXIgcmVkdWNlcktleXMgPSBPYmplY3Qua2V5cyhyZWR1Y2Vycyk7XG4gIHZhciBmaW5hbFJlZHVjZXJzID0ge307XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmVkdWNlcktleXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIga2V5ID0gcmVkdWNlcktleXNbaV07XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKHR5cGVvZiByZWR1Y2Vyc1trZXldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAoMCwgX3dhcm5pbmcyWydkZWZhdWx0J10pKCdObyByZWR1Y2VyIHByb3ZpZGVkIGZvciBrZXkgXCInICsga2V5ICsgJ1wiJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiByZWR1Y2Vyc1trZXldID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBmaW5hbFJlZHVjZXJzW2tleV0gPSByZWR1Y2Vyc1trZXldO1xuICAgIH1cbiAgfVxuICB2YXIgZmluYWxSZWR1Y2VyS2V5cyA9IE9iamVjdC5rZXlzKGZpbmFsUmVkdWNlcnMpO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFyIHVuZXhwZWN0ZWRLZXlDYWNoZSA9IHt9O1xuICB9XG5cbiAgdmFyIHNhbml0eUVycm9yO1xuICB0cnkge1xuICAgIGFzc2VydFJlZHVjZXJTYW5pdHkoZmluYWxSZWR1Y2Vycyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBzYW5pdHlFcnJvciA9IGU7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gY29tYmluYXRpb24oKSB7XG4gICAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG4gICAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50c1sxXTtcblxuICAgIGlmIChzYW5pdHlFcnJvcikge1xuICAgICAgdGhyb3cgc2FuaXR5RXJyb3I7XG4gICAgfVxuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciB3YXJuaW5nTWVzc2FnZSA9IGdldFVuZXhwZWN0ZWRTdGF0ZVNoYXBlV2FybmluZ01lc3NhZ2Uoc3RhdGUsIGZpbmFsUmVkdWNlcnMsIGFjdGlvbiwgdW5leHBlY3RlZEtleUNhY2hlKTtcbiAgICAgIGlmICh3YXJuaW5nTWVzc2FnZSkge1xuICAgICAgICAoMCwgX3dhcm5pbmcyWydkZWZhdWx0J10pKHdhcm5pbmdNZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgaGFzQ2hhbmdlZCA9IGZhbHNlO1xuICAgIHZhciBuZXh0U3RhdGUgPSB7fTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbmFsUmVkdWNlcktleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBmaW5hbFJlZHVjZXJLZXlzW2ldO1xuICAgICAgdmFyIHJlZHVjZXIgPSBmaW5hbFJlZHVjZXJzW2tleV07XG4gICAgICB2YXIgcHJldmlvdXNTdGF0ZUZvcktleSA9IHN0YXRlW2tleV07XG4gICAgICB2YXIgbmV4dFN0YXRlRm9yS2V5ID0gcmVkdWNlcihwcmV2aW91c1N0YXRlRm9yS2V5LCBhY3Rpb24pO1xuICAgICAgaWYgKHR5cGVvZiBuZXh0U3RhdGVGb3JLZXkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBnZXRVbmRlZmluZWRTdGF0ZUVycm9yTWVzc2FnZShrZXksIGFjdGlvbik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgbmV4dFN0YXRlW2tleV0gPSBuZXh0U3RhdGVGb3JLZXk7XG4gICAgICBoYXNDaGFuZ2VkID0gaGFzQ2hhbmdlZCB8fCBuZXh0U3RhdGVGb3JLZXkgIT09IHByZXZpb3VzU3RhdGVGb3JLZXk7XG4gICAgfVxuICAgIHJldHVybiBoYXNDaGFuZ2VkID8gbmV4dFN0YXRlIDogc3RhdGU7XG4gIH07XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IGNvbXBvc2U7XG4vKipcbiAqIENvbXBvc2VzIHNpbmdsZS1hcmd1bWVudCBmdW5jdGlvbnMgZnJvbSByaWdodCB0byBsZWZ0LiBUaGUgcmlnaHRtb3N0XG4gKiBmdW5jdGlvbiBjYW4gdGFrZSBtdWx0aXBsZSBhcmd1bWVudHMgYXMgaXQgcHJvdmlkZXMgdGhlIHNpZ25hdHVyZSBmb3JcbiAqIHRoZSByZXN1bHRpbmcgY29tcG9zaXRlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IGZ1bmNzIFRoZSBmdW5jdGlvbnMgdG8gY29tcG9zZS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiBvYnRhaW5lZCBieSBjb21wb3NpbmcgdGhlIGFyZ3VtZW50IGZ1bmN0aW9uc1xuICogZnJvbSByaWdodCB0byBsZWZ0LiBGb3IgZXhhbXBsZSwgY29tcG9zZShmLCBnLCBoKSBpcyBpZGVudGljYWwgdG8gZG9pbmdcbiAqICguLi5hcmdzKSA9PiBmKGcoaCguLi5hcmdzKSkpLlxuICovXG5cbmZ1bmN0aW9uIGNvbXBvc2UoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBmdW5jcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGZ1bmNzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgaWYgKGZ1bmNzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH07XG4gIH1cblxuICBpZiAoZnVuY3MubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGZ1bmNzWzBdO1xuICB9XG5cbiAgdmFyIGxhc3QgPSBmdW5jc1tmdW5jcy5sZW5ndGggLSAxXTtcbiAgdmFyIHJlc3QgPSBmdW5jcy5zbGljZSgwLCAtMSk7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHJlc3QucmVkdWNlUmlnaHQoZnVuY3Rpb24gKGNvbXBvc2VkLCBmKSB7XG4gICAgICByZXR1cm4gZihjb21wb3NlZCk7XG4gICAgfSwgbGFzdC5hcHBseSh1bmRlZmluZWQsIGFyZ3VtZW50cykpO1xuICB9O1xufSIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuQWN0aW9uVHlwZXMgPSB1bmRlZmluZWQ7XG5leHBvcnRzWydkZWZhdWx0J10gPSBjcmVhdGVTdG9yZTtcblxudmFyIF9pc1BsYWluT2JqZWN0ID0gcmVxdWlyZSgnbG9kYXNoL2lzUGxhaW5PYmplY3QnKTtcblxudmFyIF9pc1BsYWluT2JqZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lzUGxhaW5PYmplY3QpO1xuXG52YXIgX3N5bWJvbE9ic2VydmFibGUgPSByZXF1aXJlKCdzeW1ib2wtb2JzZXJ2YWJsZScpO1xuXG52YXIgX3N5bWJvbE9ic2VydmFibGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3ltYm9sT2JzZXJ2YWJsZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxuLyoqXG4gKiBUaGVzZSBhcmUgcHJpdmF0ZSBhY3Rpb24gdHlwZXMgcmVzZXJ2ZWQgYnkgUmVkdXguXG4gKiBGb3IgYW55IHVua25vd24gYWN0aW9ucywgeW91IG11c3QgcmV0dXJuIHRoZSBjdXJyZW50IHN0YXRlLlxuICogSWYgdGhlIGN1cnJlbnQgc3RhdGUgaXMgdW5kZWZpbmVkLCB5b3UgbXVzdCByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUuXG4gKiBEbyBub3QgcmVmZXJlbmNlIHRoZXNlIGFjdGlvbiB0eXBlcyBkaXJlY3RseSBpbiB5b3VyIGNvZGUuXG4gKi9cbnZhciBBY3Rpb25UeXBlcyA9IGV4cG9ydHMuQWN0aW9uVHlwZXMgPSB7XG4gIElOSVQ6ICdAQHJlZHV4L0lOSVQnXG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBSZWR1eCBzdG9yZSB0aGF0IGhvbGRzIHRoZSBzdGF0ZSB0cmVlLlxuICogVGhlIG9ubHkgd2F5IHRvIGNoYW5nZSB0aGUgZGF0YSBpbiB0aGUgc3RvcmUgaXMgdG8gY2FsbCBgZGlzcGF0Y2goKWAgb24gaXQuXG4gKlxuICogVGhlcmUgc2hvdWxkIG9ubHkgYmUgYSBzaW5nbGUgc3RvcmUgaW4geW91ciBhcHAuIFRvIHNwZWNpZnkgaG93IGRpZmZlcmVudFxuICogcGFydHMgb2YgdGhlIHN0YXRlIHRyZWUgcmVzcG9uZCB0byBhY3Rpb25zLCB5b3UgbWF5IGNvbWJpbmUgc2V2ZXJhbCByZWR1Y2Vyc1xuICogaW50byBhIHNpbmdsZSByZWR1Y2VyIGZ1bmN0aW9uIGJ5IHVzaW5nIGBjb21iaW5lUmVkdWNlcnNgLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlZHVjZXIgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG5leHQgc3RhdGUgdHJlZSwgZ2l2ZW5cbiAqIHRoZSBjdXJyZW50IHN0YXRlIHRyZWUgYW5kIHRoZSBhY3Rpb24gdG8gaGFuZGxlLlxuICpcbiAqIEBwYXJhbSB7YW55fSBbcHJlbG9hZGVkU3RhdGVdIFRoZSBpbml0aWFsIHN0YXRlLiBZb3UgbWF5IG9wdGlvbmFsbHkgc3BlY2lmeSBpdFxuICogdG8gaHlkcmF0ZSB0aGUgc3RhdGUgZnJvbSB0aGUgc2VydmVyIGluIHVuaXZlcnNhbCBhcHBzLCBvciB0byByZXN0b3JlIGFcbiAqIHByZXZpb3VzbHkgc2VyaWFsaXplZCB1c2VyIHNlc3Npb24uXG4gKiBJZiB5b3UgdXNlIGBjb21iaW5lUmVkdWNlcnNgIHRvIHByb2R1Y2UgdGhlIHJvb3QgcmVkdWNlciBmdW5jdGlvbiwgdGhpcyBtdXN0IGJlXG4gKiBhbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzaGFwZSBhcyBgY29tYmluZVJlZHVjZXJzYCBrZXlzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVuaGFuY2VyIFRoZSBzdG9yZSBlbmhhbmNlci4gWW91IG1heSBvcHRpb25hbGx5IHNwZWNpZnkgaXRcbiAqIHRvIGVuaGFuY2UgdGhlIHN0b3JlIHdpdGggdGhpcmQtcGFydHkgY2FwYWJpbGl0aWVzIHN1Y2ggYXMgbWlkZGxld2FyZSxcbiAqIHRpbWUgdHJhdmVsLCBwZXJzaXN0ZW5jZSwgZXRjLiBUaGUgb25seSBzdG9yZSBlbmhhbmNlciB0aGF0IHNoaXBzIHdpdGggUmVkdXhcbiAqIGlzIGBhcHBseU1pZGRsZXdhcmUoKWAuXG4gKlxuICogQHJldHVybnMge1N0b3JlfSBBIFJlZHV4IHN0b3JlIHRoYXQgbGV0cyB5b3UgcmVhZCB0aGUgc3RhdGUsIGRpc3BhdGNoIGFjdGlvbnNcbiAqIGFuZCBzdWJzY3JpYmUgdG8gY2hhbmdlcy5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlU3RvcmUocmVkdWNlciwgcHJlbG9hZGVkU3RhdGUsIGVuaGFuY2VyKSB7XG4gIHZhciBfcmVmMjtcblxuICBpZiAodHlwZW9mIHByZWxvYWRlZFN0YXRlID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBlbmhhbmNlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBlbmhhbmNlciA9IHByZWxvYWRlZFN0YXRlO1xuICAgIHByZWxvYWRlZFN0YXRlID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBlbmhhbmNlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIGVuaGFuY2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRoZSBlbmhhbmNlciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cblxuICAgIHJldHVybiBlbmhhbmNlcihjcmVhdGVTdG9yZSkocmVkdWNlciwgcHJlbG9hZGVkU3RhdGUpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiByZWR1Y2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgcmVkdWNlciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICB9XG5cbiAgdmFyIGN1cnJlbnRSZWR1Y2VyID0gcmVkdWNlcjtcbiAgdmFyIGN1cnJlbnRTdGF0ZSA9IHByZWxvYWRlZFN0YXRlO1xuICB2YXIgY3VycmVudExpc3RlbmVycyA9IFtdO1xuICB2YXIgbmV4dExpc3RlbmVycyA9IGN1cnJlbnRMaXN0ZW5lcnM7XG4gIHZhciBpc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycygpIHtcbiAgICBpZiAobmV4dExpc3RlbmVycyA9PT0gY3VycmVudExpc3RlbmVycykge1xuICAgICAgbmV4dExpc3RlbmVycyA9IGN1cnJlbnRMaXN0ZW5lcnMuc2xpY2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgdGhlIHN0YXRlIHRyZWUgbWFuYWdlZCBieSB0aGUgc3RvcmUuXG4gICAqXG4gICAqIEByZXR1cm5zIHthbnl9IFRoZSBjdXJyZW50IHN0YXRlIHRyZWUgb2YgeW91ciBhcHBsaWNhdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIGdldFN0YXRlKCkge1xuICAgIHJldHVybiBjdXJyZW50U3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIGNoYW5nZSBsaXN0ZW5lci4gSXQgd2lsbCBiZSBjYWxsZWQgYW55IHRpbWUgYW4gYWN0aW9uIGlzIGRpc3BhdGNoZWQsXG4gICAqIGFuZCBzb21lIHBhcnQgb2YgdGhlIHN0YXRlIHRyZWUgbWF5IHBvdGVudGlhbGx5IGhhdmUgY2hhbmdlZC4gWW91IG1heSB0aGVuXG4gICAqIGNhbGwgYGdldFN0YXRlKClgIHRvIHJlYWQgdGhlIGN1cnJlbnQgc3RhdGUgdHJlZSBpbnNpZGUgdGhlIGNhbGxiYWNrLlxuICAgKlxuICAgKiBZb3UgbWF5IGNhbGwgYGRpc3BhdGNoKClgIGZyb20gYSBjaGFuZ2UgbGlzdGVuZXIsIHdpdGggdGhlIGZvbGxvd2luZ1xuICAgKiBjYXZlYXRzOlxuICAgKlxuICAgKiAxLiBUaGUgc3Vic2NyaXB0aW9ucyBhcmUgc25hcHNob3R0ZWQganVzdCBiZWZvcmUgZXZlcnkgYGRpc3BhdGNoKClgIGNhbGwuXG4gICAqIElmIHlvdSBzdWJzY3JpYmUgb3IgdW5zdWJzY3JpYmUgd2hpbGUgdGhlIGxpc3RlbmVycyBhcmUgYmVpbmcgaW52b2tlZCwgdGhpc1xuICAgKiB3aWxsIG5vdCBoYXZlIGFueSBlZmZlY3Qgb24gdGhlIGBkaXNwYXRjaCgpYCB0aGF0IGlzIGN1cnJlbnRseSBpbiBwcm9ncmVzcy5cbiAgICogSG93ZXZlciwgdGhlIG5leHQgYGRpc3BhdGNoKClgIGNhbGwsIHdoZXRoZXIgbmVzdGVkIG9yIG5vdCwgd2lsbCB1c2UgYSBtb3JlXG4gICAqIHJlY2VudCBzbmFwc2hvdCBvZiB0aGUgc3Vic2NyaXB0aW9uIGxpc3QuXG4gICAqXG4gICAqIDIuIFRoZSBsaXN0ZW5lciBzaG91bGQgbm90IGV4cGVjdCB0byBzZWUgYWxsIHN0YXRlIGNoYW5nZXMsIGFzIHRoZSBzdGF0ZVxuICAgKiBtaWdodCBoYXZlIGJlZW4gdXBkYXRlZCBtdWx0aXBsZSB0aW1lcyBkdXJpbmcgYSBuZXN0ZWQgYGRpc3BhdGNoKClgIGJlZm9yZVxuICAgKiB0aGUgbGlzdGVuZXIgaXMgY2FsbGVkLiBJdCBpcywgaG93ZXZlciwgZ3VhcmFudGVlZCB0aGF0IGFsbCBzdWJzY3JpYmVyc1xuICAgKiByZWdpc3RlcmVkIGJlZm9yZSB0aGUgYGRpc3BhdGNoKClgIHN0YXJ0ZWQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgbGF0ZXN0XG4gICAqIHN0YXRlIGJ5IHRoZSB0aW1lIGl0IGV4aXRzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBBIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgb24gZXZlcnkgZGlzcGF0Y2guXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiB0byByZW1vdmUgdGhpcyBjaGFuZ2UgbGlzdGVuZXIuXG4gICAqL1xuICBmdW5jdGlvbiBzdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIGxpc3RlbmVyIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgdmFyIGlzU3Vic2NyaWJlZCA9IHRydWU7XG5cbiAgICBlbnN1cmVDYW5NdXRhdGVOZXh0TGlzdGVuZXJzKCk7XG4gICAgbmV4dExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiB1bnN1YnNjcmliZSgpIHtcbiAgICAgIGlmICghaXNTdWJzY3JpYmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaXNTdWJzY3JpYmVkID0gZmFsc2U7XG5cbiAgICAgIGVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMoKTtcbiAgICAgIHZhciBpbmRleCA9IG5leHRMaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICBuZXh0TGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVzIGFuIGFjdGlvbi4gSXQgaXMgdGhlIG9ubHkgd2F5IHRvIHRyaWdnZXIgYSBzdGF0ZSBjaGFuZ2UuXG4gICAqXG4gICAqIFRoZSBgcmVkdWNlcmAgZnVuY3Rpb24sIHVzZWQgdG8gY3JlYXRlIHRoZSBzdG9yZSwgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGVcbiAgICogY3VycmVudCBzdGF0ZSB0cmVlIGFuZCB0aGUgZ2l2ZW4gYGFjdGlvbmAuIEl0cyByZXR1cm4gdmFsdWUgd2lsbFxuICAgKiBiZSBjb25zaWRlcmVkIHRoZSAqKm5leHQqKiBzdGF0ZSBvZiB0aGUgdHJlZSwgYW5kIHRoZSBjaGFuZ2UgbGlzdGVuZXJzXG4gICAqIHdpbGwgYmUgbm90aWZpZWQuXG4gICAqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9ubHkgc3VwcG9ydHMgcGxhaW4gb2JqZWN0IGFjdGlvbnMuIElmIHlvdSB3YW50IHRvXG4gICAqIGRpc3BhdGNoIGEgUHJvbWlzZSwgYW4gT2JzZXJ2YWJsZSwgYSB0aHVuaywgb3Igc29tZXRoaW5nIGVsc2UsIHlvdSBuZWVkIHRvXG4gICAqIHdyYXAgeW91ciBzdG9yZSBjcmVhdGluZyBmdW5jdGlvbiBpbnRvIHRoZSBjb3JyZXNwb25kaW5nIG1pZGRsZXdhcmUuIEZvclxuICAgKiBleGFtcGxlLCBzZWUgdGhlIGRvY3VtZW50YXRpb24gZm9yIHRoZSBgcmVkdXgtdGh1bmtgIHBhY2thZ2UuIEV2ZW4gdGhlXG4gICAqIG1pZGRsZXdhcmUgd2lsbCBldmVudHVhbGx5IGRpc3BhdGNoIHBsYWluIG9iamVjdCBhY3Rpb25zIHVzaW5nIHRoaXMgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYWN0aW9uIEEgcGxhaW4gb2JqZWN0IHJlcHJlc2VudGluZyDigJx3aGF0IGNoYW5nZWTigJ0uIEl0IGlzXG4gICAqIGEgZ29vZCBpZGVhIHRvIGtlZXAgYWN0aW9ucyBzZXJpYWxpemFibGUgc28geW91IGNhbiByZWNvcmQgYW5kIHJlcGxheSB1c2VyXG4gICAqIHNlc3Npb25zLCBvciB1c2UgdGhlIHRpbWUgdHJhdmVsbGluZyBgcmVkdXgtZGV2dG9vbHNgLiBBbiBhY3Rpb24gbXVzdCBoYXZlXG4gICAqIGEgYHR5cGVgIHByb3BlcnR5IHdoaWNoIG1heSBub3QgYmUgYHVuZGVmaW5lZGAuIEl0IGlzIGEgZ29vZCBpZGVhIHRvIHVzZVxuICAgKiBzdHJpbmcgY29uc3RhbnRzIGZvciBhY3Rpb24gdHlwZXMuXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IEZvciBjb252ZW5pZW5jZSwgdGhlIHNhbWUgYWN0aW9uIG9iamVjdCB5b3UgZGlzcGF0Y2hlZC5cbiAgICpcbiAgICogTm90ZSB0aGF0LCBpZiB5b3UgdXNlIGEgY3VzdG9tIG1pZGRsZXdhcmUsIGl0IG1heSB3cmFwIGBkaXNwYXRjaCgpYCB0b1xuICAgKiByZXR1cm4gc29tZXRoaW5nIGVsc2UgKGZvciBleGFtcGxlLCBhIFByb21pc2UgeW91IGNhbiBhd2FpdCkuXG4gICAqL1xuICBmdW5jdGlvbiBkaXNwYXRjaChhY3Rpb24pIHtcbiAgICBpZiAoISgwLCBfaXNQbGFpbk9iamVjdDJbJ2RlZmF1bHQnXSkoYWN0aW9uKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBY3Rpb25zIG11c3QgYmUgcGxhaW4gb2JqZWN0cy4gJyArICdVc2UgY3VzdG9tIG1pZGRsZXdhcmUgZm9yIGFzeW5jIGFjdGlvbnMuJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBhY3Rpb24udHlwZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQWN0aW9ucyBtYXkgbm90IGhhdmUgYW4gdW5kZWZpbmVkIFwidHlwZVwiIHByb3BlcnR5LiAnICsgJ0hhdmUgeW91IG1pc3NwZWxsZWQgYSBjb25zdGFudD8nKTtcbiAgICB9XG5cbiAgICBpZiAoaXNEaXNwYXRjaGluZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWR1Y2VycyBtYXkgbm90IGRpc3BhdGNoIGFjdGlvbnMuJyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGlzRGlzcGF0Y2hpbmcgPSB0cnVlO1xuICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFJlZHVjZXIoY3VycmVudFN0YXRlLCBhY3Rpb24pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGxpc3RlbmVycyA9IGN1cnJlbnRMaXN0ZW5lcnMgPSBuZXh0TGlzdGVuZXJzO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsaXN0ZW5lcnNbaV0oKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIHRoZSByZWR1Y2VyIGN1cnJlbnRseSB1c2VkIGJ5IHRoZSBzdG9yZSB0byBjYWxjdWxhdGUgdGhlIHN0YXRlLlxuICAgKlxuICAgKiBZb3UgbWlnaHQgbmVlZCB0aGlzIGlmIHlvdXIgYXBwIGltcGxlbWVudHMgY29kZSBzcGxpdHRpbmcgYW5kIHlvdSB3YW50IHRvXG4gICAqIGxvYWQgc29tZSBvZiB0aGUgcmVkdWNlcnMgZHluYW1pY2FsbHkuIFlvdSBtaWdodCBhbHNvIG5lZWQgdGhpcyBpZiB5b3VcbiAgICogaW1wbGVtZW50IGEgaG90IHJlbG9hZGluZyBtZWNoYW5pc20gZm9yIFJlZHV4LlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0UmVkdWNlciBUaGUgcmVkdWNlciBmb3IgdGhlIHN0b3JlIHRvIHVzZSBpbnN0ZWFkLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIGZ1bmN0aW9uIHJlcGxhY2VSZWR1Y2VyKG5leHRSZWR1Y2VyKSB7XG4gICAgaWYgKHR5cGVvZiBuZXh0UmVkdWNlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgbmV4dFJlZHVjZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG5cbiAgICBjdXJyZW50UmVkdWNlciA9IG5leHRSZWR1Y2VyO1xuICAgIGRpc3BhdGNoKHsgdHlwZTogQWN0aW9uVHlwZXMuSU5JVCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnRlcm9wZXJhYmlsaXR5IHBvaW50IGZvciBvYnNlcnZhYmxlL3JlYWN0aXZlIGxpYnJhcmllcy5cbiAgICogQHJldHVybnMge29ic2VydmFibGV9IEEgbWluaW1hbCBvYnNlcnZhYmxlIG9mIHN0YXRlIGNoYW5nZXMuXG4gICAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUgdGhlIG9ic2VydmFibGUgcHJvcG9zYWw6XG4gICAqIGh0dHBzOi8vZ2l0aHViLmNvbS96ZW5wYXJzaW5nL2VzLW9ic2VydmFibGVcbiAgICovXG4gIGZ1bmN0aW9uIG9ic2VydmFibGUoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgb3V0ZXJTdWJzY3JpYmUgPSBzdWJzY3JpYmU7XG4gICAgcmV0dXJuIF9yZWYgPSB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBtaW5pbWFsIG9ic2VydmFibGUgc3Vic2NyaXB0aW9uIG1ldGhvZC5cbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYnNlcnZlciBBbnkgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgYXMgYW4gb2JzZXJ2ZXIuXG4gICAgICAgKiBUaGUgb2JzZXJ2ZXIgb2JqZWN0IHNob3VsZCBoYXZlIGEgYG5leHRgIG1ldGhvZC5cbiAgICAgICAqIEByZXR1cm5zIHtzdWJzY3JpcHRpb259IEFuIG9iamVjdCB3aXRoIGFuIGB1bnN1YnNjcmliZWAgbWV0aG9kIHRoYXQgY2FuXG4gICAgICAgKiBiZSB1c2VkIHRvIHVuc3Vic2NyaWJlIHRoZSBvYnNlcnZhYmxlIGZyb20gdGhlIHN0b3JlLCBhbmQgcHJldmVudCBmdXJ0aGVyXG4gICAgICAgKiBlbWlzc2lvbiBvZiB2YWx1ZXMgZnJvbSB0aGUgb2JzZXJ2YWJsZS5cbiAgICAgICAqL1xuICAgICAgc3Vic2NyaWJlOiBmdW5jdGlvbiBzdWJzY3JpYmUob2JzZXJ2ZXIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYnNlcnZlciAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCB0aGUgb2JzZXJ2ZXIgdG8gYmUgYW4gb2JqZWN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb2JzZXJ2ZVN0YXRlKCkge1xuICAgICAgICAgIGlmIChvYnNlcnZlci5uZXh0KSB7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KGdldFN0YXRlKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9ic2VydmVTdGF0ZSgpO1xuICAgICAgICB2YXIgdW5zdWJzY3JpYmUgPSBvdXRlclN1YnNjcmliZShvYnNlcnZlU3RhdGUpO1xuICAgICAgICByZXR1cm4geyB1bnN1YnNjcmliZTogdW5zdWJzY3JpYmUgfTtcbiAgICAgIH1cbiAgICB9LCBfcmVmW19zeW1ib2xPYnNlcnZhYmxlMlsnZGVmYXVsdCddXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sIF9yZWY7XG4gIH1cblxuICAvLyBXaGVuIGEgc3RvcmUgaXMgY3JlYXRlZCwgYW4gXCJJTklUXCIgYWN0aW9uIGlzIGRpc3BhdGNoZWQgc28gdGhhdCBldmVyeVxuICAvLyByZWR1Y2VyIHJldHVybnMgdGhlaXIgaW5pdGlhbCBzdGF0ZS4gVGhpcyBlZmZlY3RpdmVseSBwb3B1bGF0ZXNcbiAgLy8gdGhlIGluaXRpYWwgc3RhdGUgdHJlZS5cbiAgZGlzcGF0Y2goeyB0eXBlOiBBY3Rpb25UeXBlcy5JTklUIH0pO1xuXG4gIHJldHVybiBfcmVmMiA9IHtcbiAgICBkaXNwYXRjaDogZGlzcGF0Y2gsXG4gICAgc3Vic2NyaWJlOiBzdWJzY3JpYmUsXG4gICAgZ2V0U3RhdGU6IGdldFN0YXRlLFxuICAgIHJlcGxhY2VSZWR1Y2VyOiByZXBsYWNlUmVkdWNlclxuICB9LCBfcmVmMltfc3ltYm9sT2JzZXJ2YWJsZTJbJ2RlZmF1bHQnXV0gPSBvYnNlcnZhYmxlLCBfcmVmMjtcbn0iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmNvbXBvc2UgPSBleHBvcnRzLmFwcGx5TWlkZGxld2FyZSA9IGV4cG9ydHMuYmluZEFjdGlvbkNyZWF0b3JzID0gZXhwb3J0cy5jb21iaW5lUmVkdWNlcnMgPSBleHBvcnRzLmNyZWF0ZVN0b3JlID0gdW5kZWZpbmVkO1xuXG52YXIgX2NyZWF0ZVN0b3JlID0gcmVxdWlyZSgnLi9jcmVhdGVTdG9yZScpO1xuXG52YXIgX2NyZWF0ZVN0b3JlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZVN0b3JlKTtcblxudmFyIF9jb21iaW5lUmVkdWNlcnMgPSByZXF1aXJlKCcuL2NvbWJpbmVSZWR1Y2VycycpO1xuXG52YXIgX2NvbWJpbmVSZWR1Y2VyczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb21iaW5lUmVkdWNlcnMpO1xuXG52YXIgX2JpbmRBY3Rpb25DcmVhdG9ycyA9IHJlcXVpcmUoJy4vYmluZEFjdGlvbkNyZWF0b3JzJyk7XG5cbnZhciBfYmluZEFjdGlvbkNyZWF0b3JzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JpbmRBY3Rpb25DcmVhdG9ycyk7XG5cbnZhciBfYXBwbHlNaWRkbGV3YXJlID0gcmVxdWlyZSgnLi9hcHBseU1pZGRsZXdhcmUnKTtcblxudmFyIF9hcHBseU1pZGRsZXdhcmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXBwbHlNaWRkbGV3YXJlKTtcblxudmFyIF9jb21wb3NlID0gcmVxdWlyZSgnLi9jb21wb3NlJyk7XG5cbnZhciBfY29tcG9zZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb21wb3NlKTtcblxudmFyIF93YXJuaW5nID0gcmVxdWlyZSgnLi91dGlscy93YXJuaW5nJyk7XG5cbnZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG4vKlxuKiBUaGlzIGlzIGEgZHVtbXkgZnVuY3Rpb24gdG8gY2hlY2sgaWYgdGhlIGZ1bmN0aW9uIG5hbWUgaGFzIGJlZW4gYWx0ZXJlZCBieSBtaW5pZmljYXRpb24uXG4qIElmIHRoZSBmdW5jdGlvbiBoYXMgYmVlbiBtaW5pZmllZCBhbmQgTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJywgd2FybiB0aGUgdXNlci5cbiovXG5mdW5jdGlvbiBpc0NydXNoZWQoKSB7fVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0eXBlb2YgaXNDcnVzaGVkLm5hbWUgPT09ICdzdHJpbmcnICYmIGlzQ3J1c2hlZC5uYW1lICE9PSAnaXNDcnVzaGVkJykge1xuICAoMCwgX3dhcm5pbmcyWydkZWZhdWx0J10pKCdZb3UgYXJlIGN1cnJlbnRseSB1c2luZyBtaW5pZmllZCBjb2RlIG91dHNpZGUgb2YgTk9ERV9FTlYgPT09IFxcJ3Byb2R1Y3Rpb25cXCcuICcgKyAnVGhpcyBtZWFucyB0aGF0IHlvdSBhcmUgcnVubmluZyBhIHNsb3dlciBkZXZlbG9wbWVudCBidWlsZCBvZiBSZWR1eC4gJyArICdZb3UgY2FuIHVzZSBsb29zZS1lbnZpZnkgKGh0dHBzOi8vZ2l0aHViLmNvbS96ZXJ0b3NoL2xvb3NlLWVudmlmeSkgZm9yIGJyb3dzZXJpZnkgJyArICdvciBEZWZpbmVQbHVnaW4gZm9yIHdlYnBhY2sgKGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzAwMzAwMzEpICcgKyAndG8gZW5zdXJlIHlvdSBoYXZlIHRoZSBjb3JyZWN0IGNvZGUgZm9yIHlvdXIgcHJvZHVjdGlvbiBidWlsZC4nKTtcbn1cblxuZXhwb3J0cy5jcmVhdGVTdG9yZSA9IF9jcmVhdGVTdG9yZTJbJ2RlZmF1bHQnXTtcbmV4cG9ydHMuY29tYmluZVJlZHVjZXJzID0gX2NvbWJpbmVSZWR1Y2VyczJbJ2RlZmF1bHQnXTtcbmV4cG9ydHMuYmluZEFjdGlvbkNyZWF0b3JzID0gX2JpbmRBY3Rpb25DcmVhdG9yczJbJ2RlZmF1bHQnXTtcbmV4cG9ydHMuYXBwbHlNaWRkbGV3YXJlID0gX2FwcGx5TWlkZGxld2FyZTJbJ2RlZmF1bHQnXTtcbmV4cG9ydHMuY29tcG9zZSA9IF9jb21wb3NlMlsnZGVmYXVsdCddOyIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IHdhcm5pbmc7XG4vKipcbiAqIFByaW50cyBhIHdhcm5pbmcgaW4gdGhlIGNvbnNvbGUgaWYgaXQgZXhpc3RzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIFRoZSB3YXJuaW5nIG1lc3NhZ2UuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gd2FybmluZyhtZXNzYWdlKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbiAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5lcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gIH1cbiAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG4gIHRyeSB7XG4gICAgLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCBpZiB5b3UgZW5hYmxlXG4gICAgLy8gXCJicmVhayBvbiBhbGwgZXhjZXB0aW9uc1wiIGluIHlvdXIgY29uc29sZSxcbiAgICAvLyBpdCB3b3VsZCBwYXVzZSB0aGUgZXhlY3V0aW9uIGF0IHRoaXMgbGluZS5cbiAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgfSBjYXRjaCAoZSkge31cbiAgLyogZXNsaW50LWVuYWJsZSBuby1lbXB0eSAqL1xufSIsIlxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocGxheWVyKSB7XG4gIC8qKlxuICAgKiBBZGRzIGEgbGlzdGVuZXIgb2YgYW4gZXZlbnRcbiAgICogQGNoYWluYWJsZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgLSB0aGUgZXZlbnQgbmFtZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIHRoZSBldmVudCBoYW5kbGVyXG4gICAqIEByZXR1cm4ge1NhbXBsZVBsYXllcn0gdGhlIHBsYXllclxuICAgKiBAZXhhbXBsZVxuICAgKiBwbGF5ZXIub24oJ3N0YXJ0JywgZnVuY3Rpb24odGltZSwgbm90ZSkge1xuICAgKiAgIGNvbnNvbGUubG9nKHRpbWUsIG5vdGUpXG4gICAqIH0pXG4gICAqL1xuICBwbGF5ZXIub24gPSBmdW5jdGlvbiAoZXZlbnQsIGNiKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgdHlwZW9mIGV2ZW50ID09PSAnZnVuY3Rpb24nKSByZXR1cm4gcGxheWVyLm9uKCdldmVudCcsIGV2ZW50KVxuICAgIHZhciBwcm9wID0gJ29uJyArIGV2ZW50XG4gICAgdmFyIG9sZCA9IHBsYXllcltwcm9wXVxuICAgIHBsYXllcltwcm9wXSA9IG9sZCA/IGNoYWluKG9sZCwgY2IpIDogY2JcbiAgICByZXR1cm4gcGxheWVyXG4gIH1cbiAgcmV0dXJuIHBsYXllclxufVxuXG5mdW5jdGlvbiBjaGFpbiAoZm4xLCBmbjIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7IGZuMShhLCBiLCBjLCBkKTsgZm4yKGEsIGIsIGMsIGQpIH1cbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG52YXIgcGxheWVyID0gcmVxdWlyZSgnLi9wbGF5ZXInKVxudmFyIGV2ZW50cyA9IHJlcXVpcmUoJy4vZXZlbnRzJylcbnZhciBub3RlcyA9IHJlcXVpcmUoJy4vbm90ZXMnKVxudmFyIHNjaGVkdWxlciA9IHJlcXVpcmUoJy4vc2NoZWR1bGVyJylcbnZhciBtaWRpID0gcmVxdWlyZSgnLi9taWRpJylcblxuZnVuY3Rpb24gU2FtcGxlUGxheWVyIChhYywgc291cmNlLCBvcHRpb25zKSB7XG4gIHJldHVybiBtaWRpKHNjaGVkdWxlcihub3RlcyhldmVudHMocGxheWVyKGFjLCBzb3VyY2UsIG9wdGlvbnMpKSkpKVxufVxuXG5pZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIG1vZHVsZS5leHBvcnRzID0gU2FtcGxlUGxheWVyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHdpbmRvdy5TYW1wbGVQbGF5ZXIgPSBTYW1wbGVQbGF5ZXJcbiIsInZhciBtaWRpbWVzc2FnZSA9IHJlcXVpcmUoJ21pZGltZXNzYWdlJylcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocGxheWVyKSB7XG4gIC8qKlxuICAqIENvbm5lY3QgYSBwbGF5ZXIgdG8gYSBtaWRpIGlucHV0XG4gICpcbiAgKiBUaGUgb3B0aW9ucyBhY2NlcHRzOlxuICAqXG4gICogLSBjaGFubmVsOiB0aGUgY2hhbm5lbCB0byBsaXN0ZW4gdG8uIExpc3RlbiB0byBhbGwgY2hhbm5lbHMgYnkgZGVmYXVsdC5cbiAgKlxuICAqIEBwYXJhbSB7TUlESUlucHV0fSBpbnB1dFxuICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gKE9wdGlvbmFsKVxuICAqIEByZXR1cm4ge1NhbXBsZVBsYXllcn0gdGhlIHBsYXllclxuICAqIEBleGFtcGxlXG4gICogdmFyIHBpYW5vID0gcGxheWVyKC4uLilcbiAgKiB3aW5kb3cubmF2aWdhdG9yLnJlcXVlc3RNSURJQWNjZXNzKCkudGhlbihmdW5jdGlvbiAobWlkaUFjY2Vzcykge1xuICAqICAgbWlkaUFjY2Vzcy5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAobWlkaUlucHV0KSB7XG4gICogICAgIHBpYW5vLmxpc3RlblRvTWlkaShtaWRpSW5wdXQpXG4gICogICB9KVxuICAqIH0pXG4gICovXG4gIHBsYXllci5saXN0ZW5Ub01pZGkgPSBmdW5jdGlvbiAoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICB2YXIgc3RhcnRlZCA9IHt9XG4gICAgdmFyIG9wdHMgPSBvcHRpb25zIHx8IHt9XG4gICAgdmFyIGdhaW4gPSBvcHRzLmdhaW4gfHwgZnVuY3Rpb24gKHZlbCkgeyByZXR1cm4gdmVsIC8gMTI3IH1cblxuICAgIGlucHV0Lm9ubWlkaW1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XG4gICAgICB2YXIgbW0gPSBtc2cubWVzc2FnZVR5cGUgPyBtc2cgOiBtaWRpbWVzc2FnZShtc2cpXG4gICAgICBpZiAobW0ubWVzc2FnZVR5cGUgPT09ICdub3Rlb24nICYmIG1tLnZlbG9jaXR5ID09PSAwKSB7XG4gICAgICAgIG1tLm1lc3NhZ2VUeXBlID0gJ25vdGVvZmYnXG4gICAgICB9XG4gICAgICBpZiAob3B0cy5jaGFubmVsICYmIG1tLmNoYW5uZWwgIT09IG9wdHMuY2hhbm5lbCkgcmV0dXJuXG5cbiAgICAgIHN3aXRjaCAobW0ubWVzc2FnZVR5cGUpIHtcbiAgICAgICAgY2FzZSAnbm90ZW9uJzpcbiAgICAgICAgICBzdGFydGVkW21tLmtleV0gPSBwbGF5ZXIucGxheShtbS5rZXksIDAsIHsgZ2FpbjogZ2FpbihtbS52ZWxvY2l0eSkgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdub3Rlb2ZmJzpcbiAgICAgICAgICBpZiAoc3RhcnRlZFttbS5rZXldKSB7XG4gICAgICAgICAgICBzdGFydGVkW21tLmtleV0uc3RvcCgpXG4gICAgICAgICAgICBkZWxldGUgc3RhcnRlZFttbS5rZXldXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwbGF5ZXJcbiAgfVxuICByZXR1cm4gcGxheWVyXG59XG4iLCIndXNlIHN0cmljdCdcblxudmFyIG5vdGUgPSByZXF1aXJlKCdub3RlLXBhcnNlcicpXG52YXIgaXNNaWRpID0gZnVuY3Rpb24gKG4pIHsgcmV0dXJuIG4gIT09IG51bGwgJiYgbiAhPT0gW10gJiYgbiA+PSAwICYmIG4gPCAxMjkgfVxudmFyIHRvTWlkaSA9IGZ1bmN0aW9uIChuKSB7IHJldHVybiBpc01pZGkobikgPyArbiA6IG5vdGUubWlkaShuKSB9XG5cbi8vIEFkZHMgbm90ZSBuYW1lIHRvIG1pZGkgY29udmVyc2lvblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocGxheWVyKSB7XG4gIGlmIChwbGF5ZXIuYnVmZmVycykge1xuICAgIHZhciBtYXAgPSBwbGF5ZXIub3B0cy5tYXBcbiAgICB2YXIgdG9LZXkgPSB0eXBlb2YgbWFwID09PSAnZnVuY3Rpb24nID8gbWFwIDogdG9NaWRpXG4gICAgdmFyIG1hcHBlciA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICByZXR1cm4gbmFtZSA/IHRvS2V5KG5hbWUpIHx8IG5hbWUgOiBudWxsXG4gICAgfVxuXG4gICAgcGxheWVyLmJ1ZmZlcnMgPSBtYXBCdWZmZXJzKHBsYXllci5idWZmZXJzLCBtYXBwZXIpXG4gICAgdmFyIHN0YXJ0ID0gcGxheWVyLnN0YXJ0XG4gICAgcGxheWVyLnN0YXJ0ID0gZnVuY3Rpb24gKG5hbWUsIHdoZW4sIG9wdGlvbnMpIHtcbiAgICAgIHZhciBrZXkgPSBtYXBwZXIobmFtZSlcbiAgICAgIHZhciBkZWMgPSBrZXkgJSAxXG4gICAgICBpZiAoZGVjKSB7XG4gICAgICAgIGtleSA9IE1hdGguZmxvb3Ioa2V5KVxuICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihvcHRpb25zIHx8IHt9LCB7IGNlbnRzOiBNYXRoLmZsb29yKGRlYyAqIDEwMCkgfSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdGFydChrZXksIHdoZW4sIG9wdGlvbnMpXG4gICAgfVxuICB9XG4gIHJldHVybiBwbGF5ZXJcbn1cblxuZnVuY3Rpb24gbWFwQnVmZmVycyAoYnVmZmVycywgdG9LZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGJ1ZmZlcnMpLnJlZHVjZShmdW5jdGlvbiAobWFwcGVkLCBuYW1lKSB7XG4gICAgbWFwcGVkW3RvS2V5KG5hbWUpXSA9IGJ1ZmZlcnNbbmFtZV1cbiAgICByZXR1cm4gbWFwcGVkXG4gIH0sIHt9KVxufVxuIiwiLyogZ2xvYmFsIEF1ZGlvQnVmZmVyICovXG4ndXNlIHN0cmljdCdcblxudmFyIEFEU1IgPSByZXF1aXJlKCdhZHNyJylcblxudmFyIEVNUFRZID0ge31cbnZhciBERUZBVUxUUyA9IHtcbiAgZ2FpbjogMSxcbiAgYXR0YWNrOiAwLjAxLFxuICBkZWNheTogMC4xLFxuICBzdXN0YWluOiAwLjksXG4gIHJlbGVhc2U6IDAuMyxcbiAgbG9vcDogZmFsc2UsXG4gIGNlbnRzOiAwLFxuICBsb29wU3RhcnQ6IDAsXG4gIGxvb3BFbmQ6IDBcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBzYW1wbGUgcGxheWVyLlxuICpcbiAqIEBwYXJhbSB7QXVkaW9Db250ZXh0fSBhYyAtIHRoZSBhdWRpbyBjb250ZXh0XG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyfE9iamVjdDxTdHJpbmcsQXJyYXlCdWZmZXI+fSBzb3VyY2VcbiAqIEBwYXJhbSB7T25qZWN0fSBvcHRpb25zIC0gKE9wdGlvbmFsKSBhbiBvcHRpb25zIG9iamVjdFxuICogQHJldHVybiB7cGxheWVyfSB0aGUgcGxheWVyXG4gKiBAZXhhbXBsZVxuICogdmFyIFNhbXBsZVBsYXllciA9IHJlcXVpcmUoJ3NhbXBsZS1wbGF5ZXInKVxuICogdmFyIGFjID0gbmV3IEF1ZGlvQ29udGV4dCgpXG4gKiB2YXIgc25hcmUgPSBTYW1wbGVQbGF5ZXIoYWMsIDxBdWRpb0J1ZmZlcj4pXG4gKiBzbmFyZS5wbGF5KClcbiAqL1xuZnVuY3Rpb24gU2FtcGxlUGxheWVyIChhYywgc291cmNlLCBvcHRpb25zKSB7XG4gIHZhciBjb25uZWN0ZWQgPSBmYWxzZVxuICB2YXIgbmV4dElkID0gMFxuICB2YXIgdHJhY2tlZCA9IHt9XG4gIHZhciBvdXQgPSBhYy5jcmVhdGVHYWluKClcbiAgb3V0LmdhaW4udmFsdWUgPSAxXG5cbiAgdmFyIG9wdHMgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUUywgb3B0aW9ucylcblxuICAvKipcbiAgICogQG5hbWVzcGFjZVxuICAgKi9cbiAgdmFyIHBsYXllciA9IHsgY29udGV4dDogYWMsIG91dDogb3V0LCBvcHRzOiBvcHRzIH1cbiAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIEF1ZGlvQnVmZmVyKSBwbGF5ZXIuYnVmZmVyID0gc291cmNlXG4gIGVsc2UgcGxheWVyLmJ1ZmZlcnMgPSBzb3VyY2VcblxuICAvKipcbiAgICogU3RhcnQgYSBzYW1wbGUgYnVmZmVyLlxuICAgKlxuICAgKiBUaGUgcmV0dXJuZWQgb2JqZWN0IGhhcyBhIGZ1bmN0aW9uIGBzdG9wKHdoZW4pYCB0byBzdG9wIHRoZSBzb3VuZC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSB0aGUgbmFtZSBvZiB0aGUgYnVmZmVyLiBJZiB0aGUgc291cmNlIG9mIHRoZVxuICAgKiBTYW1wbGVQbGF5ZXIgaXMgb25lIHNhbXBsZSBidWZmZXIsIHRoaXMgcGFyYW1ldGVyIGlzIG5vdCByZXF1aXJlZFxuICAgKiBAcGFyYW0ge0Zsb2F0fSB3aGVuIC0gKE9wdGlvbmFsKSB3aGVuIHRvIHN0YXJ0IChjdXJyZW50IHRpbWUgaWYgYnkgZGVmYXVsdClcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBhZGRpdGlvbmFsIHNhbXBsZSBwbGF5aW5nIG9wdGlvbnNcbiAgICogQHJldHVybiB7QXVkaW9Ob2RlfSBhbiBhdWRpbyBub2RlIHdpdGggYSBgc3RvcGAgZnVuY3Rpb25cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHNhbXBsZSA9IHBsYXllcihhYywgPEF1ZGlvQnVmZmVyPikuY29ubmVjdChhYy5kZXN0aW5hdGlvbilcbiAgICogc2FtcGxlLnN0YXJ0KClcbiAgICogc2FtcGxlLnN0YXJ0KDUsIHsgZ2FpbjogMC43IH0pIC8vIG5hbWUgbm90IHJlcXVpcmVkIHNpbmNlIGlzIG9ubHkgb25lIEF1ZGlvQnVmZmVyXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBkcnVtcyA9IHBsYXllcihhYywgeyBzbmFyZTogPEF1ZGlvQnVmZmVyPiwga2ljazogPEF1ZGlvQnVmZmVyPiwgLi4uIH0pLmNvbm5lY3QoYWMuZGVzdGluYXRpb24pXG4gICAqIGRydW1zLnN0YXJ0KCdzbmFyZScpXG4gICAqIGRydW1zLnN0YXJ0KCdzbmFyZScsIDAsIHsgZ2FpbjogMC4zIH0pXG4gICAqL1xuICBwbGF5ZXIuc3RhcnQgPSBmdW5jdGlvbiAobmFtZSwgd2hlbiwgb3B0aW9ucykge1xuICAgIC8vIGlmIG9ubHkgb25lIGJ1ZmZlciwgcmVvcmRlciBhcmd1bWVudHNcbiAgICBpZiAocGxheWVyLmJ1ZmZlciAmJiBuYW1lICE9PSBudWxsKSByZXR1cm4gcGxheWVyLnN0YXJ0KG51bGwsIG5hbWUsIHdoZW4pXG5cbiAgICB2YXIgYnVmZmVyID0gbmFtZSA/IHBsYXllci5idWZmZXJzW25hbWVdIDogcGxheWVyLmJ1ZmZlclxuICAgIGlmICghYnVmZmVyKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0J1ZmZlciAnICsgbmFtZSArICcgbm90IGZvdW5kLicpXG4gICAgICByZXR1cm5cbiAgICB9IGVsc2UgaWYgKCFjb25uZWN0ZWQpIHtcbiAgICAgIGNvbnNvbGUud2FybignU2FtcGxlUGxheWVyIG5vdCBjb25uZWN0ZWQgdG8gYW55IG5vZGUuJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHZhciBvcHRzID0gb3B0aW9ucyB8fCBFTVBUWVxuICAgIHdoZW4gPSBNYXRoLm1heChhYy5jdXJyZW50VGltZSwgd2hlbiB8fCAwKVxuICAgIHBsYXllci5lbWl0KCdzdGFydCcsIHdoZW4sIG5hbWUsIG9wdHMpXG4gICAgdmFyIG5vZGUgPSBjcmVhdGVOb2RlKG5hbWUsIGJ1ZmZlciwgb3B0cylcbiAgICBub2RlLmlkID0gdHJhY2sobmFtZSwgbm9kZSlcbiAgICBub2RlLmVudi5zdGFydCh3aGVuKVxuICAgIG5vZGUuc291cmNlLnN0YXJ0KHdoZW4pXG4gICAgcGxheWVyLmVtaXQoJ3N0YXJ0ZWQnLCB3aGVuLCBub2RlLmlkLCBub2RlKVxuICAgIGlmIChvcHRzLmR1cmF0aW9uKSBub2RlLnN0b3Aod2hlbiArIG9wdHMuZHVyYXRpb24pXG4gICAgcmV0dXJuIG5vZGVcbiAgfVxuXG4gIC8vIE5PVEU6IHN0YXJ0IHdpbGwgYmUgb3ZlcnJpZGUgc28gd2UgY2FuJ3QgY29weSB0aGUgZnVuY3Rpb24gcmVmZXJlbmNlXG4gIC8vIHRoaXMgaXMgb2J2aW91c2x5IG5vdCBhIGdvb2QgZGVzaWduLCBzbyB0aGlzIGNvZGUgd2lsbCBiZSBnb25lIHNvb24uXG4gIC8qKlxuICAgKiBBbiBhbGlhcyBmb3IgYHBsYXllci5zdGFydGBcbiAgICogQHNlZSBwbGF5ZXIuc3RhcnRcbiAgICogQHNpbmNlIDAuMy4wXG4gICAqL1xuICBwbGF5ZXIucGxheSA9IGZ1bmN0aW9uIChuYW1lLCB3aGVuLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHBsYXllci5zdGFydChuYW1lLCB3aGVuLCBvcHRpb25zKVxuICB9XG5cbiAgLyoqXG4gICAqIFN0b3Agc29tZSBvciBhbGwgc2FtcGxlc1xuICAgKlxuICAgKiBAcGFyYW0ge0Zsb2F0fSB3aGVuIC0gKE9wdGlvbmFsKSBhbiBhYnNvbHV0ZSB0aW1lIGluIHNlY29uZHMgKG9yIGN1cnJlbnRUaW1lXG4gICAqIGlmIG5vdCBzcGVjaWZpZWQpXG4gICAqIEBwYXJhbSB7QXJyYXl9IG5vZGVzIC0gKE9wdGlvbmFsKSBhbiBhcnJheSBvZiBub2RlcyBvciBub2RlcyBpZHMgdG8gc3RvcFxuICAgKiBAcmV0dXJuIHtBcnJheX0gYW4gYXJyYXkgb2YgaWRzIG9mIHRoZSBzdG9wZWQgc2FtcGxlc1xuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgbG9uZ1NvdW5kID0gcGxheWVyKGFjLCA8QXVkaW9CdWZmZXI+KS5jb25uZWN0KGFjLmRlc3RpbmF0aW9uKVxuICAgKiBsb25nU291bmQuc3RhcnQoYWMuY3VycmVudFRpbWUpXG4gICAqIGxvbmdTb3VuZC5zdGFydChhYy5jdXJyZW50VGltZSArIDEpXG4gICAqIGxvbmdTb3VuZC5zdGFydChhYy5jdXJyZW50VGltZSArIDIpXG4gICAqIGxvbmdTb3VuZC5zdG9wKGFjLmN1cnJlbnRUaW1lICsgMykgLy8gc3RvcCB0aGUgdGhyZWUgc291bmRzXG4gICAqL1xuICBwbGF5ZXIuc3RvcCA9IGZ1bmN0aW9uICh3aGVuLCBpZHMpIHtcbiAgICB2YXIgbm9kZVxuICAgIGlkcyA9IGlkcyB8fCBPYmplY3Qua2V5cyh0cmFja2VkKVxuICAgIHJldHVybiBpZHMubWFwKGZ1bmN0aW9uIChpZCkge1xuICAgICAgbm9kZSA9IHRyYWNrZWRbaWRdXG4gICAgICBpZiAoIW5vZGUpIHJldHVybiBudWxsXG4gICAgICBub2RlLnN0b3Aod2hlbilcbiAgICAgIHJldHVybiBub2RlLmlkXG4gICAgfSlcbiAgfVxuICAvKipcbiAgICogQ29ubmVjdCB0aGUgcGxheWVyIHRvIGEgZGVzdGluYXRpb24gbm9kZVxuICAgKlxuICAgKiBAcGFyYW0ge0F1ZGlvTm9kZX0gZGVzdGluYXRpb24gLSB0aGUgZGVzdGluYXRpb24gbm9kZVxuICAgKiBAcmV0dXJuIHtBdWRpb1BsYXllcn0gdGhlIHBsYXllclxuICAgKiBAY2hhaW5hYmxlXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBzYW1wbGUgPSBwbGF5ZXIoYWMsIDxBdWRpb0J1ZmZlcj4pLmNvbm5lY3QoYWMuZGVzdGluYXRpb24pXG4gICAqL1xuICBwbGF5ZXIuY29ubmVjdCA9IGZ1bmN0aW9uIChkZXN0KSB7XG4gICAgY29ubmVjdGVkID0gdHJ1ZVxuICAgIG91dC5jb25uZWN0KGRlc3QpXG4gICAgcmV0dXJuIHBsYXllclxuICB9XG5cbiAgcGxheWVyLmVtaXQgPSBmdW5jdGlvbiAoZXZlbnQsIHdoZW4sIG9iaiwgb3B0cykge1xuICAgIGlmIChwbGF5ZXIub25ldmVudCkgcGxheWVyLm9uZXZlbnQoZXZlbnQsIHdoZW4sIG9iaiwgb3B0cylcbiAgICB2YXIgZm4gPSBwbGF5ZXJbJ29uJyArIGV2ZW50XVxuICAgIGlmIChmbikgZm4od2hlbiwgb2JqLCBvcHRzKVxuICB9XG5cbiAgcmV0dXJuIHBsYXllclxuXG4gIC8vID09PT09PT09PT09PT09PSBQUklWQVRFIEZVTkNUSU9OUyA9PT09PT09PT09PT09PSAvL1xuXG4gIGZ1bmN0aW9uIHRyYWNrIChuYW1lLCBub2RlKSB7XG4gICAgbm9kZS5pZCA9IG5leHRJZCsrXG4gICAgdHJhY2tlZFtub2RlLmlkXSA9IG5vZGVcbiAgICBub2RlLnNvdXJjZS5vbmVuZGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG5vdyA9IGFjLmN1cnJlbnRUaW1lXG4gICAgICBub2RlLnNvdXJjZS5kaXNjb25uZWN0KClcbiAgICAgIG5vZGUuZW52LmRpc2Nvbm5lY3QoKVxuICAgICAgbm9kZS5kaXNjb25uZWN0KClcbiAgICAgIHBsYXllci5lbWl0KCdlbmRlZCcsIG5vdywgbm9kZS5pZCwgbm9kZSlcbiAgICB9XG4gICAgcmV0dXJuIG5vZGUuaWRcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZU5vZGUgKG5hbWUsIGJ1ZmZlciwgb3B0aW9ucykge1xuICAgIHZhciBub2RlID0gYWMuY3JlYXRlR2FpbigpXG4gICAgbm9kZS5nYWluLnZhbHVlID0gMCAvLyB0aGUgZW52ZWxvcGUgd2lsbCBjb250cm9sIHRoZSBnYWluXG4gICAgbm9kZS5jb25uZWN0KG91dClcblxuICAgIG5vZGUuZW52ID0gZW52ZWxvcGUoYWMsIG9wdGlvbnMsIG9wdHMpXG4gICAgbm9kZS5lbnYuY29ubmVjdChub2RlLmdhaW4pXG5cbiAgICBub2RlLnNvdXJjZSA9IGFjLmNyZWF0ZUJ1ZmZlclNvdXJjZSgpXG4gICAgbm9kZS5zb3VyY2UuYnVmZmVyID0gYnVmZmVyXG4gICAgbm9kZS5zb3VyY2UuY29ubmVjdChub2RlKVxuICAgIG5vZGUuc291cmNlLmxvb3AgPSBvcHRpb25zLmxvb3AgfHwgb3B0cy5sb29wXG4gICAgbm9kZS5zb3VyY2UucGxheWJhY2tSYXRlLnZhbHVlID0gY2VudHNUb1JhdGUob3B0aW9ucy5jZW50cyB8fCBvcHRzLmNlbnRzKVxuICAgIG5vZGUuc291cmNlLmxvb3BTdGFydCA9IG9wdGlvbnMubG9vcFN0YXJ0IHx8IG9wdHMubG9vcFN0YXJ0XG4gICAgbm9kZS5zb3VyY2UubG9vcEVuZCA9IG9wdGlvbnMubG9vcEVuZCB8fCBvcHRzLmxvb3BFbmRcbiAgICBub2RlLnN0b3AgPSBmdW5jdGlvbiAod2hlbikge1xuICAgICAgdmFyIHRpbWUgPSB3aGVuIHx8IGFjLmN1cnJlbnRUaW1lXG4gICAgICBwbGF5ZXIuZW1pdCgnc3RvcCcsIHRpbWUsIG5hbWUpXG4gICAgICB2YXIgc3RvcEF0ID0gbm9kZS5lbnYuc3RvcCh0aW1lKVxuICAgICAgbm9kZS5zb3VyY2Uuc3RvcChzdG9wQXQpXG4gICAgfVxuICAgIHJldHVybiBub2RlXG4gIH1cbn1cblxuZnVuY3Rpb24gaXNOdW0gKHgpIHsgcmV0dXJuIHR5cGVvZiB4ID09PSAnbnVtYmVyJyB9XG52YXIgUEFSQU1TID0gWydhdHRhY2snLCAnZGVjYXknLCAnc3VzdGFpbicsICdyZWxlYXNlJ11cbmZ1bmN0aW9uIGVudmVsb3BlIChhYywgb3B0aW9ucywgb3B0cykge1xuICB2YXIgZW52ID0gQURTUihhYylcbiAgdmFyIGFkc3IgPSBvcHRpb25zLmFkc3IgfHwgb3B0cy5hZHNyXG4gIFBBUkFNUy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lLCBpKSB7XG4gICAgaWYgKGFkc3IpIGVudltuYW1lXSA9IGFkc3JbaV1cbiAgICBlbHNlIGVudltuYW1lXSA9IG9wdGlvbnNbbmFtZV0gfHwgb3B0c1tuYW1lXVxuICB9KVxuICBlbnYudmFsdWUudmFsdWUgPSBpc051bShvcHRpb25zLmdhaW4pID8gb3B0aW9ucy5nYWluXG4gICAgOiBpc051bShvcHRzLmdhaW4pID8gb3B0cy5nYWluIDogMVxuICByZXR1cm4gZW52XG59XG5cbi8qXG4gKiBHZXQgcGxheWJhY2sgcmF0ZSBmb3IgYSBnaXZlbiBwaXRjaCBjaGFuZ2UgKGluIGNlbnRzKVxuICogQmFzaWMgW21hdGhdKGh0dHA6Ly93d3cuYmlyZHNvZnQuZGVtb24uY28udWsvbXVzaWMvc2FtcGxlcnQuaHRtKTpcbiAqIGYyID0gZjEgKiAyXiggQyAvIDEyMDAgKVxuICovXG5mdW5jdGlvbiBjZW50c1RvUmF0ZSAoY2VudHMpIHsgcmV0dXJuIGNlbnRzID8gTWF0aC5wb3coMiwgY2VudHMgLyAxMjAwKSA6IDEgfVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNhbXBsZVBsYXllclxuIiwiJ3VzZSBzdHJpY3QnXG5cbnZhciBpc0FyciA9IEFycmF5LmlzQXJyYXlcbnZhciBpc09iaiA9IGZ1bmN0aW9uIChvKSB7IHJldHVybiBvICYmIHR5cGVvZiBvID09PSAnb2JqZWN0JyB9XG52YXIgT1BUUyA9IHt9XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHBsYXllcikge1xuICAvKipcbiAgICogU2NoZWR1bGUgYSBsaXN0IG9mIGV2ZW50cyB0byBiZSBwbGF5ZWQgYXQgc3BlY2lmaWMgdGltZS5cbiAgICpcbiAgICogSXQgc3VwcG9ydHMgdGhyZWUgZm9ybWF0cyBvZiBldmVudHMgZm9yIHRoZSBldmVudHMgbGlzdDpcbiAgICpcbiAgICogLSBBbiBhcnJheSB3aXRoIFt0aW1lLCBub3RlXVxuICAgKiAtIEFuIGFycmF5IHdpdGggW3RpbWUsIG9iamVjdF1cbiAgICogLSBBbiBvYmplY3Qgd2l0aCB7IHRpbWU6ID8sIFtuYW1lfG5vdGV8bWlkaXxrZXldOiA/IH1cbiAgICpcbiAgICogQHBhcmFtIHtGbG9hdH0gdGltZSAtIGFuIGFic29sdXRlIHRpbWUgdG8gc3RhcnQgKG9yIEF1ZGlvQ29udGV4dCdzXG4gICAqIGN1cnJlbnRUaW1lIGlmIHByb3ZpZGVkIG51bWJlciBpcyAwKVxuICAgKiBAcGFyYW0ge0FycmF5fSBldmVudHMgLSB0aGUgZXZlbnRzIGxpc3QuXG4gICAqIEByZXR1cm4ge0FycmF5fSBhbiBhcnJheSBvZiBpZHNcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogLy8gRXZlbnQgZm9ybWF0OiBbdGltZSwgbm90ZV1cbiAgICogdmFyIHBpYW5vID0gcGxheWVyKGFjLCAuLi4pLmNvbm5lY3QoYWMuZGVzdGluYXRpb24pXG4gICAqIHBpYW5vLnNjaGVkdWxlKDAsIFsgWzAsICdDMiddLCBbMC41LCAnQzMnXSwgWzEsICdDNCddIF0pXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIC8vIEV2ZW50IGZvcm1hdDogYW4gb2JqZWN0IHsgdGltZTogPywgbmFtZTogPyB9XG4gICAqIHZhciBkcnVtcyA9IHBsYXllcihhYywgLi4uKS5jb25uZWN0KGFjLmRlc3RpbmF0aW9uKVxuICAgKiBkcnVtcy5zY2hlZHVsZSgwLCBbXG4gICAqICAgeyBuYW1lOiAna2ljaycsIHRpbWU6IDAgfSxcbiAgICogICB7IG5hbWU6ICdzbmFyZScsIHRpbWU6IDAuNSB9LFxuICAgKiAgIHsgbmFtZTogJ2tpY2snLCB0aW1lOiAxIH0sXG4gICAqICAgeyBuYW1lOiAnc25hcmUnLCB0aW1lOiAxLjUgfVxuICAgKiBdKVxuICAgKi9cbiAgcGxheWVyLnNjaGVkdWxlID0gZnVuY3Rpb24gKHRpbWUsIGV2ZW50cykge1xuICAgIHZhciBub3cgPSBwbGF5ZXIuY29udGV4dC5jdXJyZW50VGltZVxuICAgIHZhciB3aGVuID0gdGltZSA8IG5vdyA/IG5vdyA6IHRpbWVcbiAgICBwbGF5ZXIuZW1pdCgnc2NoZWR1bGUnLCB3aGVuLCBldmVudHMpXG4gICAgdmFyIHQsIG8sIG5vdGUsIG9wdHNcbiAgICByZXR1cm4gZXZlbnRzLm1hcChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmICghZXZlbnQpIHJldHVybiBudWxsXG4gICAgICBlbHNlIGlmIChpc0FycihldmVudCkpIHtcbiAgICAgICAgdCA9IGV2ZW50WzBdOyBvID0gZXZlbnRbMV1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHQgPSBldmVudC50aW1lOyBvID0gZXZlbnRcbiAgICAgIH1cblxuICAgICAgaWYgKGlzT2JqKG8pKSB7XG4gICAgICAgIG5vdGUgPSBvLm5hbWUgfHwgby5rZXkgfHwgby5ub3RlIHx8IG8ubWlkaSB8fCBudWxsXG4gICAgICAgIG9wdHMgPSBvXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3RlID0gb1xuICAgICAgICBvcHRzID0gT1BUU1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGxheWVyLnN0YXJ0KG5vdGUsIHdoZW4gKyAodCB8fCAwKSwgb3B0cylcbiAgICB9KVxuICB9XG4gIHJldHVybiBwbGF5ZXJcbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG52YXIgUkVHRVggPSAvXihbYS1nQS1HXSkoI3sxLH18YnsxLH18eHsxLH18KSgtP1xcZCopXFxzKiguKilcXHMqJC9cbi8qKlxuICogQSByZWdleCBmb3IgbWF0Y2hpbmcgbm90ZSBzdHJpbmdzIGluIHNjaWVudGlmaWMgbm90YXRpb24uXG4gKlxuICogQG5hbWUgcmVnZXhcbiAqIEBmdW5jdGlvblxuICogQHJldHVybiB7UmVnRXhwfSB0aGUgcmVnZXhwIHVzZWQgdG8gcGFyc2UgdGhlIG5vdGUgbmFtZVxuICpcbiAqIFRoZSBub3RlIHN0cmluZyBzaG91bGQgaGF2ZSB0aGUgZm9ybSBgbGV0dGVyW2FjY2lkZW50YWxzXVtvY3RhdmVdW2VsZW1lbnRdYFxuICogd2hlcmU6XG4gKlxuICogLSBsZXR0ZXI6IChSZXF1aXJlZCkgaXMgYSBsZXR0ZXIgZnJvbSBBIHRvIEcgZWl0aGVyIHVwcGVyIG9yIGxvd2VyIGNhc2VcbiAqIC0gYWNjaWRlbnRhbHM6IChPcHRpb25hbCkgY2FuIGJlIG9uZSBvciBtb3JlIGBiYCAoZmxhdHMpLCBgI2AgKHNoYXJwcykgb3IgYHhgIChkb3VibGUgc2hhcnBzKS5cbiAqIFRoZXkgY2FuIE5PVCBiZSBtaXhlZC5cbiAqIC0gb2N0YXZlOiAoT3B0aW9uYWwpIGEgcG9zaXRpdmUgb3IgbmVnYXRpdmUgaW50ZWdlclxuICogLSBlbGVtZW50OiAoT3B0aW9uYWwpIGFkZGl0aW9uYWxseSBhbnl0aGluZyBhZnRlciB0aGUgZHVyYXRpb24gaXMgY29uc2lkZXJlZCB0b1xuICogYmUgdGhlIGVsZW1lbnQgbmFtZSAoZm9yIGV4YW1wbGU6ICdDMiBkb3JpYW4nKVxuICpcbiAqIFRoZSBleGVjdXRlZCByZWdleCBjb250YWlucyAoYnkgYXJyYXkgaW5kZXgpOlxuICpcbiAqIC0gMDogdGhlIGNvbXBsZXRlIHN0cmluZ1xuICogLSAxOiB0aGUgbm90ZSBsZXR0ZXJcbiAqIC0gMjogdGhlIG9wdGlvbmFsIGFjY2lkZW50YWxzXG4gKiAtIDM6IHRoZSBvcHRpb25hbCBvY3RhdmVcbiAqIC0gNDogdGhlIHJlc3Qgb2YgdGhlIHN0cmluZyAodHJpbW1lZClcbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIHBhcnNlciA9IHJlcXVpcmUoJ25vdGUtcGFyc2VyJylcbiAqIHBhcnNlci5yZWdleC5leGVjKCdjIzQnKVxuICogLy8gPT4gWydjIzQnLCAnYycsICcjJywgJzQnLCAnJ11cbiAqIHBhcnNlci5yZWdleC5leGVjKCdjIzQgbWFqb3InKVxuICogLy8gPT4gWydjIzRtYWpvcicsICdjJywgJyMnLCAnNCcsICdtYWpvciddXG4gKiBwYXJzZXIucmVnZXgoKS5leGVjKCdDTWFqNycpXG4gKiAvLyA9PiBbJ0NNYWo3JywgJ0MnLCAnJywgJycsICdNYWo3J11cbiAqL1xuZnVuY3Rpb24gcmVnZXggKCkgeyByZXR1cm4gUkVHRVggfVxuXG52YXIgU0VNSVRPTkVTID0gWzAsIDIsIDQsIDUsIDcsIDksIDExXVxuLyoqXG4gKiBQYXJzZSBhIG5vdGUgbmFtZSBpbiBzY2llbnRpZmljIG5vdGF0aW9uIGFuIHJldHVybiBpdCdzIGNvbXBvbmVudHMsXG4gKiBhbmQgc29tZSBudW1lcmljIHByb3BlcnRpZXMgaW5jbHVkaW5nIG1pZGkgbnVtYmVyIGFuZCBmcmVxdWVuY3kuXG4gKlxuICogQG5hbWUgcGFyc2VcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IG5vdGUgLSB0aGUgbm90ZSBzdHJpbmcgdG8gYmUgcGFyc2VkXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzVG9uaWMgLSB0cnVlIGlmIHRoZSBub3RlIGlzIHRoZSB0b25pYyBvZiBzb21ldGhpbmcuXG4gKiBJZiB0cnVlLCBlbiBleHRyYSB0b25pY09mIHByb3BlcnR5IGlzIHJldHVybmVkLiBJdCdzIGZhbHNlIGJ5IGRlZmF1bHQuXG4gKiBAcGFyYW0ge0Zsb2F0fSB0dW5uaW5nIC0gVGhlIGZyZXF1ZW5jeSBvZiBBNCBub3RlIHRvIGNhbGN1bGF0ZSBmcmVxdWVuY2llcy5cbiAqIEJ5IGRlZmF1bHQgaXQgNDQwLlxuICogQHJldHVybiB7T2JqZWN0fSB0aGUgcGFyc2VkIG5vdGUgbmFtZSBvciBudWxsIGlmIG5vdCBhIHZhbGlkIG5vdGVcbiAqXG4gKiBUaGUgcGFyc2VkIG5vdGUgbmFtZSBvYmplY3Qgd2lsbCBBTFdBWVMgY29udGFpbnM6XG4gKiAtIGxldHRlcjogdGhlIHVwcGVyY2FzZSBsZXR0ZXIgb2YgdGhlIG5vdGVcbiAqIC0gYWNjOiB0aGUgYWNjaWRlbnRhbHMgb2YgdGhlIG5vdGUgKG9ubHkgc2hhcnBzIG9yIGZsYXRzKVxuICogLSBwYzogdGhlIHBpdGNoIGNsYXNzIChsZXR0ZXIgKyBhY2MpXG4gKiAtIHN0ZXA6IHMgYSBudW1lcmljIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBsZXR0ZXIuIEl0J3MgYW4gaW50ZWdlciBmcm9tIDAgdG8gNlxuICogd2hlcmUgMCA9IEMsIDEgPSBEIC4uLiA2ID0gQlxuICogLSBhbHQ6IGEgbnVtZXJpYyByZXByZXNlbnRhdGlvbiBvZiB0aGUgYWNjaWRlbnRhbHMuIDAgbWVhbnMgbm8gYWx0ZXJhdGlvbixcbiAqIHBvc2l0aXZlIG51bWJlcnMgYXJlIGZvciBzaGFycHMgYW5kIG5lZ2F0aXZlIGZvciBmbGF0c1xuICogLSBjaHJvbWE6IGEgbnVtZXJpYyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcGl0Y2ggY2xhc3MuIEl0J3MgbGlrZSBtaWRpIGZvclxuICogcGl0Y2ggY2xhc3Nlcy4gMCA9IEMsIDEgPSBDIywgMiA9IEQgLi4uIEl0IGNhbiBoYXZlIG5lZ2F0aXZlIHZhbHVlczogLTEgPSBDYi5cbiAqIENhbiBkZXRlY3QgcGl0Y2ggY2xhc3MgZW5ocmFtb25pY3MuXG4gKlxuICogSWYgdGhlIG5vdGUgaGFzIG9jdGF2ZSwgdGhlIHBhcnNlciBvYmplY3Qgd2lsbCBjb250YWluOlxuICogLSBvY3Q6IHRoZSBvY3RhdmUgbnVtYmVyIChhcyBpbnRlZ2VyKVxuICogLSBtaWRpOiB0aGUgbWlkaSBudW1iZXJcbiAqIC0gZnJlcTogdGhlIGZyZXF1ZW5jeSAodXNpbmcgdHVuaW5nIHBhcmFtZXRlciBhcyBiYXNlKVxuICpcbiAqIElmIHRoZSBwYXJhbWV0ZXIgYGlzVG9uaWNgIGlzIHNldCB0byB0cnVlLCB0aGUgcGFyc2VkIG9iamVjdCB3aWxsIGNvbnRhaW46XG4gKiAtIHRvbmljT2Y6IHRoZSByZXN0IG9mIHRoZSBzdHJpbmcgdGhhdCBmb2xsb3dzIG5vdGUgbmFtZSAobGVmdCBhbmQgcmlnaHQgdHJpbW1lZClcbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIHBhcnNlID0gcmVxdWlyZSgnbm90ZS1wYXJzZXInKS5wYXJzZVxuICogcGFyc2UoJ0NiNCcpXG4gKiAvLyA9PiB7IGxldHRlcjogJ0MnLCBhY2M6ICdiJywgcGM6ICdDYicsIHN0ZXA6IDAsIGFsdDogLTEsIGNocm9tYTogLTEsXG4gKiAgICAgICAgIG9jdDogNCwgbWlkaTogNTksIGZyZXE6IDI0Ni45NDE2NTA2MjgwNjIwNiB9XG4gKiAvLyBpZiBubyBvY3RhdmUsIG5vIG1pZGksIG5vIGZyZXFcbiAqIHBhcnNlKCdmeCcpXG4gKiAvLyA9PiB7IGxldHRlcjogJ0YnLCBhY2M6ICcjIycsIHBjOiAnRiMjJywgc3RlcDogMywgYWx0OiAyLCBjaHJvbWE6IDcgfSlcbiAqL1xuZnVuY3Rpb24gcGFyc2UgKHN0ciwgaXNUb25pYywgdHVuaW5nKSB7XG4gIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJykgcmV0dXJuIG51bGxcbiAgdmFyIG0gPSBSRUdFWC5leGVjKHN0cilcbiAgaWYgKCFtIHx8ICFpc1RvbmljICYmIG1bNF0pIHJldHVybiBudWxsXG5cbiAgdmFyIHAgPSB7IGxldHRlcjogbVsxXS50b1VwcGVyQ2FzZSgpLCBhY2M6IG1bMl0ucmVwbGFjZSgveC9nLCAnIyMnKSB9XG4gIHAucGMgPSBwLmxldHRlciArIHAuYWNjXG4gIHAuc3RlcCA9IChwLmxldHRlci5jaGFyQ29kZUF0KDApICsgMykgJSA3XG4gIHAuYWx0ID0gcC5hY2NbMF0gPT09ICdiJyA/IC1wLmFjYy5sZW5ndGggOiBwLmFjYy5sZW5ndGhcbiAgcC5jaHJvbWEgPSBTRU1JVE9ORVNbcC5zdGVwXSArIHAuYWx0XG4gIGlmIChtWzNdKSB7XG4gICAgcC5vY3QgPSArbVszXVxuICAgIHAubWlkaSA9IHAuY2hyb21hICsgMTIgKiAocC5vY3QgKyAxKVxuICAgIHAuZnJlcSA9IG1pZGlUb0ZyZXEocC5taWRpLCB0dW5pbmcpXG4gIH1cbiAgaWYgKGlzVG9uaWMpIHAudG9uaWNPZiA9IG1bNF1cbiAgcmV0dXJuIHBcbn1cblxuLyoqXG4gKiBHaXZlbiBhIG1pZGkgbnVtYmVyLCByZXR1cm4gaXRzIGZyZXF1ZW5jeVxuICogQHBhcmFtIHtJbnRlZ2VyfSBtaWRpIC0gbWlkaSBub3RlIG51bWJlclxuICogQHBhcmFtIHtGbG9hdH0gdHVuaW5nIC0gKE9wdGlvbmFsKSB0aGUgQTQgdHVuaW5nICg0NDBIeiBieSBkZWZhdWx0KVxuICogQHJldHVybiB7RmxvYXR9IGZyZXF1ZW5jeSBpbiBoZXJ0enNcbiAqL1xuZnVuY3Rpb24gbWlkaVRvRnJlcSAobWlkaSwgdHVuaW5nKSB7XG4gIHJldHVybiBNYXRoLnBvdygyLCAobWlkaSAtIDY5KSAvIDEyKSAqICh0dW5pbmcgfHwgNDQwKVxufVxuXG52YXIgcGFyc2VyID0geyBwYXJzZTogcGFyc2UsIHJlZ2V4OiByZWdleCwgbWlkaVRvRnJlcTogbWlkaVRvRnJlcSB9XG52YXIgRk5TID0gWydsZXR0ZXInLCAnYWNjJywgJ3BjJywgJ3N0ZXAnLCAnYWx0JywgJ2Nocm9tYScsICdvY3QnLCAnbWlkaScsICdmcmVxJ11cbkZOUy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gIHBhcnNlcltuYW1lXSA9IGZ1bmN0aW9uIChzcmMpIHtcbiAgICB2YXIgcCA9IHBhcnNlKHNyYylcbiAgICByZXR1cm4gcCAmJiAodHlwZW9mIHBbbmFtZV0gIT09ICd1bmRlZmluZWQnKSA/IHBbbmFtZV0gOiBudWxsXG4gIH1cbn0pXG5cbm1vZHVsZS5leHBvcnRzID0gcGFyc2VyXG5cbi8vIGV4dHJhIEFQSSBkb2NzXG4vKipcbiAqIEdldCBtaWRpIG9mIGEgbm90ZVxuICpcbiAqIEBuYW1lIG1pZGlcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IG5vdGUgLSB0aGUgbm90ZSBuYW1lXG4gKiBAcmV0dXJuIHtJbnRlZ2VyfSB0aGUgbWlkaSBudW1iZXIgb2YgdGhlIG5vdGUgb3IgbnVsbCBpZiBub3QgYSB2YWxpZCBub3RlXG4gKiBvciB0aGUgbm90ZSBkb2VzIE5PVCBjb250YWlucyBvY3RhdmVcbiAqIEBleGFtcGxlXG4gKiB2YXIgcGFyc2VyID0gcmVxdWlyZSgnbm90ZS1wYXJzZXInKVxuICogcGFyc2VyLm1pZGkoJ0E0JykgLy8gPT4gNjlcbiAqIHBhcnNlci5taWRpKCdBJykgLy8gPT4gbnVsbFxuICovXG4vKipcbiAqIEdldCBmcmVxIG9mIGEgbm90ZSBpbiBoZXJ0enMgKGluIGEgd2VsbCB0ZW1wZXJlZCA0NDBIeiBBNClcbiAqXG4gKiBAbmFtZSBmcmVxXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7U3RyaW5nfSBub3RlIC0gdGhlIG5vdGUgbmFtZVxuICogQHJldHVybiB7RmxvYXR9IHRoZSBmcmVxIG9mIHRoZSBudW1iZXIgaWYgaGVydHpzIG9yIG51bGwgaWYgbm90IHZhbGlkIG5vdGVcbiAqIG9yIHRoZSBub3RlIGRvZXMgTk9UIGNvbnRhaW5zIG9jdGF2ZVxuICogQGV4YW1wbGVcbiAqIHZhciBwYXJzZXIgPSByZXF1aXJlKCdub3RlLXBhcnNlcicpXG4gKiBwYXJzZXIuZnJlcSgnQTQnKSAvLyA9PiA0NDBcbiAqIHBhcnNlci5mcmVxKCdBJykgLy8gPT4gbnVsbFxuICovXG4iLCIndXNlIHN0cmljdCdcblxudmFyIGxvYWQgPSByZXF1aXJlKCdhdWRpby1sb2FkZXInKVxudmFyIHBsYXllciA9IHJlcXVpcmUoJ3NhbXBsZS1wbGF5ZXInKVxuXG4vKipcbiAqIExvYWQgYSBzb3VuZGZvbnQgaW5zdHJ1bWVudC4gSXQgcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhXG4gKiBpbnN0cnVtZW50IG9iamVjdC5cbiAqXG4gKiBUaGUgaW5zdHJ1bWVudCBvYmplY3QgcmV0dXJuZWQgYnkgdGhlIHByb21pc2UgaGFzIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAtIG5hbWU6IHRoZSBpbnN0cnVtZW50IG5hbWVcbiAqIC0gcGxheTogQSBmdW5jdGlvbiB0byBwbGF5IG5vdGVzIGZyb20gdGhlIGJ1ZmZlciB3aXRoIHRoZSBzaWduYXR1cmVcbiAqIGBwbGF5KG5vdGUsIHRpbWUsIGR1cmF0aW9uLCBvcHRpb25zKWBcbiAqXG4gKlxuICogVGhlIHZhbGlkIG9wdGlvbnMgYXJlOlxuICpcbiAqIC0gYGZvcm1hdGA6IHRoZSBzb3VuZGZvbnQgZm9ybWF0LiAnbXAzJyBieSBkZWZhdWx0LiBDYW4gYmUgJ29nZydcbiAqIC0gYHNvdW5kZm9udGA6IHRoZSBzb3VuZGZvbnQgbmFtZS4gJ011c3luZ0tpdGUnIGJ5IGRlZmF1bHQuIENhbiBiZSAnRmx1aWRSM19HTSdcbiAqIC0gYG5hbWVUb1VybGAgPEZ1bmN0aW9uPjogYSBmdW5jdGlvbiB0byBjb252ZXJ0IGZyb20gaW5zdHJ1bWVudCBuYW1lcyB0byBVUkxcbiAqIC0gYGRlc3RpbmF0aW9uYDogYnkgZGVmYXVsdCBTb3VuZGZvbnQgdXNlcyB0aGUgYGF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbmAgYnV0IHlvdSBjYW4gb3ZlcnJpZGUgaXQuXG4gKiAtIGBnYWluYDogdGhlIGdhaW4gb2YgdGhlIHBsYXllciAoMSBieSBkZWZhdWx0KVxuICogLSBgbm90ZXNgOiBhbiBhcnJheSBvZiB0aGUgbm90ZXMgdG8gZGVjb2RlLiBJdCBjYW4gYmUgYW4gYXJyYXkgb2Ygc3RyaW5nc1xuICogd2l0aCBub3RlIG5hbWVzIG9yIGFuIGFycmF5IG9mIG51bWJlcnMgd2l0aCBtaWRpIG5vdGUgbnVtYmVycy4gVGhpcyBpcyBhXG4gKiBwZXJmb3JtYW5jZSBvcHRpb246IHNpbmNlIGRlY29kaW5nIG1wMyBpcyBhIGNwdSBpbnRlbnNpdmUgcHJvY2VzcywgeW91IGNhbiBsaW1pdFxuICogbGltaXQgdGhlIG51bWJlciBvZiBub3RlcyB5b3Ugd2FudCBhbmQgcmVkdWNlIHRoZSB0aW1lIHRvIGxvYWQgdGhlIGluc3RydW1lbnQuXG4gKlxuICogQHBhcmFtIHtBdWRpb0NvbnRleHR9IGFjIC0gdGhlIGF1ZGlvIGNvbnRleHRcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIC0gdGhlIGluc3RydW1lbnQgbmFtZS4gRm9yIGV4YW1wbGU6ICdhY291c3RpY19ncmFuZF9waWFubydcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gKE9wdGlvbmFsKSB0aGUgc2FtZSBvcHRpb25zIGFzIFNvdW5kZm9udC5sb2FkQnVmZmVyc1xuICogQHJldHVybiB7UHJvbWlzZX1cbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIFNvdW5kZm9udCA9IHJlcXVpcmUoJ3NvdW5mb250LXBsYXllcicpXG4gKiBTb3VuZGZvbnQuaW5zdHJ1bWVudCgnbWFyaW1iYScpLnRoZW4oZnVuY3Rpb24gKG1hcmltYmEpIHtcbiAqICAgbWFyaW1iYS5wbGF5KCdDNCcpXG4gKiB9KVxuICovXG5mdW5jdGlvbiBpbnN0cnVtZW50IChhYywgbmFtZSwgb3B0aW9ucykge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIGZ1bmN0aW9uIChuLCBvKSB7IHJldHVybiBpbnN0cnVtZW50KGFjLCBuLCBvKSB9XG4gIHZhciBvcHRzID0gb3B0aW9ucyB8fCB7fVxuICB2YXIgaXNVcmwgPSBvcHRzLmlzU291bmRmb250VVJMIHx8IGlzU291bmRmb250VVJMXG4gIHZhciB0b1VybCA9IG9wdHMubmFtZVRvVXJsIHx8IG5hbWVUb1VybFxuICB2YXIgdXJsID0gaXNVcmwobmFtZSkgPyBuYW1lIDogdG9VcmwobmFtZSwgb3B0cy5zb3VuZGZvbnQsIG9wdHMuZm9ybWF0KVxuXG4gIHJldHVybiBsb2FkKGFjLCB1cmwsIHsgb25seTogb3B0cy5vbmx5IHx8IG9wdHMubm90ZXMgfSkudGhlbihmdW5jdGlvbiAoYnVmZmVycykge1xuICAgIHZhciBwID0gcGxheWVyKGFjLCBidWZmZXJzLCBvcHRzKS5jb25uZWN0KGFjLmRlc3RpbmF0aW9uKVxuICAgIHAudXJsID0gdXJsXG4gICAgcC5uYW1lID0gbmFtZVxuICAgIHJldHVybiBwXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGlzU291bmRmb250VVJMIChuYW1lKSB7XG4gIHJldHVybiAvXFwuanMoXFw/LiopPyQvaS50ZXN0KG5hbWUpXG59XG5cbi8qKlxuICogR2l2ZW4gYW4gaW5zdHJ1bWVudCBuYW1lIHJldHVybnMgYSBVUkwgdG8gdG8gdGhlIEJlbmphbWluIEdsZWl0em1hbidzXG4gKiBwYWNrYWdlIG9mIFtwcmUtcmVuZGVyZWQgc291bmQgZm9udHNdKGh0dHBzOi8vZ2l0aHViLmNvbS9nbGVpdHovbWlkaS1qcy1zb3VuZGZvbnRzKVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIC0gaW5zdHJ1bWVudCBuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gc291bmRmb250IC0gKE9wdGlvbmFsKSB0aGUgc291bmRmb250IG5hbWUuIE9uZSBvZiAnRmx1aWRSM19HTSdcbiAqIG9yICdNdXN5bmdLaXRlJyAoJ011c3luZ0tpdGUnIGJ5IGRlZmF1bHQpXG4gKiBAcGFyYW0ge1N0cmluZ30gZm9ybWF0IC0gKE9wdGlvbmFsKSBDYW4gYmUgJ21wMycgb3IgJ29nZycgKG1wMyBieSBkZWZhdWx0KVxuICogQHJldHVybnMge1N0cmluZ30gdGhlIFNvdW5kZm9udCBmaWxlIHVybFxuICogQGV4YW1wbGVcbiAqIHZhciBTb3VuZGZvbnQgPSByZXF1aXJlKCdzb3VuZGZvbnQtcGxheWVyJylcbiAqIFNvdW5kZm9udC5uYW1lVG9VcmwoJ21hcmltYmEnLCAnbXAzJylcbiAqL1xuZnVuY3Rpb24gbmFtZVRvVXJsIChuYW1lLCBzZiwgZm9ybWF0KSB7XG4gIGZvcm1hdCA9IGZvcm1hdCA9PT0gJ29nZycgPyBmb3JtYXQgOiAnbXAzJ1xuICBzZiA9IHNmID09PSAnRmx1aWRSM19HTScgPyBzZiA6ICdNdXN5bmdLaXRlJ1xuICByZXR1cm4gJ2h0dHBzOi8vZ2xlaXR6LmdpdGh1Yi5pby9taWRpLWpzLXNvdW5kZm9udHMvJyArIHNmICsgJy8nICsgbmFtZSArICctJyArIGZvcm1hdCArICcuanMnXG59XG5cbi8vIEluIHRoZSAxLjAuMCByZWxlYXNlIGl0IHdpbGwgYmU6XG4vLyB2YXIgU291bmRmb250ID0ge31cbnZhciBTb3VuZGZvbnQgPSByZXF1aXJlKCcuL2xlZ2FjeScpXG5Tb3VuZGZvbnQuaW5zdHJ1bWVudCA9IGluc3RydW1lbnRcblNvdW5kZm9udC5uYW1lVG9VcmwgPSBuYW1lVG9VcmxcblxuaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSBtb2R1bGUuZXhwb3J0cyA9IFNvdW5kZm9udFxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB3aW5kb3cuU291bmRmb250ID0gU291bmRmb250XG4iLCIndXNlIHN0cmljdCdcblxudmFyIHBhcnNlciA9IHJlcXVpcmUoJ25vdGUtcGFyc2VyJylcblxuLyoqXG4gKiBDcmVhdGUgYSBTb3VuZGZvbnQgb2JqZWN0XG4gKlxuICogQHBhcmFtIHtBdWRpb0NvbnRleHR9IGNvbnRleHQgLSB0aGUgW2F1ZGlvIGNvbnRleHRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0FQSS9BdWRpb0NvbnRleHQpXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBuYW1lVG9VcmwgLSAoT3B0aW9uYWwpIGEgZnVuY3Rpb24gdGhhdCBtYXBzIHRoZSBzb3VuZCBmb250IG5hbWUgdG8gdGhlIHVybFxuICogQHJldHVybiB7U291bmRmb250fSBhIHNvdW5kZm9udCBvYmplY3RcbiAqL1xuZnVuY3Rpb24gU291bmRmb250IChjdHgsIG5hbWVUb1VybCkge1xuICBjb25zb2xlLndhcm4oJ25ldyBTb3VuZGZvbnQoKSBpcyBkZXByZWN0ZWQnKVxuICBjb25zb2xlLmxvZygnUGxlYXNlIHVzZSBTb3VuZGZvbnQuaW5zdHJ1bWVudCgpIGluc3RlYWQgb2YgbmV3IFNvdW5kZm9udCgpLmluc3RydW1lbnQoKScpXG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTb3VuZGZvbnQpKSByZXR1cm4gbmV3IFNvdW5kZm9udChjdHgpXG5cbiAgdGhpcy5uYW1lVG9VcmwgPSBuYW1lVG9VcmwgfHwgU291bmRmb250Lm5hbWVUb1VybFxuICB0aGlzLmN0eCA9IGN0eFxuICB0aGlzLmluc3RydW1lbnRzID0ge31cbiAgdGhpcy5wcm9taXNlcyA9IFtdXG59XG5cblNvdW5kZm9udC5wcm90b3R5cGUub25yZWFkeSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICBjb25zb2xlLndhcm4oJ2RlcHJlY2F0ZWQgQVBJJylcbiAgY29uc29sZS5sb2coJ1BsZWFzZSB1c2UgUHJvbWlzZS5hbGwoU291bmRmb250Lmluc3RydW1lbnQoKSwgU291bmRmb250Lmluc3RydW1lbnQoKSkudGhlbigpIGluc3RlYWQgb2YgbmV3IFNvdW5kZm9udCgpLm9ucmVhZHkoKScpXG4gIFByb21pc2UuYWxsKHRoaXMucHJvbWlzZXMpLnRoZW4oY2FsbGJhY2spXG59XG5cblNvdW5kZm9udC5wcm90b3R5cGUuaW5zdHJ1bWVudCA9IGZ1bmN0aW9uIChuYW1lLCBvcHRpb25zKSB7XG4gIGNvbnNvbGUud2FybignbmV3IFNvdW5kZm9udCgpLmluc3RydW1lbnQoKSBpcyBkZXByZWNhdGVkLicpXG4gIGNvbnNvbGUubG9nKCdQbGVhc2UgdXNlIFNvdW5kZm9udC5pbnN0cnVtZW50KCkgaW5zdGVhZC4nKVxuICB2YXIgY3R4ID0gdGhpcy5jdHhcbiAgbmFtZSA9IG5hbWUgfHwgJ2RlZmF1bHQnXG4gIGlmIChuYW1lIGluIHRoaXMuaW5zdHJ1bWVudHMpIHJldHVybiB0aGlzLmluc3RydW1lbnRzW25hbWVdXG4gIHZhciBpbnN0ID0ge25hbWU6IG5hbWUsIHBsYXk6IG9zY2lsbGF0b3JQbGF5ZXIoY3R4LCBvcHRpb25zKX1cbiAgdGhpcy5pbnN0cnVtZW50c1tuYW1lXSA9IGluc3RcbiAgaWYgKG5hbWUgIT09ICdkZWZhdWx0Jykge1xuICAgIHZhciBwcm9taXNlID0gU291bmRmb250Lmluc3RydW1lbnQoY3R4LCBuYW1lLCBvcHRpb25zKS50aGVuKGZ1bmN0aW9uIChpbnN0cnVtZW50KSB7XG4gICAgICBpbnN0LnBsYXkgPSBpbnN0cnVtZW50LnBsYXlcbiAgICAgIHJldHVybiBpbnN0XG4gICAgfSlcbiAgICB0aGlzLnByb21pc2VzLnB1c2gocHJvbWlzZSlcbiAgICBpbnN0Lm9ucmVhZHkgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgIGNvbnNvbGUud2Fybignb25yZWFkeSBpcyBkZXByZWNhdGVkLiBVc2UgU291bmRmb250Lmluc3RydW1lbnQoKS50aGVuKCknKVxuICAgICAgcHJvbWlzZS50aGVuKGNiKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpbnN0Lm9ucmVhZHkgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgIGNvbnNvbGUud2Fybignb25yZWFkeSBpcyBkZXByZWNhdGVkLiBVc2UgU291bmRmb250Lmluc3RydW1lbnQoKS50aGVuKCknKVxuICAgICAgY2IoKVxuICAgIH1cbiAgfVxuICByZXR1cm4gaW5zdFxufVxuXG4vKlxuICogTG9hZCB0aGUgYnVmZmVycyBvZiBhIGdpdmVuIGluc3RydW1lbnQgbmFtZS4gSXQgcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlc1xuICogdG8gYSBoYXNoIHdpdGggbWlkaSBub3RlIG51bWJlcnMgYXMga2V5cywgYW5kIGF1ZGlvIGJ1ZmZlcnMgYXMgdmFsdWVzLlxuICpcbiAqIEBwYXJhbSB7QXVkaW9Db250ZXh0fSBhYyAtIHRoZSBhdWRpbyBjb250ZXh0XG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSAtIHRoZSBpbnN0cnVtZW50IG5hbWUgKGl0IGFjY2VwdHMgYW4gdXJsIGlmIHN0YXJ0cyB3aXRoIFwiaHR0cFwiKVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSAoT3B0aW9uYWwpIG9wdGlvbnMgb2JqZWN0XG4gKiBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIEhhc2ggb2YgeyBtaWRpTm90ZU51bTogPEF1ZGlvQnVmZmVyPiB9XG4gKlxuICogVGhlIG9wdGlvbnMgb2JqZWN0IGFjY2VwdHMgdGhlIGZvbGxvd2luZyBrZXlzOlxuICpcbiAqIC0gbmFtZVRvVXJsIHtGdW5jdGlvbn06IGEgZnVuY3Rpb24gdG8gY29udmVydCBmcm9tIGluc3RydW1lbnQgbmFtZXMgdG8gdXJscy5cbiAqIEJ5IGRlZmF1bHQgaXQgdXNlcyBCZW5qYW1pbiBHbGVpdHptYW4ncyBwYWNrYWdlIG9mXG4gKiBbcHJlLXJlbmRlcmVkIHNvdW5kIGZvbnRzXShodHRwczovL2dpdGh1Yi5jb20vZ2xlaXR6L21pZGktanMtc291bmRmb250cylcbiAqIC0gbm90ZXMge0FycmF5fTogdGhlIGxpc3Qgb2Ygbm90ZSBuYW1lcyB0byBiZSBkZWNvZGVkIChhbGwgYnkgZGVmYXVsdClcbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIFNvdW5kZm9udCA9IHJlcXVpcmUoJ3NvdW5kZm9udC1wbGF5ZXInKVxuICogU291bmRmb250LmxvYWRCdWZmZXJzKGN0eCwgJ2Fjb3VzdGljX2dyYW5kX3BpYW5vJykudGhlbihmdW5jdGlvbihidWZmZXJzKSB7XG4gKiAgYnVmZmVyc1s2MF0gLy8gPT4gQW4gPEF1ZGlvQnVmZmVyPiBjb3JyZXNwb25kaW5nIHRvIG5vdGUgQzRcbiAqIH0pXG4gKi9cbmZ1bmN0aW9uIGxvYWRCdWZmZXJzIChhYywgbmFtZSwgb3B0aW9ucykge1xuICBjb25zb2xlLndhcm4oJ1NvdW5kZm9udC5sb2FkQnVmZmVycyBpcyBkZXByZWNhdGUuJylcbiAgY29uc29sZS5sb2coJ1VzZSBTb3VuZGZvbnQuaW5zdHJ1bWVudCguLikgYW5kIGdldCBidWZmZXJzIHByb3BlcnRpZXMgZnJvbSB0aGUgcmVzdWx0LicpXG4gIHJldHVybiBTb3VuZGZvbnQuaW5zdHJ1bWVudChhYywgbmFtZSwgb3B0aW9ucykudGhlbihmdW5jdGlvbiAoaW5zdCkge1xuICAgIHJldHVybiBpbnN0LmJ1ZmZlcnNcbiAgfSlcbn1cblNvdW5kZm9udC5sb2FkQnVmZmVycyA9IGxvYWRCdWZmZXJzXG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcGxheXMgYW4gb3NjaWxsYXRvclxuICpcbiAqIEBwYXJhbSB7QXVkaW9Db250ZXh0fSBhYyAtIHRoZSBhdWRpbyBjb250ZXh0XG4gKiBAcGFyYW0ge0hhc2h9IGRlZmF1bHRPcHRpb25zIC0gKE9wdGlvbmFsKSBhIGhhc2ggb2Ygb3B0aW9uczpcbiAqIC0gdmNvVHlwZTogdGhlIG9zY2lsbGF0b3IgdHlwZSAoZGVmYXVsdDogJ3NpbmUnKVxuICogLSBnYWluOiB0aGUgb3V0cHV0IGdhaW4gdmFsdWUgKGRlZmF1bHQ6IDAuNClcbiAgKiAtIGRlc3RpbmF0aW9uOiB0aGUgcGxheWVyIGRlc3RpbmF0aW9uIChkZWZhdWx0OiBhYy5kZXN0aW5hdGlvbilcbiAqL1xuZnVuY3Rpb24gb3NjaWxsYXRvclBsYXllciAoY3R4LCBkZWZhdWx0T3B0aW9ucykge1xuICBkZWZhdWx0T3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zIHx8IHt9XG4gIHJldHVybiBmdW5jdGlvbiAobm90ZSwgdGltZSwgZHVyYXRpb24sIG9wdGlvbnMpIHtcbiAgICBjb25zb2xlLndhcm4oJ1RoZSBvc2NpbGxhdG9yIHBsYXllciBpcyBkZXByZWNhdGVkLicpXG4gICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIHdpdGggdmVyc2lvbiAwLjkuMCB5b3Ugd2lsbCBoYXZlIHRvIHdhaXQgdW50aWwgdGhlIHNvdW5kZm9udCBpcyBsb2FkZWQgdG8gcGxheSBzb3VuZHMuJylcbiAgICB2YXIgbWlkaSA9IG5vdGUgPiAwICYmIG5vdGUgPCAxMjkgPyArbm90ZSA6IHBhcnNlci5taWRpKG5vdGUpXG4gICAgdmFyIGZyZXEgPSBtaWRpID8gcGFyc2VyLm1pZGlUb0ZyZXEobWlkaSwgNDQwKSA6IG51bGxcbiAgICBpZiAoIWZyZXEpIHJldHVyblxuXG4gICAgZHVyYXRpb24gPSBkdXJhdGlvbiB8fCAwLjJcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gICAgdmFyIGRlc3RpbmF0aW9uID0gb3B0aW9ucy5kZXN0aW5hdGlvbiB8fCBkZWZhdWx0T3B0aW9ucy5kZXN0aW5hdGlvbiB8fCBjdHguZGVzdGluYXRpb25cbiAgICB2YXIgdmNvVHlwZSA9IG9wdGlvbnMudmNvVHlwZSB8fCBkZWZhdWx0T3B0aW9ucy52Y29UeXBlIHx8ICdzaW5lJ1xuICAgIHZhciBnYWluID0gb3B0aW9ucy5nYWluIHx8IGRlZmF1bHRPcHRpb25zLmdhaW4gfHwgMC40XG5cbiAgICB2YXIgdmNvID0gY3R4LmNyZWF0ZU9zY2lsbGF0b3IoKVxuICAgIHZjby50eXBlID0gdmNvVHlwZVxuICAgIHZjby5mcmVxdWVuY3kudmFsdWUgPSBmcmVxXG5cbiAgICAvKiBWQ0EgKi9cbiAgICB2YXIgdmNhID0gY3R4LmNyZWF0ZUdhaW4oKVxuICAgIHZjYS5nYWluLnZhbHVlID0gZ2FpblxuXG4gICAgLyogQ29ubmVjdGlvbnMgKi9cbiAgICB2Y28uY29ubmVjdCh2Y2EpXG4gICAgdmNhLmNvbm5lY3QoZGVzdGluYXRpb24pXG5cbiAgICB2Y28uc3RhcnQodGltZSlcbiAgICBpZiAoZHVyYXRpb24gPiAwKSB2Y28uc3RvcCh0aW1lICsgZHVyYXRpb24pXG4gICAgcmV0dXJuIHZjb1xuICB9XG59XG5cbi8qKlxuICogR2l2ZW4gYSBub3RlIG5hbWUsIHJldHVybiB0aGUgbm90ZSBtaWRpIG51bWJlclxuICpcbiAqIEBuYW1lIG5vdGVUb01pZGlcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IG5vdGVOYW1lXG4gKiBAcmV0dXJuIHtJbnRlZ2VyfSB0aGUgbm90ZSBtaWRpIG51bWJlciBvciBudWxsIGlmIG5vdCBhIHZhbGlkIG5vdGUgbmFtZVxuICovXG5Tb3VuZGZvbnQubm90ZVRvTWlkaSA9IHBhcnNlci5taWRpXG5cbm1vZHVsZS5leHBvcnRzID0gU291bmRmb250XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL2luZGV4Jyk7XG4iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcG9ueWZpbGwgPSByZXF1aXJlKCcuL3BvbnlmaWxsJyk7XG5cbnZhciBfcG9ueWZpbGwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9ueWZpbGwpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbnZhciByb290OyAvKiBnbG9iYWwgd2luZG93ICovXG5cblxuaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gc2VsZjtcbn0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgcm9vdCA9IHdpbmRvdztcbn0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgcm9vdCA9IGdsb2JhbDtcbn0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgcm9vdCA9IG1vZHVsZTtcbn0gZWxzZSB7XG4gIHJvb3QgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xufVxuXG52YXIgcmVzdWx0ID0gKDAsIF9wb255ZmlsbDJbJ2RlZmF1bHQnXSkocm9vdCk7XG5leHBvcnRzWydkZWZhdWx0J10gPSByZXN1bHQ7IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0dmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0c1snZGVmYXVsdCddID0gc3ltYm9sT2JzZXJ2YWJsZVBvbnlmaWxsO1xuZnVuY3Rpb24gc3ltYm9sT2JzZXJ2YWJsZVBvbnlmaWxsKHJvb3QpIHtcblx0dmFyIHJlc3VsdDtcblx0dmFyIF9TeW1ib2wgPSByb290LlN5bWJvbDtcblxuXHRpZiAodHlwZW9mIF9TeW1ib2wgPT09ICdmdW5jdGlvbicpIHtcblx0XHRpZiAoX1N5bWJvbC5vYnNlcnZhYmxlKSB7XG5cdFx0XHRyZXN1bHQgPSBfU3ltYm9sLm9ic2VydmFibGU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdCA9IF9TeW1ib2woJ29ic2VydmFibGUnKTtcblx0XHRcdF9TeW1ib2wub2JzZXJ2YWJsZSA9IHJlc3VsdDtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0cmVzdWx0ID0gJ0BAb2JzZXJ2YWJsZSc7XG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJpbXBvcnQgTWlkaUFjdGlvbiBmcm9tICcuLi9hY3Rpb25zL21pZGktYWN0aW9ucyc7XG5pbXBvcnQgeyBNaWRpVXRpbHMgfSBmcm9tICcuLi91dGlscy9taWRpJztcbmltcG9ydCB7IEF1ZGlvVXRpbHMgfSBmcm9tICcuLi91dGlscy9hdWRpbyc7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIG5vdGVPbihldmVudCwgbWVzc2FnZT0nbm90ZU9uJykge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YVxuICAgICAgPyBldmVudC5kYXRhXG4gICAgICA6IE1pZGlVdGlscy5zZXROb3RlT25NZXNzYWdlKGV2ZW50LnRhcmdldCk7XG5cbiAgICBjb25zdCBub3RlID0gTWlkaVV0aWxzLmdldE5vdGUoZGF0YSk7XG5cbiAgICBsZXQgYWMgPSBzdGF0ZS5taWRpLmF1ZGlvQ29udGV4dDtcbiAgICBsZXQgbm90ZXMgPSBzdGF0ZS5taWRpLm5vdGVzO1xuXG4gICAgaWYgKHN0YXRlLnNldHRpbmdzLndlYkFwaUF1ZGlvKSB7XG5cbiAgICAgIGlmICghbm90ZXNbbm90ZV0pIHtcbiAgICAgICAgbm90ZXNbbm90ZV0gPSBBdWRpb1V0aWxzLmdlbmVyYXRlT3NjaWxsYXRvcihub3RlLCBhYyk7XG4gICAgICAgIG5vdGVzW25vdGVdLnN0YXJ0KCk7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgbm90ZXNbbm90ZV0gPSAncGxheWluZyc7XG4gICAgICBzdGF0ZS5zZXR0aW5ncy5zb3VuZGZvbnRJbnN0cnVtZW50LnBsYXkobm90ZSk7XG4gICAgfVxuXG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogTWlkaUFjdGlvbi5OT1RFX09OLFxuICAgICAgcGF5bG9hZDogeyBtZXNzYWdlLCBkYXRhLCBub3RlcyB9XG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3RlT2ZmKGV2ZW50LCBtZXNzYWdlPSdub3RlT2ZmJykge1xuICByZXR1cm4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YVxuICAgICAgPyBldmVudC5kYXRhXG4gICAgICA6IE1pZGlVdGlscy5zZXROb3RlT2ZmTWVzc2FnZShldmVudC50YXJnZXQpO1xuXG4gICAgY29uc3Qgbm90ZSA9IE1pZGlVdGlscy5nZXROb3RlKGRhdGEpO1xuICAgIGxldCBub3RlcyA9IHN0YXRlLm1pZGkubm90ZXM7XG5cbiAgICBpZiAoc3RhdGUuc2V0dGluZ3Mud2ViQXBpQXVkaW8pIHtcblxuICAgICAgaWYgKG5vdGVzW25vdGVdKSB7XG4gICAgICAgIG5vdGVzW25vdGVdLnN0b3AoKTtcbiAgICAgICAgbm90ZXNbbm90ZV0uZGlzY29ubmVjdCgpO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLnNldHRpbmdzLnNvdW5kZm9udEluc3RydW1lbnQuc3RvcChub3RlKTtcbiAgICB9XG5cbiAgICBub3Rlc1tub3RlXSA9IG51bGw7XG5cbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBNaWRpQWN0aW9uLk5PVEVfT0ZGLFxuICAgICAgcGF5bG9hZDogeyBtZXNzYWdlLCBkYXRhLCBub3RlcyB9XG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb250cm9sbGVyKGV2ZW50LCBtZXNzYWdlKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGV2ZW50LmRhdGE7XG5cbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBNaWRpQWN0aW9uLkNPTlRST0xMRVIsXG4gICAgICBwYXlsb2FkOiB7IG1lc3NhZ2UgfVxuICAgIH0pO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgTWlkaU1lc3NhZ2VzIH0gZnJvbSAnLi4vY29uc3RhbnRzL21pZGktbWVzc2FnZXMnO1xuaW1wb3J0IHsgTWlkaVV0aWxzIH0gZnJvbSAnLi4vdXRpbHMvbWlkaSc7XG5pbXBvcnQgKiBhcyBNaWRpRXZlbnRzIGZyb20gJy4uL2FjdGlvbi1jcmVhdG9ycy9taWRpLWV2ZW50cy1hY3Rpb24tY3JlYXRvcnMnO1xuXG5leHBvcnQgZnVuY3Rpb24gbWlkaU1lc3NhZ2UoZXZlbnQpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBtaWRpTWVzc2FnZSA9IE1pZGlVdGlscy5nZXRFdmVudFR5cGUoZXZlbnQuZGF0YSk7XG4gICAgY29uc3QgbWVzc2FnZSA9IE1pZGlNZXNzYWdlc1ttaWRpTWVzc2FnZV07XG5cbiAgICBkaXNwYXRjaChNaWRpRXZlbnRzW21lc3NhZ2VdKGV2ZW50KSk7XG4gIH07XG59XG4iLCJpbXBvcnQgTWlkaUNvbm5lY3QgZnJvbSAnLi4vYWN0aW9ucy9taWRpLWNvbm5lY3QnO1xuaW1wb3J0IFNvdW5kZm9udCBmcm9tICdzb3VuZGZvbnQtcGxheWVyJztcbmltcG9ydCAqIGFzIE1pZGlNZXNzYWdlcyBmcm9tICcuLi9hY3Rpb24tY3JlYXRvcnMvbWlkaS1tZXNzYWdlcy1hY3Rpb24tY3JlYXRvcnMnO1xuaW1wb3J0IHsgYmluZEFjdGlvbkNyZWF0b3JzIH0gZnJvbSAncmVkdXgnO1xuXG5pbXBvcnQge1xuICBTT1VORFNfUEFUSCxcbiAgU09VTkRTX0ZJTEVUWVBFLFxuICBTT1VORFNfRklMRV9FWFRFTlNJT05cbn0gZnJvbSAnLi4vY29uc3RhbnRzL21pZGktc291bmRwYXRocyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBtaWRpU3VjY2VzcyhtaWRpQWNjZXNzKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICAgIGNvbnN0IG1pZGlNZXNzYWdlcyA9IGJpbmRBY3Rpb25DcmVhdG9ycyhNaWRpTWVzc2FnZXMsIGRpc3BhdGNoKTtcbiAgICBjb25zdCBzdGF0dXMgPSAnTUlESSBTdWNjZWVkZWQnO1xuXG4gICAgbGV0IGlucHV0cyA9IG1pZGlBY2Nlc3MuaW5wdXRzLnZhbHVlcygpO1xuICAgIGxldCBnYWluTm9kZSA9IHN0YXRlLm1pZGkuYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKTtcblxuICAgIGdhaW5Ob2RlLmNvbm5lY3Qoc3RhdGUubWlkaS5hdWRpb0NvbnRleHQuZGVzdGluYXRpb24pO1xuXG4gICAgZm9yKGxldCBpbnB1dCA9IGlucHV0cy5uZXh0KCk7IGlucHV0ICYmICFpbnB1dC5kb25lOyBpbnB1dCA9IGlucHV0cy5uZXh0KCkpIHtcbiAgICAgIGlucHV0LnZhbHVlLm9ubWlkaW1lc3NhZ2UgPSBtaWRpTWVzc2FnZXMubWlkaU1lc3NhZ2U7XG4gICAgfVxuXG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogTWlkaUNvbm5lY3QuTUlESV9TVUNDRVNTLFxuICAgICAgcGF5bG9hZDogeyBzdGF0dXMsIG1pZGlBY2Nlc3MsIGlucHV0cywgZ2Fpbk5vZGUgfVxuICAgIH0pO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWlkaUZhaWx1cmUobWlkaUFjY2Vzcykge1xuICByZXR1cm4gKGRpc3BhdGNoKSA9PiB7XG4gICAgY29uc3Qgc3RhdHVzID0gJ01JREkgRmFpbGVkJztcblxuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IE1pZGlDb25uZWN0Lk1JRElfRkFJTFVSRSxcbiAgICAgIHBheWxvYWQ6IHsgc3RhdHVzIH1cbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRTb3VuZGZvbnRJbnN0cnVtZW50KGluc3RydW1lbnQpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgY29uc3QgaW5zdHJ1bWVudFBhdGggPSBfZ2V0SW5zdHJ1bWVudFBhdGguY2FsbCh0aGlzLCBpbnN0cnVtZW50KTtcbiAgICBsZXQgYWMgPSBzdGF0ZS5taWRpLmF1ZGlvQ29udGV4dDtcblxuICAgIFNvdW5kZm9udC5pbnN0cnVtZW50KGFjLCBpbnN0cnVtZW50UGF0aClcbiAgICAgIC50aGVuKChzb3VuZGZvbnRJbnN0cnVtZW50KSA9PiB7XG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiBNaWRpQ29ubmVjdC5NSURJX0xPQURfSU5TVFJVTUVOVCxcbiAgICAgICAgICBwYXlsb2FkOiB7IHNvdW5kZm9udEluc3RydW1lbnQgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hhbmdlQXVkaW8oYXVkaW8pIHtcbiAgcmV0dXJuIChkaXNwYXRjaCkgPT4ge1xuICAgIGNvbnN0IHdlYkFwaUF1ZGlvID0gYXVkaW87XG5cbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBNaWRpQ29ubmVjdC5DSEFOR0VfQVVESU8sXG4gICAgICBwYXlsb2FkOiB7IHdlYkFwaUF1ZGlvIH1cbiAgICB9KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gX2dldEluc3RydW1lbnRQYXRoKGluc3RydW1lbnQpIHtcbiAgcmV0dXJuIGAke1NPVU5EU19QQVRIfS8ke2luc3RydW1lbnR9LSR7U09VTkRTX0ZJTEVUWVBFfS4ke1NPVU5EU19GSUxFX0VYVEVOU0lPTn1gO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgT2JqZWN0LmZyZWV6ZSh7XG4gIENPTlRST0xMRVI6ICAgICAgICAgICdjb250cm9sbGVyJyxcbiAgSU5TVFJVTUVOVF9OQU1FOiAgICAgJ2luc3RydW1lbnROYW1lJyxcbiAgTk9URV9PRkY6ICAgICAgICAgICAgJ25vdGVPZmYnLFxuICBOT1RFX09OOiAgICAgICAgICAgICAnbm90ZU9uJyxcbiAgUFJPR1JBTV9DSEFOR0U6ICAgICAgJ3Byb2dyYW1DaGFuZ2UnLFxuICBTWVNfRVg6ICAgICAgICAgICAgICAnc3lzRXgnXG59KTtcbiIsImV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoe1xuICBNSURJX1NVQ0NFU1M6ICdtaWRpU3VjY2VzcycsXG4gIE1JRElfRkFJTFVSRTogJ21pZGlGYWlsdXJlJyxcbiAgTUlESV9NRVNTQUdFOiAnbWlkaU1lc3NhZ2UnLFxuICBDSEFOR0VfQVVESU86ICdjaGFuZ2VBdWRpbycsXG4gIE1JRElfTE9BRF9JTlNUUlVNRU5UOiAnbG9hZEluc3RydW1lbnQnXG59KTtcbiIsImV4cG9ydCBjb25zdCBNaWRpQXVkaW9TZWxlY3RvciA9IHtcbiAgaW5pdChzdG9yZT17fSwgbWlkaVNldHVwQWN0aW9ucz17fSkge1xuICAgIHRoaXMuc3RvcmUgPSBzdG9yZTtcbiAgICB0aGlzLm1pZGlTZXR1cEFjdGlvbnMgPSBtaWRpU2V0dXBBY3Rpb25zO1xuICAgIHRoaXMuYXVkaW9TZWxlY3RvcnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXVkaW8tc2VsZWN0b3InKS5hdWRpb1NlbGVjdG9ycztcblxuXG4gICAgdGhpcy5hdWRpb1NlbGVjdG9ycy5mb3JFYWNoKChzZWxlY3RvcikgPT4ge1xuICAgICAgc2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5jaGFuZ2VBdWRpby5iaW5kKHRoaXMpKTtcbiAgICB9KTtcblxuICAgIHRoaXMucmVuZGVyKCk7XG4gIH0sXG5cbiAgY2hhbmdlQXVkaW8oZXZlbnQpIHtcbiAgICBjb25zdCBhdWRpbyA9IGV2ZW50LnRhcmdldC52YWx1ZSA9PT0gXCJ0cnVlXCI7XG4gICAgdGhpcy5taWRpU2V0dXBBY3Rpb25zLmNoYW5nZUF1ZGlvKGF1ZGlvKTtcbiAgfSxcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgc3RvcmUgPSB0aGlzLnN0b3JlO1xuXG4gICAgc3RvcmUuc3Vic2NyaWJlKCgpID0+IHtcblxuICAgIH0pO1xuICB9XG59O1xuIiwiaW1wb3J0IHsgTUlESUluc3RydW1lbnRzIH0gZnJvbSAnLi4vY29uc3RhbnRzL21pZGktaW5zdHJ1bWVudHMnO1xuXG5leHBvcnQgY29uc3QgTWlkaUluc3RydW1lbnRzU2VsZWN0b3IgPSB7XG4gIGluaXQoc3RvcmU9e30sIG1pZGlTZXR1cEFjdGlvbnM9e30pIHtcbiAgICB0aGlzLnN0b3JlID0gc3RvcmU7XG4gICAgdGhpcy5taWRpU2V0dXBBY3Rpb25zID0gbWlkaVNldHVwQWN0aW9ucztcbiAgICB0aGlzLmluc3RydW1lbnRTZWxlY3RvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnN0cnVtZW50LXNlbGVjdG9yJyk7XG5cbiAgICB0aGlzLmluc3RydW1lbnRTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLFxuICAgICAgdGhpcy5sb2FkSW5zdHJ1bWVudC5iaW5kKHRoaXMpKTtcblxuICAgIF9hZGRJbnN0cnVtZW50T3B0aW9ucy5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfSxcblxuICBsb2FkSW5zdHJ1bWVudChldmVudCkge1xuICAgIGNvbnN0IGluc3RydW1lbnQgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgdGhpcy5taWRpU2V0dXBBY3Rpb25zLmxvYWRTb3VuZGZvbnRJbnN0cnVtZW50KGluc3RydW1lbnQpO1xuICB9LFxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBzdG9yZSA9IHRoaXMuc3RvcmU7XG5cbiAgICBzdG9yZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgY29uc3QgaGlkZGVuQ2xhc3MgPSAnaGlkZGVuJztcbiAgICAgIGNvbnN0IHRvZ2dsZUhpZGRlbiA9IHN0YXRlLnNldHRpbmdzLndlYkFwaUF1ZGlvID8gJ2FkZCcgOiAncmVtb3ZlJztcblxuICAgICAgdGhpcy5pbnN0cnVtZW50U2VsZWN0b3IuY2xhc3NMaXN0W3RvZ2dsZUhpZGRlbl0oaGlkZGVuQ2xhc3MpO1xuICAgIH0pO1xuICB9XG59O1xuXG5cbmZ1bmN0aW9uIF9hZGRJbnN0cnVtZW50T3B0aW9ucygpIHtcbiAgZm9yIChsZXQgaW5zdHJ1bWVudCBpbiBNSURJSW5zdHJ1bWVudHMpIHtcbiAgICBsZXQgaW5zdHJ1bWVudE9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgIGluc3RydW1lbnRPcHRpb24udmFsdWUgPSBNSURJSW5zdHJ1bWVudHNbaW5zdHJ1bWVudF07XG4gICAgaW5zdHJ1bWVudE9wdGlvbi50ZXh0ID0gTUlESUluc3RydW1lbnRzW2luc3RydW1lbnRdO1xuICAgIHRoaXMuaW5zdHJ1bWVudFNlbGVjdG9yLmFwcGVuZENoaWxkKGluc3RydW1lbnRPcHRpb24pO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgTWlkaVBpYW5vID0ge1xuICBpbml0KHN0b3JlPXt9LCBtaWRpRXZlbnRzQWN0aW9ucz17fSkge1xuICAgIHRoaXMuc3RvcmUgPSBzdG9yZTtcbiAgICB0aGlzLm1pZGlFdmVudHNBY3Rpb25zID0gbWlkaUV2ZW50c0FjdGlvbnM7XG4gICAgdGhpcy5ub3RlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ25vdGUnKTtcbiAgICB0aGlzLmtleXMkICA9IHt9O1xuXG4gICAgX2luaXRLZXlFbGVtZW50cy5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfSxcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgc3RvcmUgPSB0aGlzLnN0b3JlO1xuXG4gICAgc3RvcmUuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKTtcblxuICAgICAgZm9yIChsZXQgbm90ZSBpbiBzdGF0ZS5taWRpLm5vdGVzKSB7XG4gICAgICAgIGNvbnN0IGtleSQgPSB0aGlzLmtleXMkW25vdGVdO1xuICAgICAgICBjb25zdCBtaWRpTm90ZSA9IHN0YXRlLm1pZGkubm90ZXNbbm90ZV07XG4gICAgICAgIGNvbnN0IHRvZ2dsZSA9IG1pZGlOb3RlID8gJ2FkZCcgOiAncmVtb3ZlJztcbiAgICAgICAgY29uc3QgcGxheWluZ0NsYXNzID0gJ3BsYXlpbmcnO1xuXG4gICAgICAgIGtleSQuY2xhc3NMaXN0W3RvZ2dsZV0ocGxheWluZ0NsYXNzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufTtcblxuZnVuY3Rpb24gX2luaXRLZXlFbGVtZW50cygpIHtcbiAgbGV0IG5vdGVOdW1iZXIgPSA0ODtcblxuICBbXS5mb3JFYWNoLmNhbGwodGhpcy5ub3RlcywgKG5vdGUpID0+IHtcbiAgICBub3RlLnNldEF0dHJpYnV0ZSgnZGF0YS1ub3RlJywgbm90ZU51bWJlcik7XG5cbiAgICBub3RlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMubWlkaUV2ZW50c0FjdGlvbnMubm90ZU9uKTtcbiAgICBub3RlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm1pZGlFdmVudHNBY3Rpb25zLm5vdGVPZmYpO1xuXG4gICAgdGhpcy5rZXlzJFtub3RlTnVtYmVyXSA9IG5vdGU7XG4gICAgbm90ZU51bWJlcisrO1xuICB9KTtcbn1cbiIsImV4cG9ydCBjb25zdCBNSURJSW5zdHJ1bWVudHMgPSB7XG4gIDA6ICdhY291c3RpY19ncmFuZF9waWFubycsXG4gIDE6ICdicmlnaHRfYWNvdXN0aWNfcGlhbm8nLFxuICAyOiAnZWxlY3RyaWNfZ3JhbmRfcGlhbm8nLFxuICAzOiAnaG9ua3l0b25rX3BpYW5vJyxcbiAgNDogJ2VsZWN0cmljX3BpYW5vXzEnLFxuICA1OiAnZWxlY3RyaWNfcGlhbm9fMicsXG4gIDY6ICdoYXJwc2ljaG9yZCcsXG4gIDc6ICdjbGF2aW5ldCcsXG4gIDg6ICdjZWxlc3RhJyxcbiAgOTogJ2dsb2NrZW5zcGllbCcsXG4gIDEwOiAnbXVzaWNfYm94JyxcbiAgMTE6ICd2aWJyYXBob25lJyxcbiAgMTI6ICdtYXJpbWJhJyxcbiAgMTM6ICd4eWxvcGhvbmUnLFxuICAxNDogJ3R1YnVsYXJfYmVsbHMnLFxuICAxNTogJ2R1bGNpbWVyJyxcbiAgMTY6ICdkcmF3YmFyX29yZ2FuJyxcbiAgMTc6ICdwZXJjdXNzaXZlX29yZ2FuJyxcbiAgMTg6ICdyb2NrX29yZ2FuJyxcbiAgMTk6ICdjaHVyY2hfb3JnYW4nLFxuICAyMDogJ3JlZWRfb3JnYW4nLFxuICAyMTogJ0FjY29yZGlvbicsXG4gIDIyOiAnaGFybW9uaWNhJyxcbiAgMjM6ICd0YW5nb19hY2NvcmRpb24nLFxuICAyNDogJ2Fjb3VzdGljX2d1aXRhcl9ueWxvbicsXG4gIDI1OiAnYWNvdXN0aWNfZ3VpdGFyX3N0ZWVsJyxcbiAgMjY6ICdlbGVjdHJpY19ndWl0YXJfamF6eicsXG4gIDI3OiAnZWxlY3RyaWNfZ3VpdGFyX2NsZWFuJyxcbiAgMjg6ICdlbGVjdHJpY19ndWl0YXJfbXV0ZWQnLFxuICAyOTogJ292ZXJkcml2ZW5fZ3VpdGFyJyxcbiAgMzA6ICdkaXN0b3J0aW9uX2d1aXRhcicsXG4gIDMxOiAnZ3VpdGFyX2hhcm1vbmljcycsXG4gIDMyOiAnYWNvdXN0aWNfYmFzcycsXG4gIDMzOiAnZWxlY3RyaWNfYmFzc19maW5nZXInLFxuICAzNDogJ2VsZWN0cmljX2Jhc3NfcGljaycsXG4gIDM1OiAnZnJldGxlc3NfYmFzcycsXG4gIDM2OiAnc2xhcF9iYXNzXzEnLFxuICAzNzogJ3NsYXBfYmFzc18yJyxcbiAgMzg6ICdzeW50aF9iYXNzXzEnLFxuICAzOTogJ3N5bnRoX2Jhc3NfMicsXG4gIDQwOiAndmlvbGluJyxcbiAgNDE6ICd2aW9sYScsXG4gIDQyOiAnY2VsbG8nLFxuICA0MzogJ2NvbnRyYWJhc3MnLFxuICA0NDogJ3RyZW1vbG9fc3RyaW5ncycsXG4gIDQ1OiAncGl6emljYXRvX3N0cmluZ3MnLFxuICA0NjogJ29yY2hlc3RyYWxfaGFycCcsXG4gIDQ3OiAndGltcGFuaScsXG4gIDQ4OiAnc3RyaW5nX2Vuc2VtYmxlXzEnLFxuICA0OTogJ3N0cmluZ19lbnNlbWJsZV8yJyxcbiAgNTA6ICdzeW50aHN0cmluZ3NfMScsXG4gIDUxOiAnc3ludGhzdHJpbmdzXzInLFxuICA1MjogJ2Nob2lyX2FhaHMnLFxuICA1MzogJ3ZvaWNlX29vaHMnLFxuICA1NDogJ3N5bnRoX3ZvaWNlJyxcbiAgNTU6ICdvcmNoZXN0cmFfaGl0JyxcbiAgNTY6ICd0cnVtcGV0JyxcbiAgNTc6ICd0cm9tYm9uZScsXG4gIDU4OiAndHViYScsXG4gIDU5OiAnbXV0ZWRfdHJ1bXBldCcsXG4gIDYwOiAnZnJlbmNoX2hvcm4nLFxuICA2MTogJ2JyYXNzX3NlY3Rpb24nLFxuICA2MjogJ3N5bnRoX2JyYXNzXzEnLFxuICA2MzogJ3N5bnRoX2JyYXNzXzInLFxuICA2NDogJ3NvcHJhbm9fc2F4JyxcbiAgNjU6ICdhbHRvX3NheCcsXG4gIDY2OiAndGVub3Jfc2F4JyxcbiAgNjc6ICdiYXJpdG9uZV9zYXgnLFxuICA2ODogJ29ib2UnLFxuICA2OTogJ2VuZ2xpc2hfaG9ybicsXG4gIDcwOiAnYmFzc29vbicsXG4gIDcxOiAnY2xhcmluZXQnLFxuICA3MjogJ3BpY2NvbG8nLFxuICA3MzogJ2ZsdXRlJyxcbiAgNzQ6ICdyZWNvcmRlcicsXG4gIDc1OiAncGFuX2ZsdXRlJyxcbiAgNzY6ICdibG93bl9ib3R0bGUnLFxuICA3NzogJ3NoYWt1aGFjaGknLFxuICA3ODogJ3doaXN0bGUnLFxuICA3OTogJ29jYXJpbmEnLFxuICA4MDogJ2xlYWRfMV9zcXVhcmUnLFxuICA4MTogJ2xlYWRfMl9zYXd0b290aCcsXG4gIDgyOiAnbGVhZF8zX2NhbGxpb3BlJyxcbiAgODM6ICdsZWFkXzRfY2hpZmYnLFxuICA4NDogJ2xlYWRfNV9jaGFyYW5nJyxcbiAgODU6ICdsZWFkXzZfdm9pY2UnLFxuICA4NjogJ2xlYWRfN19maWZ0aHMnLFxuICA4NzogJ2xlYWRfOF9iYXNzX2xlYWQnLFxuICA4ODogJ3BhZF8xX25ld19hZ2UnLFxuICA4OTogJ3BhZF8yX3dhcm0nLFxuICA5MDogJ3BhZF8zX3BvbHlzeW50aCcsXG4gIDkxOiAncGFkXzRfY2hvaXInLFxuICA5MjogJ3BhZF81X2Jvd2VkJyxcbiAgOTM6ICdwYWRfNl9tZXRhbGxpYycsXG4gIDk0OiAncGFkXzdfaGFsbycsXG4gIDk1OiAncGFkXzhfc3dlZXAnLFxuICA5NjogJ2Z4XzFfcmFpbicsXG4gIDk3OiAnZnhfMl9zb3VuZHRyYWNrJyxcbiAgOTg6ICdmeF8zX2NyeXN0YWwnLFxuICA5OTogJ2Z4XzRfYXRtb3NwaGVyZScsXG4gIDEwMDogJ2Z4XzVfYnJpZ2h0bmVzcycsXG4gIDEwMTogJ2Z4XzZfZ29ibGlucycsXG4gIDEwMjogJ2Z4XzdfZWNob2VzJyxcbiAgMTAzOiAnZnhfOF9zY2lmaScsXG4gIDEwNDogJ3NpdGFyJyxcbiAgMTA1OiAnYmFuam8nLFxuICAxMDY6ICdzaGFtaXNlbicsXG4gIDEwNzogJ2tvdG8nLFxuICAxMDg6ICdrYWxpbWJhJyxcbiAgMTA5OiAnYmFnX3BpcGUnLFxuICAxMTA6ICdmaWRkbGUnLFxuICAxMTE6ICdzaGFuYWknLFxuICAxMTI6ICd0aW5rbGVfYmVsbCcsXG4gIDExMzogJ2Fnb2dvJyxcbiAgMTE0OiAnc3RlZWxfZHJ1bXMnLFxuICAxMTU6ICd3b29kYmxvY2snLFxuICAxMTY6ICd0YWlrb19kcnVtJyxcbiAgMTE3OiAnbWVsb2RpY190b20nLFxuICAxMTg6ICdzeW50aF9kcnVtJyxcbiAgMTE5OiAncmV2ZXJzZV9jeW1iYWwnLFxuICAxMjA6ICdndWl0YXJfZnJldF9ub2lzZScsXG4gIDEyMTogJ2JyZWF0aF9ub2lzZScsXG4gIDEyMjogJ3NlYXNob3JlJyxcbiAgMTIzOiAnYmlyZF90d2VldCcsXG4gIDEyNDogJ3RlbGVwaG9uZV9yaW5nJyxcbiAgMTI1OiAnaGVsaWNvcHRlcicsXG4gIDEyNjogJ2FwcGxhdXNlJyxcbiAgMTI3OiAnZ3Vuc2hvdCdcbn07XG4iLCJleHBvcnQgY29uc3QgTWlkaU1lc3NhZ2VzSGV4ID0gT2JqZWN0LmZyZWV6ZSh7XG4gIFNFUVVFTkNFX05VTUJFUjogMHgwMCxcbiAgVEVYVDogICAgICAgICAgICAweDAxLFxuICBJTlNUUlVNRU5UX05BTUU6IDB4MDQsXG4gIE5PVEVfT0ZGOiAgICAgICAgMHg4MCxcbiAgTk9URV9PTjogICAgICAgICAweDkwLFxuICBQUk9HUkFNX0NIQU5HRTogIDB4QzAsXG4gIENPTlRST0xMRVI6ICAgICAgMHhCMFxufSk7XG4iLCJleHBvcnQgY29uc3QgTWlkaU1lc3NhZ2VzID0gT2JqZWN0LmZyZWV6ZSh7XG4gIDB4MDA6ICdzZXF1ZW5jZU51bWJlcicsXG4gIDB4MDE6ICd0ZXh0JyxcbiAgMHgwNDogJ2luc3RydW1lbnROYW1lJyxcbiAgMHg4MDogJ25vdGVPZmYnLFxuICAweDkwOiAnbm90ZU9uJyxcbiAgMHhDMDogJ3Byb2dyYW1DaGFuZ2UnLFxuICAweEIwOiAnY29udHJvbGxlcicsXG59KTtcbiIsIi8qIFNvdW5kZm9uZCBMaWJyYXJ5OlxuXG4gIEJ5IEdsZWl0elxuICBodHRwczovL2dpdGh1Yi5jb20vZ2xlaXR6L21pZGktanMtc291bmRmb250cy90cmVlL2doLXBhZ2VzL0ZsdWlkUjNfR01cblxuKi9cblxuZXhwb3J0IGNvbnN0IEluc3RydW1lbnRTZXRzID0gT2JqZWN0LmZyZWV6ZSh7XG4gIE1VU1lOR19LSVRFOiAnTXVzeW5nS2l0ZScsXG4gIEZMVUlEX1IzX0dNOiAnRmx1aWRSM19HTSdcbn0pO1xuXG5leHBvcnQgY29uc3QgSW5zdHJ1bWVudFBhdGhDb25maWcgPSAoe1xuICBVUkw6ICdodHRwOi8vbG9jYWxob3N0JyxcbiAgUE9SVDogODAwMSxcbiAgU0VUOiBJbnN0cnVtZW50U2V0cy5NVVNZTkdfS0lURSxcbiAgVVJMX0dJVEhVQjogJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9nbGVpdHovbWlkaS1qcy1zb3VuZGZvbnRzL2doLXBhZ2VzLydcbn0pO1xuXG5leHBvcnQgY29uc3QgU09VTkRTX1BBVEggPVxuICBgJHtJbnN0cnVtZW50UGF0aENvbmZpZy5VUkx9OiR7SW5zdHJ1bWVudFBhdGhDb25maWcuUE9SVH0vJHtJbnN0cnVtZW50UGF0aENvbmZpZy5TRVR9YDtcblxuZXhwb3J0IGNvbnN0IFNPVU5EU19GSUxFVFlQRSA9ICdtcDMnO1xuZXhwb3J0IGNvbnN0IFNPVU5EU19GSUxFX0VYVEVOU0lPTiA9ICdqcyc7XG4iLCJpbXBvcnQgeyBjb21iaW5lUmVkdWNlcnMgfSBmcm9tICdyZWR1eCc7XG5cbmltcG9ydCBtaWRpIGZyb20gJy4uL3JlZHVjZXJzL21pZGktcmVkdWNlcic7XG5pbXBvcnQgc2V0dGluZ3MgZnJvbSAnLi4vcmVkdWNlcnMvc2V0dGluZ3MtcmVkdWNlcic7XG5cbmNvbnN0IHJvb3RSZWR1Y2VyID0gY29tYmluZVJlZHVjZXJzKHtcbiAgbWlkaSxcbiAgc2V0dGluZ3Ncbn0pO1xuXG5leHBvcnQgZGVmYXVsdCByb290UmVkdWNlcjtcbiIsImltcG9ydCBNSURJQWN0aW9uIGZyb20gJy4uL2FjdGlvbnMvbWlkaS1hY3Rpb25zLmpzJztcbmltcG9ydCBNSURJQ29ubmVjdCBmcm9tICcuLi9hY3Rpb25zL21pZGktY29ubmVjdC5qcyc7XG5cbmNvbnN0IGluaXRpYWxTdGF0ZSA9IHtcbiAgbWVzc2FnZTogJ05vbmUnLFxuICBpbnB1dHM6IFtdLFxuICBkYXRhOiBudWxsLFxuICBhdWRpb0NvbnRleHQ6ICEhd2luZG93LkF1ZGlvQ29udGV4dCA/IG5ldyB3aW5kb3cuQXVkaW9Db250ZXh0KCkgOiBuZXcgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCgpLFxuICBub3Rlczoge31cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1JRElFdmVudHNSZWR1Y2VyKHN0YXRlPWluaXRpYWxTdGF0ZSwgYWN0aW9uKSB7XG4gIGNvbnN0IHsgdHlwZSwgcGF5bG9hZCB9ID0gYWN0aW9uO1xuXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgTUlESUFjdGlvbi5OT1RFX09OOlxuICAgIGNhc2UgTUlESUFjdGlvbi5OT1RFX09GRjpcbiAgICBjYXNlIE1JRElBY3Rpb24uUFJPR1JBTV9DSEFOR0U6XG4gICAgY2FzZSBNSURJQWN0aW9uLklOU1RSVU1FTlRfTkFNRTpcbiAgICBjYXNlIE1JRElBY3Rpb24uQ09OVFJPTExFUjpcbiAgICBjYXNlIE1JRElBY3Rpb24uU1lTX0VYOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIC4uLnBheWxvYWRcbiAgICAgIH07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufVxuIiwiaW1wb3J0IE1JRElBY3Rpb24gZnJvbSAnLi4vYWN0aW9ucy9taWRpLWFjdGlvbnMuanMnO1xuaW1wb3J0IE1JRElDb25uZWN0IGZyb20gJy4uL2FjdGlvbnMvbWlkaS1jb25uZWN0LmpzJztcblxuY29uc3QgaW5pdGlhbFN0YXRlID0ge1xuICBtaWRpQWNjZXNzOiBudWxsLFxuICB3ZWJBcGlBdWRpbzogZmFsc2UsXG4gIGdhaW5Ob2RlOiBudWxsLFxuICBzb3VuZGZvbnRJbnN0cnVtZW50OiBudWxsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNSURJRXZlbnRzUmVkdWNlcihzdGF0ZT1pbml0aWFsU3RhdGUsIGFjdGlvbikge1xuICBjb25zdCB7IHR5cGUsIHBheWxvYWQgfSA9IGFjdGlvbjtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBNSURJQ29ubmVjdC5NSURJX1NVQ0NFU1M6XG4gICAgY2FzZSBNSURJQ29ubmVjdC5NSURJX0ZBSUxVUkU6XG4gICAgY2FzZSBNSURJQ29ubmVjdC5NSURJX0xPQURfSU5TVFJVTUVOVDpcbiAgICBjYXNlIE1JRElDb25uZWN0LkNIQU5HRV9BVURJTzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAuLi5wYXlsb2FkXG4gICAgICB9O1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZVN0b3JlLCBhcHBseU1pZGRsZXdhcmUsIGNvbXBvc2UgfSBmcm9tICdyZWR1eCc7XG5pbXBvcnQgdGh1bmtNaWRkbGV3YXJlIGZyb20gJ3JlZHV4LXRodW5rJztcbmltcG9ydCByb290UmVkdWNlciBmcm9tICcuLi9yZWR1Y2Vycy9pbmRleCc7XG5cbmNvbnN0IGNvbXBvc2VFbmhhbmNlcnMgPSB3aW5kb3cuX19SRURVWF9ERVZUT09MU19FWFRFTlNJT05fQ09NUE9TRV9fIHx8IGNvbXBvc2U7XG5jb25zdCBtaWRkbGV3YXJlID0gY29tcG9zZUVuaGFuY2VycyhhcHBseU1pZGRsZXdhcmUodGh1bmtNaWRkbGV3YXJlKSk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbmZpZ3VyZVN0b3JlKGluaXRpYWxTdGF0ZSkge1xuICByZXR1cm4gY3JlYXRlU3RvcmUoXG4gICAgcm9vdFJlZHVjZXIsXG4gICAgaW5pdGlhbFN0YXRlLFxuICAgIG1pZGRsZXdhcmVcbiAgKTtcbn1cbiIsImV4cG9ydCBjb25zdCBBdWRpb1V0aWxzID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGdldEZyZXF1ZW5jeShub3RlKSB7XG4gICAgY29uc3QgTEFfSFogID0gNDQwO1xuICAgIGNvbnN0IExBX0RFQyA9IDY5O1xuICAgIGNvbnN0IE9DVEFWRSA9IDEyO1xuXG4gICAgcmV0dXJuIExBX0haICogTWF0aC5wb3coMiwgKG5vdGUgLSBMQV9ERUMpIC8gT0NUQVZFKTtcbiAgfSxcblxuICBnZW5lcmF0ZU9zY2lsbGF0b3Iobm90ZSwgYXVkaW9Db250ZXh0KSB7XG4gICAgY29uc3QgZnJlcXVlbmN5ID0gdGhpcy5nZXRGcmVxdWVuY3kobm90ZSk7XG4gICAgbGV0IG9zY2lsbGF0b3IgPSBhdWRpb0NvbnRleHQuY3JlYXRlT3NjaWxsYXRvcigpO1xuXG4gICAgb3NjaWxsYXRvci50eXBlID0gJ3NxdWFyZSc7XG4gICAgb3NjaWxsYXRvci5jb25uZWN0KGF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgb3NjaWxsYXRvci5mcmVxdWVuY3kudmFsdWUgPSBmcmVxdWVuY3k7XG5cbiAgICByZXR1cm4gb3NjaWxsYXRvcjtcbiAgfVxufSk7XG4iLCIvKmpzbGludCBiaXR3aXNlOiB0cnVlICovXG5cbmltcG9ydCB7IE1pZGlNZXNzYWdlc0hleCB9IGZyb20gJy4uL2NvbnN0YW50cy9taWRpLW1lc3NhZ2VzLWhleCc7XG5cbmV4cG9ydCBjb25zdCBNaWRpVXRpbHMgPSBPYmplY3QuZnJlZXplKHtcbiAgZ2V0VHlwZShkYXRhKSB7XG4gICAgcmV0dXJuIGRhdGFbMF07XG4gIH0sXG5cbiAgZ2V0Tm90ZShkYXRhKSB7XG4gICAgcmV0dXJuIGRhdGFbMV07XG4gIH0sXG5cbiAgZ2V0Tm90ZVZlbG9jaXR5KGRhdGEpIHtcbiAgICByZXR1cm4gZGF0YVsyXTtcbiAgfSxcblxuICBnZXRFdmVudFR5cGUoZGF0YSkge1xuICAgIHJldHVybiB0aGlzLmlzTm90ZU9uT2ZmKGRhdGEpID9cbiAgICAgIE1pZGlNZXNzYWdlc0hleC5OT1RFX09GRiAmIDB4ZjBcbiAgICAgIDogdGhpcy5nZXRUeXBlKGRhdGEpICYgMHhmMDtcbiAgfSxcblxuICBpc05vdGVPbk9mZihkYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VHlwZShkYXRhKSA9PT0gTWlkaU1lc3NhZ2VzSGV4Lk5PVEVfT04gJiZcbiAgICAgIHRoaXMuZ2V0Tm90ZVZlbG9jaXR5KGRhdGEpID09PSAwO1xuICB9LFxuXG4gIHNldE5vdGVPbk1lc3NhZ2UodGFyZ2V0KSB7XG4gICAgY29uc3QgTk9URV9PTiA9IDE0NDtcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW05PVEVfT04sIGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbm90ZScpLCAxXSk7XG4gIH0sXG5cbiAgc2V0Tm90ZU9mZk1lc3NhZ2UodGFyZ2V0KSB7XG4gICAgY29uc3QgTk9URV9PTiA9IDE0NDtcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW05PVEVfT04sIGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbm90ZScpLCAwXSk7XG4gIH1cbn0pO1xuIl19\n"]}